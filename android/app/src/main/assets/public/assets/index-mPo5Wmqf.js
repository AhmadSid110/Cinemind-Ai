var J9=Object.defineProperty;var Z9=(t,e,n)=>e in t?J9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var lb=(t,e,n)=>Z9(t,typeof e!="symbol"?e+"":e,n);function eB(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Va(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var cb={exports:{}},id={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vI;function tB(){if(vI)return id;vI=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,s){var l=null;if(s!==void 0&&(l=""+s),i.key!==void 0&&(l=""+i.key),"key"in i){s={};for(var u in i)u!=="key"&&(s[u]=i[u])}else s=i;return i=s.ref,{$$typeof:t,type:r,key:l,ref:i!==void 0?i:null,props:s}}return id.Fragment=e,id.jsx=n,id.jsxs=n,id}var _I;function nB(){return _I||(_I=1,cb.exports=tB()),cb.exports}var A=nB(),ub={exports:{}},We={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bI;function rB(){if(bI)return We;bI=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),v=Symbol.iterator;function b(F){return F===null||typeof F!="object"?null:(F=v&&F[v]||F["@@iterator"],typeof F=="function"?F:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,S={};function P(F,X,re){this.props=F,this.context=X,this.refs=S,this.updater=re||E}P.prototype.isReactComponent={},P.prototype.setState=function(F,X){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,X,"setState")},P.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function M(){}M.prototype=P.prototype;function j(F,X,re){this.props=F,this.context=X,this.refs=S,this.updater=re||E}var $=j.prototype=new M;$.constructor=j,w($,P.prototype),$.isPureReactComponent=!0;var L=Array.isArray;function q(){}var I={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function N(F,X,re){var _e=re.ref;return{$$typeof:t,type:F,key:X,ref:_e!==void 0?_e:null,props:re}}function z(F,X){return N(F.type,X,F.props)}function k(F){return typeof F=="object"&&F!==null&&F.$$typeof===t}function B(F){var X={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(re){return X[re]})}var V=/\/+/g;function pe(F,X){return typeof F=="object"&&F!==null&&F.key!=null?B(""+F.key):X.toString(36)}function be(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(q,q):(F.status="pending",F.then(function(X){F.status==="pending"&&(F.status="fulfilled",F.value=X)},function(X){F.status==="pending"&&(F.status="rejected",F.reason=X)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function G(F,X,re,_e,Oe){var xe=typeof F;(xe==="undefined"||xe==="boolean")&&(F=null);var Pe=!1;if(F===null)Pe=!0;else switch(xe){case"bigint":case"string":case"number":Pe=!0;break;case"object":switch(F.$$typeof){case t:case e:Pe=!0;break;case m:return Pe=F._init,G(Pe(F._payload),X,re,_e,Oe)}}if(Pe)return Oe=Oe(F),Pe=_e===""?"."+pe(F,0):_e,L(Oe)?(re="",Pe!=null&&(re=Pe.replace(V,"$&/")+"/"),G(Oe,X,re,"",function(ze){return ze})):Oe!=null&&(k(Oe)&&(Oe=z(Oe,re+(Oe.key==null||F&&F.key===Oe.key?"":(""+Oe.key).replace(V,"$&/")+"/")+Pe)),X.push(Oe)),1;Pe=0;var yt=_e===""?".":_e+":";if(L(F))for(var se=0;se<F.length;se++)_e=F[se],xe=yt+pe(_e,se),Pe+=G(_e,X,re,xe,Oe);else if(se=b(F),typeof se=="function")for(F=se.call(F),se=0;!(_e=F.next()).done;)_e=_e.value,xe=yt+pe(_e,se++),Pe+=G(_e,X,re,xe,Oe);else if(xe==="object"){if(typeof F.then=="function")return G(be(F),X,re,_e,Oe);throw X=String(F),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return Pe}function ne(F,X,re){if(F==null)return F;var _e=[],Oe=0;return G(F,_e,"","",function(xe){return X.call(re,xe,Oe++)}),_e}function de(F){if(F._status===-1){var X=F._result;X=X(),X.then(function(re){(F._status===0||F._status===-1)&&(F._status=1,F._result=re)},function(re){(F._status===0||F._status===-1)&&(F._status=2,F._result=re)}),F._status===-1&&(F._status=0,F._result=X)}if(F._status===1)return F._result.default;throw F._result}var ge=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},Ee={map:ne,forEach:function(F,X,re){ne(F,function(){X.apply(this,arguments)},re)},count:function(F){var X=0;return ne(F,function(){X++}),X},toArray:function(F){return ne(F,function(X){return X})||[]},only:function(F){if(!k(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return We.Activity=p,We.Children=Ee,We.Component=P,We.Fragment=n,We.Profiler=i,We.PureComponent=j,We.StrictMode=r,We.Suspense=f,We.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,We.__COMPILER_RUNTIME={__proto__:null,c:function(F){return I.H.useMemoCache(F)}},We.cache=function(F){return function(){return F.apply(null,arguments)}},We.cacheSignal=function(){return null},We.cloneElement=function(F,X,re){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var _e=w({},F.props),Oe=F.key;if(X!=null)for(xe in X.key!==void 0&&(Oe=""+X.key),X)!R.call(X,xe)||xe==="key"||xe==="__self"||xe==="__source"||xe==="ref"&&X.ref===void 0||(_e[xe]=X[xe]);var xe=arguments.length-2;if(xe===1)_e.children=re;else if(1<xe){for(var Pe=Array(xe),yt=0;yt<xe;yt++)Pe[yt]=arguments[yt+2];_e.children=Pe}return N(F.type,Oe,_e)},We.createContext=function(F){return F={$$typeof:l,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:s,_context:F},F},We.createElement=function(F,X,re){var _e,Oe={},xe=null;if(X!=null)for(_e in X.key!==void 0&&(xe=""+X.key),X)R.call(X,_e)&&_e!=="key"&&_e!=="__self"&&_e!=="__source"&&(Oe[_e]=X[_e]);var Pe=arguments.length-2;if(Pe===1)Oe.children=re;else if(1<Pe){for(var yt=Array(Pe),se=0;se<Pe;se++)yt[se]=arguments[se+2];Oe.children=yt}if(F&&F.defaultProps)for(_e in Pe=F.defaultProps,Pe)Oe[_e]===void 0&&(Oe[_e]=Pe[_e]);return N(F,xe,Oe)},We.createRef=function(){return{current:null}},We.forwardRef=function(F){return{$$typeof:u,render:F}},We.isValidElement=k,We.lazy=function(F){return{$$typeof:m,_payload:{_status:-1,_result:F},_init:de}},We.memo=function(F,X){return{$$typeof:h,type:F,compare:X===void 0?null:X}},We.startTransition=function(F){var X=I.T,re={};I.T=re;try{var _e=F(),Oe=I.S;Oe!==null&&Oe(re,_e),typeof _e=="object"&&_e!==null&&typeof _e.then=="function"&&_e.then(q,ge)}catch(xe){ge(xe)}finally{X!==null&&re.types!==null&&(X.types=re.types),I.T=X}},We.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},We.use=function(F){return I.H.use(F)},We.useActionState=function(F,X,re){return I.H.useActionState(F,X,re)},We.useCallback=function(F,X){return I.H.useCallback(F,X)},We.useContext=function(F){return I.H.useContext(F)},We.useDebugValue=function(){},We.useDeferredValue=function(F,X){return I.H.useDeferredValue(F,X)},We.useEffect=function(F,X){return I.H.useEffect(F,X)},We.useEffectEvent=function(F){return I.H.useEffectEvent(F)},We.useId=function(){return I.H.useId()},We.useImperativeHandle=function(F,X,re){return I.H.useImperativeHandle(F,X,re)},We.useInsertionEffect=function(F,X){return I.H.useInsertionEffect(F,X)},We.useLayoutEffect=function(F,X){return I.H.useLayoutEffect(F,X)},We.useMemo=function(F,X){return I.H.useMemo(F,X)},We.useOptimistic=function(F,X){return I.H.useOptimistic(F,X)},We.useReducer=function(F,X,re){return I.H.useReducer(F,X,re)},We.useRef=function(F){return I.H.useRef(F)},We.useState=function(F){return I.H.useState(F)},We.useSyncExternalStore=function(F,X,re){return I.H.useSyncExternalStore(F,X,re)},We.useTransition=function(){return I.H.useTransition()},We.version="19.2.1",We}var wI;function Uu(){return wI||(wI=1,ub.exports=rB()),ub.exports}var C=Uu();const lD=Va(C),iB=eB({__proto__:null,default:lD},[C]);var fb={exports:{}},ad={},db={exports:{}},hb={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xI;function aB(){return xI||(xI=1,(function(t){function e(G,ne){var de=G.length;G.push(ne);e:for(;0<de;){var ge=de-1>>>1,Ee=G[ge];if(0<i(Ee,ne))G[ge]=ne,G[de]=Ee,de=ge;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var ne=G[0],de=G.pop();if(de!==ne){G[0]=de;e:for(var ge=0,Ee=G.length,F=Ee>>>1;ge<F;){var X=2*(ge+1)-1,re=G[X],_e=X+1,Oe=G[_e];if(0>i(re,de))_e<Ee&&0>i(Oe,re)?(G[ge]=Oe,G[_e]=de,ge=_e):(G[ge]=re,G[X]=de,ge=X);else if(_e<Ee&&0>i(Oe,de))G[ge]=Oe,G[_e]=de,ge=_e;else break e}}return ne}function i(G,ne){var de=G.sortIndex-ne.sortIndex;return de!==0?de:G.id-ne.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var f=[],h=[],m=1,p=null,v=3,b=!1,E=!1,w=!1,S=!1,P=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;function $(G){for(var ne=n(h);ne!==null;){if(ne.callback===null)r(h);else if(ne.startTime<=G)r(h),ne.sortIndex=ne.expirationTime,e(f,ne);else break;ne=n(h)}}function L(G){if(w=!1,$(G),!E)if(n(f)!==null)E=!0,q||(q=!0,B());else{var ne=n(h);ne!==null&&be(L,ne.startTime-G)}}var q=!1,I=-1,R=5,N=-1;function z(){return S?!0:!(t.unstable_now()-N<R)}function k(){if(S=!1,q){var G=t.unstable_now();N=G;var ne=!0;try{e:{E=!1,w&&(w=!1,M(I),I=-1),b=!0;var de=v;try{t:{for($(G),p=n(f);p!==null&&!(p.expirationTime>G&&z());){var ge=p.callback;if(typeof ge=="function"){p.callback=null,v=p.priorityLevel;var Ee=ge(p.expirationTime<=G);if(G=t.unstable_now(),typeof Ee=="function"){p.callback=Ee,$(G),ne=!0;break t}p===n(f)&&r(f),$(G)}else r(f);p=n(f)}if(p!==null)ne=!0;else{var F=n(h);F!==null&&be(L,F.startTime-G),ne=!1}}break e}finally{p=null,v=de,b=!1}ne=void 0}}finally{ne?B():q=!1}}}var B;if(typeof j=="function")B=function(){j(k)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,pe=V.port2;V.port1.onmessage=k,B=function(){pe.postMessage(null)}}else B=function(){P(k,0)};function be(G,ne){I=P(function(){G(t.unstable_now())},ne)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_next=function(G){switch(v){case 1:case 2:case 3:var ne=3;break;default:ne=v}var de=v;v=ne;try{return G()}finally{v=de}},t.unstable_requestPaint=function(){S=!0},t.unstable_runWithPriority=function(G,ne){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var de=v;v=G;try{return ne()}finally{v=de}},t.unstable_scheduleCallback=function(G,ne,de){var ge=t.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?ge+de:ge):de=ge,G){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=de+Ee,G={id:m++,callback:ne,priorityLevel:G,startTime:de,expirationTime:Ee,sortIndex:-1},de>ge?(G.sortIndex=de,e(h,G),n(f)===null&&G===n(h)&&(w?(M(I),I=-1):w=!0,be(L,de-ge))):(G.sortIndex=Ee,e(f,G),E||b||(E=!0,q||(q=!0,B()))),G},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(G){var ne=v;return function(){var de=v;v=ne;try{return G.apply(this,arguments)}finally{v=de}}}})(hb)),hb}var EI;function sB(){return EI||(EI=1,db.exports=aB()),db.exports}var mb={exports:{}},or={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SI;function oB(){if(SI)return or;SI=1;var t=Uu();function e(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(f,h,m){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:f,containerInfo:h,implementation:m}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return or.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,or.createPortal=function(f,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return s(f,h,null,m)},or.flushSync=function(f){var h=l.T,m=r.p;try{if(l.T=null,r.p=2,f)return f()}finally{l.T=h,r.p=m,r.d.f()}},or.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(f,h))},or.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},or.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var m=h.as,p=u(m,h.crossOrigin),v=typeof h.integrity=="string"?h.integrity:void 0,b=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;m==="style"?r.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:p,integrity:v,fetchPriority:b}):m==="script"&&r.d.X(f,{crossOrigin:p,integrity:v,fetchPriority:b,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},or.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var m=u(h.as,h.crossOrigin);r.d.M(f,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(f)},or.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var m=h.as,p=u(m,h.crossOrigin);r.d.L(f,m,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},or.preloadModule=function(f,h){if(typeof f=="string")if(h){var m=u(h.as,h.crossOrigin);r.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(f)},or.requestFormReset=function(f){r.d.r(f)},or.unstable_batchedUpdates=function(f,h){return f(h)},or.useFormState=function(f,h,m){return l.H.useFormState(f,h,m)},or.useFormStatus=function(){return l.H.useHostTransitionStatus()},or.version="19.2.1",or}var AI;function cD(){if(AI)return mb.exports;AI=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),mb.exports=oB(),mb.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TI;function lB(){if(TI)return ad;TI=1;var t=sB(),e=Uu(),n=cD();function r(a){var o="https://react.dev/errors/"+a;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+a+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function s(a){var o=a,c=a;if(a.alternate)for(;o.return;)o=o.return;else{a=o;do o=a,(o.flags&4098)!==0&&(c=o.return),a=o.return;while(a)}return o.tag===3?c:null}function l(a){if(a.tag===13){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function u(a){if(a.tag===31){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function f(a){if(s(a)!==a)throw Error(r(188))}function h(a){var o=a.alternate;if(!o){if(o=s(a),o===null)throw Error(r(188));return o!==a?null:a}for(var c=a,d=o;;){var y=c.return;if(y===null)break;var _=y.alternate;if(_===null){if(d=y.return,d!==null){c=d;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===c)return f(y),a;if(_===d)return f(y),o;_=_.sibling}throw Error(r(188))}if(c.return!==d.return)c=y,d=_;else{for(var T=!1,D=y.child;D;){if(D===c){T=!0,c=y,d=_;break}if(D===d){T=!0,d=y,c=_;break}D=D.sibling}if(!T){for(D=_.child;D;){if(D===c){T=!0,c=_,d=y;break}if(D===d){T=!0,d=_,c=y;break}D=D.sibling}if(!T)throw Error(r(189))}}if(c.alternate!==d)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?a:o}function m(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a;for(a=a.child;a!==null;){if(o=m(a),o!==null)return o;a=a.sibling}return null}var p=Object.assign,v=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),M=Symbol.for("react.consumer"),j=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function B(a){return a===null||typeof a!="object"?null:(a=k&&a[k]||a["@@iterator"],typeof a=="function"?a:null)}var V=Symbol.for("react.client.reference");function pe(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===V?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case w:return"Fragment";case P:return"Profiler";case S:return"StrictMode";case L:return"Suspense";case q:return"SuspenseList";case N:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case E:return"Portal";case j:return a.displayName||"Context";case M:return(a._context.displayName||"Context")+".Consumer";case $:var o=a.render;return a=a.displayName,a||(a=o.displayName||o.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case I:return o=a.displayName||null,o!==null?o:pe(a.type)||"Memo";case R:o=a._payload,a=a._init;try{return pe(a(o))}catch{}}return null}var be=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de={pending:!1,data:null,method:null,action:null},ge=[],Ee=-1;function F(a){return{current:a}}function X(a){0>Ee||(a.current=ge[Ee],ge[Ee]=null,Ee--)}function re(a,o){Ee++,ge[Ee]=a.current,a.current=o}var _e=F(null),Oe=F(null),xe=F(null),Pe=F(null);function yt(a,o){switch(re(xe,o),re(Oe,a),re(_e,null),o.nodeType){case 9:case 11:a=(a=o.documentElement)&&(a=a.namespaceURI)?BO(a):0;break;default:if(a=o.tagName,o=o.namespaceURI)o=BO(o),a=$O(o,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}X(_e),re(_e,a)}function se(){X(_e),X(Oe),X(xe)}function ze(a){a.memoizedState!==null&&re(Pe,a);var o=_e.current,c=$O(o,a.type);o!==c&&(re(Oe,a),re(_e,c))}function fe(a){Oe.current===a&&(X(_e),X(Oe)),Pe.current===a&&(X(Pe),ed._currentValue=de)}var le,rt;function je(a){if(le===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);le=o&&o[1]||"",rt=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+le+a+rt}var Ct=!1;function Dt(a,o){if(!a||Ct)return"";Ct=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(o){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(ie){var ee=ie}Reflect.construct(a,[],he)}else{try{he.call()}catch(ie){ee=ie}a.call(he.prototype)}}else{try{throw Error()}catch(ie){ee=ie}(he=a())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(ie){if(ie&&ee&&typeof ie.stack=="string")return[ie.stack,ee.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=d.DetermineComponentFrameRoot(),T=_[0],D=_[1];if(T&&D){var H=T.split(`
`),J=D.split(`
`);for(y=d=0;d<H.length&&!H[d].includes("DetermineComponentFrameRoot");)d++;for(;y<J.length&&!J[y].includes("DetermineComponentFrameRoot");)y++;if(d===H.length||y===J.length)for(d=H.length-1,y=J.length-1;1<=d&&0<=y&&H[d]!==J[y];)y--;for(;1<=d&&0<=y;d--,y--)if(H[d]!==J[y]){if(d!==1||y!==1)do if(d--,y--,0>y||H[d]!==J[y]){var oe=`
`+H[d].replace(" at new "," at ");return a.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",a.displayName)),oe}while(1<=d&&0<=y);break}}}finally{Ct=!1,Error.prepareStackTrace=c}return(c=a?a.displayName||a.name:"")?je(c):""}function Lt(a,o){switch(a.tag){case 26:case 27:case 5:return je(a.type);case 16:return je("Lazy");case 13:return a.child!==o&&o!==null?je("Suspense Fallback"):je("Suspense");case 19:return je("SuspenseList");case 0:case 15:return Dt(a.type,!1);case 11:return Dt(a.type.render,!1);case 1:return Dt(a.type,!0);case 31:return je("Activity");default:return""}}function Zi(a){try{var o="",c=null;do o+=Lt(a,c),c=a,a=a.return;while(a);return o}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var Qt=Object.prototype.hasOwnProperty,en=t.unstable_scheduleCallback,ea=t.unstable_cancelCallback,lc=t.unstable_shouldYield,Wo=t.unstable_requestPaint,ce=t.unstable_now,Ie=t.unstable_getCurrentPriorityLevel,Re=t.unstable_ImmediatePriority,Ke=t.unstable_UserBlockingPriority,$e=t.unstable_NormalPriority,ht=t.unstable_LowPriority,tn=t.unstable_IdlePriority,ut=t.log,wt=t.unstable_setDisableYieldValue,qt=null,Sn=null;function Ar(a){if(typeof ut=="function"&&wt(a),Sn&&typeof Sn.setStrictMode=="function")try{Sn.setStrictMode(qt,a)}catch{}}var Yt=Math.clz32?Math.clz32:rm,cc=Math.log,uc=Math.LN2;function rm(a){return a>>>=0,a===0?32:31-(cc(a)/uc|0)|0}var ta=256,Xo=262144,un=4194304;function na(a){var o=a&42;if(o!==0)return o;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function ra(a,o,c){var d=a.pendingLanes;if(d===0)return 0;var y=0,_=a.suspendedLanes,T=a.pingedLanes;a=a.warmLanes;var D=d&134217727;return D!==0?(d=D&~_,d!==0?y=na(d):(T&=D,T!==0?y=na(T):c||(c=D&~a,c!==0&&(y=na(c))))):(D=d&~_,D!==0?y=na(D):T!==0?y=na(T):c||(c=d&~a,c!==0&&(y=na(c)))),y===0?0:o!==0&&o!==y&&(o&_)===0&&(_=y&-y,c=o&-o,_>=c||_===32&&(c&4194048)!==0)?o:y}function Ri(a,o){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&o)===0}function d0(a,o){switch(a){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function im(){var a=un;return un<<=1,(un&62914560)===0&&(un=4194304),a}function ia(a){for(var o=[],c=0;31>c;c++)o.push(a);return o}function Qo(a,o){a.pendingLanes|=o,o!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function h0(a,o,c,d,y,_){var T=a.pendingLanes;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=c,a.entangledLanes&=c,a.errorRecoveryDisabledLanes&=c,a.shellSuspendCounter=0;var D=a.entanglements,H=a.expirationTimes,J=a.hiddenUpdates;for(c=T&~c;0<c;){var oe=31-Yt(c),he=1<<oe;D[oe]=0,H[oe]=-1;var ee=J[oe];if(ee!==null)for(J[oe]=null,oe=0;oe<ee.length;oe++){var ie=ee[oe];ie!==null&&(ie.lane&=-536870913)}c&=~he}d!==0&&Jo(a,d,0),_!==0&&y===0&&a.tag!==0&&(a.suspendedLanes|=_&~(T&~o))}function Jo(a,o,c){a.pendingLanes|=o,a.suspendedLanes&=~o;var d=31-Yt(o);a.entangledLanes|=o,a.entanglements[d]=a.entanglements[d]|1073741824|c&261930}function af(a,o){var c=a.entangledLanes|=o;for(a=a.entanglements;c;){var d=31-Yt(c),y=1<<d;y&o|a[d]&o&&(a[d]|=o),c&=~y}}function sf(a,o){var c=o&-o;return c=(c&42)!==0?1:Zo(c),(c&(a.suspendedLanes|o))!==0?0:c}function Zo(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function Ua(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function am(){var a=ne.p;return a!==0?a:(a=window.event,a===void 0?32:fI(a.type))}function Ni(a,o){var c=ne.p;try{return ne.p=a,o()}finally{ne.p=c}}var Pi=Math.random().toString(36).slice(2),fn="__reactFiber$"+Pi,Dn="__reactProps$"+Pi,aa="__reactContainer$"+Pi,fc="__reactEvents$"+Pi,m0="__reactListeners$"+Pi,sm="__reactHandles$"+Pi,om="__reactResources$"+Pi,sa="__reactMarker$"+Pi;function dc(a){delete a[fn],delete a[Dn],delete a[fc],delete a[m0],delete a[sm]}function oa(a){var o=a[fn];if(o)return o;for(var c=a.parentNode;c;){if(o=c[aa]||c[fn]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(a=WO(a);a!==null;){if(c=a[fn])return c;a=WO(a)}return o}a=c,c=a.parentNode}return null}function si(a){if(a=a[fn]||a[aa]){var o=a.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return a}return null}function zr(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a.stateNode;throw Error(r(33))}function la(a){var o=a[om];return o||(o=a[om]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function dn(a){a[sa]=!0}var of=new Set,lf={};function ca(a,o){ua(a,o),ua(a+"Capture",o)}function ua(a,o){for(lf[a]=o,a=0;a<o.length;a++)of.add(o[a])}var cf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),uf={},ff={};function lm(a){return Qt.call(ff,a)?!0:Qt.call(uf,a)?!1:cf.test(a)?ff[a]=!0:(uf[a]=!0,!1)}function hc(a,o,c){if(lm(o))if(c===null)a.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":a.removeAttribute(o);return;case"boolean":var d=o.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){a.removeAttribute(o);return}}a.setAttribute(o,""+c)}}function Br(a,o,c){if(c===null)a.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(o);return}a.setAttribute(o,""+c)}}function hn(a,o,c,d){if(d===null)a.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(c);return}a.setAttributeNS(o,c,""+d)}}function jn(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function $s(a){var o=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function df(a,o,c){var d=Object.getOwnPropertyDescriptor(a.constructor.prototype,o);if(!a.hasOwnProperty(o)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var y=d.get,_=d.set;return Object.defineProperty(a,o,{configurable:!0,get:function(){return y.call(this)},set:function(T){c=""+T,_.call(this,T)}}),Object.defineProperty(a,o,{enumerable:d.enumerable}),{getValue:function(){return c},setValue:function(T){c=""+T},stopTracking:function(){a._valueTracker=null,delete a[o]}}}}function xt(a){if(!a._valueTracker){var o=$s(a)?"checked":"value";a._valueTracker=df(a,o,""+a[o])}}function el(a){if(!a)return!1;var o=a._valueTracker;if(!o)return!0;var c=o.getValue(),d="";return a&&(d=$s(a)?a.checked?"true":"false":a.value),a=d,a!==c?(o.setValue(a),!0):!1}function fa(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var tl=/[\n"\\]/g;function Tr(a){return a.replace(tl,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function mc(a,o,c,d,y,_,T,D){a.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?a.type=T:a.removeAttribute("type"),o!=null?T==="number"?(o===0&&a.value===""||a.value!=o)&&(a.value=""+jn(o)):a.value!==""+jn(o)&&(a.value=""+jn(o)):T!=="submit"&&T!=="reset"||a.removeAttribute("value"),o!=null?hf(a,T,jn(o)):c!=null?hf(a,T,jn(c)):d!=null&&a.removeAttribute("value"),y==null&&_!=null&&(a.defaultChecked=!!_),y!=null&&(a.checked=y&&typeof y!="function"&&typeof y!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?a.name=""+jn(D):a.removeAttribute("name")}function cm(a,o,c,d,y,_,T,D){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(a.type=_),o!=null||c!=null){if(!(_!=="submit"&&_!=="reset"||o!=null)){xt(a);return}c=c!=null?""+jn(c):"",o=o!=null?""+jn(o):c,D||o===a.value||(a.value=o),a.defaultValue=o}d=d??y,d=typeof d!="function"&&typeof d!="symbol"&&!!d,a.checked=D?a.checked:!!d,a.defaultChecked=!!d,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(a.name=T),xt(a)}function hf(a,o,c){o==="number"&&fa(a.ownerDocument)===a||a.defaultValue===""+c||(a.defaultValue=""+c)}function qs(a,o,c,d){if(a=a.options,o){o={};for(var y=0;y<c.length;y++)o["$"+c[y]]=!0;for(c=0;c<a.length;c++)y=o.hasOwnProperty("$"+a[c].value),a[c].selected!==y&&(a[c].selected=y),y&&d&&(a[c].defaultSelected=!0)}else{for(c=""+jn(c),o=null,y=0;y<a.length;y++){if(a[y].value===c){a[y].selected=!0,d&&(a[y].defaultSelected=!0);return}o!==null||a[y].disabled||(o=a[y])}o!==null&&(o.selected=!0)}}function um(a,o,c){if(o!=null&&(o=""+jn(o),o!==a.value&&(a.value=o),c==null)){a.defaultValue!==o&&(a.defaultValue=o);return}a.defaultValue=c!=null?""+jn(c):""}function Fs(a,o,c,d){if(o==null){if(d!=null){if(c!=null)throw Error(r(92));if(be(d)){if(1<d.length)throw Error(r(93));d=d[0]}c=d}c==null&&(c=""),o=c}c=jn(o),a.defaultValue=c,d=a.textContent,d===c&&d!==""&&d!==null&&(a.value=d),xt(a)}function Cr(a,o){if(o){var c=a.firstChild;if(c&&c===a.lastChild&&c.nodeType===3){c.nodeValue=o;return}}a.textContent=o}var fm=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function mf(a,o,c){var d=o.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?a.setProperty(o,""):o==="float"?a.cssFloat="":a[o]="":d?a.setProperty(o,c):typeof c!="number"||c===0||fm.has(o)?o==="float"?a.cssFloat=c:a[o]=(""+c).trim():a[o]=c+"px"}function pf(a,o,c){if(o!=null&&typeof o!="object")throw Error(r(62));if(a=a.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||o!=null&&o.hasOwnProperty(d)||(d.indexOf("--")===0?a.setProperty(d,""):d==="float"?a.cssFloat="":a[d]="");for(var y in o)d=o[y],o.hasOwnProperty(y)&&c[y]!==d&&mf(a,y,d)}else for(var _ in o)o.hasOwnProperty(_)&&mf(a,_,o[_])}function pc(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dm=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Hs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function gc(a){return Hs.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function Mi(){}var gf=null;function oi(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Gs=null,da=null;function nl(a){var o=si(a);if(o&&(a=o.stateNode)){var c=a[Dn]||null;e:switch(a=o.stateNode,o.type){case"input":if(mc(a,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),o=c.name,c.type==="radio"&&o!=null){for(c=a;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Tr(""+o)+'"][type="radio"]'),o=0;o<c.length;o++){var d=c[o];if(d!==a&&d.form===a.form){var y=d[Dn]||null;if(!y)throw Error(r(90));mc(d,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(o=0;o<c.length;o++)d=c[o],d.form===a.form&&el(d)}break e;case"textarea":um(a,c.value,c.defaultValue);break e;case"select":o=c.value,o!=null&&qs(a,!!c.multiple,o,!1)}}}var yc=!1;function Ks(a,o,c){if(yc)return a(o,c);yc=!0;try{var d=a(o);return d}finally{if(yc=!1,(Gs!==null||da!==null)&&(ap(),Gs&&(o=Gs,a=da,da=Gs=null,nl(o),a)))for(o=0;o<a.length;o++)nl(a[o])}}function ki(a,o){var c=a.stateNode;if(c===null)return null;var d=c[Dn]||null;if(d===null)return null;c=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(a=a.type,d=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!d;break e;default:a=!1}if(a)return null;if(c&&typeof c!="function")throw Error(r(231,o,typeof c));return c}var li=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rl=!1;if(li)try{var Ot={};Object.defineProperty(Ot,"passive",{get:function(){rl=!0}}),window.addEventListener("test",Ot,Ot),window.removeEventListener("test",Ot,Ot)}catch{rl=!1}var ha=null,yf=null,il=null;function vf(){if(il)return il;var a,o=yf,c=o.length,d,y="value"in ha?ha.value:ha.textContent,_=y.length;for(a=0;a<c&&o[a]===y[a];a++);var T=c-a;for(d=1;d<=T&&o[c-d]===y[_-d];d++);return il=y.slice(a,1<d?1-d:void 0)}function al(a){var o=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&o===13&&(a=13)):a=o,a===10&&(a=13),32<=a||a===13?a:0}function za(){return!0}function Di(){return!1}function Kn(a){function o(c,d,y,_,T){this._reactName=c,this._targetInst=y,this.type=d,this.nativeEvent=_,this.target=T,this.currentTarget=null;for(var D in a)a.hasOwnProperty(D)&&(c=a[D],this[D]=c?c(_):_[D]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?za:Di,this.isPropagationStopped=Di,this}return p(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=za)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=za)},persist:function(){},isPersistent:za}),o}var Ba={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ma=Kn(Ba),Ys=p({},Ba,{view:0,detail:0}),_f=Kn(Ys),Ws,vc,pa,_c=p({},Ys,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xs,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==pa&&(pa&&a.type==="mousemove"?(Ws=a.screenX-pa.screenX,vc=a.screenY-pa.screenY):vc=Ws=0,pa=a),Ws)},movementY:function(a){return"movementY"in a?a.movementY:vc}}),bf=Kn(_c),sl=p({},_c,{dataTransfer:0}),hm=Kn(sl),mm=p({},Ys,{relatedTarget:0}),ol=Kn(mm),wf=p({},Ba,{animationName:0,elapsedTime:0,pseudoElement:0}),pm=Kn(wf),bc=p({},Ba,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),gm=Kn(bc),ym=p({},Ba,{data:0}),ga=Kn(ym),vm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_m={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wm(a){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(a):(a=bm[a])?!!o[a]:!1}function Xs(){return wm}var yr=p({},Ys,{key:function(a){if(a.key){var o=vm[a.key]||a.key;if(o!=="Unidentified")return o}return a.type==="keypress"?(a=al(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?_m[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xs,charCode:function(a){return a.type==="keypress"?al(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?al(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),xm=Kn(yr),Em=p({},_c,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$a=Kn(Em),g=p({},Ys,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xs}),x=Kn(g),O=p({},Ba,{propertyName:0,elapsedTime:0,pseudoElement:0}),U=Kn(O),W=p({},_c,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),te=Kn(W),we=p({},Ba,{newState:0,oldState:0}),Qe=Kn(we),nn=[9,13,27,32],vt=li&&"CompositionEvent"in window,Ft=null;li&&"documentMode"in document&&(Ft=document.documentMode);var ci=li&&"TextEvent"in window&&!Ft,ya=li&&(!vt||Ft&&8<Ft&&11>=Ft),ji=" ",Li=!1;function ll(a,o){switch(a){case"keyup":return nn.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wc(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var xc=!1;function xz(a,o){switch(a){case"compositionend":return wc(o);case"keypress":return o.which!==32?null:(Li=!0,ji);case"textInput":return a=o.data,a===ji&&Li?null:a;default:return null}}function Ez(a,o){if(xc)return a==="compositionend"||!vt&&ll(a,o)?(a=vf(),il=yf=ha=null,xc=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return ya&&o.locale!=="ko"?null:o.data;default:return null}}var Sz={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function JA(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o==="input"?!!Sz[a.type]:o==="textarea"}function ZA(a,o,c,d){Gs?da?da.push(d):da=[d]:Gs=d,o=dp(o,"onChange"),0<o.length&&(c=new ma("onChange","change",null,c,d),a.push({event:c,listeners:o}))}var xf=null,Ef=null;function Az(a){DO(a,0)}function Sm(a){var o=zr(a);if(el(o))return a}function eT(a,o){if(a==="change")return o}var tT=!1;if(li){var p0;if(li){var g0="oninput"in document;if(!g0){var nT=document.createElement("div");nT.setAttribute("oninput","return;"),g0=typeof nT.oninput=="function"}p0=g0}else p0=!1;tT=p0&&(!document.documentMode||9<document.documentMode)}function rT(){xf&&(xf.detachEvent("onpropertychange",iT),Ef=xf=null)}function iT(a){if(a.propertyName==="value"&&Sm(Ef)){var o=[];ZA(o,Ef,a,oi(a)),Ks(Az,o)}}function Tz(a,o,c){a==="focusin"?(rT(),xf=o,Ef=c,xf.attachEvent("onpropertychange",iT)):a==="focusout"&&rT()}function Cz(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Sm(Ef)}function Oz(a,o){if(a==="click")return Sm(o)}function Iz(a,o){if(a==="input"||a==="change")return Sm(o)}function Rz(a,o){return a===o&&(a!==0||1/a===1/o)||a!==a&&o!==o}var $r=typeof Object.is=="function"?Object.is:Rz;function Sf(a,o){if($r(a,o))return!0;if(typeof a!="object"||a===null||typeof o!="object"||o===null)return!1;var c=Object.keys(a),d=Object.keys(o);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var y=c[d];if(!Qt.call(o,y)||!$r(a[y],o[y]))return!1}return!0}function aT(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function sT(a,o){var c=aT(a);a=0;for(var d;c;){if(c.nodeType===3){if(d=a+c.textContent.length,a<=o&&d>=o)return{node:c,offset:o-a};a=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=aT(c)}}function oT(a,o){return a&&o?a===o?!0:a&&a.nodeType===3?!1:o&&o.nodeType===3?oT(a,o.parentNode):"contains"in a?a.contains(o):a.compareDocumentPosition?!!(a.compareDocumentPosition(o)&16):!1:!1}function lT(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var o=fa(a.document);o instanceof a.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)a=o.contentWindow;else break;o=fa(a.document)}return o}function y0(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o&&(o==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||o==="textarea"||a.contentEditable==="true")}var Nz=li&&"documentMode"in document&&11>=document.documentMode,Ec=null,v0=null,Af=null,_0=!1;function cT(a,o,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;_0||Ec==null||Ec!==fa(d)||(d=Ec,"selectionStart"in d&&y0(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Af&&Sf(Af,d)||(Af=d,d=dp(v0,"onSelect"),0<d.length&&(o=new ma("onSelect","select",null,o,c),a.push({event:o,listeners:d}),o.target=Ec)))}function cl(a,o){var c={};return c[a.toLowerCase()]=o.toLowerCase(),c["Webkit"+a]="webkit"+o,c["Moz"+a]="moz"+o,c}var Sc={animationend:cl("Animation","AnimationEnd"),animationiteration:cl("Animation","AnimationIteration"),animationstart:cl("Animation","AnimationStart"),transitionrun:cl("Transition","TransitionRun"),transitionstart:cl("Transition","TransitionStart"),transitioncancel:cl("Transition","TransitionCancel"),transitionend:cl("Transition","TransitionEnd")},b0={},uT={};li&&(uT=document.createElement("div").style,"AnimationEvent"in window||(delete Sc.animationend.animation,delete Sc.animationiteration.animation,delete Sc.animationstart.animation),"TransitionEvent"in window||delete Sc.transitionend.transition);function ul(a){if(b0[a])return b0[a];if(!Sc[a])return a;var o=Sc[a],c;for(c in o)if(o.hasOwnProperty(c)&&c in uT)return b0[a]=o[c];return a}var fT=ul("animationend"),dT=ul("animationiteration"),hT=ul("animationstart"),Pz=ul("transitionrun"),Mz=ul("transitionstart"),kz=ul("transitioncancel"),mT=ul("transitionend"),pT=new Map,w0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");w0.push("scrollEnd");function Vi(a,o){pT.set(a,o),ca(o,[a])}var Am=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},ui=[],Ac=0,x0=0;function Tm(){for(var a=Ac,o=x0=Ac=0;o<a;){var c=ui[o];ui[o++]=null;var d=ui[o];ui[o++]=null;var y=ui[o];ui[o++]=null;var _=ui[o];if(ui[o++]=null,d!==null&&y!==null){var T=d.pending;T===null?y.next=y:(y.next=T.next,T.next=y),d.pending=y}_!==0&&gT(c,y,_)}}function Cm(a,o,c,d){ui[Ac++]=a,ui[Ac++]=o,ui[Ac++]=c,ui[Ac++]=d,x0|=d,a.lanes|=d,a=a.alternate,a!==null&&(a.lanes|=d)}function E0(a,o,c,d){return Cm(a,o,c,d),Om(a)}function fl(a,o){return Cm(a,null,null,o),Om(a)}function gT(a,o,c){a.lanes|=c;var d=a.alternate;d!==null&&(d.lanes|=c);for(var y=!1,_=a.return;_!==null;)_.childLanes|=c,d=_.alternate,d!==null&&(d.childLanes|=c),_.tag===22&&(a=_.stateNode,a===null||a._visibility&1||(y=!0)),a=_,_=_.return;return a.tag===3?(_=a.stateNode,y&&o!==null&&(y=31-Yt(c),a=_.hiddenUpdates,d=a[y],d===null?a[y]=[o]:d.push(o),o.lane=c|536870912),_):null}function Om(a){if(50<Kf)throw Kf=0,P_=null,Error(r(185));for(var o=a.return;o!==null;)a=o,o=a.return;return a.tag===3?a.stateNode:null}var Tc={};function Dz(a,o,c,d){this.tag=a,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qr(a,o,c,d){return new Dz(a,o,c,d)}function S0(a){return a=a.prototype,!(!a||!a.isReactComponent)}function qa(a,o){var c=a.alternate;return c===null?(c=qr(a.tag,o,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=o,c.type=a.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=a.flags&65011712,c.childLanes=a.childLanes,c.lanes=a.lanes,c.child=a.child,c.memoizedProps=a.memoizedProps,c.memoizedState=a.memoizedState,c.updateQueue=a.updateQueue,o=a.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=a.sibling,c.index=a.index,c.ref=a.ref,c.refCleanup=a.refCleanup,c}function yT(a,o){a.flags&=65011714;var c=a.alternate;return c===null?(a.childLanes=0,a.lanes=o,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=c.childLanes,a.lanes=c.lanes,a.child=c.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=c.memoizedProps,a.memoizedState=c.memoizedState,a.updateQueue=c.updateQueue,a.type=c.type,o=c.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),a}function Im(a,o,c,d,y,_){var T=0;if(d=a,typeof a=="function")S0(a)&&(T=1);else if(typeof a=="string")T=z9(a,c,_e.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case N:return a=qr(31,c,o,y),a.elementType=N,a.lanes=_,a;case w:return dl(c.children,y,_,o);case S:T=8,y|=24;break;case P:return a=qr(12,c,o,y|2),a.elementType=P,a.lanes=_,a;case L:return a=qr(13,c,o,y),a.elementType=L,a.lanes=_,a;case q:return a=qr(19,c,o,y),a.elementType=q,a.lanes=_,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case j:T=10;break e;case M:T=9;break e;case $:T=11;break e;case I:T=14;break e;case R:T=16,d=null;break e}T=29,c=Error(r(130,a===null?"null":typeof a,"")),d=null}return o=qr(T,c,o,y),o.elementType=a,o.type=d,o.lanes=_,o}function dl(a,o,c,d){return a=qr(7,a,d,o),a.lanes=c,a}function A0(a,o,c){return a=qr(6,a,null,o),a.lanes=c,a}function vT(a){var o=qr(18,null,null,0);return o.stateNode=a,o}function T0(a,o,c){return o=qr(4,a.children!==null?a.children:[],a.key,o),o.lanes=c,o.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},o}var _T=new WeakMap;function fi(a,o){if(typeof a=="object"&&a!==null){var c=_T.get(a);return c!==void 0?c:(o={value:a,source:o,stack:Zi(o)},_T.set(a,o),o)}return{value:a,source:o,stack:Zi(o)}}var Cc=[],Oc=0,Rm=null,Tf=0,di=[],hi=0,Qs=null,va=1,_a="";function Fa(a,o){Cc[Oc++]=Tf,Cc[Oc++]=Rm,Rm=a,Tf=o}function bT(a,o,c){di[hi++]=va,di[hi++]=_a,di[hi++]=Qs,Qs=a;var d=va;a=_a;var y=32-Yt(d)-1;d&=~(1<<y),c+=1;var _=32-Yt(o)+y;if(30<_){var T=y-y%5;_=(d&(1<<T)-1).toString(32),d>>=T,y-=T,va=1<<32-Yt(o)+y|c<<y|d,_a=_+a}else va=1<<_|c<<y|d,_a=a}function C0(a){a.return!==null&&(Fa(a,1),bT(a,1,0))}function O0(a){for(;a===Rm;)Rm=Cc[--Oc],Cc[Oc]=null,Tf=Cc[--Oc],Cc[Oc]=null;for(;a===Qs;)Qs=di[--hi],di[hi]=null,_a=di[--hi],di[hi]=null,va=di[--hi],di[hi]=null}function wT(a,o){di[hi++]=va,di[hi++]=_a,di[hi++]=Qs,va=o.id,_a=o.overflow,Qs=a}var Yn=null,Vt=null,ft=!1,Js=null,mi=!1,I0=Error(r(519));function Zs(a){var o=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Cf(fi(o,a)),I0}function xT(a){var o=a.stateNode,c=a.type,d=a.memoizedProps;switch(o[fn]=a,o[Dn]=d,c){case"dialog":nt("cancel",o),nt("close",o);break;case"iframe":case"object":case"embed":nt("load",o);break;case"video":case"audio":for(c=0;c<Wf.length;c++)nt(Wf[c],o);break;case"source":nt("error",o);break;case"img":case"image":case"link":nt("error",o),nt("load",o);break;case"details":nt("toggle",o);break;case"input":nt("invalid",o),cm(o,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":nt("invalid",o);break;case"textarea":nt("invalid",o),Fs(o,d.value,d.defaultValue,d.children)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||o.textContent===""+c||d.suppressHydrationWarning===!0||UO(o.textContent,c)?(d.popover!=null&&(nt("beforetoggle",o),nt("toggle",o)),d.onScroll!=null&&nt("scroll",o),d.onScrollEnd!=null&&nt("scrollend",o),d.onClick!=null&&(o.onclick=Mi),o=!0):o=!1,o||Zs(a,!0)}function ET(a){for(Yn=a.return;Yn;)switch(Yn.tag){case 5:case 31:case 13:mi=!1;return;case 27:case 3:mi=!0;return;default:Yn=Yn.return}}function Ic(a){if(a!==Yn)return!1;if(!ft)return ET(a),ft=!0,!1;var o=a.tag,c;if((c=o!==3&&o!==27)&&((c=o===5)&&(c=a.type,c=!(c!=="form"&&c!=="button")||K_(a.type,a.memoizedProps)),c=!c),c&&Vt&&Zs(a),ET(a),o===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));Vt=YO(a)}else if(o===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));Vt=YO(a)}else o===27?(o=Vt,mo(a.type)?(a=J_,J_=null,Vt=a):Vt=o):Vt=Yn?gi(a.stateNode.nextSibling):null;return!0}function hl(){Vt=Yn=null,ft=!1}function R0(){var a=Js;return a!==null&&(Nr===null?Nr=a:Nr.push.apply(Nr,a),Js=null),a}function Cf(a){Js===null?Js=[a]:Js.push(a)}var N0=F(null),ml=null,Ha=null;function eo(a,o,c){re(N0,o._currentValue),o._currentValue=c}function Ga(a){a._currentValue=N0.current,X(N0)}function P0(a,o,c){for(;a!==null;){var d=a.alternate;if((a.childLanes&o)!==o?(a.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),a===c)break;a=a.return}}function M0(a,o,c,d){var y=a.child;for(y!==null&&(y.return=a);y!==null;){var _=y.dependencies;if(_!==null){var T=y.child;_=_.firstContext;e:for(;_!==null;){var D=_;_=y;for(var H=0;H<o.length;H++)if(D.context===o[H]){_.lanes|=c,D=_.alternate,D!==null&&(D.lanes|=c),P0(_.return,c,a),d||(T=null);break e}_=D.next}}else if(y.tag===18){if(T=y.return,T===null)throw Error(r(341));T.lanes|=c,_=T.alternate,_!==null&&(_.lanes|=c),P0(T,c,a),T=null}else T=y.child;if(T!==null)T.return=y;else for(T=y;T!==null;){if(T===a){T=null;break}if(y=T.sibling,y!==null){y.return=T.return,T=y;break}T=T.return}y=T}}function Rc(a,o,c,d){a=null;for(var y=o,_=!1;y!==null;){if(!_){if((y.flags&524288)!==0)_=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var T=y.alternate;if(T===null)throw Error(r(387));if(T=T.memoizedProps,T!==null){var D=y.type;$r(y.pendingProps.value,T.value)||(a!==null?a.push(D):a=[D])}}else if(y===Pe.current){if(T=y.alternate,T===null)throw Error(r(387));T.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(a!==null?a.push(ed):a=[ed])}y=y.return}a!==null&&M0(o,a,c,d),o.flags|=262144}function Nm(a){for(a=a.firstContext;a!==null;){if(!$r(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function pl(a){ml=a,Ha=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function Wn(a){return ST(ml,a)}function Pm(a,o){return ml===null&&pl(a),ST(a,o)}function ST(a,o){var c=o._currentValue;if(o={context:o,memoizedValue:c,next:null},Ha===null){if(a===null)throw Error(r(308));Ha=o,a.dependencies={lanes:0,firstContext:o},a.flags|=524288}else Ha=Ha.next=o;return c}var jz=typeof AbortController<"u"?AbortController:function(){var a=[],o=this.signal={aborted:!1,addEventListener:function(c,d){a.push(d)}};this.abort=function(){o.aborted=!0,a.forEach(function(c){return c()})}},Lz=t.unstable_scheduleCallback,Vz=t.unstable_NormalPriority,mn={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function k0(){return{controller:new jz,data:new Map,refCount:0}}function Of(a){a.refCount--,a.refCount===0&&Lz(Vz,function(){a.controller.abort()})}var If=null,D0=0,Nc=0,Pc=null;function Uz(a,o){if(If===null){var c=If=[];D0=0,Nc=V_(),Pc={status:"pending",value:void 0,then:function(d){c.push(d)}}}return D0++,o.then(AT,AT),o}function AT(){if(--D0===0&&If!==null){Pc!==null&&(Pc.status="fulfilled");var a=If;If=null,Nc=0,Pc=null;for(var o=0;o<a.length;o++)(0,a[o])()}}function zz(a,o){var c=[],d={status:"pending",value:null,reason:null,then:function(y){c.push(y)}};return a.then(function(){d.status="fulfilled",d.value=o;for(var y=0;y<c.length;y++)(0,c[y])(o)},function(y){for(d.status="rejected",d.reason=y,y=0;y<c.length;y++)(0,c[y])(void 0)}),d}var TT=G.S;G.S=function(a,o){cO=ce(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&Uz(a,o),TT!==null&&TT(a,o)};var gl=F(null);function j0(){var a=gl.current;return a!==null?a:Mt.pooledCache}function Mm(a,o){o===null?re(gl,gl.current):re(gl,o.pool)}function CT(){var a=j0();return a===null?null:{parent:mn._currentValue,pool:a}}var Mc=Error(r(460)),L0=Error(r(474)),km=Error(r(542)),Dm={then:function(){}};function OT(a){return a=a.status,a==="fulfilled"||a==="rejected"}function IT(a,o,c){switch(c=a[c],c===void 0?a.push(o):c!==o&&(o.then(Mi,Mi),o=c),o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,NT(a),a;default:if(typeof o.status=="string")o.then(Mi,Mi);else{if(a=Mt,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=o,a.status="pending",a.then(function(d){if(o.status==="pending"){var y=o;y.status="fulfilled",y.value=d}},function(d){if(o.status==="pending"){var y=o;y.status="rejected",y.reason=d}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,NT(a),a}throw vl=o,Mc}}function yl(a){try{var o=a._init;return o(a._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(vl=c,Mc):c}}var vl=null;function RT(){if(vl===null)throw Error(r(459));var a=vl;return vl=null,a}function NT(a){if(a===Mc||a===km)throw Error(r(483))}var kc=null,Rf=0;function jm(a){var o=Rf;return Rf+=1,kc===null&&(kc=[]),IT(kc,a,o)}function Nf(a,o){o=o.props.ref,a.ref=o!==void 0?o:null}function Lm(a,o){throw o.$$typeof===v?Error(r(525)):(a=Object.prototype.toString.call(o),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":a)))}function PT(a){function o(Y,K){if(a){var Q=Y.deletions;Q===null?(Y.deletions=[K],Y.flags|=16):Q.push(K)}}function c(Y,K){if(!a)return null;for(;K!==null;)o(Y,K),K=K.sibling;return null}function d(Y){for(var K=new Map;Y!==null;)Y.key!==null?K.set(Y.key,Y):K.set(Y.index,Y),Y=Y.sibling;return K}function y(Y,K){return Y=qa(Y,K),Y.index=0,Y.sibling=null,Y}function _(Y,K,Q){return Y.index=Q,a?(Q=Y.alternate,Q!==null?(Q=Q.index,Q<K?(Y.flags|=67108866,K):Q):(Y.flags|=67108866,K)):(Y.flags|=1048576,K)}function T(Y){return a&&Y.alternate===null&&(Y.flags|=67108866),Y}function D(Y,K,Q,ue){return K===null||K.tag!==6?(K=A0(Q,Y.mode,ue),K.return=Y,K):(K=y(K,Q),K.return=Y,K)}function H(Y,K,Q,ue){var Le=Q.type;return Le===w?oe(Y,K,Q.props.children,ue,Q.key):K!==null&&(K.elementType===Le||typeof Le=="object"&&Le!==null&&Le.$$typeof===R&&yl(Le)===K.type)?(K=y(K,Q.props),Nf(K,Q),K.return=Y,K):(K=Im(Q.type,Q.key,Q.props,null,Y.mode,ue),Nf(K,Q),K.return=Y,K)}function J(Y,K,Q,ue){return K===null||K.tag!==4||K.stateNode.containerInfo!==Q.containerInfo||K.stateNode.implementation!==Q.implementation?(K=T0(Q,Y.mode,ue),K.return=Y,K):(K=y(K,Q.children||[]),K.return=Y,K)}function oe(Y,K,Q,ue,Le){return K===null||K.tag!==7?(K=dl(Q,Y.mode,ue,Le),K.return=Y,K):(K=y(K,Q),K.return=Y,K)}function he(Y,K,Q){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=A0(""+K,Y.mode,Q),K.return=Y,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case b:return Q=Im(K.type,K.key,K.props,null,Y.mode,Q),Nf(Q,K),Q.return=Y,Q;case E:return K=T0(K,Y.mode,Q),K.return=Y,K;case R:return K=yl(K),he(Y,K,Q)}if(be(K)||B(K))return K=dl(K,Y.mode,Q,null),K.return=Y,K;if(typeof K.then=="function")return he(Y,jm(K),Q);if(K.$$typeof===j)return he(Y,Pm(Y,K),Q);Lm(Y,K)}return null}function ee(Y,K,Q,ue){var Le=K!==null?K.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Le!==null?null:D(Y,K,""+Q,ue);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case b:return Q.key===Le?H(Y,K,Q,ue):null;case E:return Q.key===Le?J(Y,K,Q,ue):null;case R:return Q=yl(Q),ee(Y,K,Q,ue)}if(be(Q)||B(Q))return Le!==null?null:oe(Y,K,Q,ue,null);if(typeof Q.then=="function")return ee(Y,K,jm(Q),ue);if(Q.$$typeof===j)return ee(Y,K,Pm(Y,Q),ue);Lm(Y,Q)}return null}function ie(Y,K,Q,ue,Le){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return Y=Y.get(Q)||null,D(K,Y,""+ue,Le);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case b:return Y=Y.get(ue.key===null?Q:ue.key)||null,H(K,Y,ue,Le);case E:return Y=Y.get(ue.key===null?Q:ue.key)||null,J(K,Y,ue,Le);case R:return ue=yl(ue),ie(Y,K,Q,ue,Le)}if(be(ue)||B(ue))return Y=Y.get(Q)||null,oe(K,Y,ue,Le,null);if(typeof ue.then=="function")return ie(Y,K,Q,jm(ue),Le);if(ue.$$typeof===j)return ie(Y,K,Q,Pm(K,ue),Le);Lm(K,ue)}return null}function Te(Y,K,Q,ue){for(var Le=null,mt=null,Ne=K,Ze=K=0,at=null;Ne!==null&&Ze<Q.length;Ze++){Ne.index>Ze?(at=Ne,Ne=null):at=Ne.sibling;var pt=ee(Y,Ne,Q[Ze],ue);if(pt===null){Ne===null&&(Ne=at);break}a&&Ne&&pt.alternate===null&&o(Y,Ne),K=_(pt,K,Ze),mt===null?Le=pt:mt.sibling=pt,mt=pt,Ne=at}if(Ze===Q.length)return c(Y,Ne),ft&&Fa(Y,Ze),Le;if(Ne===null){for(;Ze<Q.length;Ze++)Ne=he(Y,Q[Ze],ue),Ne!==null&&(K=_(Ne,K,Ze),mt===null?Le=Ne:mt.sibling=Ne,mt=Ne);return ft&&Fa(Y,Ze),Le}for(Ne=d(Ne);Ze<Q.length;Ze++)at=ie(Ne,Y,Ze,Q[Ze],ue),at!==null&&(a&&at.alternate!==null&&Ne.delete(at.key===null?Ze:at.key),K=_(at,K,Ze),mt===null?Le=at:mt.sibling=at,mt=at);return a&&Ne.forEach(function(_o){return o(Y,_o)}),ft&&Fa(Y,Ze),Le}function qe(Y,K,Q,ue){if(Q==null)throw Error(r(151));for(var Le=null,mt=null,Ne=K,Ze=K=0,at=null,pt=Q.next();Ne!==null&&!pt.done;Ze++,pt=Q.next()){Ne.index>Ze?(at=Ne,Ne=null):at=Ne.sibling;var _o=ee(Y,Ne,pt.value,ue);if(_o===null){Ne===null&&(Ne=at);break}a&&Ne&&_o.alternate===null&&o(Y,Ne),K=_(_o,K,Ze),mt===null?Le=_o:mt.sibling=_o,mt=_o,Ne=at}if(pt.done)return c(Y,Ne),ft&&Fa(Y,Ze),Le;if(Ne===null){for(;!pt.done;Ze++,pt=Q.next())pt=he(Y,pt.value,ue),pt!==null&&(K=_(pt,K,Ze),mt===null?Le=pt:mt.sibling=pt,mt=pt);return ft&&Fa(Y,Ze),Le}for(Ne=d(Ne);!pt.done;Ze++,pt=Q.next())pt=ie(Ne,Y,Ze,pt.value,ue),pt!==null&&(a&&pt.alternate!==null&&Ne.delete(pt.key===null?Ze:pt.key),K=_(pt,K,Ze),mt===null?Le=pt:mt.sibling=pt,mt=pt);return a&&Ne.forEach(function(Q9){return o(Y,Q9)}),ft&&Fa(Y,Ze),Le}function Nt(Y,K,Q,ue){if(typeof Q=="object"&&Q!==null&&Q.type===w&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case b:e:{for(var Le=Q.key;K!==null;){if(K.key===Le){if(Le=Q.type,Le===w){if(K.tag===7){c(Y,K.sibling),ue=y(K,Q.props.children),ue.return=Y,Y=ue;break e}}else if(K.elementType===Le||typeof Le=="object"&&Le!==null&&Le.$$typeof===R&&yl(Le)===K.type){c(Y,K.sibling),ue=y(K,Q.props),Nf(ue,Q),ue.return=Y,Y=ue;break e}c(Y,K);break}else o(Y,K);K=K.sibling}Q.type===w?(ue=dl(Q.props.children,Y.mode,ue,Q.key),ue.return=Y,Y=ue):(ue=Im(Q.type,Q.key,Q.props,null,Y.mode,ue),Nf(ue,Q),ue.return=Y,Y=ue)}return T(Y);case E:e:{for(Le=Q.key;K!==null;){if(K.key===Le)if(K.tag===4&&K.stateNode.containerInfo===Q.containerInfo&&K.stateNode.implementation===Q.implementation){c(Y,K.sibling),ue=y(K,Q.children||[]),ue.return=Y,Y=ue;break e}else{c(Y,K);break}else o(Y,K);K=K.sibling}ue=T0(Q,Y.mode,ue),ue.return=Y,Y=ue}return T(Y);case R:return Q=yl(Q),Nt(Y,K,Q,ue)}if(be(Q))return Te(Y,K,Q,ue);if(B(Q)){if(Le=B(Q),typeof Le!="function")throw Error(r(150));return Q=Le.call(Q),qe(Y,K,Q,ue)}if(typeof Q.then=="function")return Nt(Y,K,jm(Q),ue);if(Q.$$typeof===j)return Nt(Y,K,Pm(Y,Q),ue);Lm(Y,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,K!==null&&K.tag===6?(c(Y,K.sibling),ue=y(K,Q),ue.return=Y,Y=ue):(c(Y,K),ue=A0(Q,Y.mode,ue),ue.return=Y,Y=ue),T(Y)):c(Y,K)}return function(Y,K,Q,ue){try{Rf=0;var Le=Nt(Y,K,Q,ue);return kc=null,Le}catch(Ne){if(Ne===Mc||Ne===km)throw Ne;var mt=qr(29,Ne,null,Y.mode);return mt.lanes=ue,mt.return=Y,mt}finally{}}}var _l=PT(!0),MT=PT(!1),to=!1;function V0(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function U0(a,o){a=a.updateQueue,o.updateQueue===a&&(o.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function no(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function ro(a,o,c){var d=a.updateQueue;if(d===null)return null;if(d=d.shared,(_t&2)!==0){var y=d.pending;return y===null?o.next=o:(o.next=y.next,y.next=o),d.pending=o,o=Om(a),gT(a,null,c),o}return Cm(a,d,o,c),Om(a)}function Pf(a,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194048)!==0)){var d=o.lanes;d&=a.pendingLanes,c|=d,o.lanes=c,af(a,c)}}function z0(a,o){var c=a.updateQueue,d=a.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var y=null,_=null;if(c=c.firstBaseUpdate,c!==null){do{var T={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};_===null?y=_=T:_=_.next=T,c=c.next}while(c!==null);_===null?y=_=o:_=_.next=o}else y=_=o;c={baseState:d.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:d.shared,callbacks:d.callbacks},a.updateQueue=c;return}a=c.lastBaseUpdate,a===null?c.firstBaseUpdate=o:a.next=o,c.lastBaseUpdate=o}var B0=!1;function Mf(){if(B0){var a=Pc;if(a!==null)throw a}}function kf(a,o,c,d){B0=!1;var y=a.updateQueue;to=!1;var _=y.firstBaseUpdate,T=y.lastBaseUpdate,D=y.shared.pending;if(D!==null){y.shared.pending=null;var H=D,J=H.next;H.next=null,T===null?_=J:T.next=J,T=H;var oe=a.alternate;oe!==null&&(oe=oe.updateQueue,D=oe.lastBaseUpdate,D!==T&&(D===null?oe.firstBaseUpdate=J:D.next=J,oe.lastBaseUpdate=H))}if(_!==null){var he=y.baseState;T=0,oe=J=H=null,D=_;do{var ee=D.lane&-536870913,ie=ee!==D.lane;if(ie?(it&ee)===ee:(d&ee)===ee){ee!==0&&ee===Nc&&(B0=!0),oe!==null&&(oe=oe.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});e:{var Te=a,qe=D;ee=o;var Nt=c;switch(qe.tag){case 1:if(Te=qe.payload,typeof Te=="function"){he=Te.call(Nt,he,ee);break e}he=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=qe.payload,ee=typeof Te=="function"?Te.call(Nt,he,ee):Te,ee==null)break e;he=p({},he,ee);break e;case 2:to=!0}}ee=D.callback,ee!==null&&(a.flags|=64,ie&&(a.flags|=8192),ie=y.callbacks,ie===null?y.callbacks=[ee]:ie.push(ee))}else ie={lane:ee,tag:D.tag,payload:D.payload,callback:D.callback,next:null},oe===null?(J=oe=ie,H=he):oe=oe.next=ie,T|=ee;if(D=D.next,D===null){if(D=y.shared.pending,D===null)break;ie=D,D=ie.next,ie.next=null,y.lastBaseUpdate=ie,y.shared.pending=null}}while(!0);oe===null&&(H=he),y.baseState=H,y.firstBaseUpdate=J,y.lastBaseUpdate=oe,_===null&&(y.shared.lanes=0),lo|=T,a.lanes=T,a.memoizedState=he}}function kT(a,o){if(typeof a!="function")throw Error(r(191,a));a.call(o)}function DT(a,o){var c=a.callbacks;if(c!==null)for(a.callbacks=null,a=0;a<c.length;a++)kT(c[a],o)}var Dc=F(null),Vm=F(0);function jT(a,o){a=ts,re(Vm,a),re(Dc,o),ts=a|o.baseLanes}function $0(){re(Vm,ts),re(Dc,Dc.current)}function q0(){ts=Vm.current,X(Dc),X(Vm)}var Fr=F(null),pi=null;function io(a){var o=a.alternate;re(rn,rn.current&1),re(Fr,a),pi===null&&(o===null||Dc.current!==null||o.memoizedState!==null)&&(pi=a)}function F0(a){re(rn,rn.current),re(Fr,a),pi===null&&(pi=a)}function LT(a){a.tag===22?(re(rn,rn.current),re(Fr,a),pi===null&&(pi=a)):ao()}function ao(){re(rn,rn.current),re(Fr,Fr.current)}function Hr(a){X(Fr),pi===a&&(pi=null),X(rn)}var rn=F(0);function Um(a){for(var o=a;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||X_(c)||Q_(c)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Ka=0,Je=null,It=null,pn=null,zm=!1,jc=!1,bl=!1,Bm=0,Df=0,Lc=null,Bz=0;function Jt(){throw Error(r(321))}function H0(a,o){if(o===null)return!1;for(var c=0;c<o.length&&c<a.length;c++)if(!$r(a[c],o[c]))return!1;return!0}function G0(a,o,c,d,y,_){return Ka=_,Je=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,G.H=a===null||a.memoizedState===null?bC:o_,bl=!1,_=c(d,y),bl=!1,jc&&(_=UT(o,c,d,y)),VT(a),_}function VT(a){G.H=Vf;var o=It!==null&&It.next!==null;if(Ka=0,pn=It=Je=null,zm=!1,Df=0,Lc=null,o)throw Error(r(300));a===null||gn||(a=a.dependencies,a!==null&&Nm(a)&&(gn=!0))}function UT(a,o,c,d){Je=a;var y=0;do{if(jc&&(Lc=null),Df=0,jc=!1,25<=y)throw Error(r(301));if(y+=1,pn=It=null,a.updateQueue!=null){var _=a.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}G.H=wC,_=o(c,d)}while(jc);return _}function $z(){var a=G.H,o=a.useState()[0];return o=typeof o.then=="function"?jf(o):o,a=a.useState()[0],(It!==null?It.memoizedState:null)!==a&&(Je.flags|=1024),o}function K0(){var a=Bm!==0;return Bm=0,a}function Y0(a,o,c){o.updateQueue=a.updateQueue,o.flags&=-2053,a.lanes&=~c}function W0(a){if(zm){for(a=a.memoizedState;a!==null;){var o=a.queue;o!==null&&(o.pending=null),a=a.next}zm=!1}Ka=0,pn=It=Je=null,jc=!1,Df=Bm=0,Lc=null}function vr(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pn===null?Je.memoizedState=pn=a:pn=pn.next=a,pn}function an(){if(It===null){var a=Je.alternate;a=a!==null?a.memoizedState:null}else a=It.next;var o=pn===null?Je.memoizedState:pn.next;if(o!==null)pn=o,It=a;else{if(a===null)throw Je.alternate===null?Error(r(467)):Error(r(310));It=a,a={memoizedState:It.memoizedState,baseState:It.baseState,baseQueue:It.baseQueue,queue:It.queue,next:null},pn===null?Je.memoizedState=pn=a:pn=pn.next=a}return pn}function $m(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function jf(a){var o=Df;return Df+=1,Lc===null&&(Lc=[]),a=IT(Lc,a,o),o=Je,(pn===null?o.memoizedState:pn.next)===null&&(o=o.alternate,G.H=o===null||o.memoizedState===null?bC:o_),a}function qm(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return jf(a);if(a.$$typeof===j)return Wn(a)}throw Error(r(438,String(a)))}function X0(a){var o=null,c=Je.updateQueue;if(c!==null&&(o=c.memoCache),o==null){var d=Je.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(o={data:d.data.map(function(y){return y.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),c===null&&(c=$m(),Je.updateQueue=c),c.memoCache=o,c=o.data[o.index],c===void 0)for(c=o.data[o.index]=Array(a),d=0;d<a;d++)c[d]=z;return o.index++,c}function Ya(a,o){return typeof o=="function"?o(a):o}function Fm(a){var o=an();return Q0(o,It,a)}function Q0(a,o,c){var d=a.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=c;var y=a.baseQueue,_=d.pending;if(_!==null){if(y!==null){var T=y.next;y.next=_.next,_.next=T}o.baseQueue=y=_,d.pending=null}if(_=a.baseState,y===null)a.memoizedState=_;else{o=y.next;var D=T=null,H=null,J=o,oe=!1;do{var he=J.lane&-536870913;if(he!==J.lane?(it&he)===he:(Ka&he)===he){var ee=J.revertLane;if(ee===0)H!==null&&(H=H.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),he===Nc&&(oe=!0);else if((Ka&ee)===ee){J=J.next,ee===Nc&&(oe=!0);continue}else he={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},H===null?(D=H=he,T=_):H=H.next=he,Je.lanes|=ee,lo|=ee;he=J.action,bl&&c(_,he),_=J.hasEagerState?J.eagerState:c(_,he)}else ee={lane:he,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},H===null?(D=H=ee,T=_):H=H.next=ee,Je.lanes|=he,lo|=he;J=J.next}while(J!==null&&J!==o);if(H===null?T=_:H.next=D,!$r(_,a.memoizedState)&&(gn=!0,oe&&(c=Pc,c!==null)))throw c;a.memoizedState=_,a.baseState=T,a.baseQueue=H,d.lastRenderedState=_}return y===null&&(d.lanes=0),[a.memoizedState,d.dispatch]}function J0(a){var o=an(),c=o.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=a;var d=c.dispatch,y=c.pending,_=o.memoizedState;if(y!==null){c.pending=null;var T=y=y.next;do _=a(_,T.action),T=T.next;while(T!==y);$r(_,o.memoizedState)||(gn=!0),o.memoizedState=_,o.baseQueue===null&&(o.baseState=_),c.lastRenderedState=_}return[_,d]}function zT(a,o,c){var d=Je,y=an(),_=ft;if(_){if(c===void 0)throw Error(r(407));c=c()}else c=o();var T=!$r((It||y).memoizedState,c);if(T&&(y.memoizedState=c,gn=!0),y=y.queue,t_(qT.bind(null,d,y,a),[a]),y.getSnapshot!==o||T||pn!==null&&pn.memoizedState.tag&1){if(d.flags|=2048,Vc(9,{destroy:void 0},$T.bind(null,d,y,c,o),null),Mt===null)throw Error(r(349));_||(Ka&127)!==0||BT(d,o,c)}return c}function BT(a,o,c){a.flags|=16384,a={getSnapshot:o,value:c},o=Je.updateQueue,o===null?(o=$m(),Je.updateQueue=o,o.stores=[a]):(c=o.stores,c===null?o.stores=[a]:c.push(a))}function $T(a,o,c,d){o.value=c,o.getSnapshot=d,FT(o)&&HT(a)}function qT(a,o,c){return c(function(){FT(o)&&HT(a)})}function FT(a){var o=a.getSnapshot;a=a.value;try{var c=o();return!$r(a,c)}catch{return!0}}function HT(a){var o=fl(a,2);o!==null&&Pr(o,a,2)}function Z0(a){var o=vr();if(typeof a=="function"){var c=a;if(a=c(),bl){Ar(!0);try{c()}finally{Ar(!1)}}}return o.memoizedState=o.baseState=a,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ya,lastRenderedState:a},o}function GT(a,o,c,d){return a.baseState=c,Q0(a,It,typeof d=="function"?d:Ya)}function qz(a,o,c,d,y){if(Km(a))throw Error(r(485));if(a=o.action,a!==null){var _={payload:y,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){_.listeners.push(T)}};G.T!==null?c(!0):_.isTransition=!1,d(_),c=o.pending,c===null?(_.next=o.pending=_,KT(o,_)):(_.next=c.next,o.pending=c.next=_)}}function KT(a,o){var c=o.action,d=o.payload,y=a.state;if(o.isTransition){var _=G.T,T={};G.T=T;try{var D=c(y,d),H=G.S;H!==null&&H(T,D),YT(a,o,D)}catch(J){e_(a,o,J)}finally{_!==null&&T.types!==null&&(_.types=T.types),G.T=_}}else try{_=c(y,d),YT(a,o,_)}catch(J){e_(a,o,J)}}function YT(a,o,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){WT(a,o,d)},function(d){return e_(a,o,d)}):WT(a,o,c)}function WT(a,o,c){o.status="fulfilled",o.value=c,XT(o),a.state=c,o=a.pending,o!==null&&(c=o.next,c===o?a.pending=null:(c=c.next,o.next=c,KT(a,c)))}function e_(a,o,c){var d=a.pending;if(a.pending=null,d!==null){d=d.next;do o.status="rejected",o.reason=c,XT(o),o=o.next;while(o!==d)}a.action=null}function XT(a){a=a.listeners;for(var o=0;o<a.length;o++)(0,a[o])()}function QT(a,o){return o}function JT(a,o){if(ft){var c=Mt.formState;if(c!==null){e:{var d=Je;if(ft){if(Vt){t:{for(var y=Vt,_=mi;y.nodeType!==8;){if(!_){y=null;break t}if(y=gi(y.nextSibling),y===null){y=null;break t}}_=y.data,y=_==="F!"||_==="F"?y:null}if(y){Vt=gi(y.nextSibling),d=y.data==="F!";break e}}Zs(d)}d=!1}d&&(o=c[0])}}return c=vr(),c.memoizedState=c.baseState=o,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:QT,lastRenderedState:o},c.queue=d,c=yC.bind(null,Je,d),d.dispatch=c,d=Z0(!1),_=s_.bind(null,Je,!1,d.queue),d=vr(),y={state:o,dispatch:null,action:a,pending:null},d.queue=y,c=qz.bind(null,Je,y,_,c),y.dispatch=c,d.memoizedState=a,[o,c,!1]}function ZT(a){var o=an();return eC(o,It,a)}function eC(a,o,c){if(o=Q0(a,o,QT)[0],a=Fm(Ya)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var d=jf(o)}catch(T){throw T===Mc?km:T}else d=o;o=an();var y=o.queue,_=y.dispatch;return c!==o.memoizedState&&(Je.flags|=2048,Vc(9,{destroy:void 0},Fz.bind(null,y,c),null)),[d,_,a]}function Fz(a,o){a.action=o}function tC(a){var o=an(),c=It;if(c!==null)return eC(o,c,a);an(),o=o.memoizedState,c=an();var d=c.queue.dispatch;return c.memoizedState=a,[o,d,!1]}function Vc(a,o,c,d){return a={tag:a,create:c,deps:d,inst:o,next:null},o=Je.updateQueue,o===null&&(o=$m(),Je.updateQueue=o),c=o.lastEffect,c===null?o.lastEffect=a.next=a:(d=c.next,c.next=a,a.next=d,o.lastEffect=a),a}function nC(){return an().memoizedState}function Hm(a,o,c,d){var y=vr();Je.flags|=a,y.memoizedState=Vc(1|o,{destroy:void 0},c,d===void 0?null:d)}function Gm(a,o,c,d){var y=an();d=d===void 0?null:d;var _=y.memoizedState.inst;It!==null&&d!==null&&H0(d,It.memoizedState.deps)?y.memoizedState=Vc(o,_,c,d):(Je.flags|=a,y.memoizedState=Vc(1|o,_,c,d))}function rC(a,o){Hm(8390656,8,a,o)}function t_(a,o){Gm(2048,8,a,o)}function Hz(a){Je.flags|=4;var o=Je.updateQueue;if(o===null)o=$m(),Je.updateQueue=o,o.events=[a];else{var c=o.events;c===null?o.events=[a]:c.push(a)}}function iC(a){var o=an().memoizedState;return Hz({ref:o,nextImpl:a}),function(){if((_t&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}function aC(a,o){return Gm(4,2,a,o)}function sC(a,o){return Gm(4,4,a,o)}function oC(a,o){if(typeof o=="function"){a=a();var c=o(a);return function(){typeof c=="function"?c():o(null)}}if(o!=null)return a=a(),o.current=a,function(){o.current=null}}function lC(a,o,c){c=c!=null?c.concat([a]):null,Gm(4,4,oC.bind(null,o,a),c)}function n_(){}function cC(a,o){var c=an();o=o===void 0?null:o;var d=c.memoizedState;return o!==null&&H0(o,d[1])?d[0]:(c.memoizedState=[a,o],a)}function uC(a,o){var c=an();o=o===void 0?null:o;var d=c.memoizedState;if(o!==null&&H0(o,d[1]))return d[0];if(d=a(),bl){Ar(!0);try{a()}finally{Ar(!1)}}return c.memoizedState=[d,o],d}function r_(a,o,c){return c===void 0||(Ka&1073741824)!==0&&(it&261930)===0?a.memoizedState=o:(a.memoizedState=c,a=fO(),Je.lanes|=a,lo|=a,c)}function fC(a,o,c,d){return $r(c,o)?c:Dc.current!==null?(a=r_(a,c,d),$r(a,o)||(gn=!0),a):(Ka&42)===0||(Ka&1073741824)!==0&&(it&261930)===0?(gn=!0,a.memoizedState=c):(a=fO(),Je.lanes|=a,lo|=a,o)}function dC(a,o,c,d,y){var _=ne.p;ne.p=_!==0&&8>_?_:8;var T=G.T,D={};G.T=D,s_(a,!1,o,c);try{var H=y(),J=G.S;if(J!==null&&J(D,H),H!==null&&typeof H=="object"&&typeof H.then=="function"){var oe=zz(H,d);Lf(a,o,oe,Yr(a))}else Lf(a,o,d,Yr(a))}catch(he){Lf(a,o,{then:function(){},status:"rejected",reason:he},Yr())}finally{ne.p=_,T!==null&&D.types!==null&&(T.types=D.types),G.T=T}}function Gz(){}function i_(a,o,c,d){if(a.tag!==5)throw Error(r(476));var y=hC(a).queue;dC(a,y,o,de,c===null?Gz:function(){return mC(a),c(d)})}function hC(a){var o=a.memoizedState;if(o!==null)return o;o={memoizedState:de,baseState:de,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ya,lastRenderedState:de},next:null};var c={};return o.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ya,lastRenderedState:c},next:null},a.memoizedState=o,a=a.alternate,a!==null&&(a.memoizedState=o),o}function mC(a){var o=hC(a);o.next===null&&(o=a.alternate.memoizedState),Lf(a,o.next.queue,{},Yr())}function a_(){return Wn(ed)}function pC(){return an().memoizedState}function gC(){return an().memoizedState}function Kz(a){for(var o=a.return;o!==null;){switch(o.tag){case 24:case 3:var c=Yr();a=no(c);var d=ro(o,a,c);d!==null&&(Pr(d,o,c),Pf(d,o,c)),o={cache:k0()},a.payload=o;return}o=o.return}}function Yz(a,o,c){var d=Yr();c={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Km(a)?vC(o,c):(c=E0(a,o,c,d),c!==null&&(Pr(c,a,d),_C(c,o,d)))}function yC(a,o,c){var d=Yr();Lf(a,o,c,d)}function Lf(a,o,c,d){var y={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Km(a))vC(o,y);else{var _=a.alternate;if(a.lanes===0&&(_===null||_.lanes===0)&&(_=o.lastRenderedReducer,_!==null))try{var T=o.lastRenderedState,D=_(T,c);if(y.hasEagerState=!0,y.eagerState=D,$r(D,T))return Cm(a,o,y,0),Mt===null&&Tm(),!1}catch{}finally{}if(c=E0(a,o,y,d),c!==null)return Pr(c,a,d),_C(c,o,d),!0}return!1}function s_(a,o,c,d){if(d={lane:2,revertLane:V_(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Km(a)){if(o)throw Error(r(479))}else o=E0(a,c,d,2),o!==null&&Pr(o,a,2)}function Km(a){var o=a.alternate;return a===Je||o!==null&&o===Je}function vC(a,o){jc=zm=!0;var c=a.pending;c===null?o.next=o:(o.next=c.next,c.next=o),a.pending=o}function _C(a,o,c){if((c&4194048)!==0){var d=o.lanes;d&=a.pendingLanes,c|=d,o.lanes=c,af(a,c)}}var Vf={readContext:Wn,use:qm,useCallback:Jt,useContext:Jt,useEffect:Jt,useImperativeHandle:Jt,useLayoutEffect:Jt,useInsertionEffect:Jt,useMemo:Jt,useReducer:Jt,useRef:Jt,useState:Jt,useDebugValue:Jt,useDeferredValue:Jt,useTransition:Jt,useSyncExternalStore:Jt,useId:Jt,useHostTransitionStatus:Jt,useFormState:Jt,useActionState:Jt,useOptimistic:Jt,useMemoCache:Jt,useCacheRefresh:Jt};Vf.useEffectEvent=Jt;var bC={readContext:Wn,use:qm,useCallback:function(a,o){return vr().memoizedState=[a,o===void 0?null:o],a},useContext:Wn,useEffect:rC,useImperativeHandle:function(a,o,c){c=c!=null?c.concat([a]):null,Hm(4194308,4,oC.bind(null,o,a),c)},useLayoutEffect:function(a,o){return Hm(4194308,4,a,o)},useInsertionEffect:function(a,o){Hm(4,2,a,o)},useMemo:function(a,o){var c=vr();o=o===void 0?null:o;var d=a();if(bl){Ar(!0);try{a()}finally{Ar(!1)}}return c.memoizedState=[d,o],d},useReducer:function(a,o,c){var d=vr();if(c!==void 0){var y=c(o);if(bl){Ar(!0);try{c(o)}finally{Ar(!1)}}}else y=o;return d.memoizedState=d.baseState=y,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:y},d.queue=a,a=a.dispatch=Yz.bind(null,Je,a),[d.memoizedState,a]},useRef:function(a){var o=vr();return a={current:a},o.memoizedState=a},useState:function(a){a=Z0(a);var o=a.queue,c=yC.bind(null,Je,o);return o.dispatch=c,[a.memoizedState,c]},useDebugValue:n_,useDeferredValue:function(a,o){var c=vr();return r_(c,a,o)},useTransition:function(){var a=Z0(!1);return a=dC.bind(null,Je,a.queue,!0,!1),vr().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,o,c){var d=Je,y=vr();if(ft){if(c===void 0)throw Error(r(407));c=c()}else{if(c=o(),Mt===null)throw Error(r(349));(it&127)!==0||BT(d,o,c)}y.memoizedState=c;var _={value:c,getSnapshot:o};return y.queue=_,rC(qT.bind(null,d,_,a),[a]),d.flags|=2048,Vc(9,{destroy:void 0},$T.bind(null,d,_,c,o),null),c},useId:function(){var a=vr(),o=Mt.identifierPrefix;if(ft){var c=_a,d=va;c=(d&~(1<<32-Yt(d)-1)).toString(32)+c,o="_"+o+"R_"+c,c=Bm++,0<c&&(o+="H"+c.toString(32)),o+="_"}else c=Bz++,o="_"+o+"r_"+c.toString(32)+"_";return a.memoizedState=o},useHostTransitionStatus:a_,useFormState:JT,useActionState:JT,useOptimistic:function(a){var o=vr();o.memoizedState=o.baseState=a;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=c,o=s_.bind(null,Je,!0,c),c.dispatch=o,[a,o]},useMemoCache:X0,useCacheRefresh:function(){return vr().memoizedState=Kz.bind(null,Je)},useEffectEvent:function(a){var o=vr(),c={impl:a};return o.memoizedState=c,function(){if((_t&2)!==0)throw Error(r(440));return c.impl.apply(void 0,arguments)}}},o_={readContext:Wn,use:qm,useCallback:cC,useContext:Wn,useEffect:t_,useImperativeHandle:lC,useInsertionEffect:aC,useLayoutEffect:sC,useMemo:uC,useReducer:Fm,useRef:nC,useState:function(){return Fm(Ya)},useDebugValue:n_,useDeferredValue:function(a,o){var c=an();return fC(c,It.memoizedState,a,o)},useTransition:function(){var a=Fm(Ya)[0],o=an().memoizedState;return[typeof a=="boolean"?a:jf(a),o]},useSyncExternalStore:zT,useId:pC,useHostTransitionStatus:a_,useFormState:ZT,useActionState:ZT,useOptimistic:function(a,o){var c=an();return GT(c,It,a,o)},useMemoCache:X0,useCacheRefresh:gC};o_.useEffectEvent=iC;var wC={readContext:Wn,use:qm,useCallback:cC,useContext:Wn,useEffect:t_,useImperativeHandle:lC,useInsertionEffect:aC,useLayoutEffect:sC,useMemo:uC,useReducer:J0,useRef:nC,useState:function(){return J0(Ya)},useDebugValue:n_,useDeferredValue:function(a,o){var c=an();return It===null?r_(c,a,o):fC(c,It.memoizedState,a,o)},useTransition:function(){var a=J0(Ya)[0],o=an().memoizedState;return[typeof a=="boolean"?a:jf(a),o]},useSyncExternalStore:zT,useId:pC,useHostTransitionStatus:a_,useFormState:tC,useActionState:tC,useOptimistic:function(a,o){var c=an();return It!==null?GT(c,It,a,o):(c.baseState=a,[a,c.queue.dispatch])},useMemoCache:X0,useCacheRefresh:gC};wC.useEffectEvent=iC;function l_(a,o,c,d){o=a.memoizedState,c=c(d,o),c=c==null?o:p({},o,c),a.memoizedState=c,a.lanes===0&&(a.updateQueue.baseState=c)}var c_={enqueueSetState:function(a,o,c){a=a._reactInternals;var d=Yr(),y=no(d);y.payload=o,c!=null&&(y.callback=c),o=ro(a,y,d),o!==null&&(Pr(o,a,d),Pf(o,a,d))},enqueueReplaceState:function(a,o,c){a=a._reactInternals;var d=Yr(),y=no(d);y.tag=1,y.payload=o,c!=null&&(y.callback=c),o=ro(a,y,d),o!==null&&(Pr(o,a,d),Pf(o,a,d))},enqueueForceUpdate:function(a,o){a=a._reactInternals;var c=Yr(),d=no(c);d.tag=2,o!=null&&(d.callback=o),o=ro(a,d,c),o!==null&&(Pr(o,a,c),Pf(o,a,c))}};function xC(a,o,c,d,y,_,T){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(d,_,T):o.prototype&&o.prototype.isPureReactComponent?!Sf(c,d)||!Sf(y,_):!0}function EC(a,o,c,d){a=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,d),o.state!==a&&c_.enqueueReplaceState(o,o.state,null)}function wl(a,o){var c=o;if("ref"in o){c={};for(var d in o)d!=="ref"&&(c[d]=o[d])}if(a=a.defaultProps){c===o&&(c=p({},c));for(var y in a)c[y]===void 0&&(c[y]=a[y])}return c}function SC(a){Am(a)}function AC(a){console.error(a)}function TC(a){Am(a)}function Ym(a,o){try{var c=a.onUncaughtError;c(o.value,{componentStack:o.stack})}catch(d){setTimeout(function(){throw d})}}function CC(a,o,c){try{var d=a.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function u_(a,o,c){return c=no(c),c.tag=3,c.payload={element:null},c.callback=function(){Ym(a,o)},c}function OC(a){return a=no(a),a.tag=3,a}function IC(a,o,c,d){var y=c.type.getDerivedStateFromError;if(typeof y=="function"){var _=d.value;a.payload=function(){return y(_)},a.callback=function(){CC(o,c,d)}}var T=c.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(a.callback=function(){CC(o,c,d),typeof y!="function"&&(co===null?co=new Set([this]):co.add(this));var D=d.stack;this.componentDidCatch(d.value,{componentStack:D!==null?D:""})})}function Wz(a,o,c,d,y){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(o=c.alternate,o!==null&&Rc(o,c,y,!0),c=Fr.current,c!==null){switch(c.tag){case 31:case 13:return pi===null?sp():c.alternate===null&&Zt===0&&(Zt=3),c.flags&=-257,c.flags|=65536,c.lanes=y,d===Dm?c.flags|=16384:(o=c.updateQueue,o===null?c.updateQueue=new Set([d]):o.add(d),D_(a,d,y)),!1;case 22:return c.flags|=65536,d===Dm?c.flags|=16384:(o=c.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=o):(c=o.retryQueue,c===null?o.retryQueue=new Set([d]):c.add(d)),D_(a,d,y)),!1}throw Error(r(435,c.tag))}return D_(a,d,y),sp(),!1}if(ft)return o=Fr.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=y,d!==I0&&(a=Error(r(422),{cause:d}),Cf(fi(a,c)))):(d!==I0&&(o=Error(r(423),{cause:d}),Cf(fi(o,c))),a=a.current.alternate,a.flags|=65536,y&=-y,a.lanes|=y,d=fi(d,c),y=u_(a.stateNode,d,y),z0(a,y),Zt!==4&&(Zt=2)),!1;var _=Error(r(520),{cause:d});if(_=fi(_,c),Gf===null?Gf=[_]:Gf.push(_),Zt!==4&&(Zt=2),o===null)return!0;d=fi(d,c),c=o;do{switch(c.tag){case 3:return c.flags|=65536,a=y&-y,c.lanes|=a,a=u_(c.stateNode,d,a),z0(c,a),!1;case 1:if(o=c.type,_=c.stateNode,(c.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(co===null||!co.has(_))))return c.flags|=65536,y&=-y,c.lanes|=y,y=OC(y),IC(y,a,c,d),z0(c,y),!1}c=c.return}while(c!==null);return!1}var f_=Error(r(461)),gn=!1;function Xn(a,o,c,d){o.child=a===null?MT(o,null,c,d):_l(o,a.child,c,d)}function RC(a,o,c,d,y){c=c.render;var _=o.ref;if("ref"in d){var T={};for(var D in d)D!=="ref"&&(T[D]=d[D])}else T=d;return pl(o),d=G0(a,o,c,T,_,y),D=K0(),a!==null&&!gn?(Y0(a,o,y),Wa(a,o,y)):(ft&&D&&C0(o),o.flags|=1,Xn(a,o,d,y),o.child)}function NC(a,o,c,d,y){if(a===null){var _=c.type;return typeof _=="function"&&!S0(_)&&_.defaultProps===void 0&&c.compare===null?(o.tag=15,o.type=_,PC(a,o,_,d,y)):(a=Im(c.type,null,d,o,o.mode,y),a.ref=o.ref,a.return=o,o.child=a)}if(_=a.child,!__(a,y)){var T=_.memoizedProps;if(c=c.compare,c=c!==null?c:Sf,c(T,d)&&a.ref===o.ref)return Wa(a,o,y)}return o.flags|=1,a=qa(_,d),a.ref=o.ref,a.return=o,o.child=a}function PC(a,o,c,d,y){if(a!==null){var _=a.memoizedProps;if(Sf(_,d)&&a.ref===o.ref)if(gn=!1,o.pendingProps=d=_,__(a,y))(a.flags&131072)!==0&&(gn=!0);else return o.lanes=a.lanes,Wa(a,o,y)}return d_(a,o,c,d,y)}function MC(a,o,c,d){var y=d.children,_=a!==null?a.memoizedState:null;if(a===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((o.flags&128)!==0){if(_=_!==null?_.baseLanes|c:c,a!==null){for(d=o.child=a.child,y=0;d!==null;)y=y|d.lanes|d.childLanes,d=d.sibling;d=y&~_}else d=0,o.child=null;return kC(a,o,_,c,d)}if((c&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},a!==null&&Mm(o,_!==null?_.cachePool:null),_!==null?jT(o,_):$0(),LT(o);else return d=o.lanes=536870912,kC(a,o,_!==null?_.baseLanes|c:c,c,d)}else _!==null?(Mm(o,_.cachePool),jT(o,_),ao(),o.memoizedState=null):(a!==null&&Mm(o,null),$0(),ao());return Xn(a,o,y,c),o.child}function Uf(a,o){return a!==null&&a.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function kC(a,o,c,d,y){var _=j0();return _=_===null?null:{parent:mn._currentValue,pool:_},o.memoizedState={baseLanes:c,cachePool:_},a!==null&&Mm(o,null),$0(),LT(o),a!==null&&Rc(a,o,d,!0),o.childLanes=y,null}function Wm(a,o){return o=Qm({mode:o.mode,children:o.children},a.mode),o.ref=a.ref,a.child=o,o.return=a,o}function DC(a,o,c){return _l(o,a.child,null,c),a=Wm(o,o.pendingProps),a.flags|=2,Hr(o),o.memoizedState=null,a}function Xz(a,o,c){var d=o.pendingProps,y=(o.flags&128)!==0;if(o.flags&=-129,a===null){if(ft){if(d.mode==="hidden")return a=Wm(o,d),o.lanes=536870912,Uf(null,a);if(F0(o),(a=Vt)?(a=KO(a,mi),a=a!==null&&a.data==="&"?a:null,a!==null&&(o.memoizedState={dehydrated:a,treeContext:Qs!==null?{id:va,overflow:_a}:null,retryLane:536870912,hydrationErrors:null},c=vT(a),c.return=o,o.child=c,Yn=o,Vt=null)):a=null,a===null)throw Zs(o);return o.lanes=536870912,null}return Wm(o,d)}var _=a.memoizedState;if(_!==null){var T=_.dehydrated;if(F0(o),y)if(o.flags&256)o.flags&=-257,o=DC(a,o,c);else if(o.memoizedState!==null)o.child=a.child,o.flags|=128,o=null;else throw Error(r(558));else if(gn||Rc(a,o,c,!1),y=(c&a.childLanes)!==0,gn||y){if(d=Mt,d!==null&&(T=sf(d,c),T!==0&&T!==_.retryLane))throw _.retryLane=T,fl(a,T),Pr(d,a,T),f_;sp(),o=DC(a,o,c)}else a=_.treeContext,Vt=gi(T.nextSibling),Yn=o,ft=!0,Js=null,mi=!1,a!==null&&wT(o,a),o=Wm(o,d),o.flags|=4096;return o}return a=qa(a.child,{mode:d.mode,children:d.children}),a.ref=o.ref,o.child=a,a.return=o,a}function Xm(a,o){var c=o.ref;if(c===null)a!==null&&a.ref!==null&&(o.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(a===null||a.ref!==c)&&(o.flags|=4194816)}}function d_(a,o,c,d,y){return pl(o),c=G0(a,o,c,d,void 0,y),d=K0(),a!==null&&!gn?(Y0(a,o,y),Wa(a,o,y)):(ft&&d&&C0(o),o.flags|=1,Xn(a,o,c,y),o.child)}function jC(a,o,c,d,y,_){return pl(o),o.updateQueue=null,c=UT(o,d,c,y),VT(a),d=K0(),a!==null&&!gn?(Y0(a,o,_),Wa(a,o,_)):(ft&&d&&C0(o),o.flags|=1,Xn(a,o,c,_),o.child)}function LC(a,o,c,d,y){if(pl(o),o.stateNode===null){var _=Tc,T=c.contextType;typeof T=="object"&&T!==null&&(_=Wn(T)),_=new c(d,_),o.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=c_,o.stateNode=_,_._reactInternals=o,_=o.stateNode,_.props=d,_.state=o.memoizedState,_.refs={},V0(o),T=c.contextType,_.context=typeof T=="object"&&T!==null?Wn(T):Tc,_.state=o.memoizedState,T=c.getDerivedStateFromProps,typeof T=="function"&&(l_(o,c,T,d),_.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(T=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),T!==_.state&&c_.enqueueReplaceState(_,_.state,null),kf(o,d,_,y),Mf(),_.state=o.memoizedState),typeof _.componentDidMount=="function"&&(o.flags|=4194308),d=!0}else if(a===null){_=o.stateNode;var D=o.memoizedProps,H=wl(c,D);_.props=H;var J=_.context,oe=c.contextType;T=Tc,typeof oe=="object"&&oe!==null&&(T=Wn(oe));var he=c.getDerivedStateFromProps;oe=typeof he=="function"||typeof _.getSnapshotBeforeUpdate=="function",D=o.pendingProps!==D,oe||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(D||J!==T)&&EC(o,_,d,T),to=!1;var ee=o.memoizedState;_.state=ee,kf(o,d,_,y),Mf(),J=o.memoizedState,D||ee!==J||to?(typeof he=="function"&&(l_(o,c,he,d),J=o.memoizedState),(H=to||xC(o,c,H,d,ee,J,T))?(oe||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(o.flags|=4194308)):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=J),_.props=d,_.state=J,_.context=T,d=H):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{_=o.stateNode,U0(a,o),T=o.memoizedProps,oe=wl(c,T),_.props=oe,he=o.pendingProps,ee=_.context,J=c.contextType,H=Tc,typeof J=="object"&&J!==null&&(H=Wn(J)),D=c.getDerivedStateFromProps,(J=typeof D=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(T!==he||ee!==H)&&EC(o,_,d,H),to=!1,ee=o.memoizedState,_.state=ee,kf(o,d,_,y),Mf();var ie=o.memoizedState;T!==he||ee!==ie||to||a!==null&&a.dependencies!==null&&Nm(a.dependencies)?(typeof D=="function"&&(l_(o,c,D,d),ie=o.memoizedState),(oe=to||xC(o,c,oe,d,ee,ie,H)||a!==null&&a.dependencies!==null&&Nm(a.dependencies))?(J||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(d,ie,H),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(d,ie,H)),typeof _.componentDidUpdate=="function"&&(o.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof _.componentDidUpdate!="function"||T===a.memoizedProps&&ee===a.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||T===a.memoizedProps&&ee===a.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=ie),_.props=d,_.state=ie,_.context=H,d=oe):(typeof _.componentDidUpdate!="function"||T===a.memoizedProps&&ee===a.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||T===a.memoizedProps&&ee===a.memoizedState||(o.flags|=1024),d=!1)}return _=d,Xm(a,o),d=(o.flags&128)!==0,_||d?(_=o.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:_.render(),o.flags|=1,a!==null&&d?(o.child=_l(o,a.child,null,y),o.child=_l(o,null,c,y)):Xn(a,o,c,y),o.memoizedState=_.state,a=o.child):a=Wa(a,o,y),a}function VC(a,o,c,d){return hl(),o.flags|=256,Xn(a,o,c,d),o.child}var h_={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function m_(a){return{baseLanes:a,cachePool:CT()}}function p_(a,o,c){return a=a!==null?a.childLanes&~c:0,o&&(a|=Kr),a}function UC(a,o,c){var d=o.pendingProps,y=!1,_=(o.flags&128)!==0,T;if((T=_)||(T=a!==null&&a.memoizedState===null?!1:(rn.current&2)!==0),T&&(y=!0,o.flags&=-129),T=(o.flags&32)!==0,o.flags&=-33,a===null){if(ft){if(y?io(o):ao(),(a=Vt)?(a=KO(a,mi),a=a!==null&&a.data!=="&"?a:null,a!==null&&(o.memoizedState={dehydrated:a,treeContext:Qs!==null?{id:va,overflow:_a}:null,retryLane:536870912,hydrationErrors:null},c=vT(a),c.return=o,o.child=c,Yn=o,Vt=null)):a=null,a===null)throw Zs(o);return Q_(a)?o.lanes=32:o.lanes=536870912,null}var D=d.children;return d=d.fallback,y?(ao(),y=o.mode,D=Qm({mode:"hidden",children:D},y),d=dl(d,y,c,null),D.return=o,d.return=o,D.sibling=d,o.child=D,d=o.child,d.memoizedState=m_(c),d.childLanes=p_(a,T,c),o.memoizedState=h_,Uf(null,d)):(io(o),g_(o,D))}var H=a.memoizedState;if(H!==null&&(D=H.dehydrated,D!==null)){if(_)o.flags&256?(io(o),o.flags&=-257,o=y_(a,o,c)):o.memoizedState!==null?(ao(),o.child=a.child,o.flags|=128,o=null):(ao(),D=d.fallback,y=o.mode,d=Qm({mode:"visible",children:d.children},y),D=dl(D,y,c,null),D.flags|=2,d.return=o,D.return=o,d.sibling=D,o.child=d,_l(o,a.child,null,c),d=o.child,d.memoizedState=m_(c),d.childLanes=p_(a,T,c),o.memoizedState=h_,o=Uf(null,d));else if(io(o),Q_(D)){if(T=D.nextSibling&&D.nextSibling.dataset,T)var J=T.dgst;T=J,d=Error(r(419)),d.stack="",d.digest=T,Cf({value:d,source:null,stack:null}),o=y_(a,o,c)}else if(gn||Rc(a,o,c,!1),T=(c&a.childLanes)!==0,gn||T){if(T=Mt,T!==null&&(d=sf(T,c),d!==0&&d!==H.retryLane))throw H.retryLane=d,fl(a,d),Pr(T,a,d),f_;X_(D)||sp(),o=y_(a,o,c)}else X_(D)?(o.flags|=192,o.child=a.child,o=null):(a=H.treeContext,Vt=gi(D.nextSibling),Yn=o,ft=!0,Js=null,mi=!1,a!==null&&wT(o,a),o=g_(o,d.children),o.flags|=4096);return o}return y?(ao(),D=d.fallback,y=o.mode,H=a.child,J=H.sibling,d=qa(H,{mode:"hidden",children:d.children}),d.subtreeFlags=H.subtreeFlags&65011712,J!==null?D=qa(J,D):(D=dl(D,y,c,null),D.flags|=2),D.return=o,d.return=o,d.sibling=D,o.child=d,Uf(null,d),d=o.child,D=a.child.memoizedState,D===null?D=m_(c):(y=D.cachePool,y!==null?(H=mn._currentValue,y=y.parent!==H?{parent:H,pool:H}:y):y=CT(),D={baseLanes:D.baseLanes|c,cachePool:y}),d.memoizedState=D,d.childLanes=p_(a,T,c),o.memoizedState=h_,Uf(a.child,d)):(io(o),c=a.child,a=c.sibling,c=qa(c,{mode:"visible",children:d.children}),c.return=o,c.sibling=null,a!==null&&(T=o.deletions,T===null?(o.deletions=[a],o.flags|=16):T.push(a)),o.child=c,o.memoizedState=null,c)}function g_(a,o){return o=Qm({mode:"visible",children:o},a.mode),o.return=a,a.child=o}function Qm(a,o){return a=qr(22,a,null,o),a.lanes=0,a}function y_(a,o,c){return _l(o,a.child,null,c),a=g_(o,o.pendingProps.children),a.flags|=2,o.memoizedState=null,a}function zC(a,o,c){a.lanes|=o;var d=a.alternate;d!==null&&(d.lanes|=o),P0(a.return,o,c)}function v_(a,o,c,d,y,_){var T=a.memoizedState;T===null?a.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:y,treeForkCount:_}:(T.isBackwards=o,T.rendering=null,T.renderingStartTime=0,T.last=d,T.tail=c,T.tailMode=y,T.treeForkCount=_)}function BC(a,o,c){var d=o.pendingProps,y=d.revealOrder,_=d.tail;d=d.children;var T=rn.current,D=(T&2)!==0;if(D?(T=T&1|2,o.flags|=128):T&=1,re(rn,T),Xn(a,o,d,c),d=ft?Tf:0,!D&&a!==null&&(a.flags&128)!==0)e:for(a=o.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&zC(a,c,o);else if(a.tag===19)zC(a,c,o);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break e;for(;a.sibling===null;){if(a.return===null||a.return===o)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(y){case"forwards":for(c=o.child,y=null;c!==null;)a=c.alternate,a!==null&&Um(a)===null&&(y=c),c=c.sibling;c=y,c===null?(y=o.child,o.child=null):(y=c.sibling,c.sibling=null),v_(o,!1,y,c,_,d);break;case"backwards":case"unstable_legacy-backwards":for(c=null,y=o.child,o.child=null;y!==null;){if(a=y.alternate,a!==null&&Um(a)===null){o.child=y;break}a=y.sibling,y.sibling=c,c=y,y=a}v_(o,!0,c,null,_,d);break;case"together":v_(o,!1,null,null,void 0,d);break;default:o.memoizedState=null}return o.child}function Wa(a,o,c){if(a!==null&&(o.dependencies=a.dependencies),lo|=o.lanes,(c&o.childLanes)===0)if(a!==null){if(Rc(a,o,c,!1),(c&o.childLanes)===0)return null}else return null;if(a!==null&&o.child!==a.child)throw Error(r(153));if(o.child!==null){for(a=o.child,c=qa(a,a.pendingProps),o.child=c,c.return=o;a.sibling!==null;)a=a.sibling,c=c.sibling=qa(a,a.pendingProps),c.return=o;c.sibling=null}return o.child}function __(a,o){return(a.lanes&o)!==0?!0:(a=a.dependencies,!!(a!==null&&Nm(a)))}function Qz(a,o,c){switch(o.tag){case 3:yt(o,o.stateNode.containerInfo),eo(o,mn,a.memoizedState.cache),hl();break;case 27:case 5:ze(o);break;case 4:yt(o,o.stateNode.containerInfo);break;case 10:eo(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,F0(o),null;break;case 13:var d=o.memoizedState;if(d!==null)return d.dehydrated!==null?(io(o),o.flags|=128,null):(c&o.child.childLanes)!==0?UC(a,o,c):(io(o),a=Wa(a,o,c),a!==null?a.sibling:null);io(o);break;case 19:var y=(a.flags&128)!==0;if(d=(c&o.childLanes)!==0,d||(Rc(a,o,c,!1),d=(c&o.childLanes)!==0),y){if(d)return BC(a,o,c);o.flags|=128}if(y=o.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),re(rn,rn.current),d)break;return null;case 22:return o.lanes=0,MC(a,o,c,o.pendingProps);case 24:eo(o,mn,a.memoizedState.cache)}return Wa(a,o,c)}function $C(a,o,c){if(a!==null)if(a.memoizedProps!==o.pendingProps)gn=!0;else{if(!__(a,c)&&(o.flags&128)===0)return gn=!1,Qz(a,o,c);gn=(a.flags&131072)!==0}else gn=!1,ft&&(o.flags&1048576)!==0&&bT(o,Tf,o.index);switch(o.lanes=0,o.tag){case 16:e:{var d=o.pendingProps;if(a=yl(o.elementType),o.type=a,typeof a=="function")S0(a)?(d=wl(a,d),o.tag=1,o=LC(null,o,a,d,c)):(o.tag=0,o=d_(null,o,a,d,c));else{if(a!=null){var y=a.$$typeof;if(y===$){o.tag=11,o=RC(null,o,a,d,c);break e}else if(y===I){o.tag=14,o=NC(null,o,a,d,c);break e}}throw o=pe(a)||a,Error(r(306,o,""))}}return o;case 0:return d_(a,o,o.type,o.pendingProps,c);case 1:return d=o.type,y=wl(d,o.pendingProps),LC(a,o,d,y,c);case 3:e:{if(yt(o,o.stateNode.containerInfo),a===null)throw Error(r(387));d=o.pendingProps;var _=o.memoizedState;y=_.element,U0(a,o),kf(o,d,null,c);var T=o.memoizedState;if(d=T.cache,eo(o,mn,d),d!==_.cache&&M0(o,[mn],c,!0),Mf(),d=T.element,_.isDehydrated)if(_={element:d,isDehydrated:!1,cache:T.cache},o.updateQueue.baseState=_,o.memoizedState=_,o.flags&256){o=VC(a,o,d,c);break e}else if(d!==y){y=fi(Error(r(424)),o),Cf(y),o=VC(a,o,d,c);break e}else{switch(a=o.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(Vt=gi(a.firstChild),Yn=o,ft=!0,Js=null,mi=!0,c=MT(o,null,d,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(hl(),d===y){o=Wa(a,o,c);break e}Xn(a,o,d,c)}o=o.child}return o;case 26:return Xm(a,o),a===null?(c=ZO(o.type,null,o.pendingProps,null))?o.memoizedState=c:ft||(c=o.type,a=o.pendingProps,d=hp(xe.current).createElement(c),d[fn]=o,d[Dn]=a,Qn(d,c,a),dn(d),o.stateNode=d):o.memoizedState=ZO(o.type,a.memoizedProps,o.pendingProps,a.memoizedState),null;case 27:return ze(o),a===null&&ft&&(d=o.stateNode=XO(o.type,o.pendingProps,xe.current),Yn=o,mi=!0,y=Vt,mo(o.type)?(J_=y,Vt=gi(d.firstChild)):Vt=y),Xn(a,o,o.pendingProps.children,c),Xm(a,o),a===null&&(o.flags|=4194304),o.child;case 5:return a===null&&ft&&((y=d=Vt)&&(d=C9(d,o.type,o.pendingProps,mi),d!==null?(o.stateNode=d,Yn=o,Vt=gi(d.firstChild),mi=!1,y=!0):y=!1),y||Zs(o)),ze(o),y=o.type,_=o.pendingProps,T=a!==null?a.memoizedProps:null,d=_.children,K_(y,_)?d=null:T!==null&&K_(y,T)&&(o.flags|=32),o.memoizedState!==null&&(y=G0(a,o,$z,null,null,c),ed._currentValue=y),Xm(a,o),Xn(a,o,d,c),o.child;case 6:return a===null&&ft&&((a=c=Vt)&&(c=O9(c,o.pendingProps,mi),c!==null?(o.stateNode=c,Yn=o,Vt=null,a=!0):a=!1),a||Zs(o)),null;case 13:return UC(a,o,c);case 4:return yt(o,o.stateNode.containerInfo),d=o.pendingProps,a===null?o.child=_l(o,null,d,c):Xn(a,o,d,c),o.child;case 11:return RC(a,o,o.type,o.pendingProps,c);case 7:return Xn(a,o,o.pendingProps,c),o.child;case 8:return Xn(a,o,o.pendingProps.children,c),o.child;case 12:return Xn(a,o,o.pendingProps.children,c),o.child;case 10:return d=o.pendingProps,eo(o,o.type,d.value),Xn(a,o,d.children,c),o.child;case 9:return y=o.type._context,d=o.pendingProps.children,pl(o),y=Wn(y),d=d(y),o.flags|=1,Xn(a,o,d,c),o.child;case 14:return NC(a,o,o.type,o.pendingProps,c);case 15:return PC(a,o,o.type,o.pendingProps,c);case 19:return BC(a,o,c);case 31:return Xz(a,o,c);case 22:return MC(a,o,c,o.pendingProps);case 24:return pl(o),d=Wn(mn),a===null?(y=j0(),y===null&&(y=Mt,_=k0(),y.pooledCache=_,_.refCount++,_!==null&&(y.pooledCacheLanes|=c),y=_),o.memoizedState={parent:d,cache:y},V0(o),eo(o,mn,y)):((a.lanes&c)!==0&&(U0(a,o),kf(o,null,null,c),Mf()),y=a.memoizedState,_=o.memoizedState,y.parent!==d?(y={parent:d,cache:d},o.memoizedState=y,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=y),eo(o,mn,d)):(d=_.cache,eo(o,mn,d),d!==y.cache&&M0(o,[mn],c,!0))),Xn(a,o,o.pendingProps.children,c),o.child;case 29:throw o.pendingProps}throw Error(r(156,o.tag))}function Xa(a){a.flags|=4}function b_(a,o,c,d,y){if((o=(a.mode&32)!==0)&&(o=!1),o){if(a.flags|=16777216,(y&335544128)===y)if(a.stateNode.complete)a.flags|=8192;else if(pO())a.flags|=8192;else throw vl=Dm,L0}else a.flags&=-16777217}function qC(a,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!iI(o))if(pO())a.flags|=8192;else throw vl=Dm,L0}function Jm(a,o){o!==null&&(a.flags|=4),a.flags&16384&&(o=a.tag!==22?im():536870912,a.lanes|=o,$c|=o)}function zf(a,o){if(!ft)switch(a.tailMode){case"hidden":o=a.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?a.tail=null:c.sibling=null;break;case"collapsed":c=a.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?o||a.tail===null?a.tail=null:a.tail.sibling=null:d.sibling=null}}function Ut(a){var o=a.alternate!==null&&a.alternate.child===a.child,c=0,d=0;if(o)for(var y=a.child;y!==null;)c|=y.lanes|y.childLanes,d|=y.subtreeFlags&65011712,d|=y.flags&65011712,y.return=a,y=y.sibling;else for(y=a.child;y!==null;)c|=y.lanes|y.childLanes,d|=y.subtreeFlags,d|=y.flags,y.return=a,y=y.sibling;return a.subtreeFlags|=d,a.childLanes=c,o}function Jz(a,o,c){var d=o.pendingProps;switch(O0(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(o),null;case 1:return Ut(o),null;case 3:return c=o.stateNode,d=null,a!==null&&(d=a.memoizedState.cache),o.memoizedState.cache!==d&&(o.flags|=2048),Ga(mn),se(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(a===null||a.child===null)&&(Ic(o)?Xa(o):a===null||a.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,R0())),Ut(o),null;case 26:var y=o.type,_=o.memoizedState;return a===null?(Xa(o),_!==null?(Ut(o),qC(o,_)):(Ut(o),b_(o,y,null,d,c))):_?_!==a.memoizedState?(Xa(o),Ut(o),qC(o,_)):(Ut(o),o.flags&=-16777217):(a=a.memoizedProps,a!==d&&Xa(o),Ut(o),b_(o,y,a,d,c)),null;case 27:if(fe(o),c=xe.current,y=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==d&&Xa(o);else{if(!d){if(o.stateNode===null)throw Error(r(166));return Ut(o),null}a=_e.current,Ic(o)?xT(o):(a=XO(y,d,c),o.stateNode=a,Xa(o))}return Ut(o),null;case 5:if(fe(o),y=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==d&&Xa(o);else{if(!d){if(o.stateNode===null)throw Error(r(166));return Ut(o),null}if(_=_e.current,Ic(o))xT(o);else{var T=hp(xe.current);switch(_){case 1:_=T.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:_=T.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":_=T.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":_=T.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":_=T.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof d.is=="string"?T.createElement("select",{is:d.is}):T.createElement("select"),d.multiple?_.multiple=!0:d.size&&(_.size=d.size);break;default:_=typeof d.is=="string"?T.createElement(y,{is:d.is}):T.createElement(y)}}_[fn]=o,_[Dn]=d;e:for(T=o.child;T!==null;){if(T.tag===5||T.tag===6)_.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===o)break e;for(;T.sibling===null;){if(T.return===null||T.return===o)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}o.stateNode=_;e:switch(Qn(_,y,d),y){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&Xa(o)}}return Ut(o),b_(o,o.type,a===null?null:a.memoizedProps,o.pendingProps,c),null;case 6:if(a&&o.stateNode!=null)a.memoizedProps!==d&&Xa(o);else{if(typeof d!="string"&&o.stateNode===null)throw Error(r(166));if(a=xe.current,Ic(o)){if(a=o.stateNode,c=o.memoizedProps,d=null,y=Yn,y!==null)switch(y.tag){case 27:case 5:d=y.memoizedProps}a[fn]=o,a=!!(a.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||UO(a.nodeValue,c)),a||Zs(o,!0)}else a=hp(a).createTextNode(d),a[fn]=o,o.stateNode=a}return Ut(o),null;case 31:if(c=o.memoizedState,a===null||a.memoizedState!==null){if(d=Ic(o),c!==null){if(a===null){if(!d)throw Error(r(318));if(a=o.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(557));a[fn]=o}else hl(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Ut(o),a=!1}else c=R0(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=c),a=!0;if(!a)return o.flags&256?(Hr(o),o):(Hr(o),null);if((o.flags&128)!==0)throw Error(r(558))}return Ut(o),null;case 13:if(d=o.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(y=Ic(o),d!==null&&d.dehydrated!==null){if(a===null){if(!y)throw Error(r(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(r(317));y[fn]=o}else hl(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Ut(o),y=!1}else y=R0(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=y),y=!0;if(!y)return o.flags&256?(Hr(o),o):(Hr(o),null)}return Hr(o),(o.flags&128)!==0?(o.lanes=c,o):(c=d!==null,a=a!==null&&a.memoizedState!==null,c&&(d=o.child,y=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(y=d.alternate.memoizedState.cachePool.pool),_=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(_=d.memoizedState.cachePool.pool),_!==y&&(d.flags|=2048)),c!==a&&c&&(o.child.flags|=8192),Jm(o,o.updateQueue),Ut(o),null);case 4:return se(),a===null&&$_(o.stateNode.containerInfo),Ut(o),null;case 10:return Ga(o.type),Ut(o),null;case 19:if(X(rn),d=o.memoizedState,d===null)return Ut(o),null;if(y=(o.flags&128)!==0,_=d.rendering,_===null)if(y)zf(d,!1);else{if(Zt!==0||a!==null&&(a.flags&128)!==0)for(a=o.child;a!==null;){if(_=Um(a),_!==null){for(o.flags|=128,zf(d,!1),a=_.updateQueue,o.updateQueue=a,Jm(o,a),o.subtreeFlags=0,a=c,c=o.child;c!==null;)yT(c,a),c=c.sibling;return re(rn,rn.current&1|2),ft&&Fa(o,d.treeForkCount),o.child}a=a.sibling}d.tail!==null&&ce()>rp&&(o.flags|=128,y=!0,zf(d,!1),o.lanes=4194304)}else{if(!y)if(a=Um(_),a!==null){if(o.flags|=128,y=!0,a=a.updateQueue,o.updateQueue=a,Jm(o,a),zf(d,!0),d.tail===null&&d.tailMode==="hidden"&&!_.alternate&&!ft)return Ut(o),null}else 2*ce()-d.renderingStartTime>rp&&c!==536870912&&(o.flags|=128,y=!0,zf(d,!1),o.lanes=4194304);d.isBackwards?(_.sibling=o.child,o.child=_):(a=d.last,a!==null?a.sibling=_:o.child=_,d.last=_)}return d.tail!==null?(a=d.tail,d.rendering=a,d.tail=a.sibling,d.renderingStartTime=ce(),a.sibling=null,c=rn.current,re(rn,y?c&1|2:c&1),ft&&Fa(o,d.treeForkCount),a):(Ut(o),null);case 22:case 23:return Hr(o),q0(),d=o.memoizedState!==null,a!==null?a.memoizedState!==null!==d&&(o.flags|=8192):d&&(o.flags|=8192),d?(c&536870912)!==0&&(o.flags&128)===0&&(Ut(o),o.subtreeFlags&6&&(o.flags|=8192)):Ut(o),c=o.updateQueue,c!==null&&Jm(o,c.retryQueue),c=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==c&&(o.flags|=2048),a!==null&&X(gl),null;case 24:return c=null,a!==null&&(c=a.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),Ga(mn),Ut(o),null;case 25:return null;case 30:return null}throw Error(r(156,o.tag))}function Zz(a,o){switch(O0(o),o.tag){case 1:return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 3:return Ga(mn),se(),a=o.flags,(a&65536)!==0&&(a&128)===0?(o.flags=a&-65537|128,o):null;case 26:case 27:case 5:return fe(o),null;case 31:if(o.memoizedState!==null){if(Hr(o),o.alternate===null)throw Error(r(340));hl()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 13:if(Hr(o),a=o.memoizedState,a!==null&&a.dehydrated!==null){if(o.alternate===null)throw Error(r(340));hl()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 19:return X(rn),null;case 4:return se(),null;case 10:return Ga(o.type),null;case 22:case 23:return Hr(o),q0(),a!==null&&X(gl),a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 24:return Ga(mn),null;case 25:return null;default:return null}}function FC(a,o){switch(O0(o),o.tag){case 3:Ga(mn),se();break;case 26:case 27:case 5:fe(o);break;case 4:se();break;case 31:o.memoizedState!==null&&Hr(o);break;case 13:Hr(o);break;case 19:X(rn);break;case 10:Ga(o.type);break;case 22:case 23:Hr(o),q0(),a!==null&&X(gl);break;case 24:Ga(mn)}}function Bf(a,o){try{var c=o.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var y=d.next;c=y;do{if((c.tag&a)===a){d=void 0;var _=c.create,T=c.inst;d=_(),T.destroy=d}c=c.next}while(c!==y)}}catch(D){St(o,o.return,D)}}function so(a,o,c){try{var d=o.updateQueue,y=d!==null?d.lastEffect:null;if(y!==null){var _=y.next;d=_;do{if((d.tag&a)===a){var T=d.inst,D=T.destroy;if(D!==void 0){T.destroy=void 0,y=o;var H=c,J=D;try{J()}catch(oe){St(y,H,oe)}}}d=d.next}while(d!==_)}}catch(oe){St(o,o.return,oe)}}function HC(a){var o=a.updateQueue;if(o!==null){var c=a.stateNode;try{DT(o,c)}catch(d){St(a,a.return,d)}}}function GC(a,o,c){c.props=wl(a.type,a.memoizedProps),c.state=a.memoizedState;try{c.componentWillUnmount()}catch(d){St(a,o,d)}}function $f(a,o){try{var c=a.ref;if(c!==null){switch(a.tag){case 26:case 27:case 5:var d=a.stateNode;break;case 30:d=a.stateNode;break;default:d=a.stateNode}typeof c=="function"?a.refCleanup=c(d):c.current=d}}catch(y){St(a,o,y)}}function ba(a,o){var c=a.ref,d=a.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(y){St(a,o,y)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(y){St(a,o,y)}else c.current=null}function KC(a){var o=a.type,c=a.memoizedProps,d=a.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break e;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(y){St(a,a.return,y)}}function w_(a,o,c){try{var d=a.stateNode;w9(d,a.type,c,o),d[Dn]=o}catch(y){St(a,a.return,y)}}function YC(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&mo(a.type)||a.tag===4}function x_(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||YC(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&mo(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function E_(a,o,c){var d=a.tag;if(d===5||d===6)a=a.stateNode,o?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(a,o):(o=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,o.appendChild(a),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=Mi));else if(d!==4&&(d===27&&mo(a.type)&&(c=a.stateNode,o=null),a=a.child,a!==null))for(E_(a,o,c),a=a.sibling;a!==null;)E_(a,o,c),a=a.sibling}function Zm(a,o,c){var d=a.tag;if(d===5||d===6)a=a.stateNode,o?c.insertBefore(a,o):c.appendChild(a);else if(d!==4&&(d===27&&mo(a.type)&&(c=a.stateNode),a=a.child,a!==null))for(Zm(a,o,c),a=a.sibling;a!==null;)Zm(a,o,c),a=a.sibling}function WC(a){var o=a.stateNode,c=a.memoizedProps;try{for(var d=a.type,y=o.attributes;y.length;)o.removeAttributeNode(y[0]);Qn(o,d,c),o[fn]=a,o[Dn]=c}catch(_){St(a,a.return,_)}}var Qa=!1,yn=!1,S_=!1,XC=typeof WeakSet=="function"?WeakSet:Set,Ln=null;function e9(a,o){if(a=a.containerInfo,H_=bp,a=lT(a),y0(a)){if("selectionStart"in a)var c={start:a.selectionStart,end:a.selectionEnd};else e:{c=(c=a.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var y=d.anchorOffset,_=d.focusNode;d=d.focusOffset;try{c.nodeType,_.nodeType}catch{c=null;break e}var T=0,D=-1,H=-1,J=0,oe=0,he=a,ee=null;t:for(;;){for(var ie;he!==c||y!==0&&he.nodeType!==3||(D=T+y),he!==_||d!==0&&he.nodeType!==3||(H=T+d),he.nodeType===3&&(T+=he.nodeValue.length),(ie=he.firstChild)!==null;)ee=he,he=ie;for(;;){if(he===a)break t;if(ee===c&&++J===y&&(D=T),ee===_&&++oe===d&&(H=T),(ie=he.nextSibling)!==null)break;he=ee,ee=he.parentNode}he=ie}c=D===-1||H===-1?null:{start:D,end:H}}else c=null}c=c||{start:0,end:0}}else c=null;for(G_={focusedElem:a,selectionRange:c},bp=!1,Ln=o;Ln!==null;)if(o=Ln,a=o.child,(o.subtreeFlags&1028)!==0&&a!==null)a.return=o,Ln=a;else for(;Ln!==null;){switch(o=Ln,_=o.alternate,a=o.flags,o.tag){case 0:if((a&4)!==0&&(a=o.updateQueue,a=a!==null?a.events:null,a!==null))for(c=0;c<a.length;c++)y=a[c],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&_!==null){a=void 0,c=o,y=_.memoizedProps,_=_.memoizedState,d=c.stateNode;try{var Te=wl(c.type,y);a=d.getSnapshotBeforeUpdate(Te,_),d.__reactInternalSnapshotBeforeUpdate=a}catch(qe){St(c,c.return,qe)}}break;case 3:if((a&1024)!==0){if(a=o.stateNode.containerInfo,c=a.nodeType,c===9)W_(a);else if(c===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":W_(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=o.sibling,a!==null){a.return=o.return,Ln=a;break}Ln=o.return}}function QC(a,o,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:Za(a,c),d&4&&Bf(5,c);break;case 1:if(Za(a,c),d&4)if(a=c.stateNode,o===null)try{a.componentDidMount()}catch(T){St(c,c.return,T)}else{var y=wl(c.type,o.memoizedProps);o=o.memoizedState;try{a.componentDidUpdate(y,o,a.__reactInternalSnapshotBeforeUpdate)}catch(T){St(c,c.return,T)}}d&64&&HC(c),d&512&&$f(c,c.return);break;case 3:if(Za(a,c),d&64&&(a=c.updateQueue,a!==null)){if(o=null,c.child!==null)switch(c.child.tag){case 27:case 5:o=c.child.stateNode;break;case 1:o=c.child.stateNode}try{DT(a,o)}catch(T){St(c,c.return,T)}}break;case 27:o===null&&d&4&&WC(c);case 26:case 5:Za(a,c),o===null&&d&4&&KC(c),d&512&&$f(c,c.return);break;case 12:Za(a,c);break;case 31:Za(a,c),d&4&&eO(a,c);break;case 13:Za(a,c),d&4&&tO(a,c),d&64&&(a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(c=c9.bind(null,c),I9(a,c))));break;case 22:if(d=c.memoizedState!==null||Qa,!d){o=o!==null&&o.memoizedState!==null||yn,y=Qa;var _=yn;Qa=d,(yn=o)&&!_?es(a,c,(c.subtreeFlags&8772)!==0):Za(a,c),Qa=y,yn=_}break;case 30:break;default:Za(a,c)}}function JC(a){var o=a.alternate;o!==null&&(a.alternate=null,JC(o)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(o=a.stateNode,o!==null&&dc(o)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var Ht=null,Or=!1;function Ja(a,o,c){for(c=c.child;c!==null;)ZC(a,o,c),c=c.sibling}function ZC(a,o,c){if(Sn&&typeof Sn.onCommitFiberUnmount=="function")try{Sn.onCommitFiberUnmount(qt,c)}catch{}switch(c.tag){case 26:yn||ba(c,o),Ja(a,o,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:yn||ba(c,o);var d=Ht,y=Or;mo(c.type)&&(Ht=c.stateNode,Or=!1),Ja(a,o,c),Qf(c.stateNode),Ht=d,Or=y;break;case 5:yn||ba(c,o);case 6:if(d=Ht,y=Or,Ht=null,Ja(a,o,c),Ht=d,Or=y,Ht!==null)if(Or)try{(Ht.nodeType===9?Ht.body:Ht.nodeName==="HTML"?Ht.ownerDocument.body:Ht).removeChild(c.stateNode)}catch(_){St(c,o,_)}else try{Ht.removeChild(c.stateNode)}catch(_){St(c,o,_)}break;case 18:Ht!==null&&(Or?(a=Ht,HO(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,c.stateNode),Xc(a)):HO(Ht,c.stateNode));break;case 4:d=Ht,y=Or,Ht=c.stateNode.containerInfo,Or=!0,Ja(a,o,c),Ht=d,Or=y;break;case 0:case 11:case 14:case 15:so(2,c,o),yn||so(4,c,o),Ja(a,o,c);break;case 1:yn||(ba(c,o),d=c.stateNode,typeof d.componentWillUnmount=="function"&&GC(c,o,d)),Ja(a,o,c);break;case 21:Ja(a,o,c);break;case 22:yn=(d=yn)||c.memoizedState!==null,Ja(a,o,c),yn=d;break;default:Ja(a,o,c)}}function eO(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{Xc(a)}catch(c){St(o,o.return,c)}}}function tO(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Xc(a)}catch(c){St(o,o.return,c)}}function t9(a){switch(a.tag){case 31:case 13:case 19:var o=a.stateNode;return o===null&&(o=a.stateNode=new XC),o;case 22:return a=a.stateNode,o=a._retryCache,o===null&&(o=a._retryCache=new XC),o;default:throw Error(r(435,a.tag))}}function ep(a,o){var c=t9(a);o.forEach(function(d){if(!c.has(d)){c.add(d);var y=u9.bind(null,a,d);d.then(y,y)}})}function Ir(a,o){var c=o.deletions;if(c!==null)for(var d=0;d<c.length;d++){var y=c[d],_=a,T=o,D=T;e:for(;D!==null;){switch(D.tag){case 27:if(mo(D.type)){Ht=D.stateNode,Or=!1;break e}break;case 5:Ht=D.stateNode,Or=!1;break e;case 3:case 4:Ht=D.stateNode.containerInfo,Or=!0;break e}D=D.return}if(Ht===null)throw Error(r(160));ZC(_,T,y),Ht=null,Or=!1,_=y.alternate,_!==null&&(_.return=null),y.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)nO(o,a),o=o.sibling}var Ui=null;function nO(a,o){var c=a.alternate,d=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Ir(o,a),Rr(a),d&4&&(so(3,a,a.return),Bf(3,a),so(5,a,a.return));break;case 1:Ir(o,a),Rr(a),d&512&&(yn||c===null||ba(c,c.return)),d&64&&Qa&&(a=a.updateQueue,a!==null&&(d=a.callbacks,d!==null&&(c=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var y=Ui;if(Ir(o,a),Rr(a),d&512&&(yn||c===null||ba(c,c.return)),d&4){var _=c!==null?c.memoizedState:null;if(d=a.memoizedState,c===null)if(d===null)if(a.stateNode===null){e:{d=a.type,c=a.memoizedProps,y=y.ownerDocument||y;t:switch(d){case"title":_=y.getElementsByTagName("title")[0],(!_||_[sa]||_[fn]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=y.createElement(d),y.head.insertBefore(_,y.querySelector("head > title"))),Qn(_,d,c),_[fn]=a,dn(_),d=_;break e;case"link":var T=nI("link","href",y).get(d+(c.href||""));if(T){for(var D=0;D<T.length;D++)if(_=T[D],_.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&_.getAttribute("rel")===(c.rel==null?null:c.rel)&&_.getAttribute("title")===(c.title==null?null:c.title)&&_.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){T.splice(D,1);break t}}_=y.createElement(d),Qn(_,d,c),y.head.appendChild(_);break;case"meta":if(T=nI("meta","content",y).get(d+(c.content||""))){for(D=0;D<T.length;D++)if(_=T[D],_.getAttribute("content")===(c.content==null?null:""+c.content)&&_.getAttribute("name")===(c.name==null?null:c.name)&&_.getAttribute("property")===(c.property==null?null:c.property)&&_.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&_.getAttribute("charset")===(c.charSet==null?null:c.charSet)){T.splice(D,1);break t}}_=y.createElement(d),Qn(_,d,c),y.head.appendChild(_);break;default:throw Error(r(468,d))}_[fn]=a,dn(_),d=_}a.stateNode=d}else rI(y,a.type,a.stateNode);else a.stateNode=tI(y,d,a.memoizedProps);else _!==d?(_===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):_.count--,d===null?rI(y,a.type,a.stateNode):tI(y,d,a.memoizedProps)):d===null&&a.stateNode!==null&&w_(a,a.memoizedProps,c.memoizedProps)}break;case 27:Ir(o,a),Rr(a),d&512&&(yn||c===null||ba(c,c.return)),c!==null&&d&4&&w_(a,a.memoizedProps,c.memoizedProps);break;case 5:if(Ir(o,a),Rr(a),d&512&&(yn||c===null||ba(c,c.return)),a.flags&32){y=a.stateNode;try{Cr(y,"")}catch(Te){St(a,a.return,Te)}}d&4&&a.stateNode!=null&&(y=a.memoizedProps,w_(a,y,c!==null?c.memoizedProps:y)),d&1024&&(S_=!0);break;case 6:if(Ir(o,a),Rr(a),d&4){if(a.stateNode===null)throw Error(r(162));d=a.memoizedProps,c=a.stateNode;try{c.nodeValue=d}catch(Te){St(a,a.return,Te)}}break;case 3:if(gp=null,y=Ui,Ui=mp(o.containerInfo),Ir(o,a),Ui=y,Rr(a),d&4&&c!==null&&c.memoizedState.isDehydrated)try{Xc(o.containerInfo)}catch(Te){St(a,a.return,Te)}S_&&(S_=!1,rO(a));break;case 4:d=Ui,Ui=mp(a.stateNode.containerInfo),Ir(o,a),Rr(a),Ui=d;break;case 12:Ir(o,a),Rr(a);break;case 31:Ir(o,a),Rr(a),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,ep(a,d)));break;case 13:Ir(o,a),Rr(a),a.child.flags&8192&&a.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(np=ce()),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,ep(a,d)));break;case 22:y=a.memoizedState!==null;var H=c!==null&&c.memoizedState!==null,J=Qa,oe=yn;if(Qa=J||y,yn=oe||H,Ir(o,a),yn=oe,Qa=J,Rr(a),d&8192)e:for(o=a.stateNode,o._visibility=y?o._visibility&-2:o._visibility|1,y&&(c===null||H||Qa||yn||xl(a)),c=null,o=a;;){if(o.tag===5||o.tag===26){if(c===null){H=c=o;try{if(_=H.stateNode,y)T=_.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{D=H.stateNode;var he=H.memoizedProps.style,ee=he!=null&&he.hasOwnProperty("display")?he.display:null;D.style.display=ee==null||typeof ee=="boolean"?"":(""+ee).trim()}}catch(Te){St(H,H.return,Te)}}}else if(o.tag===6){if(c===null){H=o;try{H.stateNode.nodeValue=y?"":H.memoizedProps}catch(Te){St(H,H.return,Te)}}}else if(o.tag===18){if(c===null){H=o;try{var ie=H.stateNode;y?GO(ie,!0):GO(H.stateNode,!1)}catch(Te){St(H,H.return,Te)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===a)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;c===o&&(c=null),o=o.return}c===o&&(c=null),o.sibling.return=o.return,o=o.sibling}d&4&&(d=a.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,ep(a,c))));break;case 19:Ir(o,a),Rr(a),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,ep(a,d)));break;case 30:break;case 21:break;default:Ir(o,a),Rr(a)}}function Rr(a){var o=a.flags;if(o&2){try{for(var c,d=a.return;d!==null;){if(YC(d)){c=d;break}d=d.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var y=c.stateNode,_=x_(a);Zm(a,_,y);break;case 5:var T=c.stateNode;c.flags&32&&(Cr(T,""),c.flags&=-33);var D=x_(a);Zm(a,D,T);break;case 3:case 4:var H=c.stateNode.containerInfo,J=x_(a);E_(a,J,H);break;default:throw Error(r(161))}}catch(oe){St(a,a.return,oe)}a.flags&=-3}o&4096&&(a.flags&=-4097)}function rO(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var o=a;rO(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),a=a.sibling}}function Za(a,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)QC(a,o.alternate,o),o=o.sibling}function xl(a){for(a=a.child;a!==null;){var o=a;switch(o.tag){case 0:case 11:case 14:case 15:so(4,o,o.return),xl(o);break;case 1:ba(o,o.return);var c=o.stateNode;typeof c.componentWillUnmount=="function"&&GC(o,o.return,c),xl(o);break;case 27:Qf(o.stateNode);case 26:case 5:ba(o,o.return),xl(o);break;case 22:o.memoizedState===null&&xl(o);break;case 30:xl(o);break;default:xl(o)}a=a.sibling}}function es(a,o,c){for(c=c&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var d=o.alternate,y=a,_=o,T=_.flags;switch(_.tag){case 0:case 11:case 15:es(y,_,c),Bf(4,_);break;case 1:if(es(y,_,c),d=_,y=d.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(J){St(d,d.return,J)}if(d=_,y=d.updateQueue,y!==null){var D=d.stateNode;try{var H=y.shared.hiddenCallbacks;if(H!==null)for(y.shared.hiddenCallbacks=null,y=0;y<H.length;y++)kT(H[y],D)}catch(J){St(d,d.return,J)}}c&&T&64&&HC(_),$f(_,_.return);break;case 27:WC(_);case 26:case 5:es(y,_,c),c&&d===null&&T&4&&KC(_),$f(_,_.return);break;case 12:es(y,_,c);break;case 31:es(y,_,c),c&&T&4&&eO(y,_);break;case 13:es(y,_,c),c&&T&4&&tO(y,_);break;case 22:_.memoizedState===null&&es(y,_,c),$f(_,_.return);break;case 30:break;default:es(y,_,c)}o=o.sibling}}function A_(a,o){var c=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),a=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(a=o.memoizedState.cachePool.pool),a!==c&&(a!=null&&a.refCount++,c!=null&&Of(c))}function T_(a,o){a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&Of(a))}function zi(a,o,c,d){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)iO(a,o,c,d),o=o.sibling}function iO(a,o,c,d){var y=o.flags;switch(o.tag){case 0:case 11:case 15:zi(a,o,c,d),y&2048&&Bf(9,o);break;case 1:zi(a,o,c,d);break;case 3:zi(a,o,c,d),y&2048&&(a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&Of(a)));break;case 12:if(y&2048){zi(a,o,c,d),a=o.stateNode;try{var _=o.memoizedProps,T=_.id,D=_.onPostCommit;typeof D=="function"&&D(T,o.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(H){St(o,o.return,H)}}else zi(a,o,c,d);break;case 31:zi(a,o,c,d);break;case 13:zi(a,o,c,d);break;case 23:break;case 22:_=o.stateNode,T=o.alternate,o.memoizedState!==null?_._visibility&2?zi(a,o,c,d):qf(a,o):_._visibility&2?zi(a,o,c,d):(_._visibility|=2,Uc(a,o,c,d,(o.subtreeFlags&10256)!==0||!1)),y&2048&&A_(T,o);break;case 24:zi(a,o,c,d),y&2048&&T_(o.alternate,o);break;default:zi(a,o,c,d)}}function Uc(a,o,c,d,y){for(y=y&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var _=a,T=o,D=c,H=d,J=T.flags;switch(T.tag){case 0:case 11:case 15:Uc(_,T,D,H,y),Bf(8,T);break;case 23:break;case 22:var oe=T.stateNode;T.memoizedState!==null?oe._visibility&2?Uc(_,T,D,H,y):qf(_,T):(oe._visibility|=2,Uc(_,T,D,H,y)),y&&J&2048&&A_(T.alternate,T);break;case 24:Uc(_,T,D,H,y),y&&J&2048&&T_(T.alternate,T);break;default:Uc(_,T,D,H,y)}o=o.sibling}}function qf(a,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var c=a,d=o,y=d.flags;switch(d.tag){case 22:qf(c,d),y&2048&&A_(d.alternate,d);break;case 24:qf(c,d),y&2048&&T_(d.alternate,d);break;default:qf(c,d)}o=o.sibling}}var Ff=8192;function zc(a,o,c){if(a.subtreeFlags&Ff)for(a=a.child;a!==null;)aO(a,o,c),a=a.sibling}function aO(a,o,c){switch(a.tag){case 26:zc(a,o,c),a.flags&Ff&&a.memoizedState!==null&&B9(c,Ui,a.memoizedState,a.memoizedProps);break;case 5:zc(a,o,c);break;case 3:case 4:var d=Ui;Ui=mp(a.stateNode.containerInfo),zc(a,o,c),Ui=d;break;case 22:a.memoizedState===null&&(d=a.alternate,d!==null&&d.memoizedState!==null?(d=Ff,Ff=16777216,zc(a,o,c),Ff=d):zc(a,o,c));break;default:zc(a,o,c)}}function sO(a){var o=a.alternate;if(o!==null&&(a=o.child,a!==null)){o.child=null;do o=a.sibling,a.sibling=null,a=o;while(a!==null)}}function Hf(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var d=o[c];Ln=d,lO(d,a)}sO(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)oO(a),a=a.sibling}function oO(a){switch(a.tag){case 0:case 11:case 15:Hf(a),a.flags&2048&&so(9,a,a.return);break;case 3:Hf(a);break;case 12:Hf(a);break;case 22:var o=a.stateNode;a.memoizedState!==null&&o._visibility&2&&(a.return===null||a.return.tag!==13)?(o._visibility&=-3,tp(a)):Hf(a);break;default:Hf(a)}}function tp(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var d=o[c];Ln=d,lO(d,a)}sO(a)}for(a=a.child;a!==null;){switch(o=a,o.tag){case 0:case 11:case 15:so(8,o,o.return),tp(o);break;case 22:c=o.stateNode,c._visibility&2&&(c._visibility&=-3,tp(o));break;default:tp(o)}a=a.sibling}}function lO(a,o){for(;Ln!==null;){var c=Ln;switch(c.tag){case 0:case 11:case 15:so(8,c,o);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Of(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,Ln=d;else e:for(c=a;Ln!==null;){d=Ln;var y=d.sibling,_=d.return;if(JC(d),d===c){Ln=null;break e}if(y!==null){y.return=_,Ln=y;break e}Ln=_}}}var n9={getCacheForType:function(a){var o=Wn(mn),c=o.data.get(a);return c===void 0&&(c=a(),o.data.set(a,c)),c},cacheSignal:function(){return Wn(mn).controller.signal}},r9=typeof WeakMap=="function"?WeakMap:Map,_t=0,Mt=null,tt=null,it=0,Et=0,Gr=null,oo=!1,Bc=!1,C_=!1,ts=0,Zt=0,lo=0,El=0,O_=0,Kr=0,$c=0,Gf=null,Nr=null,I_=!1,np=0,cO=0,rp=1/0,ip=null,co=null,An=0,uo=null,qc=null,ns=0,R_=0,N_=null,uO=null,Kf=0,P_=null;function Yr(){return(_t&2)!==0&&it!==0?it&-it:G.T!==null?V_():am()}function fO(){if(Kr===0)if((it&536870912)===0||ft){var a=Xo;Xo<<=1,(Xo&3932160)===0&&(Xo=262144),Kr=a}else Kr=536870912;return a=Fr.current,a!==null&&(a.flags|=32),Kr}function Pr(a,o,c){(a===Mt&&(Et===2||Et===9)||a.cancelPendingCommit!==null)&&(Fc(a,0),fo(a,it,Kr,!1)),Qo(a,c),((_t&2)===0||a!==Mt)&&(a===Mt&&((_t&2)===0&&(El|=c),Zt===4&&fo(a,it,Kr,!1)),wa(a))}function dO(a,o,c){if((_t&6)!==0)throw Error(r(327));var d=!c&&(o&127)===0&&(o&a.expiredLanes)===0||Ri(a,o),y=d?s9(a,o):k_(a,o,!0),_=d;do{if(y===0){Bc&&!d&&fo(a,o,0,!1);break}else{if(c=a.current.alternate,_&&!i9(c)){y=k_(a,o,!1),_=!1;continue}if(y===2){if(_=o,a.errorRecoveryDisabledLanes&_)var T=0;else T=a.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){o=T;e:{var D=a;y=Gf;var H=D.current.memoizedState.isDehydrated;if(H&&(Fc(D,T).flags|=256),T=k_(D,T,!1),T!==2){if(C_&&!H){D.errorRecoveryDisabledLanes|=_,El|=_,y=4;break e}_=Nr,Nr=y,_!==null&&(Nr===null?Nr=_:Nr.push.apply(Nr,_))}y=T}if(_=!1,y!==2)continue}}if(y===1){Fc(a,0),fo(a,o,0,!0);break}e:{switch(d=a,_=y,_){case 0:case 1:throw Error(r(345));case 4:if((o&4194048)!==o)break;case 6:fo(d,o,Kr,!oo);break e;case 2:Nr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((o&62914560)===o&&(y=np+300-ce(),10<y)){if(fo(d,o,Kr,!oo),ra(d,0,!0)!==0)break e;ns=o,d.timeoutHandle=qO(hO.bind(null,d,c,Nr,ip,I_,o,Kr,El,$c,oo,_,"Throttled",-0,0),y);break e}hO(d,c,Nr,ip,I_,o,Kr,El,$c,oo,_,null,-0,0)}}break}while(!0);wa(a)}function hO(a,o,c,d,y,_,T,D,H,J,oe,he,ee,ie){if(a.timeoutHandle=-1,he=o.subtreeFlags,he&8192||(he&16785408)===16785408){he={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Mi},aO(o,_,he);var Te=(_&62914560)===_?np-ce():(_&4194048)===_?cO-ce():0;if(Te=$9(he,Te),Te!==null){ns=_,a.cancelPendingCommit=Te(wO.bind(null,a,o,_,c,d,y,T,D,H,oe,he,null,ee,ie)),fo(a,_,T,!J);return}}wO(a,o,_,c,d,y,T,D,H)}function i9(a){for(var o=a;;){var c=o.tag;if((c===0||c===11||c===15)&&o.flags&16384&&(c=o.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var y=c[d],_=y.getSnapshot;y=y.value;try{if(!$r(_(),y))return!1}catch{return!1}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function fo(a,o,c,d){o&=~O_,o&=~El,a.suspendedLanes|=o,a.pingedLanes&=~o,d&&(a.warmLanes|=o),d=a.expirationTimes;for(var y=o;0<y;){var _=31-Yt(y),T=1<<_;d[_]=-1,y&=~T}c!==0&&Jo(a,c,o)}function ap(){return(_t&6)===0?(Yf(0),!1):!0}function M_(){if(tt!==null){if(Et===0)var a=tt.return;else a=tt,Ha=ml=null,W0(a),kc=null,Rf=0,a=tt;for(;a!==null;)FC(a.alternate,a),a=a.return;tt=null}}function Fc(a,o){var c=a.timeoutHandle;c!==-1&&(a.timeoutHandle=-1,S9(c)),c=a.cancelPendingCommit,c!==null&&(a.cancelPendingCommit=null,c()),ns=0,M_(),Mt=a,tt=c=qa(a.current,null),it=o,Et=0,Gr=null,oo=!1,Bc=Ri(a,o),C_=!1,$c=Kr=O_=El=lo=Zt=0,Nr=Gf=null,I_=!1,(o&8)!==0&&(o|=o&32);var d=a.entangledLanes;if(d!==0)for(a=a.entanglements,d&=o;0<d;){var y=31-Yt(d),_=1<<y;o|=a[y],d&=~_}return ts=o,Tm(),c}function mO(a,o){Je=null,G.H=Vf,o===Mc||o===km?(o=RT(),Et=3):o===L0?(o=RT(),Et=4):Et=o===f_?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Gr=o,tt===null&&(Zt=1,Ym(a,fi(o,a.current)))}function pO(){var a=Fr.current;return a===null?!0:(it&4194048)===it?pi===null:(it&62914560)===it||(it&536870912)!==0?a===pi:!1}function gO(){var a=G.H;return G.H=Vf,a===null?Vf:a}function yO(){var a=G.A;return G.A=n9,a}function sp(){Zt=4,oo||(it&4194048)!==it&&Fr.current!==null||(Bc=!0),(lo&134217727)===0&&(El&134217727)===0||Mt===null||fo(Mt,it,Kr,!1)}function k_(a,o,c){var d=_t;_t|=2;var y=gO(),_=yO();(Mt!==a||it!==o)&&(ip=null,Fc(a,o)),o=!1;var T=Zt;e:do try{if(Et!==0&&tt!==null){var D=tt,H=Gr;switch(Et){case 8:M_(),T=6;break e;case 3:case 2:case 9:case 6:Fr.current===null&&(o=!0);var J=Et;if(Et=0,Gr=null,Hc(a,D,H,J),c&&Bc){T=0;break e}break;default:J=Et,Et=0,Gr=null,Hc(a,D,H,J)}}a9(),T=Zt;break}catch(oe){mO(a,oe)}while(!0);return o&&a.shellSuspendCounter++,Ha=ml=null,_t=d,G.H=y,G.A=_,tt===null&&(Mt=null,it=0,Tm()),T}function a9(){for(;tt!==null;)vO(tt)}function s9(a,o){var c=_t;_t|=2;var d=gO(),y=yO();Mt!==a||it!==o?(ip=null,rp=ce()+500,Fc(a,o)):Bc=Ri(a,o);e:do try{if(Et!==0&&tt!==null){o=tt;var _=Gr;t:switch(Et){case 1:Et=0,Gr=null,Hc(a,o,_,1);break;case 2:case 9:if(OT(_)){Et=0,Gr=null,_O(o);break}o=function(){Et!==2&&Et!==9||Mt!==a||(Et=7),wa(a)},_.then(o,o);break e;case 3:Et=7;break e;case 4:Et=5;break e;case 7:OT(_)?(Et=0,Gr=null,_O(o)):(Et=0,Gr=null,Hc(a,o,_,7));break;case 5:var T=null;switch(tt.tag){case 26:T=tt.memoizedState;case 5:case 27:var D=tt;if(T?iI(T):D.stateNode.complete){Et=0,Gr=null;var H=D.sibling;if(H!==null)tt=H;else{var J=D.return;J!==null?(tt=J,op(J)):tt=null}break t}}Et=0,Gr=null,Hc(a,o,_,5);break;case 6:Et=0,Gr=null,Hc(a,o,_,6);break;case 8:M_(),Zt=6;break e;default:throw Error(r(462))}}o9();break}catch(oe){mO(a,oe)}while(!0);return Ha=ml=null,G.H=d,G.A=y,_t=c,tt!==null?0:(Mt=null,it=0,Tm(),Zt)}function o9(){for(;tt!==null&&!lc();)vO(tt)}function vO(a){var o=$C(a.alternate,a,ts);a.memoizedProps=a.pendingProps,o===null?op(a):tt=o}function _O(a){var o=a,c=o.alternate;switch(o.tag){case 15:case 0:o=jC(c,o,o.pendingProps,o.type,void 0,it);break;case 11:o=jC(c,o,o.pendingProps,o.type.render,o.ref,it);break;case 5:W0(o);default:FC(c,o),o=tt=yT(o,ts),o=$C(c,o,ts)}a.memoizedProps=a.pendingProps,o===null?op(a):tt=o}function Hc(a,o,c,d){Ha=ml=null,W0(o),kc=null,Rf=0;var y=o.return;try{if(Wz(a,y,o,c,it)){Zt=1,Ym(a,fi(c,a.current)),tt=null;return}}catch(_){if(y!==null)throw tt=y,_;Zt=1,Ym(a,fi(c,a.current)),tt=null;return}o.flags&32768?(ft||d===1?a=!0:Bc||(it&536870912)!==0?a=!1:(oo=a=!0,(d===2||d===9||d===3||d===6)&&(d=Fr.current,d!==null&&d.tag===13&&(d.flags|=16384))),bO(o,a)):op(o)}function op(a){var o=a;do{if((o.flags&32768)!==0){bO(o,oo);return}a=o.return;var c=Jz(o.alternate,o,ts);if(c!==null){tt=c;return}if(o=o.sibling,o!==null){tt=o;return}tt=o=a}while(o!==null);Zt===0&&(Zt=5)}function bO(a,o){do{var c=Zz(a.alternate,a);if(c!==null){c.flags&=32767,tt=c;return}if(c=a.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!o&&(a=a.sibling,a!==null)){tt=a;return}tt=a=c}while(a!==null);Zt=6,tt=null}function wO(a,o,c,d,y,_,T,D,H){a.cancelPendingCommit=null;do lp();while(An!==0);if((_t&6)!==0)throw Error(r(327));if(o!==null){if(o===a.current)throw Error(r(177));if(_=o.lanes|o.childLanes,_|=x0,h0(a,c,_,T,D,H),a===Mt&&(tt=Mt=null,it=0),qc=o,uo=a,ns=c,R_=_,N_=y,uO=d,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,f9($e,function(){return TO(),null})):(a.callbackNode=null,a.callbackPriority=0),d=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||d){d=G.T,G.T=null,y=ne.p,ne.p=2,T=_t,_t|=4;try{e9(a,o,c)}finally{_t=T,ne.p=y,G.T=d}}An=1,xO(),EO(),SO()}}function xO(){if(An===1){An=0;var a=uo,o=qc,c=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||c){c=G.T,G.T=null;var d=ne.p;ne.p=2;var y=_t;_t|=4;try{nO(o,a);var _=G_,T=lT(a.containerInfo),D=_.focusedElem,H=_.selectionRange;if(T!==D&&D&&D.ownerDocument&&oT(D.ownerDocument.documentElement,D)){if(H!==null&&y0(D)){var J=H.start,oe=H.end;if(oe===void 0&&(oe=J),"selectionStart"in D)D.selectionStart=J,D.selectionEnd=Math.min(oe,D.value.length);else{var he=D.ownerDocument||document,ee=he&&he.defaultView||window;if(ee.getSelection){var ie=ee.getSelection(),Te=D.textContent.length,qe=Math.min(H.start,Te),Nt=H.end===void 0?qe:Math.min(H.end,Te);!ie.extend&&qe>Nt&&(T=Nt,Nt=qe,qe=T);var Y=sT(D,qe),K=sT(D,Nt);if(Y&&K&&(ie.rangeCount!==1||ie.anchorNode!==Y.node||ie.anchorOffset!==Y.offset||ie.focusNode!==K.node||ie.focusOffset!==K.offset)){var Q=he.createRange();Q.setStart(Y.node,Y.offset),ie.removeAllRanges(),qe>Nt?(ie.addRange(Q),ie.extend(K.node,K.offset)):(Q.setEnd(K.node,K.offset),ie.addRange(Q))}}}}for(he=[],ie=D;ie=ie.parentNode;)ie.nodeType===1&&he.push({element:ie,left:ie.scrollLeft,top:ie.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<he.length;D++){var ue=he[D];ue.element.scrollLeft=ue.left,ue.element.scrollTop=ue.top}}bp=!!H_,G_=H_=null}finally{_t=y,ne.p=d,G.T=c}}a.current=o,An=2}}function EO(){if(An===2){An=0;var a=uo,o=qc,c=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||c){c=G.T,G.T=null;var d=ne.p;ne.p=2;var y=_t;_t|=4;try{QC(a,o.alternate,o)}finally{_t=y,ne.p=d,G.T=c}}An=3}}function SO(){if(An===4||An===3){An=0,Wo();var a=uo,o=qc,c=ns,d=uO;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?An=5:(An=0,qc=uo=null,AO(a,a.pendingLanes));var y=a.pendingLanes;if(y===0&&(co=null),Ua(c),o=o.stateNode,Sn&&typeof Sn.onCommitFiberRoot=="function")try{Sn.onCommitFiberRoot(qt,o,void 0,(o.current.flags&128)===128)}catch{}if(d!==null){o=G.T,y=ne.p,ne.p=2,G.T=null;try{for(var _=a.onRecoverableError,T=0;T<d.length;T++){var D=d[T];_(D.value,{componentStack:D.stack})}}finally{G.T=o,ne.p=y}}(ns&3)!==0&&lp(),wa(a),y=a.pendingLanes,(c&261930)!==0&&(y&42)!==0?a===P_?Kf++:(Kf=0,P_=a):Kf=0,Yf(0)}}function AO(a,o){(a.pooledCacheLanes&=o)===0&&(o=a.pooledCache,o!=null&&(a.pooledCache=null,Of(o)))}function lp(){return xO(),EO(),SO(),TO()}function TO(){if(An!==5)return!1;var a=uo,o=R_;R_=0;var c=Ua(ns),d=G.T,y=ne.p;try{ne.p=32>c?32:c,G.T=null,c=N_,N_=null;var _=uo,T=ns;if(An=0,qc=uo=null,ns=0,(_t&6)!==0)throw Error(r(331));var D=_t;if(_t|=4,oO(_.current),iO(_,_.current,T,c),_t=D,Yf(0,!1),Sn&&typeof Sn.onPostCommitFiberRoot=="function")try{Sn.onPostCommitFiberRoot(qt,_)}catch{}return!0}finally{ne.p=y,G.T=d,AO(a,o)}}function CO(a,o,c){o=fi(c,o),o=u_(a.stateNode,o,2),a=ro(a,o,2),a!==null&&(Qo(a,2),wa(a))}function St(a,o,c){if(a.tag===3)CO(a,a,c);else for(;o!==null;){if(o.tag===3){CO(o,a,c);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(co===null||!co.has(d))){a=fi(c,a),c=OC(2),d=ro(o,c,2),d!==null&&(IC(c,d,o,a),Qo(d,2),wa(d));break}}o=o.return}}function D_(a,o,c){var d=a.pingCache;if(d===null){d=a.pingCache=new r9;var y=new Set;d.set(o,y)}else y=d.get(o),y===void 0&&(y=new Set,d.set(o,y));y.has(c)||(C_=!0,y.add(c),a=l9.bind(null,a,o,c),o.then(a,a))}function l9(a,o,c){var d=a.pingCache;d!==null&&d.delete(o),a.pingedLanes|=a.suspendedLanes&c,a.warmLanes&=~c,Mt===a&&(it&c)===c&&(Zt===4||Zt===3&&(it&62914560)===it&&300>ce()-np?(_t&2)===0&&Fc(a,0):O_|=c,$c===it&&($c=0)),wa(a)}function OO(a,o){o===0&&(o=im()),a=fl(a,o),a!==null&&(Qo(a,o),wa(a))}function c9(a){var o=a.memoizedState,c=0;o!==null&&(c=o.retryLane),OO(a,c)}function u9(a,o){var c=0;switch(a.tag){case 31:case 13:var d=a.stateNode,y=a.memoizedState;y!==null&&(c=y.retryLane);break;case 19:d=a.stateNode;break;case 22:d=a.stateNode._retryCache;break;default:throw Error(r(314))}d!==null&&d.delete(o),OO(a,c)}function f9(a,o){return en(a,o)}var cp=null,Gc=null,j_=!1,up=!1,L_=!1,ho=0;function wa(a){a!==Gc&&a.next===null&&(Gc===null?cp=Gc=a:Gc=Gc.next=a),up=!0,j_||(j_=!0,h9())}function Yf(a,o){if(!L_&&up){L_=!0;do for(var c=!1,d=cp;d!==null;){if(a!==0){var y=d.pendingLanes;if(y===0)var _=0;else{var T=d.suspendedLanes,D=d.pingedLanes;_=(1<<31-Yt(42|a)+1)-1,_&=y&~(T&~D),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(c=!0,PO(d,_))}else _=it,_=ra(d,d===Mt?_:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(_&3)===0||Ri(d,_)||(c=!0,PO(d,_));d=d.next}while(c);L_=!1}}function d9(){IO()}function IO(){up=j_=!1;var a=0;ho!==0&&E9()&&(a=ho);for(var o=ce(),c=null,d=cp;d!==null;){var y=d.next,_=RO(d,o);_===0?(d.next=null,c===null?cp=y:c.next=y,y===null&&(Gc=c)):(c=d,(a!==0||(_&3)!==0)&&(up=!0)),d=y}An!==0&&An!==5||Yf(a),ho!==0&&(ho=0)}function RO(a,o){for(var c=a.suspendedLanes,d=a.pingedLanes,y=a.expirationTimes,_=a.pendingLanes&-62914561;0<_;){var T=31-Yt(_),D=1<<T,H=y[T];H===-1?((D&c)===0||(D&d)!==0)&&(y[T]=d0(D,o)):H<=o&&(a.expiredLanes|=D),_&=~D}if(o=Mt,c=it,c=ra(a,a===o?c:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),d=a.callbackNode,c===0||a===o&&(Et===2||Et===9)||a.cancelPendingCommit!==null)return d!==null&&d!==null&&ea(d),a.callbackNode=null,a.callbackPriority=0;if((c&3)===0||Ri(a,c)){if(o=c&-c,o===a.callbackPriority)return o;switch(d!==null&&ea(d),Ua(c)){case 2:case 8:c=Ke;break;case 32:c=$e;break;case 268435456:c=tn;break;default:c=$e}return d=NO.bind(null,a),c=en(c,d),a.callbackPriority=o,a.callbackNode=c,o}return d!==null&&d!==null&&ea(d),a.callbackPriority=2,a.callbackNode=null,2}function NO(a,o){if(An!==0&&An!==5)return a.callbackNode=null,a.callbackPriority=0,null;var c=a.callbackNode;if(lp()&&a.callbackNode!==c)return null;var d=it;return d=ra(a,a===Mt?d:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),d===0?null:(dO(a,d,o),RO(a,ce()),a.callbackNode!=null&&a.callbackNode===c?NO.bind(null,a):null)}function PO(a,o){if(lp())return null;dO(a,o,!0)}function h9(){A9(function(){(_t&6)!==0?en(Re,d9):IO()})}function V_(){if(ho===0){var a=Nc;a===0&&(a=ta,ta<<=1,(ta&261888)===0&&(ta=256)),ho=a}return ho}function MO(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:gc(""+a)}function kO(a,o){var c=o.ownerDocument.createElement("input");return c.name=o.name,c.value=o.value,a.id&&c.setAttribute("form",a.id),o.parentNode.insertBefore(c,o),a=new FormData(a),c.parentNode.removeChild(c),a}function m9(a,o,c,d,y){if(o==="submit"&&c&&c.stateNode===y){var _=MO((y[Dn]||null).action),T=d.submitter;T&&(o=(o=T[Dn]||null)?MO(o.formAction):T.getAttribute("formAction"),o!==null&&(_=o,T=null));var D=new ma("action","action",null,d,y);a.push({event:D,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(ho!==0){var H=T?kO(y,T):new FormData(y);i_(c,{pending:!0,data:H,method:y.method,action:_},null,H)}}else typeof _=="function"&&(D.preventDefault(),H=T?kO(y,T):new FormData(y),i_(c,{pending:!0,data:H,method:y.method,action:_},_,H))},currentTarget:y}]})}}for(var U_=0;U_<w0.length;U_++){var z_=w0[U_],p9=z_.toLowerCase(),g9=z_[0].toUpperCase()+z_.slice(1);Vi(p9,"on"+g9)}Vi(fT,"onAnimationEnd"),Vi(dT,"onAnimationIteration"),Vi(hT,"onAnimationStart"),Vi("dblclick","onDoubleClick"),Vi("focusin","onFocus"),Vi("focusout","onBlur"),Vi(Pz,"onTransitionRun"),Vi(Mz,"onTransitionStart"),Vi(kz,"onTransitionCancel"),Vi(mT,"onTransitionEnd"),ua("onMouseEnter",["mouseout","mouseover"]),ua("onMouseLeave",["mouseout","mouseover"]),ua("onPointerEnter",["pointerout","pointerover"]),ua("onPointerLeave",["pointerout","pointerover"]),ca("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ca("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ca("onBeforeInput",["compositionend","keypress","textInput","paste"]),ca("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ca("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ca("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),y9=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wf));function DO(a,o){o=(o&4)!==0;for(var c=0;c<a.length;c++){var d=a[c],y=d.event;d=d.listeners;e:{var _=void 0;if(o)for(var T=d.length-1;0<=T;T--){var D=d[T],H=D.instance,J=D.currentTarget;if(D=D.listener,H!==_&&y.isPropagationStopped())break e;_=D,y.currentTarget=J;try{_(y)}catch(oe){Am(oe)}y.currentTarget=null,_=H}else for(T=0;T<d.length;T++){if(D=d[T],H=D.instance,J=D.currentTarget,D=D.listener,H!==_&&y.isPropagationStopped())break e;_=D,y.currentTarget=J;try{_(y)}catch(oe){Am(oe)}y.currentTarget=null,_=H}}}}function nt(a,o){var c=o[fc];c===void 0&&(c=o[fc]=new Set);var d=a+"__bubble";c.has(d)||(jO(o,a,2,!1),c.add(d))}function B_(a,o,c){var d=0;o&&(d|=4),jO(c,a,d,o)}var fp="_reactListening"+Math.random().toString(36).slice(2);function $_(a){if(!a[fp]){a[fp]=!0,of.forEach(function(c){c!=="selectionchange"&&(y9.has(c)||B_(c,!1,a),B_(c,!0,a))});var o=a.nodeType===9?a:a.ownerDocument;o===null||o[fp]||(o[fp]=!0,B_("selectionchange",!1,o))}}function jO(a,o,c,d){switch(fI(o)){case 2:var y=H9;break;case 8:y=G9;break;default:y=rb}c=y.bind(null,o,c,a),y=void 0,!rl||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(y=!0),d?y!==void 0?a.addEventListener(o,c,{capture:!0,passive:y}):a.addEventListener(o,c,!0):y!==void 0?a.addEventListener(o,c,{passive:y}):a.addEventListener(o,c,!1)}function q_(a,o,c,d,y){var _=d;if((o&1)===0&&(o&2)===0&&d!==null)e:for(;;){if(d===null)return;var T=d.tag;if(T===3||T===4){var D=d.stateNode.containerInfo;if(D===y)break;if(T===4)for(T=d.return;T!==null;){var H=T.tag;if((H===3||H===4)&&T.stateNode.containerInfo===y)return;T=T.return}for(;D!==null;){if(T=oa(D),T===null)return;if(H=T.tag,H===5||H===6||H===26||H===27){d=_=T;continue e}D=D.parentNode}}d=d.return}Ks(function(){var J=_,oe=oi(c),he=[];e:{var ee=pT.get(a);if(ee!==void 0){var ie=ma,Te=a;switch(a){case"keypress":if(al(c)===0)break e;case"keydown":case"keyup":ie=xm;break;case"focusin":Te="focus",ie=ol;break;case"focusout":Te="blur",ie=ol;break;case"beforeblur":case"afterblur":ie=ol;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=bf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=hm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=x;break;case fT:case dT:case hT:ie=pm;break;case mT:ie=U;break;case"scroll":case"scrollend":ie=_f;break;case"wheel":ie=te;break;case"copy":case"cut":case"paste":ie=gm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=$a;break;case"toggle":case"beforetoggle":ie=Qe}var qe=(o&4)!==0,Nt=!qe&&(a==="scroll"||a==="scrollend"),Y=qe?ee!==null?ee+"Capture":null:ee;qe=[];for(var K=J,Q;K!==null;){var ue=K;if(Q=ue.stateNode,ue=ue.tag,ue!==5&&ue!==26&&ue!==27||Q===null||Y===null||(ue=ki(K,Y),ue!=null&&qe.push(Xf(K,ue,Q))),Nt)break;K=K.return}0<qe.length&&(ee=new ie(ee,Te,null,c,oe),he.push({event:ee,listeners:qe}))}}if((o&7)===0){e:{if(ee=a==="mouseover"||a==="pointerover",ie=a==="mouseout"||a==="pointerout",ee&&c!==gf&&(Te=c.relatedTarget||c.fromElement)&&(oa(Te)||Te[aa]))break e;if((ie||ee)&&(ee=oe.window===oe?oe:(ee=oe.ownerDocument)?ee.defaultView||ee.parentWindow:window,ie?(Te=c.relatedTarget||c.toElement,ie=J,Te=Te?oa(Te):null,Te!==null&&(Nt=s(Te),qe=Te.tag,Te!==Nt||qe!==5&&qe!==27&&qe!==6)&&(Te=null)):(ie=null,Te=J),ie!==Te)){if(qe=bf,ue="onMouseLeave",Y="onMouseEnter",K="mouse",(a==="pointerout"||a==="pointerover")&&(qe=$a,ue="onPointerLeave",Y="onPointerEnter",K="pointer"),Nt=ie==null?ee:zr(ie),Q=Te==null?ee:zr(Te),ee=new qe(ue,K+"leave",ie,c,oe),ee.target=Nt,ee.relatedTarget=Q,ue=null,oa(oe)===J&&(qe=new qe(Y,K+"enter",Te,c,oe),qe.target=Q,qe.relatedTarget=Nt,ue=qe),Nt=ue,ie&&Te)t:{for(qe=v9,Y=ie,K=Te,Q=0,ue=Y;ue;ue=qe(ue))Q++;ue=0;for(var Le=K;Le;Le=qe(Le))ue++;for(;0<Q-ue;)Y=qe(Y),Q--;for(;0<ue-Q;)K=qe(K),ue--;for(;Q--;){if(Y===K||K!==null&&Y===K.alternate){qe=Y;break t}Y=qe(Y),K=qe(K)}qe=null}else qe=null;ie!==null&&LO(he,ee,ie,qe,!1),Te!==null&&Nt!==null&&LO(he,Nt,Te,qe,!0)}}e:{if(ee=J?zr(J):window,ie=ee.nodeName&&ee.nodeName.toLowerCase(),ie==="select"||ie==="input"&&ee.type==="file")var mt=eT;else if(JA(ee))if(tT)mt=Iz;else{mt=Cz;var Ne=Tz}else ie=ee.nodeName,!ie||ie.toLowerCase()!=="input"||ee.type!=="checkbox"&&ee.type!=="radio"?J&&pc(J.elementType)&&(mt=eT):mt=Oz;if(mt&&(mt=mt(a,J))){ZA(he,mt,c,oe);break e}Ne&&Ne(a,ee,J),a==="focusout"&&J&&ee.type==="number"&&J.memoizedProps.value!=null&&hf(ee,"number",ee.value)}switch(Ne=J?zr(J):window,a){case"focusin":(JA(Ne)||Ne.contentEditable==="true")&&(Ec=Ne,v0=J,Af=null);break;case"focusout":Af=v0=Ec=null;break;case"mousedown":_0=!0;break;case"contextmenu":case"mouseup":case"dragend":_0=!1,cT(he,c,oe);break;case"selectionchange":if(Nz)break;case"keydown":case"keyup":cT(he,c,oe)}var Ze;if(vt)e:{switch(a){case"compositionstart":var at="onCompositionStart";break e;case"compositionend":at="onCompositionEnd";break e;case"compositionupdate":at="onCompositionUpdate";break e}at=void 0}else xc?ll(a,c)&&(at="onCompositionEnd"):a==="keydown"&&c.keyCode===229&&(at="onCompositionStart");at&&(ya&&c.locale!=="ko"&&(xc||at!=="onCompositionStart"?at==="onCompositionEnd"&&xc&&(Ze=vf()):(ha=oe,yf="value"in ha?ha.value:ha.textContent,xc=!0)),Ne=dp(J,at),0<Ne.length&&(at=new ga(at,a,null,c,oe),he.push({event:at,listeners:Ne}),Ze?at.data=Ze:(Ze=wc(c),Ze!==null&&(at.data=Ze)))),(Ze=ci?xz(a,c):Ez(a,c))&&(at=dp(J,"onBeforeInput"),0<at.length&&(Ne=new ga("onBeforeInput","beforeinput",null,c,oe),he.push({event:Ne,listeners:at}),Ne.data=Ze)),m9(he,a,J,c,oe)}DO(he,o)})}function Xf(a,o,c){return{instance:a,listener:o,currentTarget:c}}function dp(a,o){for(var c=o+"Capture",d=[];a!==null;){var y=a,_=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||_===null||(y=ki(a,c),y!=null&&d.unshift(Xf(a,y,_)),y=ki(a,o),y!=null&&d.push(Xf(a,y,_))),a.tag===3)return d;a=a.return}return[]}function v9(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function LO(a,o,c,d,y){for(var _=o._reactName,T=[];c!==null&&c!==d;){var D=c,H=D.alternate,J=D.stateNode;if(D=D.tag,H!==null&&H===d)break;D!==5&&D!==26&&D!==27||J===null||(H=J,y?(J=ki(c,_),J!=null&&T.unshift(Xf(c,J,H))):y||(J=ki(c,_),J!=null&&T.push(Xf(c,J,H)))),c=c.return}T.length!==0&&a.push({event:o,listeners:T})}var _9=/\r\n?/g,b9=/\u0000|\uFFFD/g;function VO(a){return(typeof a=="string"?a:""+a).replace(_9,`
`).replace(b9,"")}function UO(a,o){return o=VO(o),VO(a)===o}function Rt(a,o,c,d,y,_){switch(c){case"children":typeof d=="string"?o==="body"||o==="textarea"&&d===""||Cr(a,d):(typeof d=="number"||typeof d=="bigint")&&o!=="body"&&Cr(a,""+d);break;case"className":Br(a,"class",d);break;case"tabIndex":Br(a,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Br(a,c,d);break;case"style":pf(a,d,_);break;case"data":if(o!=="object"){Br(a,"data",d);break}case"src":case"href":if(d===""&&(o!=="a"||c!=="href")){a.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){a.removeAttribute(c);break}d=gc(""+d),a.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){a.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(c==="formAction"?(o!=="input"&&Rt(a,o,"name",y.name,y,null),Rt(a,o,"formEncType",y.formEncType,y,null),Rt(a,o,"formMethod",y.formMethod,y,null),Rt(a,o,"formTarget",y.formTarget,y,null)):(Rt(a,o,"encType",y.encType,y,null),Rt(a,o,"method",y.method,y,null),Rt(a,o,"target",y.target,y,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){a.removeAttribute(c);break}d=gc(""+d),a.setAttribute(c,d);break;case"onClick":d!=null&&(a.onclick=Mi);break;case"onScroll":d!=null&&nt("scroll",a);break;case"onScrollEnd":d!=null&&nt("scrollend",a);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(c=d.__html,c!=null){if(y.children!=null)throw Error(r(60));a.innerHTML=c}}break;case"multiple":a.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":a.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){a.removeAttribute("xlink:href");break}c=gc(""+d),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(c,""+d):a.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(c,""):a.removeAttribute(c);break;case"capture":case"download":d===!0?a.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(c,d):a.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?a.setAttribute(c,d):a.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?a.removeAttribute(c):a.setAttribute(c,d);break;case"popover":nt("beforetoggle",a),nt("toggle",a),hc(a,"popover",d);break;case"xlinkActuate":hn(a,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":hn(a,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":hn(a,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":hn(a,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":hn(a,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":hn(a,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":hn(a,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":hn(a,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":hn(a,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":hc(a,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=dm.get(c)||c,hc(a,c,d))}}function F_(a,o,c,d,y,_){switch(c){case"style":pf(a,d,_);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(c=d.__html,c!=null){if(y.children!=null)throw Error(r(60));a.innerHTML=c}}break;case"children":typeof d=="string"?Cr(a,d):(typeof d=="number"||typeof d=="bigint")&&Cr(a,""+d);break;case"onScroll":d!=null&&nt("scroll",a);break;case"onScrollEnd":d!=null&&nt("scrollend",a);break;case"onClick":d!=null&&(a.onclick=Mi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!lf.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(y=c.endsWith("Capture"),o=c.slice(2,y?c.length-7:void 0),_=a[Dn]||null,_=_!=null?_[c]:null,typeof _=="function"&&a.removeEventListener(o,_,y),typeof d=="function")){typeof _!="function"&&_!==null&&(c in a?a[c]=null:a.hasAttribute(c)&&a.removeAttribute(c)),a.addEventListener(o,d,y);break e}c in a?a[c]=d:d===!0?a.setAttribute(c,""):hc(a,c,d)}}}function Qn(a,o,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":nt("error",a),nt("load",a);var d=!1,y=!1,_;for(_ in c)if(c.hasOwnProperty(_)){var T=c[_];if(T!=null)switch(_){case"src":d=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:Rt(a,o,_,T,c,null)}}y&&Rt(a,o,"srcSet",c.srcSet,c,null),d&&Rt(a,o,"src",c.src,c,null);return;case"input":nt("invalid",a);var D=_=T=y=null,H=null,J=null;for(d in c)if(c.hasOwnProperty(d)){var oe=c[d];if(oe!=null)switch(d){case"name":y=oe;break;case"type":T=oe;break;case"checked":H=oe;break;case"defaultChecked":J=oe;break;case"value":_=oe;break;case"defaultValue":D=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(r(137,o));break;default:Rt(a,o,d,oe,c,null)}}cm(a,_,D,H,J,T,y,!1);return;case"select":nt("invalid",a),d=T=_=null;for(y in c)if(c.hasOwnProperty(y)&&(D=c[y],D!=null))switch(y){case"value":_=D;break;case"defaultValue":T=D;break;case"multiple":d=D;default:Rt(a,o,y,D,c,null)}o=_,c=T,a.multiple=!!d,o!=null?qs(a,!!d,o,!1):c!=null&&qs(a,!!d,c,!0);return;case"textarea":nt("invalid",a),_=y=d=null;for(T in c)if(c.hasOwnProperty(T)&&(D=c[T],D!=null))switch(T){case"value":d=D;break;case"defaultValue":y=D;break;case"children":_=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(r(91));break;default:Rt(a,o,T,D,c,null)}Fs(a,d,y,_);return;case"option":for(H in c)if(c.hasOwnProperty(H)&&(d=c[H],d!=null))switch(H){case"selected":a.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Rt(a,o,H,d,c,null)}return;case"dialog":nt("beforetoggle",a),nt("toggle",a),nt("cancel",a),nt("close",a);break;case"iframe":case"object":nt("load",a);break;case"video":case"audio":for(d=0;d<Wf.length;d++)nt(Wf[d],a);break;case"image":nt("error",a),nt("load",a);break;case"details":nt("toggle",a);break;case"embed":case"source":case"link":nt("error",a),nt("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in c)if(c.hasOwnProperty(J)&&(d=c[J],d!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:Rt(a,o,J,d,c,null)}return;default:if(pc(o)){for(oe in c)c.hasOwnProperty(oe)&&(d=c[oe],d!==void 0&&F_(a,o,oe,d,c,void 0));return}}for(D in c)c.hasOwnProperty(D)&&(d=c[D],d!=null&&Rt(a,o,D,d,c,null))}function w9(a,o,c,d){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,_=null,T=null,D=null,H=null,J=null,oe=null;for(ie in c){var he=c[ie];if(c.hasOwnProperty(ie)&&he!=null)switch(ie){case"checked":break;case"value":break;case"defaultValue":H=he;default:d.hasOwnProperty(ie)||Rt(a,o,ie,null,d,he)}}for(var ee in d){var ie=d[ee];if(he=c[ee],d.hasOwnProperty(ee)&&(ie!=null||he!=null))switch(ee){case"type":_=ie;break;case"name":y=ie;break;case"checked":J=ie;break;case"defaultChecked":oe=ie;break;case"value":T=ie;break;case"defaultValue":D=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(r(137,o));break;default:ie!==he&&Rt(a,o,ee,ie,d,he)}}mc(a,T,D,H,J,oe,_,y);return;case"select":ie=T=D=ee=null;for(_ in c)if(H=c[_],c.hasOwnProperty(_)&&H!=null)switch(_){case"value":break;case"multiple":ie=H;default:d.hasOwnProperty(_)||Rt(a,o,_,null,d,H)}for(y in d)if(_=d[y],H=c[y],d.hasOwnProperty(y)&&(_!=null||H!=null))switch(y){case"value":ee=_;break;case"defaultValue":D=_;break;case"multiple":T=_;default:_!==H&&Rt(a,o,y,_,d,H)}o=D,c=T,d=ie,ee!=null?qs(a,!!c,ee,!1):!!d!=!!c&&(o!=null?qs(a,!!c,o,!0):qs(a,!!c,c?[]:"",!1));return;case"textarea":ie=ee=null;for(D in c)if(y=c[D],c.hasOwnProperty(D)&&y!=null&&!d.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:Rt(a,o,D,null,d,y)}for(T in d)if(y=d[T],_=c[T],d.hasOwnProperty(T)&&(y!=null||_!=null))switch(T){case"value":ee=y;break;case"defaultValue":ie=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(r(91));break;default:y!==_&&Rt(a,o,T,y,d,_)}um(a,ee,ie);return;case"option":for(var Te in c)if(ee=c[Te],c.hasOwnProperty(Te)&&ee!=null&&!d.hasOwnProperty(Te))switch(Te){case"selected":a.selected=!1;break;default:Rt(a,o,Te,null,d,ee)}for(H in d)if(ee=d[H],ie=c[H],d.hasOwnProperty(H)&&ee!==ie&&(ee!=null||ie!=null))switch(H){case"selected":a.selected=ee&&typeof ee!="function"&&typeof ee!="symbol";break;default:Rt(a,o,H,ee,d,ie)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var qe in c)ee=c[qe],c.hasOwnProperty(qe)&&ee!=null&&!d.hasOwnProperty(qe)&&Rt(a,o,qe,null,d,ee);for(J in d)if(ee=d[J],ie=c[J],d.hasOwnProperty(J)&&ee!==ie&&(ee!=null||ie!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(r(137,o));break;default:Rt(a,o,J,ee,d,ie)}return;default:if(pc(o)){for(var Nt in c)ee=c[Nt],c.hasOwnProperty(Nt)&&ee!==void 0&&!d.hasOwnProperty(Nt)&&F_(a,o,Nt,void 0,d,ee);for(oe in d)ee=d[oe],ie=c[oe],!d.hasOwnProperty(oe)||ee===ie||ee===void 0&&ie===void 0||F_(a,o,oe,ee,d,ie);return}}for(var Y in c)ee=c[Y],c.hasOwnProperty(Y)&&ee!=null&&!d.hasOwnProperty(Y)&&Rt(a,o,Y,null,d,ee);for(he in d)ee=d[he],ie=c[he],!d.hasOwnProperty(he)||ee===ie||ee==null&&ie==null||Rt(a,o,he,ee,d,ie)}function zO(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function x9(){if(typeof performance.getEntriesByType=="function"){for(var a=0,o=0,c=performance.getEntriesByType("resource"),d=0;d<c.length;d++){var y=c[d],_=y.transferSize,T=y.initiatorType,D=y.duration;if(_&&D&&zO(T)){for(T=0,D=y.responseEnd,d+=1;d<c.length;d++){var H=c[d],J=H.startTime;if(J>D)break;var oe=H.transferSize,he=H.initiatorType;oe&&zO(he)&&(H=H.responseEnd,T+=oe*(H<D?1:(D-J)/(H-J)))}if(--d,o+=8*(_+T)/(y.duration/1e3),a++,10<a)break}}if(0<a)return o/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var H_=null,G_=null;function hp(a){return a.nodeType===9?a:a.ownerDocument}function BO(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function $O(a,o){if(a===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&o==="foreignObject"?0:a}function K_(a,o){return a==="textarea"||a==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Y_=null;function E9(){var a=window.event;return a&&a.type==="popstate"?a===Y_?!1:(Y_=a,!0):(Y_=null,!1)}var qO=typeof setTimeout=="function"?setTimeout:void 0,S9=typeof clearTimeout=="function"?clearTimeout:void 0,FO=typeof Promise=="function"?Promise:void 0,A9=typeof queueMicrotask=="function"?queueMicrotask:typeof FO<"u"?function(a){return FO.resolve(null).then(a).catch(T9)}:qO;function T9(a){setTimeout(function(){throw a})}function mo(a){return a==="head"}function HO(a,o){var c=o,d=0;do{var y=c.nextSibling;if(a.removeChild(c),y&&y.nodeType===8)if(c=y.data,c==="/$"||c==="/&"){if(d===0){a.removeChild(y),Xc(o);return}d--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")d++;else if(c==="html")Qf(a.ownerDocument.documentElement);else if(c==="head"){c=a.ownerDocument.head,Qf(c);for(var _=c.firstChild;_;){var T=_.nextSibling,D=_.nodeName;_[sa]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&_.rel.toLowerCase()==="stylesheet"||c.removeChild(_),_=T}}else c==="body"&&Qf(a.ownerDocument.body);c=y}while(c);Xc(o)}function GO(a,o){var c=a;a=0;do{var d=c.nextSibling;if(c.nodeType===1?o?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(o?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),d&&d.nodeType===8)if(c=d.data,c==="/$"){if(a===0)break;a--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||a++;c=d}while(c)}function W_(a){var o=a.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var c=o;switch(o=o.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":W_(c),dc(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}a.removeChild(c)}}function C9(a,o,c,d){for(;a.nodeType===1;){var y=c;if(a.nodeName.toLowerCase()!==o.toLowerCase()){if(!d&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(d){if(!a[sa])switch(o){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(_=a.getAttribute("rel"),_==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(_!==y.rel||a.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||a.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||a.getAttribute("title")!==(y.title==null?null:y.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(_=a.getAttribute("src"),(_!==(y.src==null?null:y.src)||a.getAttribute("type")!==(y.type==null?null:y.type)||a.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&_&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(o==="input"&&a.type==="hidden"){var _=y.name==null?null:""+y.name;if(y.type==="hidden"&&a.getAttribute("name")===_)return a}else return a;if(a=gi(a.nextSibling),a===null)break}return null}function O9(a,o,c){if(o==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!c||(a=gi(a.nextSibling),a===null))return null;return a}function KO(a,o){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!o||(a=gi(a.nextSibling),a===null))return null;return a}function X_(a){return a.data==="$?"||a.data==="$~"}function Q_(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function I9(a,o){var c=a.ownerDocument;if(a.data==="$~")a._reactRetry=o;else if(a.data!=="$?"||c.readyState!=="loading")o();else{var d=function(){o(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),a._reactRetry=d}}function gi(a){for(;a!=null;a=a.nextSibling){var o=a.nodeType;if(o===1||o===3)break;if(o===8){if(o=a.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return a}var J_=null;function YO(a){a=a.nextSibling;for(var o=0;a;){if(a.nodeType===8){var c=a.data;if(c==="/$"||c==="/&"){if(o===0)return gi(a.nextSibling);o--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||o++}a=a.nextSibling}return null}function WO(a){a=a.previousSibling;for(var o=0;a;){if(a.nodeType===8){var c=a.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(o===0)return a;o--}else c!=="/$"&&c!=="/&"||o++}a=a.previousSibling}return null}function XO(a,o,c){switch(o=hp(c),a){case"html":if(a=o.documentElement,!a)throw Error(r(452));return a;case"head":if(a=o.head,!a)throw Error(r(453));return a;case"body":if(a=o.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function Qf(a){for(var o=a.attributes;o.length;)a.removeAttributeNode(o[0]);dc(a)}var yi=new Map,QO=new Set;function mp(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var rs=ne.d;ne.d={f:R9,r:N9,D:P9,C:M9,L:k9,m:D9,X:L9,S:j9,M:V9};function R9(){var a=rs.f(),o=ap();return a||o}function N9(a){var o=si(a);o!==null&&o.tag===5&&o.type==="form"?mC(o):rs.r(a)}var Kc=typeof document>"u"?null:document;function JO(a,o,c){var d=Kc;if(d&&typeof o=="string"&&o){var y=Tr(o);y='link[rel="'+a+'"][href="'+y+'"]',typeof c=="string"&&(y+='[crossorigin="'+c+'"]'),QO.has(y)||(QO.add(y),a={rel:a,crossOrigin:c,href:o},d.querySelector(y)===null&&(o=d.createElement("link"),Qn(o,"link",a),dn(o),d.head.appendChild(o)))}}function P9(a){rs.D(a),JO("dns-prefetch",a,null)}function M9(a,o){rs.C(a,o),JO("preconnect",a,o)}function k9(a,o,c){rs.L(a,o,c);var d=Kc;if(d&&a&&o){var y='link[rel="preload"][as="'+Tr(o)+'"]';o==="image"&&c&&c.imageSrcSet?(y+='[imagesrcset="'+Tr(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(y+='[imagesizes="'+Tr(c.imageSizes)+'"]')):y+='[href="'+Tr(a)+'"]';var _=y;switch(o){case"style":_=Yc(a);break;case"script":_=Wc(a)}yi.has(_)||(a=p({rel:"preload",href:o==="image"&&c&&c.imageSrcSet?void 0:a,as:o},c),yi.set(_,a),d.querySelector(y)!==null||o==="style"&&d.querySelector(Jf(_))||o==="script"&&d.querySelector(Zf(_))||(o=d.createElement("link"),Qn(o,"link",a),dn(o),d.head.appendChild(o)))}}function D9(a,o){rs.m(a,o);var c=Kc;if(c&&a){var d=o&&typeof o.as=="string"?o.as:"script",y='link[rel="modulepreload"][as="'+Tr(d)+'"][href="'+Tr(a)+'"]',_=y;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Wc(a)}if(!yi.has(_)&&(a=p({rel:"modulepreload",href:a},o),yi.set(_,a),c.querySelector(y)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Zf(_)))return}d=c.createElement("link"),Qn(d,"link",a),dn(d),c.head.appendChild(d)}}}function j9(a,o,c){rs.S(a,o,c);var d=Kc;if(d&&a){var y=la(d).hoistableStyles,_=Yc(a);o=o||"default";var T=y.get(_);if(!T){var D={loading:0,preload:null};if(T=d.querySelector(Jf(_)))D.loading=5;else{a=p({rel:"stylesheet",href:a,"data-precedence":o},c),(c=yi.get(_))&&Z_(a,c);var H=T=d.createElement("link");dn(H),Qn(H,"link",a),H._p=new Promise(function(J,oe){H.onload=J,H.onerror=oe}),H.addEventListener("load",function(){D.loading|=1}),H.addEventListener("error",function(){D.loading|=2}),D.loading|=4,pp(T,o,d)}T={type:"stylesheet",instance:T,count:1,state:D},y.set(_,T)}}}function L9(a,o){rs.X(a,o);var c=Kc;if(c&&a){var d=la(c).hoistableScripts,y=Wc(a),_=d.get(y);_||(_=c.querySelector(Zf(y)),_||(a=p({src:a,async:!0},o),(o=yi.get(y))&&eb(a,o),_=c.createElement("script"),dn(_),Qn(_,"link",a),c.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},d.set(y,_))}}function V9(a,o){rs.M(a,o);var c=Kc;if(c&&a){var d=la(c).hoistableScripts,y=Wc(a),_=d.get(y);_||(_=c.querySelector(Zf(y)),_||(a=p({src:a,async:!0,type:"module"},o),(o=yi.get(y))&&eb(a,o),_=c.createElement("script"),dn(_),Qn(_,"link",a),c.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},d.set(y,_))}}function ZO(a,o,c,d){var y=(y=xe.current)?mp(y):null;if(!y)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(o=Yc(c.href),c=la(y).hoistableStyles,d=c.get(o),d||(d={type:"style",instance:null,count:0,state:null},c.set(o,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){a=Yc(c.href);var _=la(y).hoistableStyles,T=_.get(a);if(T||(y=y.ownerDocument||y,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(a,T),(_=y.querySelector(Jf(a)))&&!_._p&&(T.instance=_,T.state.loading=5),yi.has(a)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},yi.set(a,c),_||U9(y,a,c,T.state))),o&&d===null)throw Error(r(528,""));return T}if(o&&d!==null)throw Error(r(529,""));return null;case"script":return o=c.async,c=c.src,typeof c=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Wc(c),c=la(y).hoistableScripts,d=c.get(o),d||(d={type:"script",instance:null,count:0,state:null},c.set(o,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function Yc(a){return'href="'+Tr(a)+'"'}function Jf(a){return'link[rel="stylesheet"]['+a+"]"}function eI(a){return p({},a,{"data-precedence":a.precedence,precedence:null})}function U9(a,o,c,d){a.querySelector('link[rel="preload"][as="style"]['+o+"]")?d.loading=1:(o=a.createElement("link"),d.preload=o,o.addEventListener("load",function(){return d.loading|=1}),o.addEventListener("error",function(){return d.loading|=2}),Qn(o,"link",c),dn(o),a.head.appendChild(o))}function Wc(a){return'[src="'+Tr(a)+'"]'}function Zf(a){return"script[async]"+a}function tI(a,o,c){if(o.count++,o.instance===null)switch(o.type){case"style":var d=a.querySelector('style[data-href~="'+Tr(c.href)+'"]');if(d)return o.instance=d,dn(d),d;var y=p({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(a.ownerDocument||a).createElement("style"),dn(d),Qn(d,"style",y),pp(d,c.precedence,a),o.instance=d;case"stylesheet":y=Yc(c.href);var _=a.querySelector(Jf(y));if(_)return o.state.loading|=4,o.instance=_,dn(_),_;d=eI(c),(y=yi.get(y))&&Z_(d,y),_=(a.ownerDocument||a).createElement("link"),dn(_);var T=_;return T._p=new Promise(function(D,H){T.onload=D,T.onerror=H}),Qn(_,"link",d),o.state.loading|=4,pp(_,c.precedence,a),o.instance=_;case"script":return _=Wc(c.src),(y=a.querySelector(Zf(_)))?(o.instance=y,dn(y),y):(d=c,(y=yi.get(_))&&(d=p({},c),eb(d,y)),a=a.ownerDocument||a,y=a.createElement("script"),dn(y),Qn(y,"link",d),a.head.appendChild(y),o.instance=y);case"void":return null;default:throw Error(r(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(d=o.instance,o.state.loading|=4,pp(d,c.precedence,a));return o.instance}function pp(a,o,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=d.length?d[d.length-1]:null,_=y,T=0;T<d.length;T++){var D=d[T];if(D.dataset.precedence===o)_=D;else if(_!==y)break}_?_.parentNode.insertBefore(a,_.nextSibling):(o=c.nodeType===9?c.head:c,o.insertBefore(a,o.firstChild))}function Z_(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.title==null&&(a.title=o.title)}function eb(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.integrity==null&&(a.integrity=o.integrity)}var gp=null;function nI(a,o,c){if(gp===null){var d=new Map,y=gp=new Map;y.set(c,d)}else y=gp,d=y.get(c),d||(d=new Map,y.set(c,d));if(d.has(a))return d;for(d.set(a,null),c=c.getElementsByTagName(a),y=0;y<c.length;y++){var _=c[y];if(!(_[sa]||_[fn]||a==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var T=_.getAttribute(o)||"";T=a+T;var D=d.get(T);D?D.push(_):d.set(T,[_])}}return d}function rI(a,o,c){a=a.ownerDocument||a,a.head.insertBefore(c,o==="title"?a.querySelector("head > title"):null)}function z9(a,o,c){if(c===1||o.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return a=o.disabled,typeof o.precedence=="string"&&a==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function iI(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function B9(a,o,c,d){if(c.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var y=Yc(d.href),_=o.querySelector(Jf(y));if(_){o=_._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(a.count++,a=yp.bind(a),o.then(a,a)),c.state.loading|=4,c.instance=_,dn(_);return}_=o.ownerDocument||o,d=eI(d),(y=yi.get(y))&&Z_(d,y),_=_.createElement("link"),dn(_);var T=_;T._p=new Promise(function(D,H){T.onload=D,T.onerror=H}),Qn(_,"link",d),c.instance=_}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(c,o),(o=c.state.preload)&&(c.state.loading&3)===0&&(a.count++,c=yp.bind(a),o.addEventListener("load",c),o.addEventListener("error",c))}}var tb=0;function $9(a,o){return a.stylesheets&&a.count===0&&_p(a,a.stylesheets),0<a.count||0<a.imgCount?function(c){var d=setTimeout(function(){if(a.stylesheets&&_p(a,a.stylesheets),a.unsuspend){var _=a.unsuspend;a.unsuspend=null,_()}},6e4+o);0<a.imgBytes&&tb===0&&(tb=62500*x9());var y=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&_p(a,a.stylesheets),a.unsuspend)){var _=a.unsuspend;a.unsuspend=null,_()}},(a.imgBytes>tb?50:800)+o);return a.unsuspend=c,function(){a.unsuspend=null,clearTimeout(d),clearTimeout(y)}}:null}function yp(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)_p(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var vp=null;function _p(a,o){a.stylesheets=null,a.unsuspend!==null&&(a.count++,vp=new Map,o.forEach(q9,a),vp=null,yp.call(a))}function q9(a,o){if(!(o.state.loading&4)){var c=vp.get(a);if(c)var d=c.get(null);else{c=new Map,vp.set(a,c);for(var y=a.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<y.length;_++){var T=y[_];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(c.set(T.dataset.precedence,T),d=T)}d&&c.set(null,d)}y=o.instance,T=y.getAttribute("data-precedence"),_=c.get(T)||d,_===d&&c.set(null,y),c.set(T,y),this.count++,d=yp.bind(this),y.addEventListener("load",d),y.addEventListener("error",d),_?_.parentNode.insertBefore(y,_.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(y,a.firstChild)),o.state.loading|=4}}var ed={$$typeof:j,Provider:null,Consumer:null,_currentValue:de,_currentValue2:de,_threadCount:0};function F9(a,o,c,d,y,_,T,D,H){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ia(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ia(0),this.hiddenUpdates=ia(null),this.identifierPrefix=d,this.onUncaughtError=y,this.onCaughtError=_,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=H,this.incompleteTransitions=new Map}function aI(a,o,c,d,y,_,T,D,H,J,oe,he){return a=new F9(a,o,c,T,H,J,oe,he,D),o=1,_===!0&&(o|=24),_=qr(3,null,null,o),a.current=_,_.stateNode=a,o=k0(),o.refCount++,a.pooledCache=o,o.refCount++,_.memoizedState={element:d,isDehydrated:c,cache:o},V0(_),a}function sI(a){return a?(a=Tc,a):Tc}function oI(a,o,c,d,y,_){y=sI(y),d.context===null?d.context=y:d.pendingContext=y,d=no(o),d.payload={element:c},_=_===void 0?null:_,_!==null&&(d.callback=_),c=ro(a,d,o),c!==null&&(Pr(c,a,o),Pf(c,a,o))}function lI(a,o){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var c=a.retryLane;a.retryLane=c!==0&&c<o?c:o}}function nb(a,o){lI(a,o),(a=a.alternate)&&lI(a,o)}function cI(a){if(a.tag===13||a.tag===31){var o=fl(a,67108864);o!==null&&Pr(o,a,67108864),nb(a,67108864)}}function uI(a){if(a.tag===13||a.tag===31){var o=Yr();o=Zo(o);var c=fl(a,o);c!==null&&Pr(c,a,o),nb(a,o)}}var bp=!0;function H9(a,o,c,d){var y=G.T;G.T=null;var _=ne.p;try{ne.p=2,rb(a,o,c,d)}finally{ne.p=_,G.T=y}}function G9(a,o,c,d){var y=G.T;G.T=null;var _=ne.p;try{ne.p=8,rb(a,o,c,d)}finally{ne.p=_,G.T=y}}function rb(a,o,c,d){if(bp){var y=ib(d);if(y===null)q_(a,o,d,wp,c),dI(a,d);else if(Y9(y,a,o,c,d))d.stopPropagation();else if(dI(a,d),o&4&&-1<K9.indexOf(a)){for(;y!==null;){var _=si(y);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var T=na(_.pendingLanes);if(T!==0){var D=_;for(D.pendingLanes|=2,D.entangledLanes|=2;T;){var H=1<<31-Yt(T);D.entanglements[1]|=H,T&=~H}wa(_),(_t&6)===0&&(rp=ce()+500,Yf(0))}}break;case 31:case 13:D=fl(_,2),D!==null&&Pr(D,_,2),ap(),nb(_,2)}if(_=ib(d),_===null&&q_(a,o,d,wp,c),_===y)break;y=_}y!==null&&d.stopPropagation()}else q_(a,o,d,null,c)}}function ib(a){return a=oi(a),ab(a)}var wp=null;function ab(a){if(wp=null,a=oa(a),a!==null){var o=s(a);if(o===null)a=null;else{var c=o.tag;if(c===13){if(a=l(o),a!==null)return a;a=null}else if(c===31){if(a=u(o),a!==null)return a;a=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;a=null}else o!==a&&(a=null)}}return wp=a,null}function fI(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ie()){case Re:return 2;case Ke:return 8;case $e:case ht:return 32;case tn:return 268435456;default:return 32}default:return 32}}var sb=!1,po=null,go=null,yo=null,td=new Map,nd=new Map,vo=[],K9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function dI(a,o){switch(a){case"focusin":case"focusout":po=null;break;case"dragenter":case"dragleave":go=null;break;case"mouseover":case"mouseout":yo=null;break;case"pointerover":case"pointerout":td.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":nd.delete(o.pointerId)}}function rd(a,o,c,d,y,_){return a===null||a.nativeEvent!==_?(a={blockedOn:o,domEventName:c,eventSystemFlags:d,nativeEvent:_,targetContainers:[y]},o!==null&&(o=si(o),o!==null&&cI(o)),a):(a.eventSystemFlags|=d,o=a.targetContainers,y!==null&&o.indexOf(y)===-1&&o.push(y),a)}function Y9(a,o,c,d,y){switch(o){case"focusin":return po=rd(po,a,o,c,d,y),!0;case"dragenter":return go=rd(go,a,o,c,d,y),!0;case"mouseover":return yo=rd(yo,a,o,c,d,y),!0;case"pointerover":var _=y.pointerId;return td.set(_,rd(td.get(_)||null,a,o,c,d,y)),!0;case"gotpointercapture":return _=y.pointerId,nd.set(_,rd(nd.get(_)||null,a,o,c,d,y)),!0}return!1}function hI(a){var o=oa(a.target);if(o!==null){var c=s(o);if(c!==null){if(o=c.tag,o===13){if(o=l(c),o!==null){a.blockedOn=o,Ni(a.priority,function(){uI(c)});return}}else if(o===31){if(o=u(c),o!==null){a.blockedOn=o,Ni(a.priority,function(){uI(c)});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){a.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}a.blockedOn=null}function xp(a){if(a.blockedOn!==null)return!1;for(var o=a.targetContainers;0<o.length;){var c=ib(a.nativeEvent);if(c===null){c=a.nativeEvent;var d=new c.constructor(c.type,c);gf=d,c.target.dispatchEvent(d),gf=null}else return o=si(c),o!==null&&cI(o),a.blockedOn=c,!1;o.shift()}return!0}function mI(a,o,c){xp(a)&&c.delete(o)}function W9(){sb=!1,po!==null&&xp(po)&&(po=null),go!==null&&xp(go)&&(go=null),yo!==null&&xp(yo)&&(yo=null),td.forEach(mI),nd.forEach(mI)}function Ep(a,o){a.blockedOn===o&&(a.blockedOn=null,sb||(sb=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,W9)))}var Sp=null;function pI(a){Sp!==a&&(Sp=a,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Sp===a&&(Sp=null);for(var o=0;o<a.length;o+=3){var c=a[o],d=a[o+1],y=a[o+2];if(typeof d!="function"){if(ab(d||c)===null)continue;break}var _=si(c);_!==null&&(a.splice(o,3),o-=3,i_(_,{pending:!0,data:y,method:c.method,action:d},d,y))}}))}function Xc(a){function o(H){return Ep(H,a)}po!==null&&Ep(po,a),go!==null&&Ep(go,a),yo!==null&&Ep(yo,a),td.forEach(o),nd.forEach(o);for(var c=0;c<vo.length;c++){var d=vo[c];d.blockedOn===a&&(d.blockedOn=null)}for(;0<vo.length&&(c=vo[0],c.blockedOn===null);)hI(c),c.blockedOn===null&&vo.shift();if(c=(a.ownerDocument||a).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var y=c[d],_=c[d+1],T=y[Dn]||null;if(typeof _=="function")T||pI(c);else if(T){var D=null;if(_&&_.hasAttribute("formAction")){if(y=_,T=_[Dn]||null)D=T.formAction;else if(ab(y)!==null)continue}else D=T.action;typeof D=="function"?c[d+1]=D:(c.splice(d,3),d-=3),pI(c)}}}function gI(){function a(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(T){return y=T})},focusReset:"manual",scroll:"manual"})}function o(){y!==null&&(y(),y=null),d||setTimeout(c,20)}function c(){if(!d&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,y=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(c,100),function(){d=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),y!==null&&(y(),y=null)}}}function ob(a){this._internalRoot=a}Ap.prototype.render=ob.prototype.render=function(a){var o=this._internalRoot;if(o===null)throw Error(r(409));var c=o.current,d=Yr();oI(c,d,a,o,null,null)},Ap.prototype.unmount=ob.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var o=a.containerInfo;oI(a.current,2,null,a,null,null),ap(),o[aa]=null}};function Ap(a){this._internalRoot=a}Ap.prototype.unstable_scheduleHydration=function(a){if(a){var o=am();a={blockedOn:null,target:a,priority:o};for(var c=0;c<vo.length&&o!==0&&o<vo[c].priority;c++);vo.splice(c,0,a),c===0&&hI(a)}};var yI=e.version;if(yI!=="19.2.1")throw Error(r(527,yI,"19.2.1"));ne.findDOMNode=function(a){var o=a._reactInternals;if(o===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=h(o),a=a!==null?m(a):null,a=a===null?null:a.stateNode,a};var X9={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tp.isDisabled&&Tp.supportsFiber)try{qt=Tp.inject(X9),Sn=Tp}catch{}}return ad.createRoot=function(a,o){if(!i(a))throw Error(r(299));var c=!1,d="",y=SC,_=AC,T=TC;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(T=o.onRecoverableError)),o=aI(a,1,!1,null,null,c,d,null,y,_,T,gI),a[aa]=o.current,$_(a),new ob(o)},ad.hydrateRoot=function(a,o,c){if(!i(a))throw Error(r(299));var d=!1,y="",_=SC,T=AC,D=TC,H=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onUncaughtError!==void 0&&(_=c.onUncaughtError),c.onCaughtError!==void 0&&(T=c.onCaughtError),c.onRecoverableError!==void 0&&(D=c.onRecoverableError),c.formState!==void 0&&(H=c.formState)),o=aI(a,1,!0,o,c??null,d,y,H,_,T,D,gI),o.context=sI(null),c=o.current,d=Yr(),d=Zo(d),y=no(d),y.callback=null,ro(c,y,d),c=d,o.current.lanes=c,Qo(o,c),wa(o),a[aa]=o.current,$_(a),new Ap(o)},ad.version="19.2.1",ad}var CI;function cB(){if(CI)return fb.exports;CI=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),fb.exports=lB(),fb.exports}var uB=cB();const fB=Va(uB);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dB=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),hB=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),OI=t=>{const e=hB(t);return e.charAt(0).toUpperCase()+e.slice(1)},uD=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),mB=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var pB={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gB=C.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:l,...u},f)=>C.createElement("svg",{ref:f,...pB,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:uD("lucide",i),...!s&&!mB(u)&&{"aria-hidden":"true"},...u},[...l.map(([h,m])=>C.createElement(h,m)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=(t,e)=>{const n=C.forwardRef(({className:r,...i},s)=>C.createElement(gB,{ref:s,iconNode:e,className:uD(`lucide-${dB(OI(t))}`,`lucide-${t}`,r),...i}));return n.displayName=OI(t),n};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yB=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],vB=ct("award",yB);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _B=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Qy=ct("calendar",_B);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bB=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],fD=ct("check",bB);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wB=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],II=ct("chevron-down",wB);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xB=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],EB=ct("chevron-right",xB);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SB=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],AB=ct("chevron-up",SB);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TB=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],CB=ct("circle-play",TB);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],IB=ct("circle-user",OB);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RB=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],RI=ct("clock",RB);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NB=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],PB=ct("cloud",NB);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MB=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],dD=ct("external-link",MB);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kB=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],DB=ct("eye-off",kB);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jB=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],LB=ct("eye",jB);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VB=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]],nE=ct("film",VB);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UB=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],hD=ct("heart",UB);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zB=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],BB=ct("house",zB);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $B=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],mD=ct("key",$B);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qB=[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]],NI=ct("library",qB);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FB=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],HB=ct("list",FB);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GB=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Ro=ct("loader-circle",GB);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KB=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],pD=ct("log-in",KB);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YB=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],WB=ct("log-out",YB);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XB=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],QB=ct("mail",XB);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JB=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],ZB=ct("map-pin",JB);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e$=[["path",{d:"M15.033 9.44a.647.647 0 0 1 0 1.12l-4.065 2.352a.645.645 0 0 1-.968-.56V7.648a.645.645 0 0 1 .967-.56z",key:"vbtd3f"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",key:"x3v2xh"}]],t$=ct("monitor-play",e$);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n$=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],r$=ct("play",n$);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i$=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],PI=ct("plus",i$);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a$=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],s$=ct("save",a$);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o$=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],l$=ct("settings",o$);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c$=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],ig=ct("sparkles",c$);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u$=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],bn=ct("star",u$);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f$=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],d$=ct("triangle-alert",f$);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h$=[["path",{d:"m17 2-5 5-5-5",key:"16satq"}],["rect",{width:"20",height:"15",x:"2",y:"7",rx:"2",key:"1e6viu"}]],Jy=ct("tv",h$);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m$=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],_1=ct("video",m$);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p$=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Zy=ct("x",p$);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g$=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],y$=ct("zap",g$),v$="https://api.themoviedb.org/3",gr=(t,e,n={})=>{const r=new URL(`${v$}${t}`);return r.searchParams.append("api_key",e),Object.keys(n).forEach(i=>r.searchParams.append(i,n[i])),r.toString()},_$=async t=>{try{const e=t.trim();if(!e)return{ok:!1,reason:"empty-key"};const n=new AbortController,r=setTimeout(()=>n.abort(),5e3);try{const i=await fetch(gr("/configuration",e),{signal:n.signal});return clearTimeout(r),i.ok?{ok:!0}:{ok:!1,reason:`HTTP ${i.status}`}}catch(i){if(clearTimeout(r),i.name==="AbortError")return{ok:!1,reason:"timeout"};throw i}}catch(e){return console.error("TMDB validateKey error:",e),{ok:!1,reason:(e==null?void 0:e.message)||"network-error"}}},b$=async t=>(await(await fetch(gr("/trending/all/day",t,{language:"en-US"}))).json()).results||[],w$=async t=>((await(await fetch(gr("/trending/movie/day",t,{language:"en-US"}))).json()).results||[]).map(r=>({...r,media_type:"movie"})),x$=async t=>((await(await fetch(gr("/trending/tv/day",t,{language:"en-US"}))).json()).results||[]).map(r=>({...r,media_type:"tv"})),E$=async t=>((await(await fetch(gr("/movie/now_playing",t,{language:"en-US",page:"1"}))).json()).results||[]).map(r=>({...r,media_type:"movie"})),S$=async t=>((await(await fetch(gr("/tv/on_the_air",t,{language:"en-US",page:"1"}))).json()).results||[]).map(r=>({...r,media_type:"tv"})),MI=async(t,e)=>(await(await fetch(gr("/search/multi",t,{query:e,include_adult:"false",language:"en-US",page:"1"}))).json()).results||[],A$=async(t,e,n=8)=>{const r=e.trim();return r?((await(await fetch(gr("/search/multi",t,{query:r,include_adult:"false",language:"en-US",page:"1"}))).json()).results||[]).filter(f=>f.media_type==="movie"||f.media_type==="tv").slice(0,n):[]},T$=async(t,e,n)=>{const r={include_adult:"false",include_video:"false",language:"en-US",page:"1"};return Object.entries(n).forEach(([l,u])=>{r[l]=String(u)}),((await(await fetch(gr(`/discover/${e}`,t,r))).json()).results||[]).map(l=>({...l,media_type:e}))},Il=async(t,e,n)=>{const r=await fetch(gr(`/${e}/${n}`,t,{append_to_response:"credits,videos,recommendations,external_ids,reviews"}));if(!r.ok)throw new Error("Failed to fetch details");return{...await r.json(),media_type:e}},kI=async(t,e)=>{const n=await fetch(gr(`/person/${e}`,t,{append_to_response:"combined_credits"}));if(!n.ok)throw new Error("Failed to fetch person details");return await n.json()},C$=async(t,e,n)=>{const i=await(await fetch(gr(`/search/${e}`,t,{query:n}))).json();return i.results&&i.results.length>0?i.results[0].id:null},O$=async(t,e)=>(await Il(t,"tv",e)).seasons||[],gD=async(t,e,n)=>{const r=await fetch(gr(`/tv/${e}/season/${n}`,t));return r.ok?(await r.json()).episodes||[]:[]},I$=async(t,e)=>{const r=await(await fetch(gr("/search/person",t,{query:e}))).json();return r.results&&r.results.length>0?r.results[0].id:null},pb=async(t,e,n,r)=>{const i=await fetch(gr(`/tv/${e}/season/${n}/episode/${r}`,t,{append_to_response:"credits,external_ids,videos,reviews"}));if(!i.ok)throw new Error("Failed to fetch episode details");return await i.json()},R$=async(t,e,n)=>{const r=await fetch(gr(`/${e}/${n}/external_ids`,t));if(!r.ok)throw new Error("Failed to fetch external IDs");const i=await r.json();return{imdb_id:i.imdb_id??null,tvdb_id:i.tvdb_id??null}},rE=({item:t,onClick:e,rank:n,ratingsCache:r,useOmdbRatings:i=!0,showEpisodeImdbOnCards:s=!1})=>{const l=t.poster_path?`https://image.tmdb.org/t/p/w500${t.poster_path}`:t.still_path?`https://image.tmdb.org/t/p/w500${t.still_path}`:"https://picsum.photos/300/450",u=t.title||t.name,f=t.release_date||t.first_air_date||t.air_date,h=f?new Date(f).getFullYear():"N/A",m=!!t.episode_number;let p=null;if(i&&r&&t.media_type&&t.media_type!=="person")if(m&&s){const E=t.show_imdb_id;if(E&&typeof r.getEpisodeCached=="function"&&(p=r.getEpisodeCached(E,t.season_number,t.episode_number)),!(p!=null&&p.imdbRating)){const w=t.show_id||t.tv_id;w&&(p=r.getCached("tv",w))}}else p=r.getCached(t.media_type,t.id);const v=p!=null&&p.imdbRating?parseFloat(p.imdbRating):t.vote_average?Number(t.vote_average.toFixed(1)):null,b=p!=null&&p.imdbRating?"imdb":"tmdb";return A.jsxs("div",{onClick:()=>e(t),className:"group relative bg-[#0a0f1e] rounded-2xl overflow-hidden cursor-pointer transition-all duration-500 transform hover:-translate-y-2 hover:z-10",children:[A.jsx("div",{className:"absolute inset-0 rounded-2xl border border-white/5 group-hover:border-cyan-500/50 group-hover:shadow-[0_0_20px_rgba(6,182,212,0.4)] transition-all duration-500 pointer-events-none z-10"}),A.jsxs("div",{className:`relative overflow-hidden ${m?"aspect-video":"aspect-[2/3]"}`,children:[A.jsx("img",{src:l,alt:u,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110 group-hover:contrast-110",loading:"lazy"}),A.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#020617] via-transparent to-transparent opacity-80 group-hover:opacity-60 transition-opacity duration-300"}),typeof n=="number"&&A.jsxs("div",{className:"absolute top-2 left-2 z-20 bg-cyan-500 text-xs font-extrabold text-slate-950 px-2.5 py-1 rounded-full shadow-[0_0_10px_rgba(6,182,212,0.5)] border border-cyan-200/70",children:["#",n]}),A.jsxs("div",{className:"absolute top-2 right-2 z-20 bg-fuchsia-600/95 backdrop-blur-md text-white text-[10px] font-bold px-2.5 py-1 rounded-full flex items-center gap-1 border border-fuchsia-300/50 shadow-[0_0_10px_rgba(236,72,153,0.4)]",children:[t.media_type==="tv"?A.jsx(Jy,{size:12}):A.jsx(nE,{size:12}),A.jsx("span",{className:"uppercase tracking-wider",children:t.media_type==="tv"?"TV":"Movie"})]}),v!==null&&A.jsxs("div",{className:`absolute bottom-2 left-2 z-20 backdrop-blur-md text-xs font-bold px-2.5 py-1 rounded-full flex items-center gap-1 shadow-[0_0_12px_rgba(6,182,212,0.45)] ${b==="imdb"?"bg-amber-500/90 text-slate-900 border border-amber-300/60":"bg-black/80 text-cyan-300 border border-cyan-500/40"}`,children:[A.jsx(bn,{size:12,fill:"currentColor"}),A.jsx("span",{children:v.toFixed(1)})]}),m&&A.jsxs("div",{className:"absolute bottom-2 right-2 z-20 text-[10px] font-bold text-cyan-100 bg-cyan-600/80 px-2.5 py-1 rounded-full border border-cyan-300/60 shadow-[0_0_10px_rgba(6,182,212,0.5)]",children:["S",t.season_number," E",t.episode_number]})]}),A.jsxs("div",{className:"p-4 relative z-0 bg-gradient-to-b from-transparent to-[#050b1a]",children:[A.jsx("h3",{className:"text-slate-100 font-bold text-sm truncate group-hover:text-transparent group-hover:bg-clip-text group-hover:bg-gradient-to-r group-hover:from-cyan-400 group-hover:to-fuchsia-400 transition-all",children:u}),A.jsxs("div",{className:"flex justify-between items-center mt-2 text-slate-500 text-xs font-medium",children:[A.jsxs("span",{className:"flex items-center gap-1.5 group-hover:text-slate-300 transition-colors",children:[A.jsx(Qy,{size:14,className:"text-slate-600 group-hover:text-cyan-500 transition-colors"}),h]}),m&&A.jsxs("span",{className:"text-slate-400 text-[10px]",children:["Episode  ",v!==null?`${v.toFixed(1)}/10`:"NR"]})]})]})]})},N$=(t,e)=>`${t}-${e}`,P$=({value:t,onChange:e,size:n=20,readOnly:r=!1})=>{const[i,s]=C.useState(null),l=Math.max(0,Math.min(10,t)),u=Array.from({length:10},(m,p)=>p+1),f=m=>{r||e(m)},h=i??l;return A.jsxs("div",{className:"flex items-center gap-1",children:[u.map(m=>{const p=h>=m;return A.jsx("button",{type:"button",onClick:()=>f(m),onMouseEnter:()=>!r&&s(m),onMouseLeave:()=>!r&&s(null),disabled:r,className:`transition-all ${!r&&"hover:scale-110 cursor-pointer"} ${r&&"cursor-default"}`,children:A.jsx(bn,{size:n,className:`transition-colors ${p?"fill-yellow-400 text-yellow-400":"text-slate-600"} ${!r&&"hover:text-yellow-300"}`})},m)}),A.jsx("span",{className:"ml-2 text-sm font-bold text-slate-300",children:l>0?`${l}/10`:"Rate"})]})},yD=t=>t.imdbId&&t.imdbId.trim()?t.imdbId.trim():typeof t.tvdbId=="number"?`tvdb:${t.tvdbId}`:null,vD=t=>{let e=t.title.trim();if(t.year&&(e+=` ${t.year}`),t.season&&t.episode){const n=String(t.season).padStart(2,"0"),r=String(t.episode).padStart(2,"0");e+=` S${n}E${r}`}return e},M$=t=>{const e=yD(t);if(e){const r=t.type==="movie"?"movie":"series",i=e;return`stremio:///detail/${r}/${encodeURIComponent(e)}/${encodeURIComponent(i)}?autoPlay=false`}const n=vD({title:t.title,year:t.year});return`stremio:///search?search=${encodeURIComponent(n)}`},k$=t=>{const e=yD(t);if(e){const r="series",i=`${e}:${t.season}:${t.episode}`;return`stremio:///detail/${r}/${encodeURIComponent(e)}/${encodeURIComponent(i)}?autoPlay=false`}const n=vD({title:t.title,year:t.year,season:t.season,episode:t.episode});return`stremio:///search?search=${encodeURIComponent(n)}`};function _D(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=_D(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function $t(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=_D(t))&&(r&&(r+=" "),r+=e);return r}var D$=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function iE(t){if(typeof t!="string")return!1;var e=D$;return e.includes(t)}var j$=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],L$=new Set(j$);function bD(t){return typeof t!="string"?!1:L$.has(t)}function wD(t){return typeof t=="string"&&t.startsWith("data-")}function vs(t){if(typeof t!="object"||t===null)return{};var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(bD(n)||wD(n))&&(e[n]=t[n]);return e}function aE(t){if(t==null)return null;if(C.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return vs(e)}return typeof t=="object"&&!Array.isArray(t)?vs(t):null}function Ai(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(bD(n)||wD(n)||iE(n))&&(e[n]=t[n]);return e}var V$=["children","width","height","viewBox","className","style","title","desc"];function b1(){return b1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},b1.apply(null,arguments)}function U$(t,e){if(t==null)return{};var n,r,i=z$(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function z$(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var xD=C.forwardRef((t,e)=>{var{children:n,width:r,height:i,viewBox:s,className:l,style:u,title:f,desc:h}=t,m=U$(t,V$),p=s||{width:r,height:i,x:0,y:0},v=$t("recharts-surface",l);return C.createElement("svg",b1({},Ai(m),{className:v,width:r,height:i,style:u,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height),ref:e}),C.createElement("title",null,f),C.createElement("desc",null,h),n)}),B$=["children","className"];function w1(){return w1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},w1.apply(null,arguments)}function $$(t,e){if(t==null)return{};var n,r,i=q$(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function q$(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var _s=C.forwardRef((t,e)=>{var{children:n,className:r}=t,i=$$(t,B$),s=$t("recharts-layer",r);return C.createElement("g",w1({className:s},Ai(i),{ref:e}),n)}),ED=cD(),F$=C.createContext(null);function jt(t){return function(){return t}}const SD=Math.cos,Rg=Math.sin,Ji=Math.sqrt,Ng=Math.PI,ev=2*Ng,x1=Math.PI,E1=2*x1,Sl=1e-6,H$=E1-Sl;function AD(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function G$(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return AD;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class K${constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?AD:G$(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,l){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+l}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let l=this._x1,u=this._y1,f=r-e,h=i-n,m=l-e,p=u-n,v=m*m+p*p;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(v>Sl)if(!(Math.abs(p*f-h*m)>Sl)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let b=r-l,E=i-u,w=f*f+h*h,S=b*b+E*E,P=Math.sqrt(w),M=Math.sqrt(v),j=s*Math.tan((x1-Math.acos((w+v-S)/(2*P*M)))/2),$=j/M,L=j/P;Math.abs($-1)>Sl&&this._append`L${e+$*m},${n+$*p}`,this._append`A${s},${s},0,0,${+(p*b>m*E)},${this._x1=e+L*f},${this._y1=n+L*h}`}}arc(e,n,r,i,s,l){if(e=+e,n=+n,r=+r,l=!!l,r<0)throw new Error(`negative radius: ${r}`);let u=r*Math.cos(i),f=r*Math.sin(i),h=e+u,m=n+f,p=1^l,v=l?i-s:s-i;this._x1===null?this._append`M${h},${m}`:(Math.abs(this._x1-h)>Sl||Math.abs(this._y1-m)>Sl)&&this._append`L${h},${m}`,r&&(v<0&&(v=v%E1+E1),v>H$?this._append`A${r},${r},0,1,${p},${e-u},${n-f}A${r},${r},0,1,${p},${this._x1=h},${this._y1=m}`:v>Sl&&this._append`A${r},${r},0,${+(v>=x1)},${p},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function sE(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new K$(e)}function oE(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function TD(t){this._context=t}TD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function tv(t){return new TD(t)}function CD(t){return t[0]}function OD(t){return t[1]}function ID(t,e){var n=jt(!0),r=null,i=tv,s=null,l=sE(u);t=typeof t=="function"?t:t===void 0?CD:jt(t),e=typeof e=="function"?e:e===void 0?OD:jt(e);function u(f){var h,m=(f=oE(f)).length,p,v=!1,b;for(r==null&&(s=i(b=l())),h=0;h<=m;++h)!(h<m&&n(p=f[h],h,f))===v&&((v=!v)?s.lineStart():s.lineEnd()),v&&s.point(+t(p,h,f),+e(p,h,f));if(b)return s=null,b+""||null}return u.x=function(f){return arguments.length?(t=typeof f=="function"?f:jt(+f),u):t},u.y=function(f){return arguments.length?(e=typeof f=="function"?f:jt(+f),u):e},u.defined=function(f){return arguments.length?(n=typeof f=="function"?f:jt(!!f),u):n},u.curve=function(f){return arguments.length?(i=f,r!=null&&(s=i(r)),u):i},u.context=function(f){return arguments.length?(f==null?r=s=null:s=i(r=f),u):r},u}function Cp(t,e,n){var r=null,i=jt(!0),s=null,l=tv,u=null,f=sE(h);t=typeof t=="function"?t:t===void 0?CD:jt(+t),e=typeof e=="function"?e:jt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?OD:jt(+n);function h(p){var v,b,E,w=(p=oE(p)).length,S,P=!1,M,j=new Array(w),$=new Array(w);for(s==null&&(u=l(M=f())),v=0;v<=w;++v){if(!(v<w&&i(S=p[v],v,p))===P)if(P=!P)b=v,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),E=v-1;E>=b;--E)u.point(j[E],$[E]);u.lineEnd(),u.areaEnd()}P&&(j[v]=+t(S,v,p),$[v]=+e(S,v,p),u.point(r?+r(S,v,p):j[v],n?+n(S,v,p):$[v]))}if(M)return u=null,M+""||null}function m(){return ID().defined(i).curve(l).context(s)}return h.x=function(p){return arguments.length?(t=typeof p=="function"?p:jt(+p),r=null,h):t},h.x0=function(p){return arguments.length?(t=typeof p=="function"?p:jt(+p),h):t},h.x1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:jt(+p),h):r},h.y=function(p){return arguments.length?(e=typeof p=="function"?p:jt(+p),n=null,h):e},h.y0=function(p){return arguments.length?(e=typeof p=="function"?p:jt(+p),h):e},h.y1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:jt(+p),h):n},h.lineX0=h.lineY0=function(){return m().x(t).y(e)},h.lineY1=function(){return m().x(t).y(n)},h.lineX1=function(){return m().x(r).y(e)},h.defined=function(p){return arguments.length?(i=typeof p=="function"?p:jt(!!p),h):i},h.curve=function(p){return arguments.length?(l=p,s!=null&&(u=l(s)),h):l},h.context=function(p){return arguments.length?(p==null?s=u=null:u=l(s=p),h):s},h}class RD{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function Y$(t){return new RD(t,!0)}function W$(t){return new RD(t,!1)}const lE={draw(t,e){const n=Ji(e/Ng);t.moveTo(n,0),t.arc(0,0,n,0,ev)}},X$={draw(t,e){const n=Ji(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},ND=Ji(1/3),Q$=ND*2,J$={draw(t,e){const n=Ji(e/Q$),r=n*ND;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},Z$={draw(t,e){const n=Ji(e),r=-n/2;t.rect(r,r,n,n)}},e8=.8908130915292852,PD=Rg(Ng/10)/Rg(7*Ng/10),t8=Rg(ev/10)*PD,n8=-SD(ev/10)*PD,r8={draw(t,e){const n=Ji(e*e8),r=t8*n,i=n8*n;t.moveTo(0,-n),t.lineTo(r,i);for(let s=1;s<5;++s){const l=ev*s/5,u=SD(l),f=Rg(l);t.lineTo(f*n,-u*n),t.lineTo(u*r-f*i,f*r+u*i)}t.closePath()}},gb=Ji(3),i8={draw(t,e){const n=-Ji(e/(gb*3));t.moveTo(0,n*2),t.lineTo(-gb*n,-n),t.lineTo(gb*n,-n),t.closePath()}},vi=-.5,_i=Ji(3)/2,S1=1/Ji(12),a8=(S1/2+1)*3,s8={draw(t,e){const n=Ji(e/a8),r=n/2,i=n*S1,s=r,l=n*S1+n,u=-s,f=l;t.moveTo(r,i),t.lineTo(s,l),t.lineTo(u,f),t.lineTo(vi*r-_i*i,_i*r+vi*i),t.lineTo(vi*s-_i*l,_i*s+vi*l),t.lineTo(vi*u-_i*f,_i*u+vi*f),t.lineTo(vi*r+_i*i,vi*i-_i*r),t.lineTo(vi*s+_i*l,vi*l-_i*s),t.lineTo(vi*u+_i*f,vi*f-_i*u),t.closePath()}};function o8(t,e){let n=null,r=sE(i);t=typeof t=="function"?t:jt(t||lE),e=typeof e=="function"?e:jt(e===void 0?64:+e);function i(){let s;if(n||(n=s=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(t=typeof s=="function"?s:jt(s),i):t},i.size=function(s){return arguments.length?(e=typeof s=="function"?s:jt(+s),i):e},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function Pg(){}function Mg(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function MD(t){this._context=t}MD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Mg(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Mg(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function l8(t){return new MD(t)}function kD(t){this._context=t}kD.prototype={areaStart:Pg,areaEnd:Pg,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Mg(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function c8(t){return new kD(t)}function DD(t){this._context=t}DD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Mg(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function u8(t){return new DD(t)}function jD(t){this._context=t}jD.prototype={areaStart:Pg,areaEnd:Pg,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function f8(t){return new jD(t)}function DI(t){return t<0?-1:1}function jI(t,e,n){var r=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(r||i<0&&-0),l=(n-t._y1)/(i||r<0&&-0),u=(s*i+l*r)/(r+i);return(DI(s)+DI(l))*Math.min(Math.abs(s),Math.abs(l),.5*Math.abs(u))||0}function LI(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function yb(t,e,n){var r=t._x0,i=t._y0,s=t._x1,l=t._y1,u=(s-r)/3;t._context.bezierCurveTo(r+u,i+u*e,s-u,l-u*n,s,l)}function kg(t){this._context=t}kg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:yb(this,this._t0,LI(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,yb(this,LI(this,n=jI(this,t,e)),n);break;default:yb(this,this._t0,n=jI(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function LD(t){this._context=new VD(t)}(LD.prototype=Object.create(kg.prototype)).point=function(t,e){kg.prototype.point.call(this,e,t)};function VD(t){this._context=t}VD.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,s){this._context.bezierCurveTo(e,t,r,n,s,i)}};function d8(t){return new kg(t)}function h8(t){return new LD(t)}function UD(t){this._context=t}UD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=VI(t),i=VI(e),s=0,l=1;l<n;++s,++l)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],t[l],e[l]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function VI(t){var e,n=t.length-1,r,i=new Array(n),s=new Array(n),l=new Array(n);for(i[0]=0,s[0]=2,l[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,s[e]=4,l[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,s[n-1]=7,l[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/s[e-1],s[e]-=r,l[e]-=r*l[e-1];for(i[n-1]=l[n-1]/s[n-1],e=n-2;e>=0;--e)i[e]=(l[e]-i[e+1])/s[e];for(s[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function m8(t){return new UD(t)}function nv(t,e){this._context=t,this._t=e}nv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function p8(t){return new nv(t,.5)}function g8(t){return new nv(t,0)}function y8(t){return new nv(t,1)}function wu(t,e){if((l=t.length)>1)for(var n=1,r,i,s=t[e[0]],l,u=s.length;n<l;++n)for(i=s,s=t[e[n]],r=0;r<u;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function A1(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function v8(t,e){return t[e]}function _8(t){const e=[];return e.key=t,e}function b8(){var t=jt([]),e=A1,n=wu,r=v8;function i(s){var l=Array.from(t.apply(this,arguments),_8),u,f=l.length,h=-1,m;for(const p of s)for(u=0,++h;u<f;++u)(l[u][h]=[0,+r(p,l[u].key,h,s)]).data=p;for(u=0,m=oE(e(l));u<f;++u)l[m[u]].index=u;return n(l,m),l}return i.keys=function(s){return arguments.length?(t=typeof s=="function"?s:jt(Array.from(s)),i):t},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:jt(+s),i):r},i.order=function(s){return arguments.length?(e=s==null?A1:typeof s=="function"?s:jt(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(n=s??wu,i):n},i}function w8(t,e){if((r=t.length)>0){for(var n,r,i=0,s=t[0].length,l;i<s;++i){for(l=n=0;n<r;++n)l+=t[n][i][1]||0;if(l)for(n=0;n<r;++n)t[n][i][1]/=l}wu(t,e)}}function x8(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,s=r.length;n<s;++n){for(var l=0,u=0;l<i;++l)u+=t[l][n][1]||0;r[n][1]+=r[n][0]=-u/2}wu(t,e)}}function E8(t,e){if(!(!((l=t.length)>0)||!((s=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,s,l;r<s;++r){for(var u=0,f=0,h=0;u<l;++u){for(var m=t[e[u]],p=m[r][1]||0,v=m[r-1][1]||0,b=(p-v)/2,E=0;E<u;++E){var w=t[e[E]],S=w[r][1]||0,P=w[r-1][1]||0;b+=S-P}f+=p,h+=b*p}i[r-1][1]+=i[r-1][0]=n,f&&(n-=h/f)}i[r-1][1]+=i[r-1][0]=n,wu(t,e)}}var vb={},_b={},UI;function S8(){return UI||(UI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(_b)),_b}var bb={},zI;function zD(){return zI||(zI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(bb)),bb}var wb={},BI;function cE(){return BI||(BI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var r;return typeof n=="string"||typeof n=="symbol"?n:Object.is((r=n==null?void 0:n.valueOf)==null?void 0:r.call(n),-0)?"-0":String(n)}t.toKey=e})(wb)),wb}var xb={},Eb={},$I;function A8(){return $I||($I=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(e).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}t.toString=e})(Eb)),Eb}var qI;function uE(){return qI||(qI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=A8(),n=cE();function r(i){if(Array.isArray(i))return i.map(n.toKey);if(typeof i=="symbol")return[i];i=e.toString(i);const s=[],l=i.length;if(l===0)return s;let u=0,f="",h="",m=!1;for(i.charCodeAt(0)===46&&(s.push(""),u++);u<l;){const p=i[u];h?p==="\\"&&u+1<l?(u++,f+=i[u]):p===h?h="":f+=p:m?p==='"'||p==="'"?h=p:p==="]"?(m=!1,s.push(f),f=""):f+=p:p==="["?(m=!0,f&&(s.push(f),f="")):p==="."?f&&(s.push(f),f=""):f+=p,u++}return f&&s.push(f),s}t.toPath=r})(xb)),xb}var FI;function fE(){return FI||(FI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=S8(),n=zD(),r=cE(),i=uE();function s(u,f,h){if(u==null)return h;switch(typeof f){case"string":{if(e.isUnsafeProperty(f))return h;const m=u[f];return m===void 0?n.isDeepKey(f)?s(u,i.toPath(f),h):h:m}case"number":case"symbol":{typeof f=="number"&&(f=r.toKey(f));const m=u[f];return m===void 0?h:m}default:{if(Array.isArray(f))return l(u,f,h);if(Object.is(f==null?void 0:f.valueOf(),-0)?f="-0":f=String(f),e.isUnsafeProperty(f))return h;const m=u[f];return m===void 0?h:m}}}function l(u,f,h){if(f.length===0)return h;let m=u;for(let p=0;p<f.length;p++){if(m==null||e.isUnsafeProperty(f[p]))return h;m=m[f[p]]}return m===void 0?h:m}t.get=s})(vb)),vb}var Sb,HI;function T8(){return HI||(HI=1,Sb=fE().get),Sb}var C8=T8();const xu=Va(C8);var jr=t=>t===0?0:t>0?1:-1,Wi=t=>typeof t=="number"&&t!=+t,bs=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,Me=t=>(typeof t=="number"||t instanceof Number)&&!Wi(t),Ma=t=>Me(t)||typeof t=="string",O8=0,Gd=t=>{var e=++O8;return"".concat(t||"").concat(e)},Xi=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Me(e)&&typeof e!="string")return r;var s;if(bs(e)){if(n==null)return r;var l=e.indexOf("%");s=n*parseFloat(e.slice(0,l))/100}else s=+e;return Wi(s)&&(s=r),i&&n!=null&&s>n&&(s=n),s},BD=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[t[r]])n[t[r]]=!0;else return!0;return!1};function tr(t,e,n){return Me(t)&&Me(e)?t+n*(e-t):e}function I8(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):xu(r,e))===n)}var Fn=t=>t===null||typeof t>"u",bh=t=>Fn(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function R8(t){return t!=null}function wh(){}var N8=["type","size","sizeType"];function T1(){return T1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},T1.apply(null,arguments)}function GI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function KI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GI(Object(n),!0).forEach(function(r){P8(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function P8(t,e,n){return(e=M8(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function M8(t){var e=k8(t,"string");return typeof e=="symbol"?e:e+""}function k8(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function D8(t,e){if(t==null)return{};var n,r,i=j8(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function j8(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var $D={symbolCircle:lE,symbolCross:X$,symbolDiamond:J$,symbolSquare:Z$,symbolStar:r8,symbolTriangle:i8,symbolWye:s8},L8=Math.PI/180,V8=t=>{var e="symbol".concat(bh(t));return $D[e]||lE},U8=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*L8;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},z8=(t,e)=>{$D["symbol".concat(bh(t))]=e},qD=t=>{var{type:e="circle",size:n=64,sizeType:r="area"}=t,i=D8(t,N8),s=KI(KI({},i),{},{type:e,size:n,sizeType:r}),l="circle";typeof e=="string"&&(l=e);var u=()=>{var v=V8(l),b=o8().type(v).size(U8(n,r,l)),E=b();if(E!==null)return E},{className:f,cx:h,cy:m}=s,p=Ai(s);return Me(h)&&Me(m)&&Me(n)?C.createElement("path",T1({},p,{className:$t("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(m,")"),d:u()})):null};qD.registerSymbol=z8;var FD=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,B8=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(C.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{iE(i)&&(r[i]=(s=>n[i](n,s)))}),r},$8=(t,e,n)=>r=>(t(e,n,r),null),dE=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(i=>{var s=t[i];iE(i)&&typeof s=="function"&&(r||(r={}),r[i]=$8(s,e,n))}),r};function YI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function q8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YI(Object(n),!0).forEach(function(r){F8(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function F8(t,e,n){return(e=H8(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function H8(t){var e=G8(t,"string");return typeof e=="symbol"?e:e+""}function G8(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ai(t,e){var n=q8({},t),r=e,i=Object.keys(e),s=i.reduce((l,u)=>(l[u]===void 0&&r[u]!==void 0&&(l[u]=r[u]),l),n);return s}var Ab={},Tb={},WI;function K8(){return WI||(WI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const i=new Map;for(let s=0;s<n.length;s++){const l=n[s],u=r(l);i.has(u)||i.set(u,l)}return Array.from(i.values())}t.uniqBy=e})(Tb)),Tb}var Cb={},XI;function HD(){return XI||(XI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(Cb)),Cb}var Ob={},Ib={},Rb={},QI;function Y8(){return QI||(QI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(Rb)),Rb}var JI;function hE(){return JI||(JI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Y8();function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n})(Ib)),Ib}var Nb={},ZI;function W8(){return ZI||(ZI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(Nb)),Nb}var e2;function X8(){return e2||(e2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=hE(),n=W8();function r(i){return n.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=r})(Ob)),Ob}var Pb={},Mb={},t2;function Q8(){return t2||(t2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=fE();function n(r){return function(i){return e.get(i,r)}}t.property=n})(Mb)),Mb}var kb={},Db={},jb={},Lb={},n2;function GD(){return n2||(n2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(Lb)),Lb}var Vb={},r2;function KD(){return r2||(r2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(Vb)),Vb}var Ub={},i2;function YD(){return i2||(i2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.eq=e})(Ub)),Ub}var a2;function J8(){return a2||(a2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=GD(),n=KD(),r=YD();function i(m,p,v){return typeof v!="function"?i(m,p,()=>{}):s(m,p,function b(E,w,S,P,M,j){const $=v(E,w,S,P,M,j);return $!==void 0?!!$:s(E,w,b,j)},new Map)}function s(m,p,v,b){if(p===m)return!0;switch(typeof p){case"object":return l(m,p,v,b);case"function":return Object.keys(p).length>0?s(m,{...p},v,b):r.eq(m,p);default:return e.isObject(m)?typeof p=="string"?p==="":!0:r.eq(m,p)}}function l(m,p,v,b){if(p==null)return!0;if(Array.isArray(p))return f(m,p,v,b);if(p instanceof Map)return u(m,p,v,b);if(p instanceof Set)return h(m,p,v,b);const E=Object.keys(p);if(m==null)return E.length===0;if(E.length===0)return!0;if(b!=null&&b.has(p))return b.get(p)===m;b==null||b.set(p,m);try{for(let w=0;w<E.length;w++){const S=E[w];if(!n.isPrimitive(m)&&!(S in m)||p[S]===void 0&&m[S]!==void 0||p[S]===null&&m[S]!==null||!v(m[S],p[S],S,m,p,b))return!1}return!0}finally{b==null||b.delete(p)}}function u(m,p,v,b){if(p.size===0)return!0;if(!(m instanceof Map))return!1;for(const[E,w]of p.entries()){const S=m.get(E);if(v(S,w,E,m,p,b)===!1)return!1}return!0}function f(m,p,v,b){if(p.length===0)return!0;if(!Array.isArray(m))return!1;const E=new Set;for(let w=0;w<p.length;w++){const S=p[w];let P=!1;for(let M=0;M<m.length;M++){if(E.has(M))continue;const j=m[M];let $=!1;if(v(j,S,w,m,p,b)&&($=!0),$){E.add(M),P=!0;break}}if(!P)return!1}return!0}function h(m,p,v,b){return p.size===0?!0:m instanceof Set?f([...m],[...p],v,b):!1}t.isMatchWith=i,t.isSetMatch=h})(jb)),jb}var s2;function WD(){return s2||(s2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=J8();function n(r,i){return e.isMatchWith(r,i,()=>{})}t.isMatch=n})(Db)),Db}var zb={},Bb={},$b={},o2;function Z8(){return o2||(o2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e})($b)),$b}var qb={},l2;function XD(){return l2||(l2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(qb)),qb}var Fb={},c2;function QD(){return c2||(c2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",s="[object Arguments]",l="[object Symbol]",u="[object Date]",f="[object Map]",h="[object Set]",m="[object Array]",p="[object Function]",v="[object ArrayBuffer]",b="[object Object]",E="[object Error]",w="[object DataView]",S="[object Uint8Array]",P="[object Uint8ClampedArray]",M="[object Uint16Array]",j="[object Uint32Array]",$="[object BigUint64Array]",L="[object Int8Array]",q="[object Int16Array]",I="[object Int32Array]",R="[object BigInt64Array]",N="[object Float32Array]",z="[object Float64Array]";t.argumentsTag=s,t.arrayBufferTag=v,t.arrayTag=m,t.bigInt64ArrayTag=R,t.bigUint64ArrayTag=$,t.booleanTag=i,t.dataViewTag=w,t.dateTag=u,t.errorTag=E,t.float32ArrayTag=N,t.float64ArrayTag=z,t.functionTag=p,t.int16ArrayTag=q,t.int32ArrayTag=I,t.int8ArrayTag=L,t.mapTag=f,t.numberTag=r,t.objectTag=b,t.regexpTag=e,t.setTag=h,t.stringTag=n,t.symbolTag=l,t.uint16ArrayTag=M,t.uint32ArrayTag=j,t.uint8ArrayTag=S,t.uint8ClampedArrayTag=P})(Fb)),Fb}var Hb={},u2;function eq(){return u2||(u2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(Hb)),Hb}var f2;function JD(){return f2||(f2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Z8(),n=XD(),r=QD(),i=KD(),s=eq();function l(m,p){return u(m,void 0,m,new Map,p)}function u(m,p,v,b=new Map,E=void 0){const w=E==null?void 0:E(m,p,v,b);if(w!==void 0)return w;if(i.isPrimitive(m))return m;if(b.has(m))return b.get(m);if(Array.isArray(m)){const S=new Array(m.length);b.set(m,S);for(let P=0;P<m.length;P++)S[P]=u(m[P],P,v,b,E);return Object.hasOwn(m,"index")&&(S.index=m.index),Object.hasOwn(m,"input")&&(S.input=m.input),S}if(m instanceof Date)return new Date(m.getTime());if(m instanceof RegExp){const S=new RegExp(m.source,m.flags);return S.lastIndex=m.lastIndex,S}if(m instanceof Map){const S=new Map;b.set(m,S);for(const[P,M]of m)S.set(P,u(M,P,v,b,E));return S}if(m instanceof Set){const S=new Set;b.set(m,S);for(const P of m)S.add(u(P,void 0,v,b,E));return S}if(typeof Buffer<"u"&&Buffer.isBuffer(m))return m.subarray();if(s.isTypedArray(m)){const S=new(Object.getPrototypeOf(m)).constructor(m.length);b.set(m,S);for(let P=0;P<m.length;P++)S[P]=u(m[P],P,v,b,E);return S}if(m instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&m instanceof SharedArrayBuffer)return m.slice(0);if(m instanceof DataView){const S=new DataView(m.buffer.slice(0),m.byteOffset,m.byteLength);return b.set(m,S),f(S,m,v,b,E),S}if(typeof File<"u"&&m instanceof File){const S=new File([m],m.name,{type:m.type});return b.set(m,S),f(S,m,v,b,E),S}if(typeof Blob<"u"&&m instanceof Blob){const S=new Blob([m],{type:m.type});return b.set(m,S),f(S,m,v,b,E),S}if(m instanceof Error){const S=new m.constructor;return b.set(m,S),S.message=m.message,S.name=m.name,S.stack=m.stack,S.cause=m.cause,f(S,m,v,b,E),S}if(m instanceof Boolean){const S=new Boolean(m.valueOf());return b.set(m,S),f(S,m,v,b,E),S}if(m instanceof Number){const S=new Number(m.valueOf());return b.set(m,S),f(S,m,v,b,E),S}if(m instanceof String){const S=new String(m.valueOf());return b.set(m,S),f(S,m,v,b,E),S}if(typeof m=="object"&&h(m)){const S=Object.create(Object.getPrototypeOf(m));return b.set(m,S),f(S,m,v,b,E),S}return m}function f(m,p,v=m,b,E){const w=[...Object.keys(p),...e.getSymbols(p)];for(let S=0;S<w.length;S++){const P=w[S],M=Object.getOwnPropertyDescriptor(m,P);(M==null||M.writable)&&(m[P]=u(p[P],P,v,b,E))}}function h(m){switch(n.getTag(m)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=l,t.cloneDeepWithImpl=u,t.copyProperties=f})(Bb)),Bb}var d2;function tq(){return d2||(d2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=JD();function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n})(zb)),zb}var h2;function nq(){return h2||(h2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=WD(),n=tq();function r(i){return i=n.cloneDeep(i),s=>e.isMatch(s,i)}t.matches=r})(kb)),kb}var Gb={},Kb={},Yb={},m2;function rq(){return m2||(m2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=JD(),n=QD();function r(i,s){return e.cloneDeepWith(i,(l,u,f,h)=>{const m=s==null?void 0:s(l,u,f,h);if(m!==void 0)return m;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const p=new i.constructor(i==null?void 0:i.valueOf());return e.copyProperties(p,i),p}case n.argumentsTag:{const p={};return e.copyProperties(p,i),p.length=i.length,p[Symbol.iterator]=i[Symbol.iterator],p}default:return}})}t.cloneDeepWith=r})(Yb)),Yb}var p2;function iq(){return p2||(p2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=rq();function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n})(Kb)),Kb}var Wb={},Xb={},g2;function ZD(){return g2||(g2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n})(Xb)),Xb}var Qb={},y2;function aq(){return y2||(y2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=XD();function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n})(Qb)),Qb}var v2;function sq(){return v2||(v2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zD(),n=ZD(),r=aq(),i=uE();function s(l,u){let f;if(Array.isArray(u)?f=u:typeof u=="string"&&e.isDeepKey(u)&&(l==null?void 0:l[u])==null?f=i.toPath(u):f=[u],f.length===0)return!1;let h=l;for(let m=0;m<f.length;m++){const p=f[m];if((h==null||!Object.hasOwn(h,p))&&!((Array.isArray(h)||r.isArguments(h))&&n.isIndex(p)&&p<h.length))return!1;h=h[p]}return!0}t.has=s})(Wb)),Wb}var _2;function oq(){return _2||(_2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=WD(),n=cE(),r=iq(),i=fE(),s=sq();function l(u,f){switch(typeof u){case"object":{Object.is(u==null?void 0:u.valueOf(),-0)&&(u="-0");break}case"number":{u=n.toKey(u);break}}return f=r.cloneDeep(f),function(h){const m=i.get(h,u);return m===void 0?s.has(h,u):f===void 0?m===void 0:e.isMatch(m,f)}}t.matchesProperty=l})(Gb)),Gb}var b2;function lq(){return b2||(b2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=HD(),n=Q8(),r=nq(),i=oq();function s(l){if(l==null)return e.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?i.matchesProperty(l[0],l[1]):r.matches(l);case"string":case"symbol":case"number":return n.property(l)}}t.iteratee=s})(Pb)),Pb}var w2;function cq(){return w2||(w2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=K8(),n=HD(),r=X8(),i=lq();function s(l,u=n.identity){return r.isArrayLikeObject(l)?e.uniqBy(Array.from(l),i.iteratee(u)):[]}t.uniqBy=s})(Ab)),Ab}var Jb,x2;function uq(){return x2||(x2=1,Jb=cq().uniqBy),Jb}var fq=uq();const E2=Va(fq);function dq(t,e,n){return e===!0?E2(t,n):typeof e=="function"?E2(t,e):t}var Zb={exports:{}},ew={},tw={exports:{}},nw={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S2;function hq(){if(S2)return nw;S2=1;var t=Uu();function e(p,v){return p===v&&(p!==0||1/p===1/v)||p!==p&&v!==v}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,l=t.useDebugValue;function u(p,v){var b=v(),E=r({inst:{value:b,getSnapshot:v}}),w=E[0].inst,S=E[1];return s(function(){w.value=b,w.getSnapshot=v,f(w)&&S({inst:w})},[p,b,v]),i(function(){return f(w)&&S({inst:w}),p(function(){f(w)&&S({inst:w})})},[p]),l(b),b}function f(p){var v=p.getSnapshot;p=p.value;try{var b=v();return!n(p,b)}catch{return!0}}function h(p,v){return v()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:u;return nw.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:m,nw}var A2;function mq(){return A2||(A2=1,tw.exports=hq()),tw.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T2;function pq(){if(T2)return ew;T2=1;var t=Uu(),e=mq();function n(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,s=t.useRef,l=t.useEffect,u=t.useMemo,f=t.useDebugValue;return ew.useSyncExternalStoreWithSelector=function(h,m,p,v,b){var E=s(null);if(E.current===null){var w={hasValue:!1,value:null};E.current=w}else w=E.current;E=u(function(){function P(q){if(!M){if(M=!0,j=q,q=v(q),b!==void 0&&w.hasValue){var I=w.value;if(b(I,q))return $=I}return $=q}if(I=$,r(j,q))return I;var R=v(q);return b!==void 0&&b(I,R)?(j=q,I):(j=q,$=R)}var M=!1,j,$,L=p===void 0?null:p;return[function(){return P(m())},L===null?void 0:function(){return P(L())}]},[m,p,v,b]);var S=i(h,E[0],E[1]);return l(function(){w.hasValue=!0,w.value=S},[S]),f(S),S},ew}var C2;function gq(){return C2||(C2=1,Zb.exports=pq()),Zb.exports}var yq=gq(),mE=C.createContext(null),vq=t=>t,cn=()=>{var t=C.useContext(mE);return t?t.store.dispatch:vq},ag=()=>{},_q=()=>ag,bq=(t,e)=>t===e;function Ue(t){var e=C.useContext(mE);return yq.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:_q,e?e.store.getState:ag,e?e.store.getState:ag,e?t:ag,bq)}function wq(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function xq(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function Eq(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var O2=t=>Array.isArray(t)?t:[t];function Sq(t){const e=Array.isArray(t[0])?t[0]:t;return Eq(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function Aq(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var Tq=class{constructor(t){this.value=t}deref(){return this.value}},Cq=typeof WeakRef<"u"?WeakRef:Tq,Oq=0,I2=1;function Op(){return{s:Oq,v:void 0,o:null,p:null}}function ej(t,e={}){let n=Op();const{resultEqualityCheck:r}=e;let i,s=0;function l(){var p;let u=n;const{length:f}=arguments;for(let v=0,b=f;v<b;v++){const E=arguments[v];if(typeof E=="function"||typeof E=="object"&&E!==null){let w=u.o;w===null&&(u.o=w=new WeakMap);const S=w.get(E);S===void 0?(u=Op(),w.set(E,u)):u=S}else{let w=u.p;w===null&&(u.p=w=new Map);const S=w.get(E);S===void 0?(u=Op(),w.set(E,u)):u=S}}const h=u;let m;if(u.s===I2)m=u.v;else if(m=t.apply(null,arguments),s++,r){const v=((p=i==null?void 0:i.deref)==null?void 0:p.call(i))??i;v!=null&&r(v,m)&&(m=v,s!==0&&s--),i=typeof m=="object"&&m!==null||typeof m=="function"?new Cq(m):m}return h.s=I2,h.v=m,m}return l.clearCache=()=>{n=Op(),l.resetResultsCount()},l.resultsCount=()=>s,l.resetResultsCount=()=>{s=0},l}function Iq(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let s=0,l=0,u,f={},h=i.pop();typeof h=="object"&&(f=h,h=i.pop()),wq(h,`createSelector expects an output function after the inputs, but received: [${typeof h}]`);const m={...n,...f},{memoize:p,memoizeOptions:v=[],argsMemoize:b=ej,argsMemoizeOptions:E=[]}=m,w=O2(v),S=O2(E),P=Sq(i),M=p(function(){return s++,h.apply(null,arguments)},...w),j=b(function(){l++;const L=Aq(P,arguments);return u=M.apply(null,L),u},...S);return Object.assign(j,{resultFunc:h,memoizedResultFunc:M,dependencies:P,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>u,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:p,argsMemoize:b})};return Object.assign(r,{withTypes:()=>r}),r}var ae=Iq(ej),Rq=Object.assign((t,e=ae)=>{xq(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(s=>t[s]);return e(r,(...s)=>s.reduce((l,u,f)=>(l[n[f]]=u,l),{}))},{withTypes:()=>Rq}),rw={},iw={},aw={},R2;function Nq(){return R2||(R2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,s)=>{if(r!==i){const l=e(r),u=e(i);if(l===u&&l===0){if(r<i)return s==="desc"?1:-1;if(r>i)return s==="desc"?-1:1}return s==="desc"?u-l:l-u}return 0};t.compareValues=n})(aw)),aw}var sw={},ow={},N2;function tj(){return N2||(N2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(ow)),ow}var P2;function Pq(){return P2||(P2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=tj(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,l){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||e.isSymbol(s)?!0:typeof s=="string"&&(r.test(s)||!n.test(s))||l!=null&&Object.hasOwn(l,s)}t.isKey=i})(sw)),sw}var M2;function Mq(){return M2||(M2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Nq(),n=Pq(),r=uE();function i(s,l,u,f){if(s==null)return[];u=f?void 0:u,Array.isArray(s)||(s=Object.values(s)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(b=>String(b));const h=(b,E)=>{let w=b;for(let S=0;S<E.length&&w!=null;++S)w=w[E[S]];return w},m=(b,E)=>E==null||b==null?E:typeof b=="object"&&"key"in b?Object.hasOwn(E,b.key)?E[b.key]:h(E,b.path):typeof b=="function"?b(E):Array.isArray(b)?h(E,b):typeof E=="object"?E[b]:E,p=l.map(b=>(Array.isArray(b)&&b.length===1&&(b=b[0]),b==null||typeof b=="function"||Array.isArray(b)||n.isKey(b)?b:{key:b,path:r.toPath(b)}));return s.map(b=>({original:b,criteria:p.map(E=>m(E,b))})).slice().sort((b,E)=>{for(let w=0;w<p.length;w++){const S=e.compareValues(b.criteria[w],E.criteria[w],u[w]);if(S!==0)return S}return 0}).map(b=>b.original)}t.orderBy=i})(iw)),iw}var lw={},k2;function kq(){return k2||(k2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const i=[],s=Math.floor(r),l=(u,f)=>{for(let h=0;h<u.length;h++){const m=u[h];Array.isArray(m)&&f<s?l(m,f+1):i.push(m)}};return l(n,0),i}t.flatten=e})(lw)),lw}var cw={},D2;function nj(){return D2||(D2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ZD(),n=hE(),r=GD(),i=YD();function s(l,u,f){return r.isObject(f)&&(typeof u=="number"&&n.isArrayLike(f)&&e.isIndex(u)&&u<f.length||typeof u=="string"&&u in f)?i.eq(f[u],l):!1}t.isIterateeCall=s})(cw)),cw}var j2;function Dq(){return j2||(j2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Mq(),n=kq(),r=nj();function i(s,...l){const u=l.length;return u>1&&r.isIterateeCall(s,l[0],l[1])?l=[]:u>2&&r.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),e.orderBy(s,n.flatten(l),["asc"])}t.sortBy=i})(rw)),rw}var uw,L2;function jq(){return L2||(L2=1,uw=Dq().sortBy),uw}var Lq=jq();const rv=Va(Lq);var rj=t=>t.legend.settings,Vq=t=>t.legend.size,Uq=t=>t.legend.payload;ae([Uq,rj],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?rv(r,n):r});var Ip=1;function zq(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=C.useState({height:0,left:0,top:0,width:0}),r=C.useCallback(i=>{if(i!=null){var s=i.getBoundingClientRect(),l={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(l.height-e.height)>Ip||Math.abs(l.left-e.left)>Ip||Math.abs(l.top-e.top)>Ip||Math.abs(l.width-e.width)>Ip)&&n({height:l.height,left:l.left,top:l.top,width:l.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function Jn(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var Bq=typeof Symbol=="function"&&Symbol.observable||"@@observable",V2=Bq,fw=()=>Math.random().toString(36).substring(7).split("").join("."),$q={INIT:`@@redux/INIT${fw()}`,REPLACE:`@@redux/REPLACE${fw()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${fw()}`},Dg=$q;function pE(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function ij(t,e,n){if(typeof t!="function")throw new Error(Jn(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Jn(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Jn(1));return n(ij)(t,e)}let r=t,i=e,s=new Map,l=s,u=0,f=!1;function h(){l===s&&(l=new Map,s.forEach((S,P)=>{l.set(P,S)}))}function m(){if(f)throw new Error(Jn(3));return i}function p(S){if(typeof S!="function")throw new Error(Jn(4));if(f)throw new Error(Jn(5));let P=!0;h();const M=u++;return l.set(M,S),function(){if(P){if(f)throw new Error(Jn(6));P=!1,h(),l.delete(M),s=null}}}function v(S){if(!pE(S))throw new Error(Jn(7));if(typeof S.type>"u")throw new Error(Jn(8));if(typeof S.type!="string")throw new Error(Jn(17));if(f)throw new Error(Jn(9));try{f=!0,i=r(i,S)}finally{f=!1}return(s=l).forEach(M=>{M()}),S}function b(S){if(typeof S!="function")throw new Error(Jn(10));r=S,v({type:Dg.REPLACE})}function E(){const S=p;return{subscribe(P){if(typeof P!="object"||P===null)throw new Error(Jn(11));function M(){const $=P;$.next&&$.next(m())}return M(),{unsubscribe:S(M)}},[V2](){return this}}}return v({type:Dg.INIT}),{dispatch:v,subscribe:p,getState:m,replaceReducer:b,[V2]:E}}function qq(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:Dg.INIT})>"u")throw new Error(Jn(12));if(typeof n(void 0,{type:Dg.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Jn(13))})}function aj(t){const e=Object.keys(t),n={};for(let s=0;s<e.length;s++){const l=e[s];typeof t[l]=="function"&&(n[l]=t[l])}const r=Object.keys(n);let i;try{qq(n)}catch(s){i=s}return function(l={},u){if(i)throw i;let f=!1;const h={};for(let m=0;m<r.length;m++){const p=r[m],v=n[p],b=l[p],E=v(b,u);if(typeof E>"u")throw u&&u.type,new Error(Jn(14));h[p]=E,f=f||E!==b}return f=f||r.length!==Object.keys(l).length,f?h:l}}function jg(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function Fq(...t){return e=>(n,r)=>{const i=e(n,r);let s=()=>{throw new Error(Jn(15))};const l={getState:i.getState,dispatch:(f,...h)=>s(f,...h)},u=t.map(f=>f(l));return s=jg(...u)(i.dispatch),{...i,dispatch:s}}}function sj(t){return pE(t)&&"type"in t&&typeof t.type=="string"}var oj=Symbol.for("immer-nothing"),U2=Symbol.for("immer-draftable"),Er=Symbol.for("immer-state");function $i(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var ti=Object,Eu=ti.getPrototypeOf,Lg="constructor",iv="prototype",C1="configurable",Vg="enumerable",sg="writable",Kd="value",ws=t=>!!t&&!!t[Er];function Qi(t){var e;return t?lj(t)||av(t)||!!t[U2]||!!((e=t[Lg])!=null&&e[U2])||sv(t)||ov(t):!1}var Hq=ti[iv][Lg].toString(),z2=new WeakMap;function lj(t){if(!t||!gE(t))return!1;const e=Eu(t);if(e===null||e===ti[iv])return!0;const n=ti.hasOwnProperty.call(e,Lg)&&e[Lg];if(n===Object)return!0;if(!iu(n))return!1;let r=z2.get(n);return r===void 0&&(r=Function.toString.call(n),z2.set(n,r)),r===Hq}function xh(t,e,n=!0){Eh(t)===0?(n?Reflect.ownKeys(t):ti.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function Eh(t){const e=t[Er];return e?e.type_:av(t)?1:sv(t)?2:ov(t)?3:0}var B2=(t,e,n=Eh(t))=>n===2?t.has(e):ti[iv].hasOwnProperty.call(t,e),O1=(t,e,n=Eh(t))=>n===2?t.get(e):t[e],Ug=(t,e,n,r=Eh(t))=>{r===2?t.set(e,n):r===3?t.add(n):t[e]=n};function Gq(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var av=Array.isArray,sv=t=>t instanceof Map,ov=t=>t instanceof Set,gE=t=>typeof t=="object",iu=t=>typeof t=="function",dw=t=>typeof t=="boolean",ss=t=>t.copy_||t.base_,yE=t=>t.modified_?t.copy_:t.base_;function I1(t,e){if(sv(t))return new Map(t);if(ov(t))return new Set(t);if(av(t))return Array[iv].slice.call(t);const n=lj(t);if(e===!0||e==="class_only"&&!n){const r=ti.getOwnPropertyDescriptors(t);delete r[Er];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const l=i[s],u=r[l];u[sg]===!1&&(u[sg]=!0,u[C1]=!0),(u.get||u.set)&&(r[l]={[C1]:!0,[sg]:!0,[Vg]:u[Vg],[Kd]:t[l]})}return ti.create(Eu(t),r)}else{const r=Eu(t);if(r!==null&&n)return{...t};const i=ti.create(r);return ti.assign(i,t)}}function vE(t,e=!1){return lv(t)||ws(t)||!Qi(t)||(Eh(t)>1&&ti.defineProperties(t,{set:Rp,add:Rp,clear:Rp,delete:Rp}),ti.freeze(t),e&&xh(t,(n,r)=>{vE(r,!0)},!1)),t}function Kq(){$i(2)}var Rp={[Kd]:Kq};function lv(t){return t===null||!gE(t)?!0:ti.isFrozen(t)}var zg="MapSet",R1="Patches",cj={};function Su(t){const e=cj[t];return e||$i(0,t),e}var Yq=t=>!!cj[t],Yd,uj=()=>Yd,Wq=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:Yq(zg)?Su(zg):void 0});function $2(t,e){e&&(t.patchPlugin_=Su(R1),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function N1(t){P1(t),t.drafts_.forEach(Xq),t.drafts_=null}function P1(t){t===Yd&&(Yd=t.parent_)}var q2=t=>Yd=Wq(Yd,t);function Xq(t){const e=t[Er];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function F2(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];if(t!==void 0&&t!==n){n[Er].modified_&&(N1(e),$i(4)),Qi(t)&&(t=H2(e,t));const{patchPlugin_:i}=e;i&&i.generateReplacementPatches_(n[Er].base_,t,e)}else t=H2(e,n);return Qq(e,t,!0),N1(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==oj?t:void 0}function H2(t,e){if(lv(e))return e;const n=e[Er];if(!n)return _E(e,t.handledSet_,t);if(!cv(n,t))return e;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(t);hj(n,t)}return n.copy_}function Qq(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&vE(e,n)}function fj(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var cv=(t,e)=>t.scope_===e,Jq=[];function dj(t,e,n,r){const i=ss(t),s=t.type_;if(r!==void 0&&O1(i,r,s)===e){Ug(i,r,n,s);return}if(!t.draftLocations_){const u=t.draftLocations_=new Map;xh(i,(f,h)=>{if(ws(h)){const m=u.get(h)||[];m.push(f),u.set(h,m)}})}const l=t.draftLocations_.get(e)??Jq;for(const u of l)Ug(i,u,n,s)}function Zq(t,e,n){t.callbacks_.push(function(i){var u;const s=e;if(!s||!cv(s,i))return;(u=i.mapSetPlugin_)==null||u.fixSetContents(s);const l=yE(s);dj(t,s.draft_??s,l,n),hj(s,i)})}function hj(t,e){var r;if(t.modified_&&!t.finalized_&&(t.type_===3||(((r=t.assigned_)==null?void 0:r.size)??0)>0)){const{patchPlugin_:i}=e;if(i){const s=i.getPath(t);s&&i.generatePatches_(t,s,e)}fj(t)}}function eF(t,e,n){const{scope_:r}=t;if(ws(n)){const i=n[Er];cv(i,r)&&i.callbacks_.push(function(){og(t);const l=yE(i);dj(t,n,l,e)})}else Qi(n)&&t.callbacks_.push(function(){const s=ss(t);O1(s,e,t.type_)===n&&r.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&_E(O1(t.copy_,e,t.type_),r.handledSet_,r)})}function _E(t,e,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||ws(t)||e.has(t)||!Qi(t)||lv(t)||(e.add(t),xh(t,(r,i)=>{if(ws(i)){const s=i[Er];if(cv(s,n)){const l=yE(s);Ug(t,r,l,t.type_),fj(s)}}else Qi(i)&&_E(i,e,n)})),t}function tF(t,e){const n=av(t),r={type_:n?1:0,scope_:e?e.scope_:uj(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=r,s=bE;n&&(i=[r],s=Wd);const{revoke:l,proxy:u}=Proxy.revocable(i,s);return r.draft_=u,r.revoke_=l,[u,r]}var bE={get(t,e){if(e===Er)return t;const n=ss(t);if(!B2(n,e,t.type_))return nF(t,n,e);const r=n[e];if(t.finalized_||!Qi(r))return r;if(r===hw(t.base_,e)){og(t);const i=t.type_===1?+e:e,s=k1(t.scope_,r,t,i);return t.copy_[i]=s}return r},has(t,e){return e in ss(t)},ownKeys(t){return Reflect.ownKeys(ss(t))},set(t,e,n){const r=mj(ss(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=hw(ss(t),e),s=i==null?void 0:i[Er];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_.set(e,!1),!0;if(Gq(n,i)&&(n!==void 0||B2(t.base_,e,t.type_)))return!0;og(t),M1(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_.set(e,!0),eF(t,e,n)),!0},deleteProperty(t,e){return og(t),hw(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),M1(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=ss(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{[sg]:!0,[C1]:t.type_!==1||e!=="length",[Vg]:r[Vg],[Kd]:n[e]}},defineProperty(){$i(11)},getPrototypeOf(t){return Eu(t.base_)},setPrototypeOf(){$i(12)}},Wd={};xh(bE,(t,e)=>{Wd[t]=function(){const n=arguments;return n[0]=n[0][0],e.apply(this,n)}});Wd.deleteProperty=function(t,e){return Wd.set.call(this,t,e,void 0)};Wd.set=function(t,e,n){return bE.set.call(this,t[0],e,n,t[0])};function hw(t,e){const n=t[Er];return(n?ss(n):t)[e]}function nF(t,e,n){var i;const r=mj(e,n);return r?Kd in r?r[Kd]:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function mj(t,e){if(!(e in t))return;let n=Eu(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Eu(n)}}function M1(t){t.modified_||(t.modified_=!0,t.parent_&&M1(t.parent_))}function og(t){t.copy_||(t.assigned_=new Map,t.copy_=I1(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var rF=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,r,i)=>{if(iu(n)&&!iu(r)){const l=r;r=n;const u=this;return function(h=l,...m){return u.produce(h,p=>r.call(this,p,...m))}}iu(r)||$i(6),i!==void 0&&!iu(i)&&$i(7);let s;if(Qi(n)){const l=q2(this),u=k1(l,n,void 0);let f=!0;try{s=r(u),f=!1}finally{f?N1(l):P1(l)}return $2(l,i),F2(s,l)}else if(!n||!gE(n)){if(s=r(n),s===void 0&&(s=n),s===oj&&(s=void 0),this.autoFreeze_&&vE(s,!0),i){const l=[],u=[];Su(R1).generateReplacementPatches_(n,s,{patches_:l,inversePatches_:u}),i(l,u)}return s}else $i(1,n)},this.produceWithPatches=(n,r)=>{if(iu(n))return(u,...f)=>this.produceWithPatches(u,h=>n(h,...f));let i,s;return[this.produce(n,r,(u,f)=>{i=u,s=f}),i,s]},dw(e==null?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),dw(e==null?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),dw(e==null?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Qi(e)||$i(8),ws(e)&&(e=Ki(e));const n=q2(this),r=k1(n,e,void 0);return r[Er].isManual_=!0,P1(n),r}finishDraft(e,n){const r=e&&e[Er];(!r||!r.isManual_)&&$i(9);const{scope_:i}=r;return $2(i,n),F2(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,n){let r;for(r=n.length-1;r>=0;r--){const s=n[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(n=n.slice(r+1));const i=Su(R1).applyPatches_;return ws(e)?i(e,n):this.produce(e,s=>i(s,n))}};function k1(t,e,n,r){const[i,s]=sv(e)?Su(zg).proxyMap_(e,n):ov(e)?Su(zg).proxySet_(e,n):tF(e,n);return((n==null?void 0:n.scope_)??uj()).drafts_.push(i),s.callbacks_=(n==null?void 0:n.callbacks_)??[],s.key_=r,n&&r!==void 0?Zq(n,s,r):s.callbacks_.push(function(f){var m;(m=f.mapSetPlugin_)==null||m.fixSetContents(s);const{patchPlugin_:h}=f;s.modified_&&h&&h.generatePatches_(s,[],f)}),i}function Ki(t){return ws(t)||$i(10,t),pj(t)}function pj(t){if(!Qi(t)||lv(t))return t;const e=t[Er];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=I1(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=I1(t,!0);return xh(n,(i,s)=>{Ug(n,i,pj(s))},r),e&&(e.finalized_=!1),n}var iF=new rF,gj=iF.produce;function yj(t){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,t):i(s)}var aF=yj(),sF=yj,oF=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?jg:jg.apply(null,arguments)};function Ti(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(ni(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>sj(r)&&r.type===t,n}var vj=class yd extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,yd.prototype)}static get[Symbol.species](){return yd}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new yd(...e[0].concat(this)):new yd(...e.concat(this))}};function G2(t){return Qi(t)?gj(t,()=>{}):t}function Np(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function lF(t){return typeof t=="boolean"}var cF=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=e??{};let l=new vj;return n&&(lF(n)?l.push(aF):l.push(sF(n.extraArgument))),l},_j="RTK_autoBatch",Gt=()=>t=>({payload:t,meta:{[_j]:!0}}),K2=t=>e=>{setTimeout(e,t)},bj=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,s=!1,l=!1;const u=new Set,f=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:K2(10):t.type==="callback"?t.queueNotification:K2(t.timeout),h=()=>{l=!1,s&&(s=!1,u.forEach(m=>m()))};return Object.assign({},r,{subscribe(m){const p=()=>i&&m(),v=r.subscribe(p);return u.add(m),()=>{v(),u.delete(m)}},dispatch(m){var p;try{return i=!((p=m==null?void 0:m.meta)!=null&&p[_j]),s=!i,s&&(l||(l=!0,f(h))),r.dispatch(m)}finally{i=!0}}})},uF=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new vj(t);return r&&i.push(bj(typeof r=="object"?r:void 0)),i};function fF(t){const e=cF(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:l=void 0}=t||{};let u;if(typeof n=="function")u=n;else if(pE(n))u=aj(n);else throw new Error(ni(1));let f;typeof r=="function"?f=r(e):f=e();let h=jg;i&&(h=oF({trace:!1,...typeof i=="object"&&i}));const m=Fq(...f),p=uF(m);let v=typeof l=="function"?l(p):p();const b=h(...v);return ij(u,s,b)}function wj(t){const e={},n=[];let r;const i={addCase(s,l){const u=typeof s=="string"?s:s.type;if(!u)throw new Error(ni(28));if(u in e)throw new Error(ni(29));return e[u]=l,i},addAsyncThunk(s,l){return l.pending&&(e[s.pending.type]=l.pending),l.rejected&&(e[s.rejected.type]=l.rejected),l.fulfilled&&(e[s.fulfilled.type]=l.fulfilled),l.settled&&n.push({matcher:s.settled,reducer:l.settled}),i},addMatcher(s,l){return n.push({matcher:s,reducer:l}),i},addDefaultCase(s){return r=s,i}};return t(i),[e,n,r]}function dF(t){return typeof t=="function"}function hF(t,e){let[n,r,i]=wj(e),s;if(dF(t))s=()=>G2(t());else{const u=G2(t);s=()=>u}function l(u=s(),f){let h=[n[f.type],...r.filter(({matcher:m})=>m(f)).map(({reducer:m})=>m)];return h.filter(m=>!!m).length===0&&(h=[i]),h.reduce((m,p)=>{if(p)if(ws(m)){const b=p(m,f);return b===void 0?m:b}else{if(Qi(m))return gj(m,v=>p(v,f));{const v=p(m,f);if(v===void 0){if(m===null)return m;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}}return m},u)}return l.getInitialState=s,l}var mF="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",pF=(t=21)=>{let e="",n=t;for(;n--;)e+=mF[Math.random()*64|0];return e},gF=Symbol.for("rtk-slice-createasyncthunk");function yF(t,e){return`${t}/${e}`}function vF({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[gF];return function(i){const{name:s,reducerPath:l=s}=i;if(!s)throw new Error(ni(11));const u=(typeof i.reducers=="function"?i.reducers(bF()):i.reducers)||{},f=Object.keys(u),h={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},m={addCase($,L){const q=typeof $=="string"?$:$.type;if(!q)throw new Error(ni(12));if(q in h.sliceCaseReducersByType)throw new Error(ni(13));return h.sliceCaseReducersByType[q]=L,m},addMatcher($,L){return h.sliceMatchers.push({matcher:$,reducer:L}),m},exposeAction($,L){return h.actionCreators[$]=L,m},exposeCaseReducer($,L){return h.sliceCaseReducersByName[$]=L,m}};f.forEach($=>{const L=u[$],q={reducerName:$,type:yF(s,$),createNotation:typeof i.reducers=="function"};xF(L)?SF(q,L,m,e):wF(q,L,m)});function p(){const[$={},L=[],q=void 0]=typeof i.extraReducers=="function"?wj(i.extraReducers):[i.extraReducers],I={...$,...h.sliceCaseReducersByType};return hF(i.initialState,R=>{for(let N in I)R.addCase(N,I[N]);for(let N of h.sliceMatchers)R.addMatcher(N.matcher,N.reducer);for(let N of L)R.addMatcher(N.matcher,N.reducer);q&&R.addDefaultCase(q)})}const v=$=>$,b=new Map,E=new WeakMap;let w;function S($,L){return w||(w=p()),w($,L)}function P(){return w||(w=p()),w.getInitialState()}function M($,L=!1){function q(R){let N=R[$];return typeof N>"u"&&L&&(N=Np(E,q,P)),N}function I(R=v){const N=Np(b,L,()=>new WeakMap);return Np(N,R,()=>{const z={};for(const[k,B]of Object.entries(i.selectors??{}))z[k]=_F(B,R,()=>Np(E,R,P),L);return z})}return{reducerPath:$,getSelectors:I,get selectors(){return I(q)},selectSlice:q}}const j={name:s,reducer:S,actions:h.actionCreators,caseReducers:h.sliceCaseReducersByName,getInitialState:P,...M(l),injectInto($,{reducerPath:L,...q}={}){const I=L??l;return $.inject({reducerPath:I,reducer:S},q),{...j,...M(I,!0)}}};return j}}function _F(t,e,n,r){function i(s,...l){let u=e(s);return typeof u>"u"&&r&&(u=n()),t(u,...l)}return i.unwrapped=t,i}var Vr=vF();function bF(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function wF({type:t,reducerName:e,createNotation:n},r,i){let s,l;if("reducer"in r){if(n&&!EF(r))throw new Error(ni(17));s=r.reducer,l=r.prepare}else s=r;i.addCase(t,s).exposeCaseReducer(e,s).exposeAction(e,l?Ti(t,l):Ti(t))}function xF(t){return t._reducerDefinitionType==="asyncThunk"}function EF(t){return t._reducerDefinitionType==="reducerWithPrepare"}function SF({type:t,reducerName:e},n,r,i){if(!i)throw new Error(ni(18));const{payloadCreator:s,fulfilled:l,pending:u,rejected:f,settled:h,options:m}=n,p=i(t,s,m);r.exposeAction(e,p),l&&r.addCase(p.fulfilled,l),u&&r.addCase(p.pending,u),f&&r.addCase(p.rejected,f),h&&r.addMatcher(p.settled,h),r.exposeCaseReducer(e,{fulfilled:l||Pp,pending:u||Pp,rejected:f||Pp,settled:h||Pp})}function Pp(){}var AF="task",xj="listener",Ej="completed",wE="cancelled",TF=`task-${wE}`,CF=`task-${Ej}`,D1=`${xj}-${wE}`,OF=`${xj}-${Ej}`,uv=class{constructor(t){lb(this,"name","TaskAbortError");lb(this,"message");this.code=t,this.message=`${AF} ${wE} (reason: ${t})`}},xE=(t,e)=>{if(typeof t!="function")throw new TypeError(ni(32))},Bg=()=>{},Sj=(t,e=Bg)=>(t.catch(e),t),Aj=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),Vl=t=>{if(t.aborted)throw new uv(t.reason)};function Tj(t,e){let n=Bg;return new Promise((r,i)=>{const s=()=>i(new uv(t.reason));if(t.aborted){s();return}n=Aj(t,s),e.finally(()=>n()).then(r,i)}).finally(()=>{n=Bg})}var IF=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof uv?"cancelled":"rejected",error:n}}finally{e==null||e()}},$g=t=>e=>Sj(Tj(t,e).then(n=>(Vl(t),n))),Cj=t=>{const e=$g(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:pu}=Object,Y2={},fv="listenerMiddleware",RF=(t,e)=>{const n=r=>Aj(t,()=>r.abort(t.reason));return(r,i)=>{xE(r);const s=new AbortController;n(s);const l=IF(async()=>{Vl(t),Vl(s.signal);const u=await r({pause:$g(s.signal),delay:Cj(s.signal),signal:s.signal});return Vl(s.signal),u},()=>s.abort(CF));return i!=null&&i.autoJoin&&e.push(l.catch(Bg)),{result:$g(t)(l),cancel(){s.abort(TF)}}}},NF=(t,e)=>{const n=async(r,i)=>{Vl(e);let s=()=>{};const u=[new Promise((f,h)=>{let m=t({predicate:r,effect:(p,v)=>{v.unsubscribe(),f([p,v.getState(),v.getOriginalState()])}});s=()=>{m(),h()}})];i!=null&&u.push(new Promise(f=>setTimeout(f,i,null)));try{const f=await Tj(e,Promise.race(u));return Vl(e),f}finally{s()}};return(r,i)=>Sj(n(r,i))},Oj=t=>{let{type:e,actionCreator:n,matcher:r,predicate:i,effect:s}=t;if(e)i=Ti(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(ni(21));return xE(s),{predicate:i,type:e,effect:s}},Ij=pu(t=>{const{type:e,predicate:n,effect:r}=Oj(t);return{id:pF(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(ni(22))}}},{withTypes:()=>Ij}),W2=(t,e)=>{const{type:n,effect:r,predicate:i}=Oj(e);return Array.from(t.values()).find(s=>(typeof n=="string"?s.type===n:s.predicate===i)&&s.effect===r)},j1=t=>{t.pending.forEach(e=>{e.abort(D1)})},PF=(t,e)=>()=>{for(const n of e.keys())j1(n);t.clear()},X2=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},Rj=pu(Ti(`${fv}/add`),{withTypes:()=>Rj}),MF=Ti(`${fv}/removeAll`),Nj=pu(Ti(`${fv}/remove`),{withTypes:()=>Nj}),kF=(...t)=>{console.error(`${fv}/error`,...t)},Sh=(t={})=>{const e=new Map,n=new Map,r=b=>{const E=n.get(b)??0;n.set(b,E+1)},i=b=>{const E=n.get(b)??1;E===1?n.delete(b):n.set(b,E-1)},{extra:s,onError:l=kF}=t;xE(l);const u=b=>(b.unsubscribe=()=>e.delete(b.id),e.set(b.id,b),E=>{b.unsubscribe(),E!=null&&E.cancelActive&&j1(b)}),f=b=>{const E=W2(e,b)??Ij(b);return u(E)};pu(f,{withTypes:()=>f});const h=b=>{const E=W2(e,b);return E&&(E.unsubscribe(),b.cancelActive&&j1(E)),!!E};pu(h,{withTypes:()=>h});const m=async(b,E,w,S)=>{const P=new AbortController,M=NF(f,P.signal),j=[];try{b.pending.add(P),r(b),await Promise.resolve(b.effect(E,pu({},w,{getOriginalState:S,condition:($,L)=>M($,L).then(Boolean),take:M,delay:Cj(P.signal),pause:$g(P.signal),extra:s,signal:P.signal,fork:RF(P.signal,j),unsubscribe:b.unsubscribe,subscribe:()=>{e.set(b.id,b)},cancelActiveListeners:()=>{b.pending.forEach(($,L,q)=>{$!==P&&($.abort(D1),q.delete($))})},cancel:()=>{P.abort(D1),b.pending.delete(P)},throwIfCancelled:()=>{Vl(P.signal)}})))}catch($){$ instanceof uv||X2(l,$,{raisedBy:"effect"})}finally{await Promise.all(j),P.abort(OF),i(b),b.pending.delete(P)}},p=PF(e,n);return{middleware:b=>E=>w=>{if(!sj(w))return E(w);if(Rj.match(w))return f(w.payload);if(MF.match(w)){p();return}if(Nj.match(w))return h(w.payload);let S=b.getState();const P=()=>{if(S===Y2)throw new Error(ni(23));return S};let M;try{if(M=E(w),e.size>0){const j=b.getState(),$=Array.from(e.values());for(const L of $){let q=!1;try{q=L.predicate(w,j,S)}catch(I){q=!1,X2(l,I,{raisedBy:"predicate"})}q&&m(L,w,b,P)}}}finally{S=Y2}return M},startListening:f,stopListening:h,clearListeners:p}};function ni(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var DF={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Pj=Vr({name:"chartLayout",initialState:DF,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,r,i,s;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,t.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,t.margin.left=(s=e.payload.left)!==null&&s!==void 0?s:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:jF,setLayout:LF,setChartSize:VF,setScale:UF}=Pj.actions,zF=Pj.reducer;function Mj(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function Q2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function du(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Q2(Object(n),!0).forEach(function(r){BF(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function BF(t,e,n){return(e=$F(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $F(t){var e=qF(t,"string");return typeof e=="symbol"?e:e+""}function qF(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mr(t,e,n){return Fn(t)||Fn(e)?n:Ma(e)?xu(t,e,n):typeof e=="function"?e(t):n}var FF=(t,e,n)=>{if(e&&n){var{width:r,height:i}=n,{align:s,verticalAlign:l,layout:u}=e;if((u==="vertical"||u==="horizontal"&&l==="middle")&&s!=="center"&&Me(t[s]))return du(du({},t),{},{[s]:t[s]+(r||0)});if((u==="horizontal"||u==="vertical"&&s==="center")&&l!=="middle"&&Me(t[l]))return du(du({},t),{},{[l]:t[l]+(i||0)})}return t},tc=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",kj=(t,e,n,r)=>{if(r)return t.map(u=>u.coordinate);var i,s,l=t.map(u=>(u.coordinate===e&&(i=!0),u.coordinate===n&&(s=!0),u.coordinate));return i||l.push(e),s||l.push(n),l},Dj=(t,e,n)=>{if(!t)return null;var{duplicateDomain:r,type:i,range:s,scale:l,realScaleType:u,isCategorical:f,categoricalDomain:h,tickCount:m,ticks:p,niceTicks:v,axisType:b}=t;if(!l)return null;var E=u==="scaleBand"&&l.bandwidth?l.bandwidth()/2:2,w=i==="category"&&l.bandwidth?l.bandwidth()/E:0;if(w=b==="angleAxis"&&s&&s.length>=2?jr(s[0]-s[1])*2*w:w,p||v){var S=(p||v||[]).map((P,M)=>{var j=r?r.indexOf(P):P;return{coordinate:l(j)+w,value:P,offset:w,index:M}});return S.filter(P=>!Wi(P.coordinate))}return f&&h?h.map((P,M)=>({coordinate:l(P)+w,value:P,index:M,offset:w})):l.ticks&&m!=null?l.ticks(m).map((P,M)=>({coordinate:l(P)+w,value:P,offset:w,index:M})):l.domain().map((P,M)=>({coordinate:l(P)+w,value:r?r[P]:P,index:M,offset:w}))},J2=1e-4,HF=t=>{var e=t.domain();if(!(!e||e.length<=2)){var n=e.length,r=t.range(),i=Math.min(r[0],r[1])-J2,s=Math.max(r[0],r[1])+J2,l=t(e[0]),u=t(e[n-1]);(l<i||l>s||u<i||u>s)&&t.domain([e[0],e[n-1]])}},GF=(t,e)=>{if(!e||e.length!==2||!Me(e[0])||!Me(e[1]))return t;var n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]),i=[t[0],t[1]];return(!Me(t[0])||t[0]<n)&&(i[0]=n),(!Me(t[1])||t[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},KF=t=>{var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var i=0,s=0,l=0;l<e;++l){var u=Wi(t[l][n][1])?t[l][n][0]:t[l][n][1];u>=0?(t[l][n][0]=i,t[l][n][1]=i+u,i=t[l][n][1]):(t[l][n][0]=s,t[l][n][1]=s+u,s=t[l][n][1])}},YF=t=>{var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var i=0,s=0;s<e;++s){var l=Wi(t[s][n][1])?t[s][n][0]:t[s][n][1];l>=0?(t[s][n][0]=i,t[s][n][1]=i+l,i=t[s][n][1]):(t[s][n][0]=0,t[s][n][1]=0)}},WF={sign:KF,expand:w8,none:wu,silhouette:x8,wiggle:E8,positive:YF},XF=(t,e,n)=>{var r=WF[n],i=b8().keys(e).value((s,l)=>Number(mr(s,l,0))).order(A1).offset(r);return i(t)};function QF(t){return t==null?void 0:String(t)}var Z2=t=>{var{axis:e,ticks:n,offset:r,bandSize:i,entry:s,index:l}=t;if(e.type==="category")return n[l]?n[l].coordinate+r:null;var u=mr(s,e.dataKey,e.scale.domain()[l]);return Fn(u)?null:e.scale(u)-i/2+r},JF=t=>{var{numericAxis:e}=t,n=e.scale.domain();if(e.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},ZF=t=>{var e=t.flat(2).filter(Me);return[Math.min(...e),Math.max(...e)]},e7=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],t7=(t,e,n)=>{if(t!=null)return e7(Object.keys(t).reduce((r,i)=>{var s=t[i],{stackedData:l}=s,u=l.reduce((f,h)=>{var m=Mj(h,e,n),p=ZF(m);return[Math.min(f[0],p[0]),Math.max(f[1],p[1])]},[1/0,-1/0]);return[Math.min(u[0],r[0]),Math.max(u[1],r[1])]},[1/0,-1/0]))},eR=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,tR=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,qg=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var i=rv(e,m=>m.coordinate),s=1/0,l=1,u=i.length;l<u;l++){var f=i[l],h=i[l-1];s=Math.min((f.coordinate||0)-(h.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0};function nR(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:i,name:s}=t;return du(du({},e),{},{dataKey:n,payload:r,value:i,name:s})}function jj(t,e){if(t)return String(t);if(typeof e=="string")return e}var n7=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},r7=(t,e)=>e==="centric"?t.angle:t.radius,Ns=t=>t.layout.width,Ps=t=>t.layout.height,i7=t=>t.layout.scale,Lj=t=>t.layout.margin,dv=ae(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),hv=ae(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),a7="data-recharts-item-index",s7="data-recharts-item-data-key",Ah=60;function rR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Mp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rR(Object(n),!0).forEach(function(r){o7(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function o7(t,e,n){return(e=l7(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l7(t){var e=c7(t,"string");return typeof e=="symbol"?e:e+""}function c7(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var u7=t=>t.brush.height;function f7(t){var e=hv(t);return e.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Ah;return n+i}return n},0)}function d7(t){var e=hv(t);return e.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Ah;return n+i}return n},0)}function h7(t){var e=dv(t);return e.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function m7(t){var e=dv(t);return e.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var Hn=ae([Ns,Ps,Lj,u7,f7,d7,h7,m7,rj,Vq],(t,e,n,r,i,s,l,u,f,h)=>{var m={left:(n.left||0)+i,right:(n.right||0)+s},p={top:(n.top||0)+l,bottom:(n.bottom||0)+u},v=Mp(Mp({},p),m),b=v.bottom;v.bottom+=r,v=FF(v,f,h);var E=t-v.left-v.right,w=e-v.top-v.bottom;return Mp(Mp({brushBottom:b},v),{},{width:Math.max(E,0),height:Math.max(w,0)})}),p7=ae(Hn,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),EE=ae(Ns,Ps,(t,e)=>({x:0,y:0,width:t,height:e})),g7=C.createContext(null),Ur=()=>C.useContext(g7)!=null,mv=t=>t.brush,pv=ae([mv,Hn,Lj],(t,e,n)=>({height:t.height,x:Me(t.x)?t.x:e.left,y:Me(t.y)?t.y:e.top+e.height+e.brushBottom-((n==null?void 0:n.bottom)||0),width:Me(t.width)?t.width:e.width})),mw={},pw={},gw={},iR;function y7(){return iR||(iR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:i,edges:s}={}){let l,u=null;const f=s!=null&&s.includes("leading"),h=s==null||s.includes("trailing"),m=()=>{u!==null&&(n.apply(l,u),l=void 0,u=null)},p=()=>{h&&m(),w()};let v=null;const b=()=>{v!=null&&clearTimeout(v),v=setTimeout(()=>{v=null,p()},r)},E=()=>{v!==null&&(clearTimeout(v),v=null)},w=()=>{E(),l=void 0,u=null},S=()=>{m()},P=function(...M){if(i!=null&&i.aborted)return;l=this,u=M;const j=v==null;b(),f&&j&&m()};return P.schedule=b,P.cancel=w,P.flush=S,i==null||i.addEventListener("abort",w,{once:!0}),P}t.debounce=e})(gw)),gw}var aR;function v7(){return aR||(aR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=y7();function n(r,i=0,s={}){typeof s!="object"&&(s={});const{leading:l=!1,trailing:u=!0,maxWait:f}=s,h=Array(2);l&&(h[0]="leading"),u&&(h[1]="trailing");let m,p=null;const v=e.debounce(function(...w){m=r.apply(this,w),p=null},i,{edges:h}),b=function(...w){return f!=null&&(p===null&&(p=Date.now()),Date.now()-p>=f)?(m=r.apply(this,w),p=Date.now(),v.cancel(),v.schedule(),m):(v.apply(this,w),m)},E=()=>(v.flush(),m);return b.cancel=v.cancel,b.flush=E,b}t.debounce=n})(pw)),pw}var sR;function _7(){return sR||(sR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=v7();function n(r,i=0,s={}){const{leading:l=!0,trailing:u=!0}=s;return e.debounce(r,i,{leading:l,maxWait:i,trailing:u})}t.throttle=n})(mw)),mw}var yw,oR;function b7(){return oR||(oR=1,yw=_7().throttle),yw}var w7=b7();const x7=Va(w7);var Fg=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=0;console.warn(n.replace(/%s/g,()=>i[l++]))}},Vj=(t,e,n)=>{var{width:r="100%",height:i="100%",aspect:s,maxHeight:l}=n,u=bs(r)?t:Number(r),f=bs(i)?e:Number(i);return s&&s>0&&(u?f=u/s:f&&(u=f*s),l&&f!=null&&f>l&&(f=l)),{calculatedWidth:u,calculatedHeight:f}},E7={width:0,height:0,overflow:"visible"},S7={width:0,overflowX:"visible"},A7={height:0,overflowY:"visible"},T7={},C7=t=>{var{width:e,height:n}=t,r=bs(e),i=bs(n);return r&&i?E7:r?S7:i?A7:T7};function O7(t){var{width:e,height:n,aspect:r}=t,i=e,s=n;return i===void 0&&s===void 0?(i="100%",s="100%"):i===void 0?i=r&&r>0?void 0:"100%":s===void 0&&(s=r&&r>0?void 0:"100%"),{width:i,height:s}}function ln(t){return Number.isFinite(t)}function ka(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function L1(){return L1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},L1.apply(null,arguments)}function lR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function cR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lR(Object(n),!0).forEach(function(r){I7(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function I7(t,e,n){return(e=R7(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function R7(t){var e=N7(t,"string");return typeof e=="symbol"?e:e+""}function N7(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Uj=C.createContext({width:-1,height:-1});function P7(t){return ka(t.width)&&ka(t.height)}function zj(t){var{children:e,width:n,height:r}=t,i=C.useMemo(()=>({width:n,height:r}),[n,r]);return P7(i)?C.createElement(Uj.Provider,{value:i},e):null}var SE=()=>C.useContext(Uj),M7=C.forwardRef((t,e)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i,height:s,minWidth:l=0,minHeight:u,maxHeight:f,children:h,debounce:m=0,id:p,className:v,onResize:b,style:E={}}=t,w=C.useRef(null),S=C.useRef();S.current=b,C.useImperativeHandle(e,()=>w.current);var[P,M]=C.useState({containerWidth:r.width,containerHeight:r.height}),j=C.useCallback((R,N)=>{M(z=>{var k=Math.round(R),B=Math.round(N);return z.containerWidth===k&&z.containerHeight===B?z:{containerWidth:k,containerHeight:B}})},[]);C.useEffect(()=>{if(w.current==null||typeof ResizeObserver>"u")return wh;var R=B=>{var V,{width:pe,height:be}=B[0].contentRect;j(pe,be),(V=S.current)===null||V===void 0||V.call(S,pe,be)};m>0&&(R=x7(R,m,{trailing:!0,leading:!1}));var N=new ResizeObserver(R),{width:z,height:k}=w.current.getBoundingClientRect();return j(z,k),N.observe(w.current),()=>{N.disconnect()}},[j,m]);var{containerWidth:$,containerHeight:L}=P;Fg(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:q,calculatedHeight:I}=Vj($,L,{width:i,height:s,aspect:n,maxHeight:f});return Fg(q!=null&&q>0||I!=null&&I>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,q,I,i,s,l,u,n),C.createElement("div",{id:p?"".concat(p):void 0,className:$t("recharts-responsive-container",v),style:cR(cR({},E),{},{width:i,height:s,minWidth:l,minHeight:u,maxHeight:f}),ref:w},C.createElement("div",{style:C7({width:i,height:s})},C.createElement(zj,{width:q,height:I},h)))}),k7=C.forwardRef((t,e)=>{var n=SE();if(ka(n.width)&&ka(n.height))return t.children;var{width:r,height:i}=O7({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:s,calculatedHeight:l}=Vj(void 0,void 0,{width:r,height:i,aspect:t.aspect,maxHeight:t.maxHeight});return Me(s)&&Me(l)?C.createElement(zj,{width:s,height:l},t.children):C.createElement(M7,L1({},t,{width:r,height:i,ref:e}))});function Bj(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var gv=()=>{var t,e=Ur(),n=Ue(p7),r=Ue(pv),i=(t=Ue(mv))===null||t===void 0?void 0:t.padding;return!e||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},D7={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},$j=()=>{var t;return(t=Ue(Hn))!==null&&t!==void 0?t:D7},qj=()=>Ue(Ns),Fj=()=>Ue(Ps),Tt=t=>t.layout.layoutType,yv=()=>Ue(Tt),j7=()=>{var t=yv();return t!==void 0},vv=t=>{var e=cn(),n=Ur(),{width:r,height:i}=t,s=SE(),l=r,u=i;return s&&(l=s.width>0?s.width:r,u=s.height>0?s.height:i),C.useEffect(()=>{!n&&ka(l)&&ka(u)&&e(VF({width:l,height:u}))},[e,n,l,u]),null},Hj=Symbol.for("immer-nothing"),uR=Symbol.for("immer-draftable"),ri=Symbol.for("immer-state");function qi(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Xd=Object.getPrototypeOf;function Au(t){return!!t&&!!t[ri]}function $l(t){var e;return t?Gj(t)||Array.isArray(t)||!!t[uR]||!!((e=t.constructor)!=null&&e[uR])||Th(t)||bv(t):!1}var L7=Object.prototype.constructor.toString(),fR=new WeakMap;function Gj(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=fR.get(n);return r===void 0&&(r=Function.toString.call(n),fR.set(n,r)),r===L7}function Hg(t,e,n=!0){_v(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function _v(t){const e=t[ri];return e?e.type_:Array.isArray(t)?1:Th(t)?2:bv(t)?3:0}function V1(t,e){return _v(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function Kj(t,e,n){const r=_v(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function V7(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Th(t){return t instanceof Map}function bv(t){return t instanceof Set}function Al(t){return t.copy_||t.base_}function U1(t,e){if(Th(t))return new Map(t);if(bv(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=Gj(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[ri];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const l=i[s],u=r[l];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(r[l]={configurable:!0,writable:!0,enumerable:u.enumerable,value:t[l]})}return Object.create(Xd(t),r)}else{const r=Xd(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function AE(t,e=!1){return wv(t)||Au(t)||!$l(t)||(_v(t)>1&&Object.defineProperties(t,{set:kp,add:kp,clear:kp,delete:kp}),Object.freeze(t),e&&Object.values(t).forEach(n=>AE(n,!0))),t}function U7(){qi(2)}var kp={value:U7};function wv(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var z7={};function ql(t){const e=z7[t];return e||qi(0,t),e}var Qd;function Yj(){return Qd}function B7(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function dR(t,e){e&&(ql("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function z1(t){B1(t),t.drafts_.forEach($7),t.drafts_=null}function B1(t){t===Qd&&(Qd=t.parent_)}function hR(t){return Qd=B7(Qd,t)}function $7(t){const e=t[ri];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function mR(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[ri].modified_&&(z1(e),qi(4)),$l(t)&&(t=Gg(e,t),e.parent_||Kg(e,t)),e.patches_&&ql("Patches").generateReplacementPatches_(n[ri].base_,t,e.patches_,e.inversePatches_)):t=Gg(e,n,[]),z1(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Hj?t:void 0}function Gg(t,e,n){if(wv(e))return e;const r=t.immer_.shouldUseStrictIteration(),i=e[ri];if(!i)return Hg(e,(s,l)=>pR(t,i,e,s,l,n),r),e;if(i.scope_!==t)return e;if(!i.modified_)return Kg(t,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const s=i.copy_;let l=s,u=!1;i.type_===3&&(l=new Set(s),s.clear(),u=!0),Hg(l,(f,h)=>pR(t,i,s,f,h,n,u),r),Kg(t,s,!1),n&&t.patches_&&ql("Patches").generatePatches_(i,n,t.patches_,t.inversePatches_)}return i.copy_}function pR(t,e,n,r,i,s,l){if(i==null||typeof i!="object"&&!l)return;const u=wv(i);if(!(u&&!l)){if(Au(i)){const f=s&&e&&e.type_!==3&&!V1(e.assigned_,r)?s.concat(r):void 0,h=Gg(t,i,f);if(Kj(n,r,h),Au(h))t.canAutoFreeze_=!1;else return}else l&&n.add(i);if($l(i)&&!u){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===i&&u)return;Gg(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(Th(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&Kg(t,i)}}}function Kg(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&AE(e,n)}function q7(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:Yj(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=TE;n&&(i=[r],s=Jd);const{revoke:l,proxy:u}=Proxy.revocable(i,s);return r.draft_=u,r.revoke_=l,u}var TE={get(t,e){if(e===ri)return t;const n=Al(t);if(!V1(n,e))return F7(t,n,e);const r=n[e];return t.finalized_||!$l(r)?r:r===vw(t.base_,e)?(_w(t),t.copy_[e]=q1(r,t)):r},has(t,e){return e in Al(t)},ownKeys(t){return Reflect.ownKeys(Al(t))},set(t,e,n){const r=Wj(Al(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=vw(Al(t),e),s=i==null?void 0:i[ri];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(V7(n,i)&&(n!==void 0||V1(t.base_,e)))return!0;_w(t),$1(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return vw(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,_w(t),$1(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Al(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){qi(11)},getPrototypeOf(t){return Xd(t.base_)},setPrototypeOf(){qi(12)}},Jd={};Hg(TE,(t,e)=>{Jd[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Jd.deleteProperty=function(t,e){return Jd.set.call(this,t,e,void 0)};Jd.set=function(t,e,n){return TE.set.call(this,t[0],e,n,t[0])};function vw(t,e){const n=t[ri];return(n?Al(n):t)[e]}function F7(t,e,n){var i;const r=Wj(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function Wj(t,e){if(!(e in t))return;let n=Xd(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Xd(n)}}function $1(t){t.modified_||(t.modified_=!0,t.parent_&&$1(t.parent_))}function _w(t){t.copy_||(t.copy_=U1(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var H7=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const s=n;n=e;const l=this;return function(f=s,...h){return l.produce(f,m=>n.call(this,m,...h))}}typeof n!="function"&&qi(6),r!==void 0&&typeof r!="function"&&qi(7);let i;if($l(e)){const s=hR(this),l=q1(e,void 0);let u=!0;try{i=n(l),u=!1}finally{u?z1(s):B1(s)}return dR(s,r),mR(i,s)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===Hj&&(i=void 0),this.autoFreeze_&&AE(i,!0),r){const s=[],l=[];ql("Patches").generateReplacementPatches_(e,i,s,l),r(s,l)}return i}else qi(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(l,...u)=>this.produceWithPatches(l,f=>e(f,...u));let r,i;return[this.produce(e,n,(l,u)=>{r=l,i=u}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof(t==null?void 0:t.useStrictIteration)=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){$l(t)||qi(8),Au(t)&&(t=G7(t));const e=hR(this),n=q1(t,void 0);return n[ri].isManual_=!0,B1(e),n}finishDraft(t,e){const n=t&&t[ri];(!n||!n.isManual_)&&qi(9);const{scope_:r}=n;return dR(r,e),mR(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=ql("Patches").applyPatches_;return Au(t)?r(t,e):this.produce(t,i=>r(i,e))}};function q1(t,e){const n=Th(t)?ql("MapSet").proxyMap_(t,e):bv(t)?ql("MapSet").proxySet_(t,e):q7(t,e);return(e?e.scope_:Yj()).drafts_.push(n),n}function G7(t){return Au(t)||qi(10,t),Xj(t)}function Xj(t){if(!$l(t)||wv(t))return t;const e=t[ri];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=U1(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=U1(t,!0);return Hg(n,(i,s)=>{Kj(n,i,Xj(s))},r),e&&(e.finalized_=!1),n}var K7=new H7;K7.produce;var Y7={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},Qj=Vr({name:"legend",initialState:Y7,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:Gt()},replaceLegendPayload:{reducer(t,e){var{prev:n,next:r}=e.payload,i=Ki(t).payload.indexOf(n);i>-1&&(t.payload[i]=r)},prepare:Gt()},removeLegendPayload:{reducer(t,e){var n=Ki(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)},prepare:Gt()}}}),{setLegendSize:Yhe,setLegendSettings:Whe,addLegendPayload:W7,replaceLegendPayload:X7,removeLegendPayload:Q7}=Qj.actions,J7=Qj.reducer;function F1(){return F1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},F1.apply(null,arguments)}function gR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function bw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gR(Object(n),!0).forEach(function(r){Z7(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Z7(t,e,n){return(e=eH(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eH(t){var e=tH(t,"string");return typeof e=="symbol"?e:e+""}function tH(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nH(t){return Array.isArray(t)&&Ma(t[0])&&Ma(t[1])?t.join(" ~ "):t}var rH=t=>{var{separator:e=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:s,formatter:l,itemSorter:u,wrapperClassName:f,labelClassName:h,label:m,labelFormatter:p,accessibilityLayer:v=!1}=t,b=()=>{if(s&&s.length){var L={padding:0,margin:0},q=(u?rv(s,u):s).map((I,R)=>{if(I.type==="none")return null;var N=I.formatter||l||nH,{value:z,name:k}=I,B=z,V=k;if(N){var pe=N(z,k,I,R,s);if(Array.isArray(pe))[B,V]=pe;else if(pe!=null)B=pe;else return null}var be=bw({display:"block",paddingTop:4,paddingBottom:4,color:I.color||"#000"},r);return C.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(R),style:be},Ma(V)?C.createElement("span",{className:"recharts-tooltip-item-name"},V):null,Ma(V)?C.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,C.createElement("span",{className:"recharts-tooltip-item-value"},B),C.createElement("span",{className:"recharts-tooltip-item-unit"},I.unit||""))});return C.createElement("ul",{className:"recharts-tooltip-item-list",style:L},q)}return null},E=bw({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),w=bw({margin:0},i),S=!Fn(m),P=S?m:"",M=$t("recharts-default-tooltip",f),j=$t("recharts-tooltip-label",h);S&&p&&s!==void 0&&s!==null&&(P=p(m,s));var $=v?{role:"status","aria-live":"assertive"}:{};return C.createElement("div",F1({className:M,style:E},$),C.createElement("p",{className:j,style:w},C.isValidElement(P)?P:"".concat(P)),b())},sd="recharts-tooltip-wrapper",iH={visibility:"hidden"};function aH(t){var{coordinate:e,translateX:n,translateY:r}=t;return $t(sd,{["".concat(sd,"-right")]:Me(n)&&e&&Me(e.x)&&n>=e.x,["".concat(sd,"-left")]:Me(n)&&e&&Me(e.x)&&n<e.x,["".concat(sd,"-bottom")]:Me(r)&&e&&Me(e.y)&&r>=e.y,["".concat(sd,"-top")]:Me(r)&&e&&Me(e.y)&&r<e.y})}function yR(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offsetTopLeft:i,position:s,reverseDirection:l,tooltipDimension:u,viewBox:f,viewBoxDimension:h}=t;if(s&&Me(s[r]))return s[r];var m=n[r]-u-(i>0?i:0),p=n[r]+i;if(e[r])return l[r]?m:p;var v=f[r];if(v==null)return 0;if(l[r]){var b=m,E=v;return b<E?Math.max(p,v):Math.max(m,v)}if(h==null)return 0;var w=p+u,S=v+h;return w>S?Math.max(m,v):Math.max(p,v)}function sH(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function oH(t){var{allowEscapeViewBox:e,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:s,tooltipBox:l,useTranslate3d:u,viewBox:f}=t,h,m,p;return l.height>0&&l.width>0&&n?(m=yR({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:l.width,viewBox:f,viewBoxDimension:f.width}),p=yR({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:l.height,viewBox:f,viewBoxDimension:f.height}),h=sH({translateX:m,translateY:p,useTranslate3d:u})):h=iH,{cssProperties:h,cssClasses:aH({translateX:m,translateY:p,coordinate:n})}}function vR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Dp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vR(Object(n),!0).forEach(function(r){H1(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function H1(t,e,n){return(e=lH(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lH(t){var e=cH(t,"string");return typeof e=="symbol"?e:e+""}function cH(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class uH extends C.PureComponent{constructor(){super(...arguments),H1(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),H1(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,i,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:s,coordinate:l,hasPayload:u,isAnimationActive:f,offset:h,position:m,reverseDirection:p,useTranslate3d:v,viewBox:b,wrapperStyle:E,lastBoundingBox:w,innerRef:S,hasPortalFromProps:P}=this.props,{cssClasses:M,cssProperties:j}=oH({allowEscapeViewBox:n,coordinate:l,offsetTopLeft:h,position:m,reverseDirection:p,tooltipBox:{height:w.height,width:w.width},useTranslate3d:v,viewBox:b}),$=P?{}:Dp(Dp({transition:f&&e?"transform ".concat(r,"ms ").concat(i):void 0},j),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&u?"visible":"hidden",position:"absolute",top:0,left:0}),L=Dp(Dp({},$),{},{visibility:!this.state.dismissed&&e&&u?"visible":"hidden"},E);return C.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:M,style:L,ref:S},s)}}var Jj=()=>{var t;return(t=Ue(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function G1(){return G1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},G1.apply(null,arguments)}function _R(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function bR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_R(Object(n),!0).forEach(function(r){fH(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_R(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fH(t,e,n){return(e=dH(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dH(t){var e=hH(t,"string");return typeof e=="symbol"?e:e+""}function hH(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var wR={curveBasisClosed:c8,curveBasisOpen:u8,curveBasis:l8,curveBumpX:Y$,curveBumpY:W$,curveLinearClosed:f8,curveLinear:tv,curveMonotoneX:d8,curveMonotoneY:h8,curveNatural:m8,curveStep:p8,curveStepAfter:y8,curveStepBefore:g8},Yg=t=>ln(t.x)&&ln(t.y),xR=t=>t.base!=null&&Yg(t.base)&&Yg(t),od=t=>t.x,ld=t=>t.y,mH=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(bh(t));return(n==="curveMonotone"||n==="curveBump")&&e?wR["".concat(n).concat(e==="vertical"?"Y":"X")]:wR[n]||tv},pH=t=>{var{type:e="linear",points:n=[],baseLine:r,layout:i,connectNulls:s=!1}=t,l=mH(e,i),u=s?n.filter(Yg):n,f;if(Array.isArray(r)){var h=n.map((b,E)=>bR(bR({},b),{},{base:r[E]}));i==="vertical"?f=Cp().y(ld).x1(od).x0(b=>b.base.x):f=Cp().x(od).y1(ld).y0(b=>b.base.y);var m=f.defined(xR).curve(l),p=s?h.filter(xR):h;return m(p)}i==="vertical"&&Me(r)?f=Cp().y(ld).x1(od).x0(r):Me(r)?f=Cp().x(od).y1(ld).y0(r):f=ID().x(od).y(ld);var v=f.defined(Yg).curve(l);return v(u)},Zj=t=>{var{className:e,points:n,path:r,pathRef:i}=t;if((!n||!n.length)&&!r)return null;var s=n&&n.length?pH(t):r;return C.createElement("path",G1({},vs(t),B8(t),{className:$t("recharts-curve",e),d:s===null?void 0:s,ref:i}))},gH=["x","y","top","left","width","height","className"];function K1(){return K1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},K1.apply(null,arguments)}function ER(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yH(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ER(Object(n),!0).forEach(function(r){vH(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ER(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vH(t,e,n){return(e=_H(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _H(t){var e=bH(t,"string");return typeof e=="symbol"?e:e+""}function bH(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wH(t,e){if(t==null)return{};var n,r,i=xH(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function xH(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var EH=(t,e,n,r,i,s)=>"M".concat(t,",").concat(i,"v").concat(r,"M").concat(s,",").concat(e,"h").concat(n),SH=t=>{var{x:e=0,y:n=0,top:r=0,left:i=0,width:s=0,height:l=0,className:u}=t,f=wH(t,gH),h=yH({x:e,y:n,top:r,left:i,width:s,height:l},f);return!Me(e)||!Me(n)||!Me(s)||!Me(l)||!Me(r)||!Me(i)?null:C.createElement("path",K1({},Ai(h),{className:$t("recharts-cross",u),d:EH(e,n,s,l,r,i)}))};function AH(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function SR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function AR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SR(Object(n),!0).forEach(function(r){TH(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function TH(t,e,n){return(e=CH(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CH(t){var e=OH(t,"string");return typeof e=="symbol"?e:e+""}function OH(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var IH=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),e4=(t,e,n)=>t.map(r=>"".concat(IH(r)," ").concat(e,"ms ").concat(n)).join(","),RH=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(i=>r.includes(i))),Zd=(t,e)=>Object.keys(e).reduce((n,r)=>AR(AR({},n),{},{[r]:t(r,e[r])}),{});function TR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function On(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TR(Object(n),!0).forEach(function(r){NH(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function NH(t,e,n){return(e=PH(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function PH(t){var e=MH(t,"string");return typeof e=="symbol"?e:e+""}function MH(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Wg=(t,e,n)=>t+(e-t)*n,Y1=t=>{var{from:e,to:n}=t;return e!==n},t4=(t,e,n)=>{var r=Zd((i,s)=>{if(Y1(s)){var[l,u]=t(s.from,s.to,s.velocity);return On(On({},s),{},{from:l,velocity:u})}return s},e);return n<1?Zd((i,s)=>Y1(s)?On(On({},s),{},{velocity:Wg(s.velocity,r[i].velocity,n),from:Wg(s.from,r[i].from,n)}):s,e):t4(t,r,n-1)};function kH(t,e,n,r,i,s){var l,u=r.reduce((v,b)=>On(On({},v),{},{[b]:{from:t[b],velocity:0,to:e[b]}}),{}),f=()=>Zd((v,b)=>b.from,u),h=()=>!Object.values(u).filter(Y1).length,m=null,p=v=>{l||(l=v);var b=v-l,E=b/n.dt;u=t4(n,u,E),i(On(On(On({},t),e),f())),l=v,h()||(m=s.setTimeout(p))};return()=>(m=s.setTimeout(p),()=>{var v;(v=m)===null||v===void 0||v()})}function DH(t,e,n,r,i,s,l){var u=null,f=i.reduce((p,v)=>On(On({},p),{},{[v]:[t[v],e[v]]}),{}),h,m=p=>{h||(h=p);var v=(p-h)/r,b=Zd((w,S)=>Wg(...S,n(v)),f);if(s(On(On(On({},t),e),b)),v<1)u=l.setTimeout(m);else{var E=Zd((w,S)=>Wg(...S,n(1)),f);s(On(On(On({},t),e),E))}};return()=>(u=l.setTimeout(m),()=>{var p;(p=u)===null||p===void 0||p()})}const jH=(t,e,n,r,i,s)=>{var l=RH(t,e);return n==null?()=>(i(On(On({},t),e)),()=>{}):n.isStepper===!0?kH(t,e,n,l,i,s):DH(t,e,n,r,l,i,s)};var Xg=1e-4,n4=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],r4=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),CR=(t,e)=>n=>{var r=n4(t,e);return r4(r,n)},LH=(t,e)=>n=>{var r=n4(t,e),i=[...r.map((s,l)=>s*l).slice(1),0];return r4(i,n)},VH=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i,s=n[0].split("(");if(s[0]==="cubic-bezier"&&((i=s[1])===null||i===void 0?void 0:i.split(")")[0].split(",").length)===4){var l=s[1].split(")")[0].split(",").map(u=>parseFloat(u));return[l[0],l[1],l[2],l[3]]}}}return n.length===4?n:[0,0,1,1]},UH=(t,e,n,r)=>{var i=CR(t,n),s=CR(e,r),l=LH(t,n),u=h=>h>1?1:h<0?0:h,f=h=>{for(var m=h>1?1:h,p=m,v=0;v<8;++v){var b=i(p)-m,E=l(p);if(Math.abs(b-m)<Xg||E<Xg)return s(p);p=u(p-b/E)}return s(p)};return f.isStepper=!1,f},OR=function(){return UH(...VH(...arguments))},zH=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=e,s=(l,u,f)=>{var h=-(l-u)*n,m=f*r,p=f+(h-m)*i/1e3,v=f*i/1e3+l;return Math.abs(v-u)<Xg&&Math.abs(p)<Xg?[u,0]:[v,p]};return s.isStepper=!0,s.dt=i,s},BH=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return OR(t);case"spring":return zH();default:if(t.split("(")[0]==="cubic-bezier")return OR(t)}return typeof t=="function"?t:null};function $H(t){var e,n=()=>null,r=!1,i=null,s=l=>{if(!r){if(Array.isArray(l)){if(!l.length)return;var u=l,[f,...h]=u;if(typeof f=="number"){i=t.setTimeout(s.bind(null,h),f);return}s(f),i=t.setTimeout(s.bind(null,h));return}typeof l=="string"&&(e=l,n(e)),typeof l=="object"&&(e=l,n(e)),typeof l=="function"&&l()}};return{stop:()=>{r=!0},start:l=>{r=!1,i&&(i(),i=null),s(l)},subscribe:l=>(n=l,()=>{n=()=>null}),getTimeoutController:()=>t}}class qH{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,s=l=>{l-r>=n?e(l):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(s))};return i=requestAnimationFrame(s),()=>{i!=null&&cancelAnimationFrame(i)}}}function FH(){return $H(new qH)}var HH=C.createContext(FH);function GH(t,e){var n=C.useContext(HH);return C.useMemo(()=>e??n(t),[t,e,n])}var KH=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Ch={devToolsEnabled:!1,isSsr:KH()},YH={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},IR={t:0},ww={t:1};function CE(t){var e=ai(t,YH),{isActive:n,canBegin:r,duration:i,easing:s,begin:l,onAnimationEnd:u,onAnimationStart:f,children:h}=e,m=n==="auto"?!Ch.isSsr:n,p=GH(e.animationId,e.animationManager),[v,b]=C.useState(m?IR:ww),E=C.useRef(null);return C.useEffect(()=>{m||b(ww)},[m]),C.useEffect(()=>{if(!m||!r)return wh;var w=jH(IR,ww,BH(s),i,b,p.getTimeoutController()),S=()=>{E.current=w()};return p.start([f,l,S,i,u]),()=>{p.stop(),E.current&&E.current(),u()}},[m,r,i,s,l,f,u,p]),h(v.t)}function OE(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=C.useRef(Gd(e)),r=C.useRef(t);return r.current!==t&&(n.current=Gd(e),r.current=t),n.current}var WH=["radius"],XH=["radius"];function RR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function NR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RR(Object(n),!0).forEach(function(r){QH(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function QH(t,e,n){return(e=JH(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JH(t){var e=ZH(t,"string");return typeof e=="symbol"?e:e+""}function ZH(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Qg(){return Qg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qg.apply(null,arguments)}function PR(t,e){if(t==null)return{};var n,r,i=eG(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function eG(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var MR=(t,e,n,r,i)=>{var s=Math.min(Math.abs(n)/2,Math.abs(r)/2),l=r>=0?1:-1,u=n>=0?1:-1,f=r>=0&&n>=0||r<0&&n<0?1:0,h;if(s>0&&i instanceof Array){for(var m=[0,0,0,0],p=0,v=4;p<v;p++)m[p]=i[p]>s?s:i[p];h="M".concat(t,",").concat(e+l*m[0]),m[0]>0&&(h+="A ".concat(m[0],",").concat(m[0],",0,0,").concat(f,",").concat(t+u*m[0],",").concat(e)),h+="L ".concat(t+n-u*m[1],",").concat(e),m[1]>0&&(h+="A ".concat(m[1],",").concat(m[1],",0,0,").concat(f,`,
        `).concat(t+n,",").concat(e+l*m[1])),h+="L ".concat(t+n,",").concat(e+r-l*m[2]),m[2]>0&&(h+="A ".concat(m[2],",").concat(m[2],",0,0,").concat(f,`,
        `).concat(t+n-u*m[2],",").concat(e+r)),h+="L ".concat(t+u*m[3],",").concat(e+r),m[3]>0&&(h+="A ".concat(m[3],",").concat(m[3],",0,0,").concat(f,`,
        `).concat(t,",").concat(e+r-l*m[3])),h+="Z"}else if(s>0&&i===+i&&i>0){var b=Math.min(s,i);h="M ".concat(t,",").concat(e+l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(f,",").concat(t+u*b,",").concat(e,`
            L `).concat(t+n-u*b,",").concat(e,`
            A `).concat(b,",").concat(b,",0,0,").concat(f,",").concat(t+n,",").concat(e+l*b,`
            L `).concat(t+n,",").concat(e+r-l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(f,",").concat(t+n-u*b,",").concat(e+r,`
            L `).concat(t+u*b,",").concat(e+r,`
            A `).concat(b,",").concat(b,",0,0,").concat(f,",").concat(t,",").concat(e+r-l*b," Z")}else h="M ".concat(t,",").concat(e," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return h},kR={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},i4=t=>{var e=ai(t,kR),n=C.useRef(null),[r,i]=C.useState(-1);C.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var ne=n.current.getTotalLength();ne&&i(ne)}catch{}},[]);var{x:s,y:l,width:u,height:f,radius:h,className:m}=e,{animationEasing:p,animationDuration:v,animationBegin:b,isAnimationActive:E,isUpdateAnimationActive:w}=e,S=C.useRef(u),P=C.useRef(f),M=C.useRef(s),j=C.useRef(l),$=C.useMemo(()=>({x:s,y:l,width:u,height:f,radius:h}),[s,l,u,f,h]),L=OE($,"rectangle-");if(s!==+s||l!==+l||u!==+u||f!==+f||u===0||f===0)return null;var q=$t("recharts-rectangle",m);if(!w){var I=Ai(e),{radius:R}=I,N=PR(I,WH);return C.createElement("path",Qg({},N,{radius:typeof h=="number"?h:void 0,className:q,d:MR(s,l,u,f,h)}))}var z=S.current,k=P.current,B=M.current,V=j.current,pe="0px ".concat(r===-1?1:r,"px"),be="".concat(r,"px 0px"),G=e4(["strokeDasharray"],v,typeof p=="string"?p:kR.animationEasing);return C.createElement(CE,{animationId:L,key:L,canBegin:r>0,duration:v,easing:p,isActive:w,begin:b},ne=>{var de=tr(z,u,ne),ge=tr(k,f,ne),Ee=tr(B,s,ne),F=tr(V,l,ne);n.current&&(S.current=de,P.current=ge,M.current=Ee,j.current=F);var X;E?ne>0?X={transition:G,strokeDasharray:be}:X={strokeDasharray:pe}:X={strokeDasharray:be};var re=Ai(e),{radius:_e}=re,Oe=PR(re,XH);return C.createElement("path",Qg({},Oe,{radius:typeof h=="number"?h:void 0,className:q,d:MR(Ee,F,de,ge,h),ref:n,style:NR(NR({},X),e.style)}))})};function DR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DR(Object(n),!0).forEach(function(r){tG(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tG(t,e,n){return(e=nG(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nG(t){var e=rG(t,"string");return typeof e=="symbol"?e:e+""}function rG(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Jg=Math.PI/180,iG=t=>t*180/Math.PI,ir=(t,e,n,r)=>({x:t+Math.cos(-Jg*r)*n,y:e+Math.sin(-Jg*r)*n}),aG=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},sG=(t,e)=>{var{x:n,y:r}=t,{x:i,y:s}=e;return Math.sqrt((n-i)**2+(r-s)**2)},oG=(t,e)=>{var{x:n,y:r}=t,{cx:i,cy:s}=e,l=sG({x:n,y:r},{x:i,y:s});if(l<=0)return{radius:l,angle:0};var u=(n-i)/l,f=Math.acos(u);return r>s&&(f=2*Math.PI-f),{radius:l,angle:iG(f),angleInRadian:f}},lG=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),i=Math.floor(n/360),s=Math.min(r,i);return{startAngle:e-s*360,endAngle:n-s*360}},cG=(t,e)=>{var{startAngle:n,endAngle:r}=e,i=Math.floor(n/360),s=Math.floor(r/360),l=Math.min(i,s);return t+l*360},uG=(t,e)=>{var{chartX:n,chartY:r}=t,{radius:i,angle:s}=oG({x:n,y:r},e),{innerRadius:l,outerRadius:u}=e;if(i<l||i>u||i===0)return null;var{startAngle:f,endAngle:h}=lG(e),m=s,p;if(f<=h){for(;m>h;)m-=360;for(;m<f;)m+=360;p=m>=f&&m<=h}else{for(;m>f;)m-=360;for(;m<h;)m+=360;p=m>=h&&m<=f}return p?jR(jR({},e),{},{radius:i,angle:cG(m,e)}):null};function a4(t){var{cx:e,cy:n,radius:r,startAngle:i,endAngle:s}=t,l=ir(e,n,r,i),u=ir(e,n,r,s);return{points:[l,u],cx:e,cy:n,radius:r,startAngle:i,endAngle:s}}function W1(){return W1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},W1.apply(null,arguments)}var fG=(t,e)=>{var n=jr(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},jp=t=>{var{cx:e,cy:n,radius:r,angle:i,sign:s,isExternal:l,cornerRadius:u,cornerIsExternal:f}=t,h=u*(l?1:-1)+r,m=Math.asin(u/h)/Jg,p=f?i:i+s*m,v=ir(e,n,h,p),b=ir(e,n,r,p),E=f?i-s*m:i,w=ir(e,n,h*Math.cos(m*Jg),E);return{center:v,circleTangency:b,lineTangency:w,theta:m}},s4=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:s,endAngle:l}=t,u=fG(s,l),f=s+u,h=ir(e,n,i,s),m=ir(e,n,i,f),p="M ".concat(h.x,",").concat(h.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(s>f),`,
    `).concat(m.x,",").concat(m.y,`
  `);if(r>0){var v=ir(e,n,r,s),b=ir(e,n,r,f);p+="L ".concat(b.x,",").concat(b.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(s<=f),`,
            `).concat(v.x,",").concat(v.y," Z")}else p+="L ".concat(e,",").concat(n," Z");return p},dG=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,cornerRadius:s,forceCornerRadius:l,cornerIsExternal:u,startAngle:f,endAngle:h}=t,m=jr(h-f),{circleTangency:p,lineTangency:v,theta:b}=jp({cx:e,cy:n,radius:i,angle:f,sign:m,cornerRadius:s,cornerIsExternal:u}),{circleTangency:E,lineTangency:w,theta:S}=jp({cx:e,cy:n,radius:i,angle:h,sign:-m,cornerRadius:s,cornerIsExternal:u}),P=u?Math.abs(f-h):Math.abs(f-h)-b-S;if(P<0)return l?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):s4({cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:f,endAngle:h});var M="M ".concat(v.x,",").concat(v.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(m<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(P>180),",").concat(+(m<0),",").concat(E.x,",").concat(E.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(m<0),",").concat(w.x,",").concat(w.y,`
  `);if(r>0){var{circleTangency:j,lineTangency:$,theta:L}=jp({cx:e,cy:n,radius:r,angle:f,sign:m,isExternal:!0,cornerRadius:s,cornerIsExternal:u}),{circleTangency:q,lineTangency:I,theta:R}=jp({cx:e,cy:n,radius:r,angle:h,sign:-m,isExternal:!0,cornerRadius:s,cornerIsExternal:u}),N=u?Math.abs(f-h):Math.abs(f-h)-L-R;if(N<0&&s===0)return"".concat(M,"L").concat(e,",").concat(n,"Z");M+="L".concat(I.x,",").concat(I.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(m<0),",").concat(q.x,",").concat(q.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(N>180),",").concat(+(m>0),",").concat(j.x,",").concat(j.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(m<0),",").concat($.x,",").concat($.y,"Z")}else M+="L".concat(e,",").concat(n,"Z");return M},hG={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},o4=t=>{var e=ai(t,hG),{cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:l,forceCornerRadius:u,cornerIsExternal:f,startAngle:h,endAngle:m,className:p}=e;if(s<i||h===m)return null;var v=$t("recharts-sector",p),b=s-i,E=Xi(l,b,0,!0),w;return E>0&&Math.abs(h-m)<360?w=dG({cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:Math.min(E,b/2),forceCornerRadius:u,cornerIsExternal:f,startAngle:h,endAngle:m}):w=s4({cx:n,cy:r,innerRadius:i,outerRadius:s,startAngle:h,endAngle:m}),C.createElement("path",W1({},Ai(e),{className:v,d:w}))};function mG(t,e,n){if(t==="horizontal")return[{x:e.x,y:n.top},{x:e.x,y:n.top+n.height}];if(t==="vertical")return[{x:n.left,y:e.y},{x:n.left+n.width,y:e.y}];if(FD(e)){if(t==="centric"){var{cx:r,cy:i,innerRadius:s,outerRadius:l,angle:u}=e,f=ir(r,i,s,u),h=ir(r,i,l,u);return[{x:f.x,y:f.y},{x:h.x,y:h.y}]}return a4(e)}}var xw={},Ew={},Sw={},LR;function pG(){return LR||(LR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=tj();function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n})(Sw)),Sw}var VR;function gG(){return VR||(VR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=pG();function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n})(Ew)),Ew}var UR;function yG(){return UR||(UR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=nj(),n=gG();function r(i,s,l){l&&typeof l!="number"&&e.isIterateeCall(i,s,l)&&(s=l=void 0),i=n.toFinite(i),s===void 0?(s=i,i=0):s=n.toFinite(s),l=l===void 0?i<s?1:-1:n.toFinite(l);const u=Math.max(Math.ceil((s-i)/(l||1)),0),f=new Array(u);for(let h=0;h<u;h++)f[h]=i,i+=l;return f}t.range=r})(xw)),xw}var Aw,zR;function vG(){return zR||(zR=1,Aw=yG().range),Aw}var _G=vG();const l4=Va(_G);function Po(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function bG(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function IE(t){let e,n,r;t.length!==2?(e=Po,n=(u,f)=>Po(t(u),f),r=(u,f)=>t(u)-f):(e=t===Po||t===bG?t:wG,n=t,r=t);function i(u,f,h=0,m=u.length){if(h<m){if(e(f,f)!==0)return m;do{const p=h+m>>>1;n(u[p],f)<0?h=p+1:m=p}while(h<m)}return h}function s(u,f,h=0,m=u.length){if(h<m){if(e(f,f)!==0)return m;do{const p=h+m>>>1;n(u[p],f)<=0?h=p+1:m=p}while(h<m)}return h}function l(u,f,h=0,m=u.length){const p=i(u,f,h,m-1);return p>h&&r(u[p-1],f)>-r(u[p],f)?p-1:p}return{left:i,center:l,right:s}}function wG(){return 0}function c4(t){return t===null?NaN:+t}function*xG(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const EG=IE(Po),Oh=EG.right;IE(c4).center;class BR extends Map{constructor(e,n=TG){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get($R(this,e))}has(e){return super.has($R(this,e))}set(e,n){return super.set(SG(this,e),n)}delete(e){return super.delete(AG(this,e))}}function $R({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function SG({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function AG({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function TG(t){return t!==null&&typeof t=="object"?t.valueOf():t}function CG(t=Po){if(t===Po)return u4;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function u4(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const OG=Math.sqrt(50),IG=Math.sqrt(10),RG=Math.sqrt(2);function Zg(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),l=s>=OG?10:s>=IG?5:s>=RG?2:1;let u,f,h;return i<0?(h=Math.pow(10,-i)/l,u=Math.round(t*h),f=Math.round(e*h),u/h<t&&++u,f/h>e&&--f,h=-h):(h=Math.pow(10,i)*l,u=Math.round(t/h),f=Math.round(e/h),u*h<t&&++u,f*h>e&&--f),f<u&&.5<=n&&n<2?Zg(t,e,n*2):[u,f,h]}function X1(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,l]=r?Zg(e,t,n):Zg(t,e,n);if(!(s>=i))return[];const u=s-i+1,f=new Array(u);if(r)if(l<0)for(let h=0;h<u;++h)f[h]=(s-h)/-l;else for(let h=0;h<u;++h)f[h]=(s-h)*l;else if(l<0)for(let h=0;h<u;++h)f[h]=(i+h)/-l;else for(let h=0;h<u;++h)f[h]=(i+h)*l;return f}function Q1(t,e,n){return e=+e,t=+t,n=+n,Zg(t,e,n)[2]}function J1(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Q1(e,t,n):Q1(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function qR(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function FR(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function f4(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?u4:CG(i);r>n;){if(r-n>600){const f=r-n+1,h=e-n+1,m=Math.log(f),p=.5*Math.exp(2*m/3),v=.5*Math.sqrt(m*p*(f-p)/f)*(h-f/2<0?-1:1),b=Math.max(n,Math.floor(e-h*p/f+v)),E=Math.min(r,Math.floor(e+(f-h)*p/f+v));f4(t,e,b,E,i)}const s=t[e];let l=n,u=r;for(cd(t,n,e),i(t[r],s)>0&&cd(t,n,r);l<u;){for(cd(t,l,u),++l,--u;i(t[l],s)<0;)++l;for(;i(t[u],s)>0;)--u}i(t[n],s)===0?cd(t,n,u):(++u,cd(t,u,r)),u<=e&&(n=u+1),e<=u&&(r=u-1)}return t}function cd(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function NG(t,e,n){if(t=Float64Array.from(xG(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return FR(t);if(e>=1)return qR(t);var r,i=(r-1)*e,s=Math.floor(i),l=qR(f4(t,s).subarray(0,s+1)),u=FR(t.subarray(s+1));return l+(u-l)*(i-s)}}function PG(t,e,n=c4){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,s=Math.floor(i),l=+n(t[s],s,t),u=+n(t[s+1],s+1,t);return l+(u-l)*(i-s)}}function MG(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}function Ii(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Ms(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Z1=Symbol("implicit");function RE(){var t=new BR,e=[],n=[],r=Z1;function i(s){let l=t.get(s);if(l===void 0){if(r!==Z1)return r;t.set(s,l=e.push(s)-1)}return n[l%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new BR;for(const l of s)t.has(l)||t.set(l,e.push(l)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return RE(e,n).unknown(r)},Ii.apply(i,arguments),i}function NE(){var t=RE().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,s,l,u=!1,f=0,h=0,m=.5;delete t.unknown;function p(){var v=e().length,b=i<r,E=b?i:r,w=b?r:i;s=(w-E)/Math.max(1,v-f+h*2),u&&(s=Math.floor(s)),E+=(w-E-s*(v-f))*m,l=s*(1-f),u&&(E=Math.round(E),l=Math.round(l));var S=MG(v).map(function(P){return E+s*P});return n(b?S.reverse():S)}return t.domain=function(v){return arguments.length?(e(v),p()):e()},t.range=function(v){return arguments.length?([r,i]=v,r=+r,i=+i,p()):[r,i]},t.rangeRound=function(v){return[r,i]=v,r=+r,i=+i,u=!0,p()},t.bandwidth=function(){return l},t.step=function(){return s},t.round=function(v){return arguments.length?(u=!!v,p()):u},t.padding=function(v){return arguments.length?(f=Math.min(1,h=+v),p()):f},t.paddingInner=function(v){return arguments.length?(f=Math.min(1,v),p()):f},t.paddingOuter=function(v){return arguments.length?(h=+v,p()):h},t.align=function(v){return arguments.length?(m=Math.max(0,Math.min(1,v)),p()):m},t.copy=function(){return NE(e(),[r,i]).round(u).paddingInner(f).paddingOuter(h).align(m)},Ii.apply(p(),arguments)}function d4(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return d4(e())},t}function kG(){return d4(NE.apply(null,arguments).paddingInner(1))}function PE(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function h4(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Ih(){}var eh=.7,ey=1/eh,gu="\\s*([+-]?\\d+)\\s*",th="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ca="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",DG=/^#([0-9a-f]{3,8})$/,jG=new RegExp(`^rgb\\(${gu},${gu},${gu}\\)$`),LG=new RegExp(`^rgb\\(${Ca},${Ca},${Ca}\\)$`),VG=new RegExp(`^rgba\\(${gu},${gu},${gu},${th}\\)$`),UG=new RegExp(`^rgba\\(${Ca},${Ca},${Ca},${th}\\)$`),zG=new RegExp(`^hsl\\(${th},${Ca},${Ca}\\)$`),BG=new RegExp(`^hsla\\(${th},${Ca},${Ca},${th}\\)$`),HR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};PE(Ih,nh,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:GR,formatHex:GR,formatHex8:$G,formatHsl:qG,formatRgb:KR,toString:KR});function GR(){return this.rgb().formatHex()}function $G(){return this.rgb().formatHex8()}function qG(){return m4(this).formatHsl()}function KR(){return this.rgb().formatRgb()}function nh(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=DG.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?YR(e):n===3?new Lr(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Lp(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Lp(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=jG.exec(t))?new Lr(e[1],e[2],e[3],1):(e=LG.exec(t))?new Lr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=VG.exec(t))?Lp(e[1],e[2],e[3],e[4]):(e=UG.exec(t))?Lp(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=zG.exec(t))?QR(e[1],e[2]/100,e[3]/100,1):(e=BG.exec(t))?QR(e[1],e[2]/100,e[3]/100,e[4]):HR.hasOwnProperty(t)?YR(HR[t]):t==="transparent"?new Lr(NaN,NaN,NaN,0):null}function YR(t){return new Lr(t>>16&255,t>>8&255,t&255,1)}function Lp(t,e,n,r){return r<=0&&(t=e=n=NaN),new Lr(t,e,n,r)}function FG(t){return t instanceof Ih||(t=nh(t)),t?(t=t.rgb(),new Lr(t.r,t.g,t.b,t.opacity)):new Lr}function ex(t,e,n,r){return arguments.length===1?FG(t):new Lr(t,e,n,r??1)}function Lr(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}PE(Lr,ex,h4(Ih,{brighter(t){return t=t==null?ey:Math.pow(ey,t),new Lr(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?eh:Math.pow(eh,t),new Lr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Lr(Ul(this.r),Ul(this.g),Ul(this.b),ty(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:WR,formatHex:WR,formatHex8:HG,formatRgb:XR,toString:XR}));function WR(){return`#${Nl(this.r)}${Nl(this.g)}${Nl(this.b)}`}function HG(){return`#${Nl(this.r)}${Nl(this.g)}${Nl(this.b)}${Nl((isNaN(this.opacity)?1:this.opacity)*255)}`}function XR(){const t=ty(this.opacity);return`${t===1?"rgb(":"rgba("}${Ul(this.r)}, ${Ul(this.g)}, ${Ul(this.b)}${t===1?")":`, ${t})`}`}function ty(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ul(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Nl(t){return t=Ul(t),(t<16?"0":"")+t.toString(16)}function QR(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Fi(t,e,n,r)}function m4(t){if(t instanceof Fi)return new Fi(t.h,t.s,t.l,t.opacity);if(t instanceof Ih||(t=nh(t)),!t)return new Fi;if(t instanceof Fi)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),l=NaN,u=s-i,f=(s+i)/2;return u?(e===s?l=(n-r)/u+(n<r)*6:n===s?l=(r-e)/u+2:l=(e-n)/u+4,u/=f<.5?s+i:2-s-i,l*=60):u=f>0&&f<1?0:l,new Fi(l,u,f,t.opacity)}function GG(t,e,n,r){return arguments.length===1?m4(t):new Fi(t,e,n,r??1)}function Fi(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}PE(Fi,GG,h4(Ih,{brighter(t){return t=t==null?ey:Math.pow(ey,t),new Fi(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?eh:Math.pow(eh,t),new Fi(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Lr(Tw(t>=240?t-240:t+120,i,r),Tw(t,i,r),Tw(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Fi(JR(this.h),Vp(this.s),Vp(this.l),ty(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ty(this.opacity);return`${t===1?"hsl(":"hsla("}${JR(this.h)}, ${Vp(this.s)*100}%, ${Vp(this.l)*100}%${t===1?")":`, ${t})`}`}}));function JR(t){return t=(t||0)%360,t<0?t+360:t}function Vp(t){return Math.max(0,Math.min(1,t||0))}function Tw(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const ME=t=>()=>t;function KG(t,e){return function(n){return t+n*e}}function YG(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function WG(t){return(t=+t)==1?p4:function(e,n){return n-e?YG(e,n,t):ME(isNaN(e)?n:e)}}function p4(t,e){var n=e-t;return n?KG(t,n):ME(isNaN(t)?e:t)}const ZR=(function t(e){var n=WG(e);function r(i,s){var l=n((i=ex(i)).r,(s=ex(s)).r),u=n(i.g,s.g),f=n(i.b,s.b),h=p4(i.opacity,s.opacity);return function(m){return i.r=l(m),i.g=u(m),i.b=f(m),i.opacity=h(m),i+""}}return r.gamma=t,r})(1);function XG(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function QG(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function JG(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),l;for(l=0;l<r;++l)i[l]=zu(t[l],e[l]);for(;l<n;++l)s[l]=e[l];return function(u){for(l=0;l<r;++l)s[l]=i[l](u);return s}}function ZG(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function ny(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function eK(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=zu(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var tx=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Cw=new RegExp(tx.source,"g");function tK(t){return function(){return t}}function nK(t){return function(e){return t(e)+""}}function rK(t,e){var n=tx.lastIndex=Cw.lastIndex=0,r,i,s,l=-1,u=[],f=[];for(t=t+"",e=e+"";(r=tx.exec(t))&&(i=Cw.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),u[l]?u[l]+=s:u[++l]=s),(r=r[0])===(i=i[0])?u[l]?u[l]+=i:u[++l]=i:(u[++l]=null,f.push({i:l,x:ny(r,i)})),n=Cw.lastIndex;return n<e.length&&(s=e.slice(n),u[l]?u[l]+=s:u[++l]=s),u.length<2?f[0]?nK(f[0].x):tK(e):(e=f.length,function(h){for(var m=0,p;m<e;++m)u[(p=f[m]).i]=p.x(h);return u.join("")})}function zu(t,e){var n=typeof e,r;return e==null||n==="boolean"?ME(e):(n==="number"?ny:n==="string"?(r=nh(e))?(e=r,ZR):rK:e instanceof nh?ZR:e instanceof Date?ZG:QG(e)?XG:Array.isArray(e)?JG:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?eK:ny)(t,e)}function kE(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function iK(t,e){e===void 0&&(e=t,t=zu);for(var n=0,r=e.length-1,i=e[0],s=new Array(r<0?0:r);n<r;)s[n]=t(i,i=e[++n]);return function(l){var u=Math.max(0,Math.min(r-1,Math.floor(l*=r)));return s[u](l-u)}}function aK(t){return function(){return t}}function ry(t){return+t}var eN=[0,1];function wr(t){return t}function nx(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:aK(isNaN(e)?NaN:.5)}function sK(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function oK(t,e,n){var r=t[0],i=t[1],s=e[0],l=e[1];return i<r?(r=nx(i,r),s=n(l,s)):(r=nx(r,i),s=n(s,l)),function(u){return s(r(u))}}function lK(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),l=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++l<r;)i[l]=nx(t[l],t[l+1]),s[l]=n(e[l],e[l+1]);return function(u){var f=Oh(t,u,1,r)-1;return s[f](i[f](u))}}function Rh(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function xv(){var t=eN,e=eN,n=zu,r,i,s,l=wr,u,f,h;function m(){var v=Math.min(t.length,e.length);return l!==wr&&(l=sK(t[0],t[v-1])),u=v>2?lK:oK,f=h=null,p}function p(v){return v==null||isNaN(v=+v)?s:(f||(f=u(t.map(r),e,n)))(r(l(v)))}return p.invert=function(v){return l(i((h||(h=u(e,t.map(r),ny)))(v)))},p.domain=function(v){return arguments.length?(t=Array.from(v,ry),m()):t.slice()},p.range=function(v){return arguments.length?(e=Array.from(v),m()):e.slice()},p.rangeRound=function(v){return e=Array.from(v),n=kE,m()},p.clamp=function(v){return arguments.length?(l=v?!0:wr,m()):l!==wr},p.interpolate=function(v){return arguments.length?(n=v,m()):n},p.unknown=function(v){return arguments.length?(s=v,p):s},function(v,b){return r=v,i=b,m()}}function DE(){return xv()(wr,wr)}function cK(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function iy(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Tu(t){return t=iy(Math.abs(t)),t?t[1]:NaN}function uK(t,e){return function(n,r){for(var i=n.length,s=[],l=0,u=t[0],f=0;i>0&&u>0&&(f+u+1>r&&(u=Math.max(1,r-f)),s.push(n.substring(i-=u,i+u)),!((f+=u+1)>r));)u=t[l=(l+1)%t.length];return s.reverse().join(e)}}function fK(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var dK=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function rh(t){if(!(e=dK.exec(t)))throw new Error("invalid format: "+t);var e;return new jE({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}rh.prototype=jE.prototype;function jE(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}jE.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function hK(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var g4;function mK(t,e){var n=iy(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(g4=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,l=r.length;return s===l?r:s>l?r+new Array(s-l+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+iy(t,Math.max(0,e+s-1))[0]}function tN(t,e){var n=iy(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const nN={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:cK,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>tN(t*100,e),r:tN,s:mK,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function rN(t){return t}var iN=Array.prototype.map,aN=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function pK(t){var e=t.grouping===void 0||t.thousands===void 0?rN:uK(iN.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?rN:fK(iN.call(t.numerals,String)),l=t.percent===void 0?"%":t.percent+"",u=t.minus===void 0?"":t.minus+"",f=t.nan===void 0?"NaN":t.nan+"";function h(p){p=rh(p);var v=p.fill,b=p.align,E=p.sign,w=p.symbol,S=p.zero,P=p.width,M=p.comma,j=p.precision,$=p.trim,L=p.type;L==="n"?(M=!0,L="g"):nN[L]||(j===void 0&&(j=12),$=!0,L="g"),(S||v==="0"&&b==="=")&&(S=!0,v="0",b="=");var q=w==="$"?n:w==="#"&&/[boxX]/.test(L)?"0"+L.toLowerCase():"",I=w==="$"?r:/[%p]/.test(L)?l:"",R=nN[L],N=/[defgprs%]/.test(L);j=j===void 0?6:/[gprs]/.test(L)?Math.max(1,Math.min(21,j)):Math.max(0,Math.min(20,j));function z(k){var B=q,V=I,pe,be,G;if(L==="c")V=R(k)+V,k="";else{k=+k;var ne=k<0||1/k<0;if(k=isNaN(k)?f:R(Math.abs(k),j),$&&(k=hK(k)),ne&&+k==0&&E!=="+"&&(ne=!1),B=(ne?E==="("?E:u:E==="-"||E==="("?"":E)+B,V=(L==="s"?aN[8+g4/3]:"")+V+(ne&&E==="("?")":""),N){for(pe=-1,be=k.length;++pe<be;)if(G=k.charCodeAt(pe),48>G||G>57){V=(G===46?i+k.slice(pe+1):k.slice(pe))+V,k=k.slice(0,pe);break}}}M&&!S&&(k=e(k,1/0));var de=B.length+k.length+V.length,ge=de<P?new Array(P-de+1).join(v):"";switch(M&&S&&(k=e(ge+k,ge.length?P-V.length:1/0),ge=""),b){case"<":k=B+k+V+ge;break;case"=":k=B+ge+k+V;break;case"^":k=ge.slice(0,de=ge.length>>1)+B+k+V+ge.slice(de);break;default:k=ge+B+k+V;break}return s(k)}return z.toString=function(){return p+""},z}function m(p,v){var b=h((p=rh(p),p.type="f",p)),E=Math.max(-8,Math.min(8,Math.floor(Tu(v)/3)))*3,w=Math.pow(10,-E),S=aN[8+E/3];return function(P){return b(w*P)+S}}return{format:h,formatPrefix:m}}var Up,LE,y4;gK({thousands:",",grouping:[3],currency:["$",""]});function gK(t){return Up=pK(t),LE=Up.format,y4=Up.formatPrefix,Up}function yK(t){return Math.max(0,-Tu(Math.abs(t)))}function vK(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Tu(e)/3)))*3-Tu(Math.abs(t)))}function _K(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Tu(e)-Tu(t))+1}function v4(t,e,n,r){var i=J1(t,e,n),s;switch(r=rh(r??",f"),r.type){case"s":{var l=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=vK(i,l))&&(r.precision=s),y4(r,l)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=_K(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=yK(i))&&(r.precision=s-(r.type==="%")*2);break}}return LE(r)}function Go(t){var e=t.domain;return t.ticks=function(n){var r=e();return X1(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return v4(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,l=r[i],u=r[s],f,h,m=10;for(u<l&&(h=l,l=u,u=h,h=i,i=s,s=h);m-- >0;){if(h=Q1(l,u,n),h===f)return r[i]=l,r[s]=u,e(r);if(h>0)l=Math.floor(l/h)*h,u=Math.ceil(u/h)*h;else if(h<0)l=Math.ceil(l*h)/h,u=Math.floor(u*h)/h;else break;f=h}return t},t}function _4(){var t=DE();return t.copy=function(){return Rh(t,_4())},Ii.apply(t,arguments),Go(t)}function b4(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,ry),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return b4(t).unknown(e)},t=arguments.length?Array.from(t,ry):[0,1],Go(n)}function w4(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],s=t[r],l;return s<i&&(l=n,n=r,r=l,l=i,i=s,s=l),t[n]=e.floor(i),t[r]=e.ceil(s),t}function sN(t){return Math.log(t)}function oN(t){return Math.exp(t)}function bK(t){return-Math.log(-t)}function wK(t){return-Math.exp(-t)}function xK(t){return isFinite(t)?+("1e"+t):t<0?0:t}function EK(t){return t===10?xK:t===Math.E?Math.exp:e=>Math.pow(t,e)}function SK(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function lN(t){return(e,n)=>-t(-e,n)}function VE(t){const e=t(sN,oN),n=e.domain;let r=10,i,s;function l(){return i=SK(r),s=EK(r),n()[0]<0?(i=lN(i),s=lN(s),t(bK,wK)):t(sN,oN),e}return e.base=function(u){return arguments.length?(r=+u,l()):r},e.domain=function(u){return arguments.length?(n(u),l()):n()},e.ticks=u=>{const f=n();let h=f[0],m=f[f.length-1];const p=m<h;p&&([h,m]=[m,h]);let v=i(h),b=i(m),E,w;const S=u==null?10:+u;let P=[];if(!(r%1)&&b-v<S){if(v=Math.floor(v),b=Math.ceil(b),h>0){for(;v<=b;++v)for(E=1;E<r;++E)if(w=v<0?E/s(-v):E*s(v),!(w<h)){if(w>m)break;P.push(w)}}else for(;v<=b;++v)for(E=r-1;E>=1;--E)if(w=v>0?E/s(-v):E*s(v),!(w<h)){if(w>m)break;P.push(w)}P.length*2<S&&(P=X1(h,m,S))}else P=X1(v,b,Math.min(b-v,S)).map(s);return p?P.reverse():P},e.tickFormat=(u,f)=>{if(u==null&&(u=10),f==null&&(f=r===10?"s":","),typeof f!="function"&&(!(r%1)&&(f=rh(f)).precision==null&&(f.trim=!0),f=LE(f)),u===1/0)return f;const h=Math.max(1,r*u/e.ticks().length);return m=>{let p=m/s(Math.round(i(m)));return p*r<r-.5&&(p*=r),p<=h?f(m):""}},e.nice=()=>n(w4(n(),{floor:u=>s(Math.floor(i(u))),ceil:u=>s(Math.ceil(i(u)))})),e}function x4(){const t=VE(xv()).domain([1,10]);return t.copy=()=>Rh(t,x4()).base(t.base()),Ii.apply(t,arguments),t}function cN(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function uN(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function UE(t){var e=1,n=t(cN(e),uN(e));return n.constant=function(r){return arguments.length?t(cN(e=+r),uN(e)):e},Go(n)}function E4(){var t=UE(xv());return t.copy=function(){return Rh(t,E4()).constant(t.constant())},Ii.apply(t,arguments)}function fN(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function AK(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function TK(t){return t<0?-t*t:t*t}function zE(t){var e=t(wr,wr),n=1;function r(){return n===1?t(wr,wr):n===.5?t(AK,TK):t(fN(n),fN(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Go(e)}function BE(){var t=zE(xv());return t.copy=function(){return Rh(t,BE()).exponent(t.exponent())},Ii.apply(t,arguments),t}function CK(){return BE.apply(null,arguments).exponent(.5)}function dN(t){return Math.sign(t)*t*t}function OK(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function S4(){var t=DE(),e=[0,1],n=!1,r;function i(s){var l=OK(t(s));return isNaN(l)?r:n?Math.round(l):l}return i.invert=function(s){return t.invert(dN(s))},i.domain=function(s){return arguments.length?(t.domain(s),i):t.domain()},i.range=function(s){return arguments.length?(t.range((e=Array.from(s,ry)).map(dN)),i):e.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(t.clamp(s),i):t.clamp()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return S4(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Ii.apply(i,arguments),Go(i)}function A4(){var t=[],e=[],n=[],r;function i(){var l=0,u=Math.max(1,e.length);for(n=new Array(u-1);++l<u;)n[l-1]=PG(t,l/u);return s}function s(l){return l==null||isNaN(l=+l)?r:e[Oh(n,l)]}return s.invertExtent=function(l){var u=e.indexOf(l);return u<0?[NaN,NaN]:[u>0?n[u-1]:t[0],u<n.length?n[u]:t[t.length-1]]},s.domain=function(l){if(!arguments.length)return t.slice();t=[];for(let u of l)u!=null&&!isNaN(u=+u)&&t.push(u);return t.sort(Po),i()},s.range=function(l){return arguments.length?(e=Array.from(l),i()):e.slice()},s.unknown=function(l){return arguments.length?(r=l,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return A4().domain(t).range(e).unknown(r)},Ii.apply(s,arguments)}function T4(){var t=0,e=1,n=1,r=[.5],i=[0,1],s;function l(f){return f!=null&&f<=f?i[Oh(r,f,0,n)]:s}function u(){var f=-1;for(r=new Array(n);++f<n;)r[f]=((f+1)*e-(f-n)*t)/(n+1);return l}return l.domain=function(f){return arguments.length?([t,e]=f,t=+t,e=+e,u()):[t,e]},l.range=function(f){return arguments.length?(n=(i=Array.from(f)).length-1,u()):i.slice()},l.invertExtent=function(f){var h=i.indexOf(f);return h<0?[NaN,NaN]:h<1?[t,r[0]]:h>=n?[r[n-1],e]:[r[h-1],r[h]]},l.unknown=function(f){return arguments.length&&(s=f),l},l.thresholds=function(){return r.slice()},l.copy=function(){return T4().domain([t,e]).range(i).unknown(s)},Ii.apply(Go(l),arguments)}function C4(){var t=[.5],e=[0,1],n,r=1;function i(s){return s!=null&&s<=s?e[Oh(t,s,0,r)]:n}return i.domain=function(s){return arguments.length?(t=Array.from(s),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(s){return arguments.length?(e=Array.from(s),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var l=e.indexOf(s);return[t[l-1],t[l]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return C4().domain(t).range(e).unknown(n)},Ii.apply(i,arguments)}const Ow=new Date,Iw=new Date;function Nn(t,e,n,r){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const l=i(s),u=i.ceil(s);return s-l<u-s?l:u},i.offset=(s,l)=>(e(s=new Date(+s),l==null?1:Math.floor(l)),s),i.range=(s,l,u)=>{const f=[];if(s=i.ceil(s),u=u==null?1:Math.floor(u),!(s<l)||!(u>0))return f;let h;do f.push(h=new Date(+s)),e(s,u),t(s);while(h<s&&s<l);return f},i.filter=s=>Nn(l=>{if(l>=l)for(;t(l),!s(l);)l.setTime(l-1)},(l,u)=>{if(l>=l)if(u<0)for(;++u<=0;)for(;e(l,-1),!s(l););else for(;--u>=0;)for(;e(l,1),!s(l););}),n&&(i.count=(s,l)=>(Ow.setTime(+s),Iw.setTime(+l),t(Ow),t(Iw),Math.floor(n(Ow,Iw))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?l=>r(l)%s===0:l=>i.count(0,l)%s===0):i)),i}const ay=Nn(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);ay.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Nn(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):ay);ay.range;const us=1e3,Ei=us*60,fs=Ei*60,xs=fs*24,$E=xs*7,hN=xs*30,Rw=xs*365,Pl=Nn(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*us)},(t,e)=>(e-t)/us,t=>t.getUTCSeconds());Pl.range;const qE=Nn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*us)},(t,e)=>{t.setTime(+t+e*Ei)},(t,e)=>(e-t)/Ei,t=>t.getMinutes());qE.range;const FE=Nn(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Ei)},(t,e)=>(e-t)/Ei,t=>t.getUTCMinutes());FE.range;const HE=Nn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*us-t.getMinutes()*Ei)},(t,e)=>{t.setTime(+t+e*fs)},(t,e)=>(e-t)/fs,t=>t.getHours());HE.range;const GE=Nn(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*fs)},(t,e)=>(e-t)/fs,t=>t.getUTCHours());GE.range;const Nh=Nn(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ei)/xs,t=>t.getDate()-1);Nh.range;const Ev=Nn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/xs,t=>t.getUTCDate()-1);Ev.range;const O4=Nn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/xs,t=>Math.floor(t/xs));O4.range;function nc(t){return Nn(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Ei)/$E)}const Sv=nc(0),sy=nc(1),IK=nc(2),RK=nc(3),Cu=nc(4),NK=nc(5),PK=nc(6);Sv.range;sy.range;IK.range;RK.range;Cu.range;NK.range;PK.range;function rc(t){return Nn(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/$E)}const Av=rc(0),oy=rc(1),MK=rc(2),kK=rc(3),Ou=rc(4),DK=rc(5),jK=rc(6);Av.range;oy.range;MK.range;kK.range;Ou.range;DK.range;jK.range;const KE=Nn(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());KE.range;const YE=Nn(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());YE.range;const Es=Nn(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Es.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Nn(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Es.range;const Ss=Nn(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Ss.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Nn(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Ss.range;function I4(t,e,n,r,i,s){const l=[[Pl,1,us],[Pl,5,5*us],[Pl,15,15*us],[Pl,30,30*us],[s,1,Ei],[s,5,5*Ei],[s,15,15*Ei],[s,30,30*Ei],[i,1,fs],[i,3,3*fs],[i,6,6*fs],[i,12,12*fs],[r,1,xs],[r,2,2*xs],[n,1,$E],[e,1,hN],[e,3,3*hN],[t,1,Rw]];function u(h,m,p){const v=m<h;v&&([h,m]=[m,h]);const b=p&&typeof p.range=="function"?p:f(h,m,p),E=b?b.range(h,+m+1):[];return v?E.reverse():E}function f(h,m,p){const v=Math.abs(m-h)/p,b=IE(([,,S])=>S).right(l,v);if(b===l.length)return t.every(J1(h/Rw,m/Rw,p));if(b===0)return ay.every(Math.max(J1(h,m,p),1));const[E,w]=l[v/l[b-1][2]<l[b][2]/v?b-1:b];return E.every(w)}return[u,f]}const[LK,VK]=I4(Ss,YE,Av,O4,GE,FE),[UK,zK]=I4(Es,KE,Sv,Nh,HE,qE);function Nw(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Pw(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function ud(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function BK(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,l=t.shortDays,u=t.months,f=t.shortMonths,h=fd(i),m=dd(i),p=fd(s),v=dd(s),b=fd(l),E=dd(l),w=fd(u),S=dd(u),P=fd(f),M=dd(f),j={a:ne,A:de,b:ge,B:Ee,c:null,d:_N,e:_N,f:uY,g:bY,G:xY,H:oY,I:lY,j:cY,L:R4,m:fY,M:dY,p:F,q:X,Q:xN,s:EN,S:hY,u:mY,U:pY,V:gY,w:yY,W:vY,x:null,X:null,y:_Y,Y:wY,Z:EY,"%":wN},$={a:re,A:_e,b:Oe,B:xe,c:null,d:bN,e:bN,f:CY,g:LY,G:UY,H:SY,I:AY,j:TY,L:P4,m:OY,M:IY,p:Pe,q:yt,Q:xN,s:EN,S:RY,u:NY,U:PY,V:MY,w:kY,W:DY,x:null,X:null,y:jY,Y:VY,Z:zY,"%":wN},L={a:z,A:k,b:B,B:V,c:pe,d:yN,e:yN,f:rY,g:gN,G:pN,H:vN,I:vN,j:ZK,L:nY,m:JK,M:eY,p:N,q:QK,Q:aY,s:sY,S:tY,u:GK,U:KK,V:YK,w:HK,W:WK,x:be,X:G,y:gN,Y:pN,Z:XK,"%":iY};j.x=q(n,j),j.X=q(r,j),j.c=q(e,j),$.x=q(n,$),$.X=q(r,$),$.c=q(e,$);function q(se,ze){return function(fe){var le=[],rt=-1,je=0,Ct=se.length,Dt,Lt,Zi;for(fe instanceof Date||(fe=new Date(+fe));++rt<Ct;)se.charCodeAt(rt)===37&&(le.push(se.slice(je,rt)),(Lt=mN[Dt=se.charAt(++rt)])!=null?Dt=se.charAt(++rt):Lt=Dt==="e"?" ":"0",(Zi=ze[Dt])&&(Dt=Zi(fe,Lt)),le.push(Dt),je=rt+1);return le.push(se.slice(je,rt)),le.join("")}}function I(se,ze){return function(fe){var le=ud(1900,void 0,1),rt=R(le,se,fe+="",0),je,Ct;if(rt!=fe.length)return null;if("Q"in le)return new Date(le.Q);if("s"in le)return new Date(le.s*1e3+("L"in le?le.L:0));if(ze&&!("Z"in le)&&(le.Z=0),"p"in le&&(le.H=le.H%12+le.p*12),le.m===void 0&&(le.m="q"in le?le.q:0),"V"in le){if(le.V<1||le.V>53)return null;"w"in le||(le.w=1),"Z"in le?(je=Pw(ud(le.y,0,1)),Ct=je.getUTCDay(),je=Ct>4||Ct===0?oy.ceil(je):oy(je),je=Ev.offset(je,(le.V-1)*7),le.y=je.getUTCFullYear(),le.m=je.getUTCMonth(),le.d=je.getUTCDate()+(le.w+6)%7):(je=Nw(ud(le.y,0,1)),Ct=je.getDay(),je=Ct>4||Ct===0?sy.ceil(je):sy(je),je=Nh.offset(je,(le.V-1)*7),le.y=je.getFullYear(),le.m=je.getMonth(),le.d=je.getDate()+(le.w+6)%7)}else("W"in le||"U"in le)&&("w"in le||(le.w="u"in le?le.u%7:"W"in le?1:0),Ct="Z"in le?Pw(ud(le.y,0,1)).getUTCDay():Nw(ud(le.y,0,1)).getDay(),le.m=0,le.d="W"in le?(le.w+6)%7+le.W*7-(Ct+5)%7:le.w+le.U*7-(Ct+6)%7);return"Z"in le?(le.H+=le.Z/100|0,le.M+=le.Z%100,Pw(le)):Nw(le)}}function R(se,ze,fe,le){for(var rt=0,je=ze.length,Ct=fe.length,Dt,Lt;rt<je;){if(le>=Ct)return-1;if(Dt=ze.charCodeAt(rt++),Dt===37){if(Dt=ze.charAt(rt++),Lt=L[Dt in mN?ze.charAt(rt++):Dt],!Lt||(le=Lt(se,fe,le))<0)return-1}else if(Dt!=fe.charCodeAt(le++))return-1}return le}function N(se,ze,fe){var le=h.exec(ze.slice(fe));return le?(se.p=m.get(le[0].toLowerCase()),fe+le[0].length):-1}function z(se,ze,fe){var le=b.exec(ze.slice(fe));return le?(se.w=E.get(le[0].toLowerCase()),fe+le[0].length):-1}function k(se,ze,fe){var le=p.exec(ze.slice(fe));return le?(se.w=v.get(le[0].toLowerCase()),fe+le[0].length):-1}function B(se,ze,fe){var le=P.exec(ze.slice(fe));return le?(se.m=M.get(le[0].toLowerCase()),fe+le[0].length):-1}function V(se,ze,fe){var le=w.exec(ze.slice(fe));return le?(se.m=S.get(le[0].toLowerCase()),fe+le[0].length):-1}function pe(se,ze,fe){return R(se,e,ze,fe)}function be(se,ze,fe){return R(se,n,ze,fe)}function G(se,ze,fe){return R(se,r,ze,fe)}function ne(se){return l[se.getDay()]}function de(se){return s[se.getDay()]}function ge(se){return f[se.getMonth()]}function Ee(se){return u[se.getMonth()]}function F(se){return i[+(se.getHours()>=12)]}function X(se){return 1+~~(se.getMonth()/3)}function re(se){return l[se.getUTCDay()]}function _e(se){return s[se.getUTCDay()]}function Oe(se){return f[se.getUTCMonth()]}function xe(se){return u[se.getUTCMonth()]}function Pe(se){return i[+(se.getUTCHours()>=12)]}function yt(se){return 1+~~(se.getUTCMonth()/3)}return{format:function(se){var ze=q(se+="",j);return ze.toString=function(){return se},ze},parse:function(se){var ze=I(se+="",!1);return ze.toString=function(){return se},ze},utcFormat:function(se){var ze=q(se+="",$);return ze.toString=function(){return se},ze},utcParse:function(se){var ze=I(se+="",!0);return ze.toString=function(){return se},ze}}}var mN={"-":"",_:" ",0:"0"},Gn=/^\s*\d+/,$K=/^%/,qK=/[\\^$*+?|[\]().{}]/g;function gt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function FK(t){return t.replace(qK,"\\$&")}function fd(t){return new RegExp("^(?:"+t.map(FK).join("|")+")","i")}function dd(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function HK(t,e,n){var r=Gn.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function GK(t,e,n){var r=Gn.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function KK(t,e,n){var r=Gn.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function YK(t,e,n){var r=Gn.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function WK(t,e,n){var r=Gn.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function pN(t,e,n){var r=Gn.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function gN(t,e,n){var r=Gn.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function XK(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function QK(t,e,n){var r=Gn.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function JK(t,e,n){var r=Gn.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function yN(t,e,n){var r=Gn.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function ZK(t,e,n){var r=Gn.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function vN(t,e,n){var r=Gn.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function eY(t,e,n){var r=Gn.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function tY(t,e,n){var r=Gn.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function nY(t,e,n){var r=Gn.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function rY(t,e,n){var r=Gn.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function iY(t,e,n){var r=$K.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function aY(t,e,n){var r=Gn.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function sY(t,e,n){var r=Gn.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function _N(t,e){return gt(t.getDate(),e,2)}function oY(t,e){return gt(t.getHours(),e,2)}function lY(t,e){return gt(t.getHours()%12||12,e,2)}function cY(t,e){return gt(1+Nh.count(Es(t),t),e,3)}function R4(t,e){return gt(t.getMilliseconds(),e,3)}function uY(t,e){return R4(t,e)+"000"}function fY(t,e){return gt(t.getMonth()+1,e,2)}function dY(t,e){return gt(t.getMinutes(),e,2)}function hY(t,e){return gt(t.getSeconds(),e,2)}function mY(t){var e=t.getDay();return e===0?7:e}function pY(t,e){return gt(Sv.count(Es(t)-1,t),e,2)}function N4(t){var e=t.getDay();return e>=4||e===0?Cu(t):Cu.ceil(t)}function gY(t,e){return t=N4(t),gt(Cu.count(Es(t),t)+(Es(t).getDay()===4),e,2)}function yY(t){return t.getDay()}function vY(t,e){return gt(sy.count(Es(t)-1,t),e,2)}function _Y(t,e){return gt(t.getFullYear()%100,e,2)}function bY(t,e){return t=N4(t),gt(t.getFullYear()%100,e,2)}function wY(t,e){return gt(t.getFullYear()%1e4,e,4)}function xY(t,e){var n=t.getDay();return t=n>=4||n===0?Cu(t):Cu.ceil(t),gt(t.getFullYear()%1e4,e,4)}function EY(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+gt(e/60|0,"0",2)+gt(e%60,"0",2)}function bN(t,e){return gt(t.getUTCDate(),e,2)}function SY(t,e){return gt(t.getUTCHours(),e,2)}function AY(t,e){return gt(t.getUTCHours()%12||12,e,2)}function TY(t,e){return gt(1+Ev.count(Ss(t),t),e,3)}function P4(t,e){return gt(t.getUTCMilliseconds(),e,3)}function CY(t,e){return P4(t,e)+"000"}function OY(t,e){return gt(t.getUTCMonth()+1,e,2)}function IY(t,e){return gt(t.getUTCMinutes(),e,2)}function RY(t,e){return gt(t.getUTCSeconds(),e,2)}function NY(t){var e=t.getUTCDay();return e===0?7:e}function PY(t,e){return gt(Av.count(Ss(t)-1,t),e,2)}function M4(t){var e=t.getUTCDay();return e>=4||e===0?Ou(t):Ou.ceil(t)}function MY(t,e){return t=M4(t),gt(Ou.count(Ss(t),t)+(Ss(t).getUTCDay()===4),e,2)}function kY(t){return t.getUTCDay()}function DY(t,e){return gt(oy.count(Ss(t)-1,t),e,2)}function jY(t,e){return gt(t.getUTCFullYear()%100,e,2)}function LY(t,e){return t=M4(t),gt(t.getUTCFullYear()%100,e,2)}function VY(t,e){return gt(t.getUTCFullYear()%1e4,e,4)}function UY(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Ou(t):Ou.ceil(t),gt(t.getUTCFullYear()%1e4,e,4)}function zY(){return"+0000"}function wN(){return"%"}function xN(t){return+t}function EN(t){return Math.floor(+t/1e3)}var Qc,k4,D4;BY({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function BY(t){return Qc=BK(t),k4=Qc.format,Qc.parse,D4=Qc.utcFormat,Qc.utcParse,Qc}function $Y(t){return new Date(t)}function qY(t){return t instanceof Date?+t:+new Date(+t)}function WE(t,e,n,r,i,s,l,u,f,h){var m=DE(),p=m.invert,v=m.domain,b=h(".%L"),E=h(":%S"),w=h("%I:%M"),S=h("%I %p"),P=h("%a %d"),M=h("%b %d"),j=h("%B"),$=h("%Y");function L(q){return(f(q)<q?b:u(q)<q?E:l(q)<q?w:s(q)<q?S:r(q)<q?i(q)<q?P:M:n(q)<q?j:$)(q)}return m.invert=function(q){return new Date(p(q))},m.domain=function(q){return arguments.length?v(Array.from(q,qY)):v().map($Y)},m.ticks=function(q){var I=v();return t(I[0],I[I.length-1],q??10)},m.tickFormat=function(q,I){return I==null?L:h(I)},m.nice=function(q){var I=v();return(!q||typeof q.range!="function")&&(q=e(I[0],I[I.length-1],q??10)),q?v(w4(I,q)):m},m.copy=function(){return Rh(m,WE(t,e,n,r,i,s,l,u,f,h))},m}function FY(){return Ii.apply(WE(UK,zK,Es,KE,Sv,Nh,HE,qE,Pl,k4).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function HY(){return Ii.apply(WE(LK,VK,Ss,YE,Av,Ev,GE,FE,Pl,D4).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Tv(){var t=0,e=1,n,r,i,s,l=wr,u=!1,f;function h(p){return p==null||isNaN(p=+p)?f:l(i===0?.5:(p=(s(p)-n)*i,u?Math.max(0,Math.min(1,p)):p))}h.domain=function(p){return arguments.length?([t,e]=p,n=s(t=+t),r=s(e=+e),i=n===r?0:1/(r-n),h):[t,e]},h.clamp=function(p){return arguments.length?(u=!!p,h):u},h.interpolator=function(p){return arguments.length?(l=p,h):l};function m(p){return function(v){var b,E;return arguments.length?([b,E]=v,l=p(b,E),h):[l(0),l(1)]}}return h.range=m(zu),h.rangeRound=m(kE),h.unknown=function(p){return arguments.length?(f=p,h):f},function(p){return s=p,n=p(t),r=p(e),i=n===r?0:1/(r-n),h}}function Ko(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function j4(){var t=Go(Tv()(wr));return t.copy=function(){return Ko(t,j4())},Ms.apply(t,arguments)}function L4(){var t=VE(Tv()).domain([1,10]);return t.copy=function(){return Ko(t,L4()).base(t.base())},Ms.apply(t,arguments)}function V4(){var t=UE(Tv());return t.copy=function(){return Ko(t,V4()).constant(t.constant())},Ms.apply(t,arguments)}function XE(){var t=zE(Tv());return t.copy=function(){return Ko(t,XE()).exponent(t.exponent())},Ms.apply(t,arguments)}function GY(){return XE.apply(null,arguments).exponent(.5)}function U4(){var t=[],e=wr;function n(r){if(r!=null&&!isNaN(r=+r))return e((Oh(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Po),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,s)=>NG(t,s/r))},n.copy=function(){return U4(e).domain(t)},Ms.apply(n,arguments)}function Cv(){var t=0,e=.5,n=1,r=1,i,s,l,u,f,h=wr,m,p=!1,v;function b(w){return isNaN(w=+w)?v:(w=.5+((w=+m(w))-s)*(r*w<r*s?u:f),h(p?Math.max(0,Math.min(1,w)):w))}b.domain=function(w){return arguments.length?([t,e,n]=w,i=m(t=+t),s=m(e=+e),l=m(n=+n),u=i===s?0:.5/(s-i),f=s===l?0:.5/(l-s),r=s<i?-1:1,b):[t,e,n]},b.clamp=function(w){return arguments.length?(p=!!w,b):p},b.interpolator=function(w){return arguments.length?(h=w,b):h};function E(w){return function(S){var P,M,j;return arguments.length?([P,M,j]=S,h=iK(w,[P,M,j]),b):[h(0),h(.5),h(1)]}}return b.range=E(zu),b.rangeRound=E(kE),b.unknown=function(w){return arguments.length?(v=w,b):v},function(w){return m=w,i=w(t),s=w(e),l=w(n),u=i===s?0:.5/(s-i),f=s===l?0:.5/(l-s),r=s<i?-1:1,b}}function z4(){var t=Go(Cv()(wr));return t.copy=function(){return Ko(t,z4())},Ms.apply(t,arguments)}function B4(){var t=VE(Cv()).domain([.1,1,10]);return t.copy=function(){return Ko(t,B4()).base(t.base())},Ms.apply(t,arguments)}function $4(){var t=UE(Cv());return t.copy=function(){return Ko(t,$4()).constant(t.constant())},Ms.apply(t,arguments)}function QE(){var t=zE(Cv());return t.copy=function(){return Ko(t,QE()).exponent(t.exponent())},Ms.apply(t,arguments)}function KY(){return QE.apply(null,arguments).exponent(.5)}const vd=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:NE,scaleDiverging:z4,scaleDivergingLog:B4,scaleDivergingPow:QE,scaleDivergingSqrt:KY,scaleDivergingSymlog:$4,scaleIdentity:b4,scaleImplicit:Z1,scaleLinear:_4,scaleLog:x4,scaleOrdinal:RE,scalePoint:kG,scalePow:BE,scaleQuantile:A4,scaleQuantize:T4,scaleRadial:S4,scaleSequential:j4,scaleSequentialLog:L4,scaleSequentialPow:XE,scaleSequentialQuantile:U4,scaleSequentialSqrt:GY,scaleSequentialSymlog:V4,scaleSqrt:CK,scaleSymlog:E4,scaleThreshold:C4,scaleTime:FY,scaleUtc:HY,tickFormat:v4},Symbol.toStringTag,{value:"Module"}));var Yo=t=>t.chartData,YY=ae([Yo],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),JE=(t,e,n,r)=>r?YY(t):Yo(t);function Uo(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(ln(e)&&ln(n))return!0}return!1}function SN(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function q4(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,i,s;if(ln(n))i=n;else if(typeof n=="function")return;if(ln(r))s=r;else if(typeof r=="function")return;var l=[i,s];if(Uo(l))return l}}function WY(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(Uo(r))return SN(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[i,s]=t,l,u;if(i==="auto")e!=null&&(l=Math.min(...e));else if(Me(i))l=i;else if(typeof i=="function")try{e!=null&&(l=i(e==null?void 0:e[0]))}catch{}else if(typeof i=="string"&&eR.test(i)){var f=eR.exec(i);if(f==null||e==null)l=void 0;else{var h=+f[1];l=e[0]-h}}else l=e==null?void 0:e[0];if(s==="auto")e!=null&&(u=Math.max(...e));else if(Me(s))u=s;else if(typeof s=="function")try{e!=null&&(u=s(e==null?void 0:e[1]))}catch{}else if(typeof s=="string"&&tR.test(s)){var m=tR.exec(s);if(m==null||e==null)u=void 0;else{var p=+m[1];u=e[1]+p}}else u=e==null?void 0:e[1];var v=[l,u];if(Uo(v))return e==null?v:SN(v,e,n)}}}var Bu=1e9,XY={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},eS,Kt=!0,Ci="[DecimalError] ",zl=Ci+"Invalid argument: ",ZE=Ci+"Exponent out of range: ",$u=Math.floor,Tl=Math.pow,QY=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Zr,Bn=1e7,zt=7,F4=9007199254740991,ly=$u(F4/zt),Ae={};Ae.absoluteValue=Ae.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Ae.comparedTo=Ae.cmp=function(t){var e,n,r,i,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(r=s.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};Ae.decimalPlaces=Ae.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*zt;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Ae.dividedBy=Ae.div=function(t){return ms(this,new this.constructor(t))};Ae.dividedToIntegerBy=Ae.idiv=function(t){var e=this,n=e.constructor;return kt(ms(e,new n(t),0,1),n.precision)};Ae.equals=Ae.eq=function(t){return!this.cmp(t)};Ae.exponent=function(){return xn(this)};Ae.greaterThan=Ae.gt=function(t){return this.cmp(t)>0};Ae.greaterThanOrEqualTo=Ae.gte=function(t){return this.cmp(t)>=0};Ae.isInteger=Ae.isint=function(){return this.e>this.d.length-2};Ae.isNegative=Ae.isneg=function(){return this.s<0};Ae.isPositive=Ae.ispos=function(){return this.s>0};Ae.isZero=function(){return this.s===0};Ae.lessThan=Ae.lt=function(t){return this.cmp(t)<0};Ae.lessThanOrEqualTo=Ae.lte=function(t){return this.cmp(t)<1};Ae.logarithm=Ae.log=function(t){var e,n=this,r=n.constructor,i=r.precision,s=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(Zr))throw Error(Ci+"NaN");if(n.s<1)throw Error(Ci+(n.s?"NaN":"-Infinity"));return n.eq(Zr)?new r(0):(Kt=!1,e=ms(ih(n,s),ih(t,s),s),Kt=!0,kt(e,i))};Ae.minus=Ae.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?K4(e,t):H4(e,(t.s=-t.s,t))};Ae.modulo=Ae.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Ci+"NaN");return n.s?(Kt=!1,e=ms(n,t,0,1).times(t),Kt=!0,n.minus(e)):kt(new r(n),i)};Ae.naturalExponential=Ae.exp=function(){return G4(this)};Ae.naturalLogarithm=Ae.ln=function(){return ih(this)};Ae.negated=Ae.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Ae.plus=Ae.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?H4(e,t):K4(e,(t.s=-t.s,t))};Ae.precision=Ae.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(zl+t);if(e=xn(i)+1,r=i.d.length-1,n=r*zt+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Ae.squareRoot=Ae.sqrt=function(){var t,e,n,r,i,s,l,u=this,f=u.constructor;if(u.s<1){if(!u.s)return new f(0);throw Error(Ci+"NaN")}for(t=xn(u),Kt=!1,i=Math.sqrt(+u),i==0||i==1/0?(e=Aa(u.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=$u((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new f(e)):r=new f(i.toString()),n=f.precision,i=l=n+3;;)if(s=r,r=s.plus(ms(u,s,l+2)).times(.5),Aa(s.d).slice(0,l)===(e=Aa(r.d)).slice(0,l)){if(e=e.slice(l-3,l+1),i==l&&e=="4999"){if(kt(s,n+1,0),s.times(s).eq(u)){r=s;break}}else if(e!="9999")break;l+=4}return Kt=!0,kt(r,n)};Ae.times=Ae.mul=function(t){var e,n,r,i,s,l,u,f,h,m=this,p=m.constructor,v=m.d,b=(t=new p(t)).d;if(!m.s||!t.s)return new p(0);for(t.s*=m.s,n=m.e+t.e,f=v.length,h=b.length,f<h&&(s=v,v=b,b=s,l=f,f=h,h=l),s=[],l=f+h,r=l;r--;)s.push(0);for(r=h;--r>=0;){for(e=0,i=f+r;i>r;)u=s[i]+b[r]*v[i-r-1]+e,s[i--]=u%Bn|0,e=u/Bn|0;s[i]=(s[i]+e)%Bn|0}for(;!s[--l];)s.pop();return e?++n:s.shift(),t.d=s,t.e=n,Kt?kt(t,p.precision):t};Ae.toDecimalPlaces=Ae.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Da(t,0,Bu),e===void 0?e=r.rounding:Da(e,0,8),kt(n,t+xn(n)+1,e))};Ae.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Fl(r,!0):(Da(t,0,Bu),e===void 0?e=i.rounding:Da(e,0,8),r=kt(new i(r),t+1,e),n=Fl(r,!0,t+1)),n};Ae.toFixed=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?Fl(i):(Da(t,0,Bu),e===void 0?e=s.rounding:Da(e,0,8),r=kt(new s(i),t+xn(i)+1,e),n=Fl(r.abs(),!1,t+xn(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Ae.toInteger=Ae.toint=function(){var t=this,e=t.constructor;return kt(new e(t),xn(t)+1,e.rounding)};Ae.toNumber=function(){return+this};Ae.toPower=Ae.pow=function(t){var e,n,r,i,s,l,u=this,f=u.constructor,h=12,m=+(t=new f(t));if(!t.s)return new f(Zr);if(u=new f(u),!u.s){if(t.s<1)throw Error(Ci+"Infinity");return u}if(u.eq(Zr))return u;if(r=f.precision,t.eq(Zr))return kt(u,r);if(e=t.e,n=t.d.length-1,l=e>=n,s=u.s,l){if((n=m<0?-m:m)<=F4){for(i=new f(Zr),e=Math.ceil(r/zt+4),Kt=!1;n%2&&(i=i.times(u),TN(i.d,e)),n=$u(n/2),n!==0;)u=u.times(u),TN(u.d,e);return Kt=!0,t.s<0?new f(Zr).div(i):kt(i,r)}}else if(s<0)throw Error(Ci+"NaN");return s=s<0&&t.d[Math.max(e,n)]&1?-1:1,u.s=1,Kt=!1,i=t.times(ih(u,r+h)),Kt=!0,i=G4(i),i.s=s,i};Ae.toPrecision=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?(n=xn(i),r=Fl(i,n<=s.toExpNeg||n>=s.toExpPos)):(Da(t,1,Bu),e===void 0?e=s.rounding:Da(e,0,8),i=kt(new s(i),t,e),n=xn(i),r=Fl(i,t<=n||n<=s.toExpNeg,t)),r};Ae.toSignificantDigits=Ae.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Da(t,1,Bu),e===void 0?e=r.rounding:Da(e,0,8)),kt(new r(n),t,e)};Ae.toString=Ae.valueOf=Ae.val=Ae.toJSON=Ae[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=xn(t),n=t.constructor;return Fl(t,e<=n.toExpNeg||e>=n.toExpPos)};function H4(t,e){var n,r,i,s,l,u,f,h,m=t.constructor,p=m.precision;if(!t.s||!e.s)return e.s||(e=new m(t)),Kt?kt(e,p):e;if(f=t.d,h=e.d,l=t.e,i=e.e,f=f.slice(),s=l-i,s){for(s<0?(r=f,s=-s,u=h.length):(r=h,i=l,u=f.length),l=Math.ceil(p/zt),u=l>u?l+1:u+1,s>u&&(s=u,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(u=f.length,s=h.length,u-s<0&&(s=u,r=h,h=f,f=r),n=0;s;)n=(f[--s]=f[s]+h[s]+n)/Bn|0,f[s]%=Bn;for(n&&(f.unshift(n),++i),u=f.length;f[--u]==0;)f.pop();return e.d=f,e.e=i,Kt?kt(e,p):e}function Da(t,e,n){if(t!==~~t||t<e||t>n)throw Error(zl+t)}function Aa(t){var e,n,r,i=t.length-1,s="",l=t[0];if(i>0){for(s+=l,e=1;e<i;e++)r=t[e]+"",n=zt-r.length,n&&(s+=Eo(n)),s+=r;l=t[e],r=l+"",n=zt-r.length,n&&(s+=Eo(n))}else if(l===0)return"0";for(;l%10===0;)l/=10;return s+l}var ms=(function(){function t(r,i){var s,l=0,u=r.length;for(r=r.slice();u--;)s=r[u]*i+l,r[u]=s%Bn|0,l=s/Bn|0;return l&&r.unshift(l),r}function e(r,i,s,l){var u,f;if(s!=l)f=s>l?1:-1;else for(u=f=0;u<s;u++)if(r[u]!=i[u]){f=r[u]>i[u]?1:-1;break}return f}function n(r,i,s){for(var l=0;s--;)r[s]-=l,l=r[s]<i[s]?1:0,r[s]=l*Bn+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,l){var u,f,h,m,p,v,b,E,w,S,P,M,j,$,L,q,I,R,N=r.constructor,z=r.s==i.s?1:-1,k=r.d,B=i.d;if(!r.s)return new N(r);if(!i.s)throw Error(Ci+"Division by zero");for(f=r.e-i.e,I=B.length,L=k.length,b=new N(z),E=b.d=[],h=0;B[h]==(k[h]||0);)++h;if(B[h]>(k[h]||0)&&--f,s==null?M=s=N.precision:l?M=s+(xn(r)-xn(i))+1:M=s,M<0)return new N(0);if(M=M/zt+2|0,h=0,I==1)for(m=0,B=B[0],M++;(h<L||m)&&M--;h++)j=m*Bn+(k[h]||0),E[h]=j/B|0,m=j%B|0;else{for(m=Bn/(B[0]+1)|0,m>1&&(B=t(B,m),k=t(k,m),I=B.length,L=k.length),$=I,w=k.slice(0,I),S=w.length;S<I;)w[S++]=0;R=B.slice(),R.unshift(0),q=B[0],B[1]>=Bn/2&&++q;do m=0,u=e(B,w,I,S),u<0?(P=w[0],I!=S&&(P=P*Bn+(w[1]||0)),m=P/q|0,m>1?(m>=Bn&&(m=Bn-1),p=t(B,m),v=p.length,S=w.length,u=e(p,w,v,S),u==1&&(m--,n(p,I<v?R:B,v))):(m==0&&(u=m=1),p=B.slice()),v=p.length,v<S&&p.unshift(0),n(w,p,S),u==-1&&(S=w.length,u=e(B,w,I,S),u<1&&(m++,n(w,I<S?R:B,S))),S=w.length):u===0&&(m++,w=[0]),E[h++]=m,u&&w[0]?w[S++]=k[$]||0:(w=[k[$]],S=1);while(($++<L||w[0]!==void 0)&&M--)}return E[0]||E.shift(),b.e=f,kt(b,l?s+xn(b)+1:s)}})();function G4(t,e){var n,r,i,s,l,u,f=0,h=0,m=t.constructor,p=m.precision;if(xn(t)>16)throw Error(ZE+xn(t));if(!t.s)return new m(Zr);for(Kt=!1,u=p,l=new m(.03125);t.abs().gte(.1);)t=t.times(l),h+=5;for(r=Math.log(Tl(2,h))/Math.LN10*2+5|0,u+=r,n=i=s=new m(Zr),m.precision=u;;){if(i=kt(i.times(t),u),n=n.times(++f),l=s.plus(ms(i,n,u)),Aa(l.d).slice(0,u)===Aa(s.d).slice(0,u)){for(;h--;)s=kt(s.times(s),u);return m.precision=p,e==null?(Kt=!0,kt(s,p)):s}s=l}}function xn(t){for(var e=t.e*zt,n=t.d[0];n>=10;n/=10)e++;return e}function Mw(t,e,n){if(e>t.LN10.sd())throw Kt=!0,n&&(t.precision=n),Error(Ci+"LN10 precision limit exceeded");return kt(new t(t.LN10),e)}function Eo(t){for(var e="";t--;)e+="0";return e}function ih(t,e){var n,r,i,s,l,u,f,h,m,p=1,v=10,b=t,E=b.d,w=b.constructor,S=w.precision;if(b.s<1)throw Error(Ci+(b.s?"NaN":"-Infinity"));if(b.eq(Zr))return new w(0);if(e==null?(Kt=!1,h=S):h=e,b.eq(10))return e==null&&(Kt=!0),Mw(w,h);if(h+=v,w.precision=h,n=Aa(E),r=n.charAt(0),s=xn(b),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)b=b.times(t),n=Aa(b.d),r=n.charAt(0),p++;s=xn(b),r>1?(b=new w("0."+n),s++):b=new w(r+"."+n.slice(1))}else return f=Mw(w,h+2,S).times(s+""),b=ih(new w(r+"."+n.slice(1)),h-v).plus(f),w.precision=S,e==null?(Kt=!0,kt(b,S)):b;for(u=l=b=ms(b.minus(Zr),b.plus(Zr),h),m=kt(b.times(b),h),i=3;;){if(l=kt(l.times(m),h),f=u.plus(ms(l,new w(i),h)),Aa(f.d).slice(0,h)===Aa(u.d).slice(0,h))return u=u.times(2),s!==0&&(u=u.plus(Mw(w,h+2,S).times(s+""))),u=ms(u,new w(p),h),w.precision=S,e==null?(Kt=!0,kt(u,S)):u;u=f,i+=2}}function AN(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=$u(n/zt),t.d=[],r=(n+1)%zt,n<0&&(r+=zt),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=zt;r<i;)t.d.push(+e.slice(r,r+=zt));e=e.slice(r),r=zt-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),Kt&&(t.e>ly||t.e<-ly))throw Error(ZE+n)}else t.s=0,t.e=0,t.d=[0];return t}function kt(t,e,n){var r,i,s,l,u,f,h,m,p=t.d;for(l=1,s=p[0];s>=10;s/=10)l++;if(r=e-l,r<0)r+=zt,i=e,h=p[m=0];else{if(m=Math.ceil((r+1)/zt),s=p.length,m>=s)return t;for(h=s=p[m],l=1;s>=10;s/=10)l++;r%=zt,i=r-zt+l}if(n!==void 0&&(s=Tl(10,l-i-1),u=h/s%10|0,f=e<0||p[m+1]!==void 0||h%s,f=n<4?(u||f)&&(n==0||n==(t.s<0?3:2)):u>5||u==5&&(n==4||f||n==6&&(r>0?i>0?h/Tl(10,l-i):0:p[m-1])%10&1||n==(t.s<0?8:7))),e<1||!p[0])return f?(s=xn(t),p.length=1,e=e-s-1,p[0]=Tl(10,(zt-e%zt)%zt),t.e=$u(-e/zt)||0):(p.length=1,p[0]=t.e=t.s=0),t;if(r==0?(p.length=m,s=1,m--):(p.length=m+1,s=Tl(10,zt-r),p[m]=i>0?(h/Tl(10,l-i)%Tl(10,i)|0)*s:0),f)for(;;)if(m==0){(p[0]+=s)==Bn&&(p[0]=1,++t.e);break}else{if(p[m]+=s,p[m]!=Bn)break;p[m--]=0,s=1}for(r=p.length;p[--r]===0;)p.pop();if(Kt&&(t.e>ly||t.e<-ly))throw Error(ZE+xn(t));return t}function K4(t,e){var n,r,i,s,l,u,f,h,m,p,v=t.constructor,b=v.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new v(t),Kt?kt(e,b):e;if(f=t.d,p=e.d,r=e.e,h=t.e,f=f.slice(),l=h-r,l){for(m=l<0,m?(n=f,l=-l,u=p.length):(n=p,r=h,u=f.length),i=Math.max(Math.ceil(b/zt),u)+2,l>i&&(l=i,n.length=1),n.reverse(),i=l;i--;)n.push(0);n.reverse()}else{for(i=f.length,u=p.length,m=i<u,m&&(u=i),i=0;i<u;i++)if(f[i]!=p[i]){m=f[i]<p[i];break}l=0}for(m&&(n=f,f=p,p=n,e.s=-e.s),u=f.length,i=p.length-u;i>0;--i)f[u++]=0;for(i=p.length;i>l;){if(f[--i]<p[i]){for(s=i;s&&f[--s]===0;)f[s]=Bn-1;--f[s],f[i]+=Bn}f[i]-=p[i]}for(;f[--u]===0;)f.pop();for(;f[0]===0;f.shift())--r;return f[0]?(e.d=f,e.e=r,Kt?kt(e,b):e):new v(0)}function Fl(t,e,n){var r,i=xn(t),s=Aa(t.d),l=s.length;return e?(n&&(r=n-l)>0?s=s.charAt(0)+"."+s.slice(1)+Eo(r):l>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+Eo(-i-1)+s,n&&(r=n-l)>0&&(s+=Eo(r))):i>=l?(s+=Eo(i+1-l),n&&(r=n-i-1)>0&&(s=s+"."+Eo(r))):((r=i+1)<l&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-l)>0&&(i+1===l&&(s+="."),s+=Eo(r))),t.s<0?"-"+s:s}function TN(t,e){if(t.length>e)return t.length=e,!0}function Y4(t){var e,n,r;function i(s){var l=this;if(!(l instanceof i))return new i(s);if(l.constructor=i,s instanceof i){l.s=s.s,l.e=s.e,l.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(zl+s);if(s>0)l.s=1;else if(s<0)s=-s,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(s===~~s&&s<1e7){l.e=0,l.d=[s];return}return AN(l,s.toString())}else if(typeof s!="string")throw Error(zl+s);if(s.charCodeAt(0)===45?(s=s.slice(1),l.s=-1):l.s=1,QY.test(s))AN(l,s);else throw Error(zl+s)}if(i.prototype=Ae,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=Y4,i.config=i.set=JY,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function JY(t){if(!t||typeof t!="object")throw Error(Ci+"Object expected");var e,n,r,i=["precision",1,Bu,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if($u(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(zl+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(zl+n+": "+r);return this}var eS=Y4(XY);Zr=new eS(1);const At=eS;var ZY=t=>t,W4={},X4=t=>t===W4,CN=t=>function e(){return arguments.length===0||arguments.length===1&&X4(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},Q4=(t,e)=>t===1?e:CN(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=r.filter(l=>l!==W4).length;return s>=t?e(...r):Q4(t-s,CN(function(){for(var l=arguments.length,u=new Array(l),f=0;f<l;f++)u[f]=arguments[f];var h=r.map(m=>X4(m)?u.shift():m);return e(...h,...u)}))}),eW=t=>Q4(t.length,t),rx=(t,e)=>{for(var n=[],r=t;r<e;++r)n[r-t]=r;return n},tW=eW((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(n=>e[n]).map(t)),nW=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return ZY;var i=n.reverse(),s=i[0],l=i.slice(1);return function(){return l.reduce((u,f)=>f(u),s(...arguments))}},ix=t=>Array.isArray(t)?t.reverse():t.split("").reverse().join("");function J4(t){var e;return t===0?e=1:e=Math.floor(new At(t).abs().log(10).toNumber())+1,e}function Z4(t,e,n){for(var r=new At(t),i=0,s=[];r.lt(e)&&i<1e5;)s.push(r.toNumber()),r=r.add(n),i++;return s}var e3=t=>{var[e,n]=t,[r,i]=[e,n];return e>n&&([r,i]=[n,e]),[r,i]},t3=(t,e,n)=>{if(t.lte(0))return new At(0);var r=J4(t.toNumber()),i=new At(10).pow(r),s=t.div(i),l=r!==1?.05:.1,u=new At(Math.ceil(s.div(l).toNumber())).add(n).mul(l),f=u.mul(i);return e?new At(f.toNumber()):new At(Math.ceil(f.toNumber()))},rW=(t,e,n)=>{var r=new At(1),i=new At(t);if(!i.isint()&&n){var s=Math.abs(t);s<1?(r=new At(10).pow(J4(t)-1),i=new At(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new At(Math.floor(t)))}else t===0?i=new At(Math.floor((e-1)/2)):n||(i=new At(Math.floor(t)));var l=Math.floor((e-1)/2),u=nW(tW(f=>i.add(new At(f-l).mul(r)).toNumber()),rx);return u(0,e)},n3=function(e,n,r,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new At(0),tickMin:new At(0),tickMax:new At(0)};var l=t3(new At(n).sub(e).div(r-1),i,s),u;e<=0&&n>=0?u=new At(0):(u=new At(e).add(n).div(2),u=u.sub(new At(u).mod(l)));var f=Math.ceil(u.sub(e).div(l).toNumber()),h=Math.ceil(new At(n).sub(u).div(l).toNumber()),m=f+h+1;return m>r?n3(e,n,r,i,s+1):(m<r&&(h=n>0?h+(r-m):h,f=n>0?f:f+(r-m)),{step:l,tickMin:u.sub(new At(f).mul(l)),tickMax:u.add(new At(h).mul(l))})},iW=function(e){var[n,r]=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=Math.max(i,2),[u,f]=e3([n,r]);if(u===-1/0||f===1/0){var h=f===1/0?[u,...rx(0,i-1).map(()=>1/0)]:[...rx(0,i-1).map(()=>-1/0),f];return n>r?ix(h):h}if(u===f)return rW(u,i,s);var{step:m,tickMin:p,tickMax:v}=n3(u,f,l,s,0),b=Z4(p,v.add(new At(.1).mul(m)),m);return n>r?ix(b):b},aW=function(e,n){var[r,i]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[l,u]=e3([r,i]);if(l===-1/0||u===1/0)return[r,i];if(l===u)return[l];var f=Math.max(n,2),h=t3(new At(u).sub(l).div(f-1),s,0),m=[...Z4(new At(l),new At(u),h),u];return s===!1&&(m=m.map(p=>Math.round(p))),r>i?ix(m):m},r3=t=>t.rootProps.maxBarSize,sW=t=>t.rootProps.barGap,i3=t=>t.rootProps.barCategoryGap,oW=t=>t.rootProps.barSize,Ov=t=>t.rootProps.stackOffset,a3=t=>t.rootProps.reverseStackOrder,tS=t=>t.options.chartName,nS=t=>t.rootProps.syncId,s3=t=>t.rootProps.syncMethod,rS=t=>t.options.eventEmitter,xr={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},os={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Jr={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Iv=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},lW={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:os.angleAxisId,includeHidden:!1,name:void 0,reversed:os.reversed,scale:os.scale,tick:os.tick,tickCount:void 0,ticks:void 0,type:os.type,unit:void 0},cW={allowDataOverflow:Jr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Jr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Jr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Jr.scale,tick:Jr.tick,tickCount:Jr.tickCount,ticks:void 0,type:Jr.type,unit:void 0},uW={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:os.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:os.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:os.scale,tick:os.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},fW={allowDataOverflow:Jr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Jr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Jr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Jr.scale,tick:Jr.tick,tickCount:Jr.tickCount,ticks:void 0,type:"category",unit:void 0},iS=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?uW:lW,aS=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?fW:cW,Rv=t=>t.polarOptions,sS=ae([Ns,Ps,Hn],aG),o3=ae([Rv,sS],(t,e)=>{if(t!=null)return Xi(t.innerRadius,e,0)}),l3=ae([Rv,sS],(t,e)=>{if(t!=null)return Xi(t.outerRadius,e,e*.8)}),dW=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},c3=ae([Rv],dW);ae([iS,c3],Iv);var u3=ae([sS,o3,l3],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});ae([aS,u3],Iv);var f3=ae([Tt,Rv,o3,l3,Ns,Ps],(t,e,n,r,i,s)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:l,cy:u,startAngle:f,endAngle:h}=e;return{cx:Xi(l,i,i/2),cy:Xi(u,s,s/2),innerRadius:n,outerRadius:r,startAngle:f,endAngle:h,clockWise:!1}}}),Pn=(t,e)=>e,Nv=(t,e,n)=>n;function oS(t){return t==null?void 0:t.id}function d3(t,e,n){var{chartData:r=[]}=e,{allowDuplicatedCategory:i,dataKey:s}=n,l=new Map;return t.forEach(u=>{var f,h=(f=u.data)!==null&&f!==void 0?f:r;if(!(h==null||h.length===0)){var m=oS(u);h.forEach((p,v)=>{var b=s==null||i?v:String(mr(p,s,null)),E=mr(p,u.dataKey,0),w;l.has(b)?w=l.get(b):w={},Object.assign(w,{[m]:E}),l.set(b,w)})}}),Array.from(l.values())}function Pv(t){return t.stackId!=null&&t.dataKey!=null}var Mv=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function kv(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function hW(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}var Mn=t=>{var e=Tt(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},qu=t=>t.tooltip.settings.axisId;function ON(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function cy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ON(Object(n),!0).forEach(function(r){mW(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ON(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mW(t,e,n){return(e=pW(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pW(t){var e=gW(t,"string");return typeof e=="symbol"?e:e+""}function gW(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ax=[0,"auto"],Vn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},h3=(t,e)=>t.cartesianAxis.xAxis[e],ks=(t,e)=>{var n=h3(t,e);return n??Vn},Un={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:ax,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Ah},m3=(t,e)=>t.cartesianAxis.yAxis[e],Ds=(t,e)=>{var n=m3(t,e);return n??Un},yW={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},lS=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??yW},Sr=(t,e,n)=>{switch(e){case"xAxis":return ks(t,n);case"yAxis":return Ds(t,n);case"zAxis":return lS(t,n);case"angleAxis":return iS(t,n);case"radiusAxis":return aS(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},vW=(t,e,n)=>{switch(e){case"xAxis":return ks(t,n);case"yAxis":return Ds(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},Ph=(t,e,n)=>{switch(e){case"xAxis":return ks(t,n);case"yAxis":return Ds(t,n);case"angleAxis":return iS(t,n);case"radiusAxis":return aS(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},p3=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function g3(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var cS=t=>t.graphicalItems.cartesianItems,_W=ae([Pn,Nv],g3),y3=(t,e,n)=>t.filter(n).filter(r=>(e==null?void 0:e.includeHidden)===!0?!0:!r.hide),Mh=ae([cS,Sr,_W],y3,{memoizeOptions:{resultEqualityCheck:kv}}),v3=ae([Mh],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(Pv)),_3=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),bW=ae([Mh],_3),b3=t=>t.map(e=>e.data).filter(Boolean).flat(1),wW=ae([Mh],b3,{memoizeOptions:{resultEqualityCheck:kv}}),w3=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=e;return t.length>0?t:n.slice(r,i+1)},uS=ae([wW,JE],w3),x3=(t,e,n)=>(e==null?void 0:e.dataKey)!=null?t.map(r=>({value:mr(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(i=>({value:mr(i,r)}))):t.map(r=>({value:r})),Dv=ae([uS,Sr,Mh],x3);function E3(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function lg(t){if(Ma(t)||t instanceof Date){var e=Number(t);if(ln(e))return e}}function IN(t){if(Array.isArray(t)){var e=[lg(t[0]),lg(t[1])];return Uo(e)?e:void 0}var n=lg(t);if(n!=null)return[n,n]}function As(t){return t.map(lg).filter(R8)}function xW(t,e,n){return!n||typeof e!="number"||Wi(e)?[]:n.length?As(n.flatMap(r=>{var i=mr(t,r.dataKey),s,l;if(Array.isArray(i)?[s,l]=i:s=l=i,!(!ln(s)||!ln(l)))return[e-s,e+l]})):[]}var kn=t=>{var e=Mn(t),n=qu(t);return Ph(t,e,n)},kh=ae([kn],t=>t==null?void 0:t.dataKey),EW=ae([v3,JE,kn],d3),S3=(t,e,n,r)=>{var i={},s=e.reduce((l,u)=>(u.stackId==null||(l[u.stackId]==null&&(l[u.stackId]=[]),l[u.stackId].push(u)),l),i);return Object.fromEntries(Object.entries(s).map(l=>{var[u,f]=l,h=r?[...f].reverse():f,m=h.map(oS);return[u,{stackedData:XF(t,m,n),graphicalItems:h}]}))},sx=ae([EW,v3,Ov,a3],S3),A3=(t,e,n,r)=>{var{dataStartIndex:i,dataEndIndex:s}=e;if(r==null&&n!=="zAxis"){var l=t7(t,i,s);if(!(l!=null&&l[0]===0&&l[1]===0))return l}},SW=ae([Sr],t=>t.allowDataOverflow),fS=t=>{var e;if(t==null||!("domain"in t))return ax;if(t.domain!=null)return t.domain;if(t.ticks!=null){if(t.type==="number"){var n=As(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t==null?void 0:t.domain)!==null&&e!==void 0?e:ax},T3=ae([Sr],fS),C3=ae([T3,SW],q4),AW=ae([sx,Yo,Pn,C3],A3,{memoizeOptions:{resultEqualityCheck:Mv}}),dS=t=>t.errorBars,TW=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>E3(n,r)),uy=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var s=i.flat(),l=Math.min(...s),u=Math.max(...s);return[l,u]}},O3=(t,e,n,r,i)=>{var s,l;if(n.length>0&&t.forEach(u=>{n.forEach(f=>{var h,m,p=(h=r[f.id])===null||h===void 0?void 0:h.filter(P=>E3(i,P)),v=mr(u,(m=e.dataKey)!==null&&m!==void 0?m:f.dataKey),b=xW(u,v,p);if(b.length>=2){var E=Math.min(...b),w=Math.max(...b);(s==null||E<s)&&(s=E),(l==null||w>l)&&(l=w)}var S=IN(v);S!=null&&(s=s==null?S[0]:Math.min(s,S[0]),l=l==null?S[1]:Math.max(l,S[1]))})}),(e==null?void 0:e.dataKey)!=null&&t.forEach(u=>{var f=IN(mr(u,e.dataKey));f!=null&&(s=s==null?f[0]:Math.min(s,f[0]),l=l==null?f[1]:Math.max(l,f[1]))}),ln(s)&&ln(l))return[s,l]},CW=ae([uS,Sr,bW,dS,Pn],O3,{memoizeOptions:{resultEqualityCheck:Mv}});function OW(t){var{value:e}=t;if(Ma(e)||e instanceof Date)return e}var IW=(t,e,n)=>{var r=t.map(OW).filter(i=>i!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&BD(r))?l4(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},I3=t=>t.referenceElements.dots,Fu=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),RW=ae([I3,Pn,Nv],Fu),R3=t=>t.referenceElements.areas,NW=ae([R3,Pn,Nv],Fu),N3=t=>t.referenceElements.lines,PW=ae([N3,Pn,Nv],Fu),P3=(t,e)=>{var n=As(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},MW=ae(RW,Pn,P3),M3=(t,e)=>{var n=As(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},kW=ae([NW,Pn],M3);function DW(t){var e;if(t.x!=null)return As([t.x]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.x);return n==null||n.length===0?[]:As(n)}function jW(t){var e;if(t.y!=null)return As([t.y]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.y);return n==null||n.length===0?[]:As(n)}var k3=(t,e)=>{var n=t.flatMap(r=>e==="xAxis"?DW(r):jW(r));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},LW=ae([PW,Pn],k3),VW=ae(MW,LW,kW,(t,e,n)=>uy(t,n,e)),D3=(t,e,n,r,i,s,l,u)=>{if(n!=null)return n;var f=l==="vertical"&&u==="xAxis"||l==="horizontal"&&u==="yAxis",h=f?uy(r,s,i):uy(s,i);return WY(e,h,t.allowDataOverflow)},UW=ae([Sr,T3,C3,AW,CW,VW,Tt,Pn],D3,{memoizeOptions:{resultEqualityCheck:Mv}}),zW=[0,1],j3=(t,e,n,r,i,s,l)=>{if(!((t==null||n==null||n.length===0)&&l===void 0)){var{dataKey:u,type:f}=t,h=tc(e,s);if(h&&u==null){var m;return l4(0,(m=n==null?void 0:n.length)!==null&&m!==void 0?m:0)}return f==="category"?IW(r,t,h):i==="expand"?zW:l}},hS=ae([Sr,Tt,uS,Dv,Ov,Pn,UW],j3),L3=(t,e,n,r,i)=>{if(t!=null){var{scale:s,type:l}=t;if(s==="auto")return e==="radial"&&i==="radiusAxis"?"band":e==="radial"&&i==="angleAxis"?"linear":l==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":l==="category"?"band":"linear";if(typeof s=="string"){var u="scale".concat(bh(s));return u in vd?u:"point"}}},Dh=ae([Sr,Tt,p3,tS,Pn],L3);function BW(t){if(t!=null){if(t in vd)return vd[t]();var e="scale".concat(bh(t));if(e in vd)return vd[e]()}}function mS(t,e,n,r){if(!(n==null||r==null)){if(typeof t.scale=="function")return t.scale.copy().domain(n).range(r);var i=BW(e);if(i!=null){var s=i.domain(n).range(r);return HF(s),s}}}var V3=(t,e,n)=>{var r=fS(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&Uo(t))return iW(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&Uo(t))return aW(t,e.tickCount,e.allowDecimals)}},pS=ae([hS,Ph,Dh],V3),U3=(t,e,n,r)=>{if(r!=="angleAxis"&&(t==null?void 0:t.type)==="number"&&Uo(e)&&Array.isArray(n)&&n.length>0){var i=e[0],s=n[0],l=e[1],u=n[n.length-1];return[Math.min(i,s),Math.max(l,u)]}return e},$W=ae([Sr,hS,pS,Pn],U3),qW=ae(Dv,Sr,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(As(t.map(u=>u.value))).sort((u,f)=>u-f);if(r.length<2)return 1/0;var i=r[r.length-1]-r[0];if(i===0)return 1/0;for(var s=0;s<r.length-1;s++){var l=r[s+1]-r[s];n=Math.min(n,l)}return n/i}}),z3=ae(qW,Tt,i3,Hn,(t,e,n,r)=>r,(t,e,n,r,i)=>{if(!ln(t))return 0;var s=e==="vertical"?r.height:r.width;if(i==="gap")return t*s/2;if(i==="no-gap"){var l=Xi(n,t*s),u=t*s/2;return u-l-(u-l)/s*l}return 0}),FW=(t,e)=>{var n=ks(t,e);return n==null||typeof n.padding!="string"?0:z3(t,"xAxis",e,n.padding)},HW=(t,e)=>{var n=Ds(t,e);return n==null||typeof n.padding!="string"?0:z3(t,"yAxis",e,n.padding)},GW=ae(ks,FW,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((n=i.left)!==null&&n!==void 0?n:0)+e,right:((r=i.right)!==null&&r!==void 0?r:0)+e}}),KW=ae(Ds,HW,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((n=i.top)!==null&&n!==void 0?n:0)+e,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+e}}),YW=ae([Hn,GW,pv,mv,(t,e,n)=>n],(t,e,n,r,i)=>{var{padding:s}=r;return i?[s.left,n.width-s.right]:[t.left+e.left,t.left+t.width-e.right]}),WW=ae([Hn,Tt,KW,pv,mv,(t,e,n)=>n],(t,e,n,r,i,s)=>{var{padding:l}=i;return s?[r.height-l.bottom,l.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),jh=(t,e,n,r)=>{var i;switch(e){case"xAxis":return YW(t,n,r);case"yAxis":return WW(t,n,r);case"zAxis":return(i=lS(t,n))===null||i===void 0?void 0:i.range;case"angleAxis":return c3(t);case"radiusAxis":return u3(t,n);default:return}},B3=ae([Sr,jh],Iv),Hu=ae([Sr,Dh,$W,B3],mS);ae([Mh,dS,Pn],TW);function $3(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var jv=(t,e)=>e,Lv=(t,e,n)=>n,XW=ae(dv,jv,Lv,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort($3)),QW=ae(hv,jv,Lv,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort($3)),q3=(t,e)=>({width:t.width,height:e.height}),JW=(t,e)=>{var n=typeof e.width=="number"?e.width:Ah;return{width:n,height:t.height}},F3=ae(Hn,ks,q3),ZW=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},eX=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},tX=ae(Ps,Hn,XW,jv,Lv,(t,e,n,r,i)=>{var s={},l;return n.forEach(u=>{var f=q3(e,u);l==null&&(l=ZW(e,r,t));var h=r==="top"&&!i||r==="bottom"&&i;s[u.id]=l-Number(h)*f.height,l+=(h?-1:1)*f.height}),s}),nX=ae(Ns,Hn,QW,jv,Lv,(t,e,n,r,i)=>{var s={},l;return n.forEach(u=>{var f=JW(e,u);l==null&&(l=eX(e,r,t));var h=r==="left"&&!i||r==="right"&&i;s[u.id]=l-Number(h)*f.width,l+=(h?-1:1)*f.width}),s}),rX=(t,e)=>{var n=ks(t,e);if(n!=null)return tX(t,n.orientation,n.mirror)},iX=ae([Hn,ks,rX,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n==null?void 0:n[r];return i==null?{x:t.left,y:0}:{x:t.left,y:i}}}),aX=(t,e)=>{var n=Ds(t,e);if(n!=null)return nX(t,n.orientation,n.mirror)},sX=ae([Hn,Ds,aX,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n==null?void 0:n[r];return i==null?{x:0,y:t.top}:{x:i,y:t.top}}}),H3=ae(Hn,Ds,(t,e)=>{var n=typeof e.width=="number"?e.width:Ah;return{width:n,height:t.height}}),RN=(t,e,n)=>{switch(e){case"xAxis":return F3(t,n).width;case"yAxis":return H3(t,n).height;default:return}},G3=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:s,dataKey:l}=n,u=tc(t,r),f=e.map(h=>h.value);if(l&&u&&s==="category"&&i&&BD(f))return f}},gS=ae([Tt,Dv,Sr,Pn],G3),K3=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:s}=n,l=tc(t,r);if(l&&(i==="number"||s!=="auto"))return e.map(u=>u.value)}},yS=ae([Tt,Dv,Ph,Pn],K3),NN=ae([Tt,vW,Dh,Hu,gS,yS,jh,pS,Pn],(t,e,n,r,i,s,l,u,f)=>{if(e!=null){var h=tc(t,f);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:f,categoricalDomain:s,duplicateDomain:i,isCategorical:h,niceTicks:u,range:l,realScaleType:n,scale:r}}}),oX=(t,e,n,r,i,s,l,u,f)=>{if(!(e==null||r==null)){var h=tc(t,f),{type:m,ticks:p,tickCount:v}=e,b=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,E=m==="category"&&r.bandwidth?r.bandwidth()/b:0;E=f==="angleAxis"&&s!=null&&s.length>=2?jr(s[0]-s[1])*2*E:E;var w=p||i;if(w){var S=w.map((P,M)=>{var j=l?l.indexOf(P):P;return{index:M,coordinate:r(j)+E,value:P,offset:E}});return S.filter(P=>ln(P.coordinate))}return h&&u?u.map((P,M)=>({coordinate:r(P)+E,value:P,index:M,offset:E})).filter(P=>ln(P.coordinate)):r.ticks?r.ticks(v).map(P=>({coordinate:r(P)+E,value:P,offset:E})):r.domain().map((P,M)=>({coordinate:r(P)+E,value:l?l[P]:P,index:M,offset:E}))}},Y3=ae([Tt,Ph,Dh,Hu,pS,jh,gS,yS,Pn],oX),lX=(t,e,n,r,i,s,l)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var u=tc(t,l),{tickCount:f}=e,h=0;return h=l==="angleAxis"&&(r==null?void 0:r.length)>=2?jr(r[0]-r[1])*2*h:h,u&&s?s.map((m,p)=>({coordinate:n(m)+h,value:m,index:p,offset:h})):n.ticks?n.ticks(f).map(m=>({coordinate:n(m)+h,value:m,offset:h})):n.domain().map((m,p)=>({coordinate:n(m)+h,value:i?i[m]:m,index:p,offset:h}))}},Iu=ae([Tt,Ph,Hu,jh,gS,yS,Pn],lX),Ru=ae(Sr,Hu,(t,e)=>{if(!(t==null||e==null))return cy(cy({},t),{},{scale:e})}),cX=ae([Sr,Dh,hS,B3],mS);ae((t,e,n)=>lS(t,n),cX,(t,e)=>{if(!(t==null||e==null))return cy(cy({},t),{},{scale:e})});var uX=ae([Tt,dv,hv],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),W3=t=>t.options.defaultTooltipEventType,X3=t=>t.options.validateTooltipEventTypes;function Q3(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function vS(t,e){var n=W3(t),r=X3(t);return Q3(e,n,r)}function fX(t){return Ue(e=>vS(e,t))}var J3=(t,e)=>{var n,r=Number(e);if(!(Wi(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},dX=t=>t.tooltip.settings,To={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},hX={itemInteraction:{click:To,hover:To},axisInteraction:{click:To,hover:To},keyboardInteraction:To,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Z3=Vr({name:"tooltip",initialState:hX,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:Gt()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:n,next:r}=e.payload,i=Ki(t).tooltipItemPayloads.indexOf(n);i>-1&&(t.tooltipItemPayloads[i]=r)},prepare:Gt()},removeTooltipEntrySettings:{reducer(t,e){var n=Ki(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},prepare:Gt()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate,t.keyboardInteraction.dataKey=e.payload.activeDataKey}}}),{addTooltipEntrySettings:mX,replaceTooltipEntrySettings:pX,removeTooltipEntrySettings:gX,setTooltipSettingsState:yX,setActiveMouseOverItemIndex:eL,mouseLeaveItem:vX,mouseLeaveChart:tL,setActiveClickItemIndex:_X,setMouseOverAxisIndex:nL,setMouseClickAxisIndex:bX,setSyncInteraction:ox,setKeyboardInteraction:lx}=Z3.actions,wX=Z3.reducer;function PN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PN(Object(n),!0).forEach(function(r){xX(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xX(t,e,n){return(e=EX(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function EX(t){var e=SX(t,"string");return typeof e=="symbol"?e:e+""}function SX(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function AX(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function TX(t){return t.index!=null}var rL=(t,e,n,r)=>{if(e==null)return To;var i=AX(t,e,n);if(i==null)return To;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var s=t.settings.active===!0;if(TX(i)){if(s)return zp(zp({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r,graphicalItemId:void 0};return zp(zp({},To),{},{coordinate:i.coordinate})};function CX(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var n=Number(t);return Number.isFinite(n)?n:void 0}function OX(t,e){var n=CX(t),r=e[0],i=e[1];if(n===void 0)return!1;var s=Math.min(r,i),l=Math.max(r,i);return n>=s&&n<=l}function IX(t,e,n){if(n==null||e==null)return!0;var r=mr(t,e);return r==null||!Uo(n)?!0:OX(r,n)}var _S=(t,e,n,r)=>{var i=t==null?void 0:t.index;if(i==null)return null;var s=Number(i);if(!ln(s))return i;var l=0,u=1/0;e.length>0&&(u=e.length-1);var f=Math.max(l,Math.min(s,u)),h=e[f];return h==null||IX(h,n,r)?String(f):null},iL=(t,e,n,r,i,s,l,u)=>{if(!(s==null||u==null)){var f=l[0],h=f==null?void 0:u(f.positions,s);if(h!=null)return h;var m=i==null?void 0:i[Number(s)];if(m)switch(n){case"horizontal":return{x:m.coordinate,y:(r.top+e)/2};default:return{x:(r.left+t)/2,y:m.coordinate}}}},aL=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;return n==="hover"?i=t.itemInteraction.hover.dataKey:i=t.itemInteraction.click.dataKey,i==null&&r!=null?[t.tooltipItemPayloads[0]]:t.tooltipItemPayloads.filter(s=>{var l;return((l=s.settings)===null||l===void 0?void 0:l.dataKey)===i})},Lh=t=>t.options.tooltipPayloadSearcher,Gu=t=>t.tooltip;function MN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MN(Object(n),!0).forEach(function(r){RX(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function RX(t,e,n){return(e=NX(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function NX(t){var e=PX(t,"string");return typeof e=="symbol"?e:e+""}function PX(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function MX(t,e){return t??e}var sL=(t,e,n,r,i,s,l)=>{if(!(e==null||s==null)){var{chartData:u,computedData:f,dataStartIndex:h,dataEndIndex:m}=n,p=[];return t.reduce((v,b)=>{var E,{dataDefinedOnItem:w,settings:S}=b,P=MX(w,u),M=Array.isArray(P)?Mj(P,h,m):P,j=(E=S==null?void 0:S.dataKey)!==null&&E!==void 0?E:r,$=S==null?void 0:S.nameKey,L;if(r&&Array.isArray(M)&&!Array.isArray(M[0])&&l==="axis"?L=I8(M,r,i):L=s(M,e,f,$),Array.isArray(L))L.forEach(I=>{var R=kN(kN({},S),{},{name:I.name,unit:I.unit,color:void 0,fill:void 0});v.push(nR({tooltipEntrySettings:R,dataKey:I.dataKey,payload:I.payload,value:mr(I.payload,I.dataKey),name:I.name}))});else{var q;v.push(nR({tooltipEntrySettings:S,dataKey:j,payload:L,value:mr(L,j),name:(q=mr(L,$))!==null&&q!==void 0?q:S==null?void 0:S.name}))}return v},p)}},bS=ae([kn,Tt,p3,tS,Mn],L3),kX=ae([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),DX=ae([Mn,qu],g3),Vh=ae([kX,kn,DX],y3,{memoizeOptions:{resultEqualityCheck:kv}}),jX=ae([Vh],t=>t.filter(Pv)),LX=ae([Vh],b3,{memoizeOptions:{resultEqualityCheck:kv}}),Ku=ae([LX,Yo],w3),VX=ae([jX,Yo,kn],d3),wS=ae([Ku,kn,Vh],x3),oL=ae([kn],fS),UX=ae([kn],t=>t.allowDataOverflow),lL=ae([oL,UX],q4),zX=ae([Vh],t=>t.filter(Pv)),BX=ae([VX,zX,Ov,a3],S3),$X=ae([BX,Yo,Mn,lL],A3),qX=ae([Vh],_3),FX=ae([Ku,kn,qX,dS,Mn],O3,{memoizeOptions:{resultEqualityCheck:Mv}}),HX=ae([I3,Mn,qu],Fu),GX=ae([HX,Mn],P3),KX=ae([R3,Mn,qu],Fu),YX=ae([KX,Mn],M3),WX=ae([N3,Mn,qu],Fu),XX=ae([WX,Mn],k3),QX=ae([GX,XX,YX],uy),JX=ae([kn,oL,lL,$X,FX,QX,Tt,Mn],D3),Uh=ae([kn,Tt,Ku,wS,Ov,Mn,JX],j3),ZX=ae([Uh,kn,bS],V3),eQ=ae([kn,Uh,ZX,Mn],U3),cL=t=>{var e=Mn(t),n=qu(t),r=!1;return jh(t,e,n,r)},uL=ae([kn,cL],Iv),fL=ae([kn,bS,eQ,uL],mS),tQ=ae([Tt,wS,kn,Mn],G3),nQ=ae([Tt,wS,kn,Mn],K3),rQ=(t,e,n,r,i,s,l,u)=>{if(e){var{type:f}=e,h=tc(t,u);if(r){var m=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,p=f==="category"&&r.bandwidth?r.bandwidth()/m:0;return p=u==="angleAxis"&&i!=null&&(i==null?void 0:i.length)>=2?jr(i[0]-i[1])*2*p:p,h&&l?l.map((v,b)=>({coordinate:r(v)+p,value:v,index:b,offset:p})):r.domain().map((v,b)=>({coordinate:r(v)+p,value:s?s[v]:v,index:b,offset:p}))}}},js=ae([Tt,kn,bS,fL,cL,tQ,nQ,Mn],rQ),xS=ae([W3,X3,dX],(t,e,n)=>Q3(n.shared,t,e)),dL=t=>t.tooltip.settings.trigger,ES=t=>t.tooltip.settings.defaultIndex,zh=ae([Gu,xS,dL,ES],rL),Nu=ae([zh,Ku,kh,Uh],_S),hL=ae([js,Nu],J3),mL=ae([zh],t=>{if(t)return t.dataKey});ae([zh],t=>{if(t)return t.graphicalItemId});var pL=ae([Gu,xS,dL,ES],aL),iQ=ae([Ns,Ps,Tt,Hn,js,ES,pL,Lh],iL),aQ=ae([zh,iQ],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),sQ=ae([zh],t=>t.active),oQ=ae([pL,Nu,Yo,kh,hL,Lh,xS],sL);ae([oQ],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function DN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DN(Object(n),!0).forEach(function(r){lQ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lQ(t,e,n){return(e=cQ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cQ(t){var e=uQ(t,"string");return typeof e=="symbol"?e:e+""}function uQ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fQ=()=>Ue(kn),dQ=()=>{var t=fQ(),e=Ue(js),n=Ue(fL);return qg(!t||!n?void 0:jN(jN({},t),{},{scale:n}),e)};function LN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Jc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LN(Object(n),!0).forEach(function(r){hQ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hQ(t,e,n){return(e=mQ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mQ(t){var e=pQ(t,"string");return typeof e=="symbol"?e:e+""}function pQ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var gQ=(t,e,n,r)=>{var i=e.find(s=>s&&s.index===n);if(i){if(t==="horizontal")return{x:i.coordinate,y:r.chartY};if(t==="vertical")return{x:r.chartX,y:i.coordinate}}return{x:0,y:0}},yQ=(t,e,n,r)=>{var i=e.find(h=>h&&h.index===n);if(i){if(t==="centric"){var s=i.coordinate,{radius:l}=r;return Jc(Jc(Jc({},r),ir(r.cx,r.cy,l,s)),{},{angle:s,radius:l})}var u=i.coordinate,{angle:f}=r;return Jc(Jc(Jc({},r),ir(r.cx,r.cy,u,f)),{},{angle:f,radius:u})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function vQ(t,e){var{chartX:n,chartY:r}=t;return n>=e.left&&n<=e.left+e.width&&r>=e.top&&r<=e.top+e.height}var gL=(t,e,n,r,i)=>{var s,l=-1,u=(s=e==null?void 0:e.length)!==null&&s!==void 0?s:0;if(u<=1||t==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var f=0;f<u;f++){var h=f>0?n[f-1].coordinate:n[u-1].coordinate,m=n[f].coordinate,p=f>=u-1?n[0].coordinate:n[f+1].coordinate,v=void 0;if(jr(m-h)!==jr(p-m)){var b=[];if(jr(p-m)===jr(i[1]-i[0])){v=p;var E=m+i[1]-i[0];b[0]=Math.min(E,(E+h)/2),b[1]=Math.max(E,(E+h)/2)}else{v=h;var w=p+i[1]-i[0];b[0]=Math.min(m,(w+m)/2),b[1]=Math.max(m,(w+m)/2)}var S=[Math.min(m,(v+m)/2),Math.max(m,(v+m)/2)];if(t>S[0]&&t<=S[1]||t>=b[0]&&t<=b[1]){({index:l}=n[f]);break}}else{var P=Math.min(h,p),M=Math.max(h,p);if(t>(P+m)/2&&t<=(M+m)/2){({index:l}=n[f]);break}}}else if(e){for(var j=0;j<u;j++)if(j===0&&t<=(e[j].coordinate+e[j+1].coordinate)/2||j>0&&j<u-1&&t>(e[j].coordinate+e[j-1].coordinate)/2&&t<=(e[j].coordinate+e[j+1].coordinate)/2||j===u-1&&t>(e[j].coordinate+e[j-1].coordinate)/2){({index:l}=e[j]);break}}return l},_Q=()=>Ue(tS),SS=(t,e)=>e,yL=(t,e,n)=>n,AS=(t,e,n,r)=>r,bQ=ae(js,t=>rv(t,e=>e.coordinate)),TS=ae([Gu,SS,yL,AS],rL),CS=ae([TS,Ku,kh,Uh],_S),wQ=(t,e,n)=>{if(e!=null){var r=Gu(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},vL=ae([Gu,SS,yL,AS],aL),fy=ae([Ns,Ps,Tt,Hn,js,AS,vL,Lh],iL),xQ=ae([TS,fy],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),_L=ae([js,CS],J3),EQ=ae([vL,CS,Yo,kh,_L,Lh,SS],sL),SQ=ae([TS,CS],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),AQ=(t,e,n,r,i,s,l)=>{if(!(!t||!n||!r||!i)&&vQ(t,l)){var u=n7(t,e),f=gL(u,s,i,n,r),h=gQ(e,i,f,t);return{activeIndex:String(f),activeCoordinate:h}}},TQ=(t,e,n,r,i,s,l)=>{if(!(!t||!r||!i||!s||!n)){var u=uG(t,n);if(u){var f=r7(u,e),h=gL(f,l,s,r,i),m=yQ(e,s,h,u);return{activeIndex:String(h),activeCoordinate:m}}}},CQ=(t,e,n,r,i,s,l,u)=>{if(!(!t||!e||!r||!i||!s))return e==="horizontal"||e==="vertical"?AQ(t,e,r,i,s,l,u):TQ(t,e,n,r,i,s,l)},OQ=ae(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,n)=>n,(t,e,n)=>{if(e!=null){var r=t[e];if(r!=null)return n?r.panoramaElementId:r.elementId}}),IQ=ae(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(r=>parseInt(r,10)).concat(Object.values(xr)),n=Array.from(new Set(e));return n.sort((r,i)=>r-i)},{memoizeOptions:{resultEqualityCheck:hW}});function VN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function UN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VN(Object(n),!0).forEach(function(r){RQ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function RQ(t,e,n){return(e=NQ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function NQ(t){var e=PQ(t,"string");return typeof e=="symbol"?e:e+""}function PQ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var MQ={},kQ={zIndexMap:Object.values(xr).reduce((t,e)=>UN(UN({},t),{},{[e]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),MQ)},DQ=new Set(Object.values(xr));function jQ(t){return DQ.has(t)}var bL=Vr({name:"zIndex",initialState:kQ,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]?t.zIndexMap[n].consumers+=1:t.zIndexMap[n]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:Gt()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(t.zIndexMap[n].consumers-=1,t.zIndexMap[n].consumers<=0&&!jQ(n)&&delete t.zIndexMap[n])},prepare:Gt()},registerZIndexPortalId:{reducer:(t,e)=>{var{zIndex:n,elementId:r,isPanorama:i}=e.payload;t.zIndexMap[n]?i?t.zIndexMap[n].panoramaElementId=r:t.zIndexMap[n].elementId=r:t.zIndexMap[n]={consumers:0,elementId:i?void 0:r,panoramaElementId:i?r:void 0}},prepare:Gt()},unregisterZIndexPortalId:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(e.payload.isPanorama?t.zIndexMap[n].panoramaElementId=void 0:t.zIndexMap[n].elementId=void 0)},prepare:Gt()}}}),{registerZIndexPortal:LQ,unregisterZIndexPortal:VQ,registerZIndexPortalId:UQ,unregisterZIndexPortalId:zQ}=bL.actions,BQ=bL.reducer;function Ls(t){var{zIndex:e,children:n}=t,r=j7(),i=r&&e!==void 0&&e!==0,s=Ur(),l=cn();C.useLayoutEffect(()=>i?(l(LQ({zIndex:e})),()=>{l(VQ({zIndex:e}))}):wh,[l,e,i]);var u=Ue(h=>OQ(h,e,s));if(!i)return n;if(!u)return null;var f=document.getElementById(u);return f?ED.createPortal(n,f):null}function cx(){return cx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cx.apply(null,arguments)}function zN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Bp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zN(Object(n),!0).forEach(function(r){$Q(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $Q(t,e,n){return(e=qQ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qQ(t){var e=FQ(t,"string");return typeof e=="symbol"?e:e+""}function FQ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function HQ(t){var{cursor:e,cursorComp:n,cursorProps:r}=t;return C.isValidElement(e)?C.cloneElement(e,r):C.createElement(n,r)}function GQ(t){var e,{coordinate:n,payload:r,index:i,offset:s,tooltipAxisBandSize:l,layout:u,cursor:f,tooltipEventType:h,chartName:m}=t,p=n,v=r,b=i;if(!f||!p||m!=="ScatterChart"&&h!=="axis")return null;var E,w,S;if(m==="ScatterChart")E=p,w=SH,S=xr.cursorLine;else if(m==="BarChart")E=AH(u,p,s,l),w=i4,S=xr.cursorRectangle;else if(u==="radial"&&FD(p)){var{cx:P,cy:M,radius:j,startAngle:$,endAngle:L}=a4(p);E={cx:P,cy:M,startAngle:$,endAngle:L,innerRadius:j,outerRadius:j},w=o4,S=xr.cursorLine}else E={points:mG(u,p,s)},w=Zj,S=xr.cursorLine;var q=typeof f=="object"&&"className"in f?f.className:void 0,I=Bp(Bp(Bp(Bp({stroke:"#ccc",pointerEvents:"none"},s),E),aE(f)),{},{payload:v,payloadIndex:b,className:$t("recharts-tooltip-cursor",q)});return C.createElement(Ls,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:S},C.createElement(HQ,{cursor:f,cursorComp:w,cursorProps:I}))}function KQ(t){var e=dQ(),n=$j(),r=yv(),i=_Q();return e==null||n==null||r==null||i==null?null:C.createElement(GQ,cx({},t,{offset:n,layout:r,tooltipAxisBandSize:e,chartName:i}))}var wL=C.createContext(null),YQ=()=>C.useContext(wL),kw={exports:{}},BN;function WQ(){return BN||(BN=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(f,h,m){this.fn=f,this.context=h,this.once=m||!1}function s(f,h,m,p,v){if(typeof m!="function")throw new TypeError("The listener must be a function");var b=new i(m,p||f,v),E=n?n+h:h;return f._events[E]?f._events[E].fn?f._events[E]=[f._events[E],b]:f._events[E].push(b):(f._events[E]=b,f._eventsCount++),f}function l(f,h){--f._eventsCount===0?f._events=new r:delete f._events[h]}function u(){this._events=new r,this._eventsCount=0}u.prototype.eventNames=function(){var h=[],m,p;if(this._eventsCount===0)return h;for(p in m=this._events)e.call(m,p)&&h.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(m)):h},u.prototype.listeners=function(h){var m=n?n+h:h,p=this._events[m];if(!p)return[];if(p.fn)return[p.fn];for(var v=0,b=p.length,E=new Array(b);v<b;v++)E[v]=p[v].fn;return E},u.prototype.listenerCount=function(h){var m=n?n+h:h,p=this._events[m];return p?p.fn?1:p.length:0},u.prototype.emit=function(h,m,p,v,b,E){var w=n?n+h:h;if(!this._events[w])return!1;var S=this._events[w],P=arguments.length,M,j;if(S.fn){switch(S.once&&this.removeListener(h,S.fn,void 0,!0),P){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,m),!0;case 3:return S.fn.call(S.context,m,p),!0;case 4:return S.fn.call(S.context,m,p,v),!0;case 5:return S.fn.call(S.context,m,p,v,b),!0;case 6:return S.fn.call(S.context,m,p,v,b,E),!0}for(j=1,M=new Array(P-1);j<P;j++)M[j-1]=arguments[j];S.fn.apply(S.context,M)}else{var $=S.length,L;for(j=0;j<$;j++)switch(S[j].once&&this.removeListener(h,S[j].fn,void 0,!0),P){case 1:S[j].fn.call(S[j].context);break;case 2:S[j].fn.call(S[j].context,m);break;case 3:S[j].fn.call(S[j].context,m,p);break;case 4:S[j].fn.call(S[j].context,m,p,v);break;default:if(!M)for(L=1,M=new Array(P-1);L<P;L++)M[L-1]=arguments[L];S[j].fn.apply(S[j].context,M)}}return!0},u.prototype.on=function(h,m,p){return s(this,h,m,p,!1)},u.prototype.once=function(h,m,p){return s(this,h,m,p,!0)},u.prototype.removeListener=function(h,m,p,v){var b=n?n+h:h;if(!this._events[b])return this;if(!m)return l(this,b),this;var E=this._events[b];if(E.fn)E.fn===m&&(!v||E.once)&&(!p||E.context===p)&&l(this,b);else{for(var w=0,S=[],P=E.length;w<P;w++)(E[w].fn!==m||v&&!E[w].once||p&&E[w].context!==p)&&S.push(E[w]);S.length?this._events[b]=S.length===1?S[0]:S:l(this,b)}return this},u.prototype.removeAllListeners=function(h){var m;return h?(m=n?n+h:h,this._events[m]&&l(this,m)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,t.exports=u})(kw)),kw.exports}var XQ=WQ();const QQ=Va(XQ);var ah=new QQ,ux="recharts.syncEvent.tooltip",$N="recharts.syncEvent.brush";function JQ(t,e){if(e){var n=Number.parseInt(e,10);if(!Wi(n))return t==null?void 0:t[n]}}var ZQ={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},xL=Vr({name:"options",initialState:ZQ,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),eJ=xL.reducer,{createEventEmitter:tJ}=xL.actions;function nJ(t){return t.tooltip.syncInteraction}var rJ={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},EL=Vr({name:"chartData",initialState:rJ,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:qN,setDataStartEndIndexes:iJ,setComputedData:Xhe}=EL.actions,aJ=EL.reducer,sJ=["x","y"];function FN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Zc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FN(Object(n),!0).forEach(function(r){oJ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function oJ(t,e,n){return(e=lJ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lJ(t){var e=cJ(t,"string");return typeof e=="symbol"?e:e+""}function cJ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uJ(t,e){if(t==null)return{};var n,r,i=fJ(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function fJ(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function dJ(){var t=Ue(nS),e=Ue(rS),n=cn(),r=Ue(s3),i=Ue(js),s=yv(),l=gv(),u=Ue(f=>f.rootProps.className);C.useEffect(()=>{if(t==null)return wh;var f=(h,m,p)=>{if(e!==p&&t===h){if(r==="index"){var v;if(l&&m!==null&&m!==void 0&&(v=m.payload)!==null&&v!==void 0&&v.coordinate&&m.payload.sourceViewBox){var b=m.payload.coordinate,{x:E,y:w}=b,S=uJ(b,sJ),{x:P,y:M,width:j,height:$}=m.payload.sourceViewBox,L=Zc(Zc({},S),{},{x:l.x+(j?(E-P)/j:0)*l.width,y:l.y+($?(w-M)/$:0)*l.height});n(Zc(Zc({},m),{},{payload:Zc(Zc({},m.payload),{},{coordinate:L})}))}else n(m);return}if(i!=null){var q;if(typeof r=="function"){var I={activeTooltipIndex:m.payload.index==null?void 0:Number(m.payload.index),isTooltipActive:m.payload.active,activeIndex:m.payload.index==null?void 0:Number(m.payload.index),activeLabel:m.payload.label,activeDataKey:m.payload.dataKey,activeCoordinate:m.payload.coordinate},R=r(i,I);q=i[R]}else r==="value"&&(q=i.find(G=>String(G.value)===m.payload.label));var{coordinate:N}=m.payload;if(q==null||m.payload.active===!1||N==null||l==null){n(ox({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:z,y:k}=N,B=Math.min(z,l.x+l.width),V=Math.min(k,l.y+l.height),pe={x:s==="horizontal"?q.coordinate:B,y:s==="horizontal"?V:q.coordinate},be=ox({active:m.payload.active,coordinate:pe,dataKey:m.payload.dataKey,index:String(q.index),label:m.payload.label,sourceViewBox:m.payload.sourceViewBox,graphicalItemId:m.payload.graphicalItemId});n(be)}}};return ah.on(ux,f),()=>{ah.off(ux,f)}},[u,n,e,t,r,i,s,l])}function hJ(){var t=Ue(nS),e=Ue(rS),n=cn();C.useEffect(()=>{if(t==null)return wh;var r=(i,s,l)=>{e!==l&&t===i&&n(iJ(s))};return ah.on($N,r),()=>{ah.off($N,r)}},[n,e,t])}function mJ(){var t=cn();C.useEffect(()=>{t(tJ())},[t]),dJ(),hJ()}function pJ(t,e,n,r,i,s){var l=Ue(b=>wQ(b,t,e)),u=Ue(rS),f=Ue(nS),h=Ue(s3),m=Ue(nJ),p=m==null?void 0:m.active,v=gv();C.useEffect(()=>{if(!p&&f!=null&&u!=null){var b=ox({active:s,coordinate:n,dataKey:l,index:i,label:typeof r=="number"?String(r):r,sourceViewBox:v,graphicalItemId:void 0});ah.emit(ux,f,b,u)}},[p,n,l,i,r,u,f,h,s,v])}function HN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function GN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HN(Object(n),!0).forEach(function(r){gJ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gJ(t,e,n){return(e=yJ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yJ(t){var e=vJ(t,"string");return typeof e=="symbol"?e:e+""}function vJ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _J(t){return t.dataKey}function bJ(t,e){return C.isValidElement(t)?C.cloneElement(t,e):typeof t=="function"?C.createElement(t,e):C.createElement(rH,e)}var KN=[],wJ={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function xJ(t){var e,n,r=ai(t,wJ),{active:i,allowEscapeViewBox:s,animationDuration:l,animationEasing:u,content:f,filterNull:h,isAnimationActive:m,offset:p,payloadUniqBy:v,position:b,reverseDirection:E,useTranslate3d:w,wrapperStyle:S,cursor:P,shared:M,trigger:j,defaultIndex:$,portal:L,axisId:q}=r,I=cn(),R=typeof $=="number"?String($):$;C.useEffect(()=>{I(yX({shared:M,trigger:j,axisId:q,active:i,defaultIndex:R}))},[I,M,j,q,i,R]);var N=gv(),z=Jj(),k=fX(M),{activeIndex:B,isActive:V}=(e=Ue(Pe=>SQ(Pe,k,j,R)))!==null&&e!==void 0?e:{},pe=Ue(Pe=>EQ(Pe,k,j,R)),be=Ue(Pe=>_L(Pe,k,j,R)),G=Ue(Pe=>xQ(Pe,k,j,R)),ne=pe,de=YQ(),ge=(n=i??V)!==null&&n!==void 0?n:!1,[Ee,F]=zq([ne,ge]),X=k==="axis"?be:void 0;pJ(k,j,G,X,B,ge);var re=L??de;if(re==null||N==null||k==null)return null;var _e=ne??KN;ge||(_e=KN),h&&_e.length&&(_e=dq(_e.filter(Pe=>Pe.value!=null&&(Pe.hide!==!0||r.includeHidden)),v,_J));var Oe=_e.length>0,xe=C.createElement(uH,{allowEscapeViewBox:s,animationDuration:l,animationEasing:u,isAnimationActive:m,active:ge,coordinate:G,hasPayload:Oe,offset:p,position:b,reverseDirection:E,useTranslate3d:w,viewBox:N,wrapperStyle:S,lastBoundingBox:Ee,innerRef:F,hasPortalFromProps:!!L},bJ(f,GN(GN({},r),{},{payload:_e,label:X,active:ge,activeIndex:B,coordinate:G,accessibilityLayer:z})));return C.createElement(C.Fragment,null,ED.createPortal(xe,re),ge&&C.createElement(KQ,{cursor:P,tooltipEventType:k,coordinate:G,payload:_e,index:B}))}var OS=t=>null;OS.displayName="Cell";function EJ(t,e,n){return(e=SJ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function SJ(t){var e=AJ(t,"string");return typeof e=="symbol"?e:e+""}function AJ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class TJ{constructor(e){EJ(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;r!=null&&this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function YN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function CJ(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YN(Object(n),!0).forEach(function(r){OJ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function OJ(t,e,n){return(e=IJ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function IJ(t){var e=RJ(t,"string");return typeof e=="symbol"?e:e+""}function RJ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var NJ={cacheSize:2e3,enableCache:!0},SL=CJ({},NJ),WN=new TJ(SL.cacheSize),PJ={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},XN="recharts_measurement_span";function MJ(t,e){var n=e.fontSize||"",r=e.fontFamily||"",i=e.fontWeight||"",s=e.fontStyle||"",l=e.letterSpacing||"",u=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(s,"|").concat(l,"|").concat(u)}var QN=(t,e)=>{try{var n=document.getElementById(XN);n||(n=document.createElement("span"),n.setAttribute("id",XN),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,PJ,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},kd=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Ch.isSsr)return{width:0,height:0};if(!SL.enableCache)return QN(e,n);var r=MJ(e,n),i=WN.get(r);if(i)return i;var s=QN(e,n);return WN.set(r,s),s},JN=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,ZN=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,kJ=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,DJ=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,AL={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},jJ=Object.keys(AL),hu="NaN";function LJ(t,e){return t*AL[e]}class Mr{static parse(e){var n,[,r,i]=(n=DJ.exec(e))!==null&&n!==void 0?n:[];return new Mr(parseFloat(r),i??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,Wi(e)&&(this.unit=""),n!==""&&!kJ.test(n)&&(this.num=NaN,this.unit=""),jJ.includes(n)&&(this.num=LJ(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new Mr(NaN,""):new Mr(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Mr(NaN,""):new Mr(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Mr(NaN,""):new Mr(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Mr(NaN,""):new Mr(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Wi(this.num)}}function TL(t){if(t.includes(hu))return hu;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,i,s]=(n=JN.exec(e))!==null&&n!==void 0?n:[],l=Mr.parse(r??""),u=Mr.parse(s??""),f=i==="*"?l.multiply(u):l.divide(u);if(f.isNaN())return hu;e=e.replace(JN,f.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var h,[,m,p,v]=(h=ZN.exec(e))!==null&&h!==void 0?h:[],b=Mr.parse(m??""),E=Mr.parse(v??""),w=p==="+"?b.add(E):b.subtract(E);if(w.isNaN())return hu;e=e.replace(ZN,w.toString())}return e}var eP=/\(([^()]*)\)/;function VJ(t){for(var e=t,n;(n=eP.exec(e))!=null;){var[,r]=n;e=e.replace(eP,TL(r))}return e}function UJ(t){var e=t.replace(/\s+/g,"");return e=VJ(e),e=TL(e),e}function zJ(t){try{return UJ(t)}catch{return hu}}function Dw(t){var e=zJ(t.slice(5,-1));return e===hu?"":e}var BJ=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],$J=["dx","dy","angle","className","breakAll"];function fx(){return fx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fx.apply(null,arguments)}function tP(t,e){if(t==null)return{};var n,r,i=qJ(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function qJ(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var CL=/[ \f\n\r\t\v\u2028\u2029]+/,OL=t=>{var{children:e,breakAll:n,style:r}=t;try{var i=[];Fn(e)||(n?i=e.toString().split(""):i=e.toString().split(CL));var s=i.map(u=>({word:u,width:kd(u,r).width})),l=n?0:kd("",r).width;return{wordsWithComputedWidth:s,spaceWidth:l}}catch{return null}};function FJ(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var IL=(t,e,n,r)=>t.reduce((i,s)=>{var{word:l,width:u}=s,f=i[i.length-1];if(f&&u!=null&&(e==null||r||f.width+u+n<Number(e)))f.words.push(l),f.width+=u+n;else{var h={words:[l],width:u};i.push(h)}return i},[]),RL=t=>t.reduce((e,n)=>e.width>n.width?e:n),HJ="",nP=(t,e,n,r,i,s,l,u)=>{var f=t.slice(0,e),h=OL({breakAll:n,style:r,children:f+HJ});if(!h)return[!1,[]];var m=IL(h.wordsWithComputedWidth,s,l,u),p=m.length>i||RL(m).width>Number(s);return[p,m]},GJ=(t,e,n,r,i)=>{var{maxLines:s,children:l,style:u,breakAll:f}=t,h=Me(s),m=String(l),p=IL(e,r,n,i);if(!h||i)return p;var v=p.length>s||RL(p).width>Number(r);if(!v)return p;for(var b=0,E=m.length-1,w=0,S;b<=E&&w<=m.length-1;){var P=Math.floor((b+E)/2),M=P-1,[j,$]=nP(m,M,f,u,s,r,n,i),[L]=nP(m,P,f,u,s,r,n,i);if(!j&&!L&&(b=P+1),j&&L&&(E=P-1),!j&&L){S=$;break}w++}return S||p},rP=t=>{var e=Fn(t)?[]:t.toString().split(CL);return[{words:e,width:void 0}]},KJ=t=>{var{width:e,scaleToFit:n,children:r,style:i,breakAll:s,maxLines:l}=t;if((e||n)&&!Ch.isSsr){var u,f,h=OL({breakAll:s,children:r,style:i});if(h){var{wordsWithComputedWidth:m,spaceWidth:p}=h;u=m,f=p}else return rP(r);return GJ({breakAll:s,children:r,maxLines:l,style:i},u,f,e,!!n)}return rP(r)},NL="#808080",YJ={angle:0,breakAll:!1,capHeight:"0.71em",fill:NL,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},IS=C.forwardRef((t,e)=>{var n=ai(t,YJ),{x:r,y:i,lineHeight:s,capHeight:l,fill:u,scaleToFit:f,textAnchor:h,verticalAnchor:m}=n,p=tP(n,BJ),v=C.useMemo(()=>KJ({breakAll:p.breakAll,children:p.children,maxLines:p.maxLines,scaleToFit:f,style:p.style,width:p.width}),[p.breakAll,p.children,p.maxLines,f,p.style,p.width]),{dx:b,dy:E,angle:w,className:S,breakAll:P}=p,M=tP(p,$J);if(!Ma(r)||!Ma(i)||v.length===0)return null;var j=Number(r)+(Me(b)?b:0),$=Number(i)+(Me(E)?E:0);if(!ln(j)||!ln($))return null;var L;switch(m){case"start":L=Dw("calc(".concat(l,")"));break;case"middle":L=Dw("calc(".concat((v.length-1)/2," * -").concat(s," + (").concat(l," / 2))"));break;default:L=Dw("calc(".concat(v.length-1," * -").concat(s,")"));break}var q=[];if(f){var I=v[0].width,{width:R}=p;q.push("scale(".concat(Me(R)&&Me(I)?R/I:1,")"))}return w&&q.push("rotate(".concat(w,", ").concat(j,", ").concat($,")")),q.length&&(M.transform=q.join(" ")),C.createElement("text",fx({},Ai(M),{ref:e,x:j,y:$,className:$t("recharts-text",S),textAnchor:h,fill:u.includes("url")?NL:u}),v.map((N,z)=>{var k=N.words.join(P?"":" ");return C.createElement("tspan",{x:j,dy:z===0?L:s,key:"".concat(k,"-").concat(z)},k)}))});IS.displayName="Text";var WJ=["labelRef"];function XJ(t,e){if(t==null)return{};var n,r,i=QJ(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function QJ(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function iP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function sn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iP(Object(n),!0).forEach(function(r){JJ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function JJ(t,e,n){return(e=ZJ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ZJ(t){var e=eZ(t,"string");return typeof e=="symbol"?e:e+""}function eZ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ls(){return ls=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ls.apply(null,arguments)}var PL=C.createContext(null),tZ=t=>{var{x:e,y:n,upperWidth:r,lowerWidth:i,width:s,height:l,children:u}=t,f=C.useMemo(()=>({x:e,y:n,upperWidth:r,lowerWidth:i,width:s,height:l}),[e,n,r,i,s,l]);return C.createElement(PL.Provider,{value:f},u)},ML=()=>{var t=C.useContext(PL),e=gv();return t||Bj(e)},nZ=C.createContext(null),rZ=()=>{var t=C.useContext(nZ),e=Ue(f3);return t||e},iZ=t=>{var{value:e,formatter:n}=t,r=Fn(t.children)?e:t.children;return typeof n=="function"?n(r):r},RS=t=>t!=null&&typeof t=="function",aZ=(t,e)=>{var n=jr(e-t),r=Math.min(Math.abs(e-t),360);return n*r},sZ=(t,e,n,r,i)=>{var{offset:s,className:l}=t,{cx:u,cy:f,innerRadius:h,outerRadius:m,startAngle:p,endAngle:v,clockWise:b}=i,E=(h+m)/2,w=aZ(p,v),S=w>=0?1:-1,P,M;switch(e){case"insideStart":P=p+S*s,M=b;break;case"insideEnd":P=v-S*s,M=!b;break;case"end":P=v+S*s,M=b;break;default:throw new Error("Unsupported position ".concat(e))}M=w<=0?M:!M;var j=ir(u,f,E,P),$=ir(u,f,E,P+(M?1:-1)*359),L="M".concat(j.x,",").concat(j.y,`
    A`).concat(E,",").concat(E,",0,1,").concat(M?0:1,`,
    `).concat($.x,",").concat($.y),q=Fn(t.id)?Gd("recharts-radial-line-"):t.id;return C.createElement("text",ls({},r,{dominantBaseline:"central",className:$t("recharts-radial-bar-label",l)}),C.createElement("defs",null,C.createElement("path",{id:q,d:L})),C.createElement("textPath",{xlinkHref:"#".concat(q)},n))},oZ=(t,e,n)=>{var{cx:r,cy:i,innerRadius:s,outerRadius:l,startAngle:u,endAngle:f}=t,h=(u+f)/2;if(n==="outside"){var{x:m,y:p}=ir(r,i,l+e,h);return{x:m,y:p,textAnchor:m>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var v=(s+l)/2,{x:b,y:E}=ir(r,i,v,h);return{x:b,y:E,textAnchor:"middle",verticalAnchor:"middle"}},dx=t=>"cx"in t&&Me(t.cx),lZ=(t,e)=>{var{parentViewBox:n,offset:r,position:i}=t,s;n!=null&&!dx(n)&&(s=n);var{x:l,y:u,upperWidth:f,lowerWidth:h,height:m}=e,p=l,v=l+(f-h)/2,b=(p+v)/2,E=(f+h)/2,w=p+f/2,S=m>=0?1:-1,P=S*r,M=S>0?"end":"start",j=S>0?"start":"end",$=f>=0?1:-1,L=$*r,q=$>0?"end":"start",I=$>0?"start":"end";if(i==="top"){var R={x:p+f/2,y:u-P,textAnchor:"middle",verticalAnchor:M};return sn(sn({},R),s?{height:Math.max(u-s.y,0),width:f}:{})}if(i==="bottom"){var N={x:v+h/2,y:u+m+P,textAnchor:"middle",verticalAnchor:j};return sn(sn({},N),s?{height:Math.max(s.y+s.height-(u+m),0),width:h}:{})}if(i==="left"){var z={x:b-L,y:u+m/2,textAnchor:q,verticalAnchor:"middle"};return sn(sn({},z),s?{width:Math.max(z.x-s.x,0),height:m}:{})}if(i==="right"){var k={x:b+E+L,y:u+m/2,textAnchor:I,verticalAnchor:"middle"};return sn(sn({},k),s?{width:Math.max(s.x+s.width-k.x,0),height:m}:{})}var B=s?{width:E,height:m}:{};return i==="insideLeft"?sn({x:b+L,y:u+m/2,textAnchor:I,verticalAnchor:"middle"},B):i==="insideRight"?sn({x:b+E-L,y:u+m/2,textAnchor:q,verticalAnchor:"middle"},B):i==="insideTop"?sn({x:p+f/2,y:u+P,textAnchor:"middle",verticalAnchor:j},B):i==="insideBottom"?sn({x:v+h/2,y:u+m-P,textAnchor:"middle",verticalAnchor:M},B):i==="insideTopLeft"?sn({x:p+L,y:u+P,textAnchor:I,verticalAnchor:j},B):i==="insideTopRight"?sn({x:p+f-L,y:u+P,textAnchor:q,verticalAnchor:j},B):i==="insideBottomLeft"?sn({x:v+L,y:u+m-P,textAnchor:I,verticalAnchor:M},B):i==="insideBottomRight"?sn({x:v+h-L,y:u+m-P,textAnchor:q,verticalAnchor:M},B):i&&typeof i=="object"&&(Me(i.x)||bs(i.x))&&(Me(i.y)||bs(i.y))?sn({x:l+Xi(i.x,E),y:u+Xi(i.y,m),textAnchor:"end",verticalAnchor:"end"},B):sn({x:w,y:u+m/2,textAnchor:"middle",verticalAnchor:"middle"},B)},cZ={angle:0,offset:5,zIndex:xr.label,position:"middle",textBreakAll:!1};function So(t){var e=ai(t,cZ),{viewBox:n,position:r,value:i,children:s,content:l,className:u="",textBreakAll:f,labelRef:h}=e,m=rZ(),p=ML(),v=r==="center"?p:m??p,b,E,w;if(n==null?b=v:dx(n)?b=n:b=Bj(n),!b||Fn(i)&&Fn(s)&&!C.isValidElement(l)&&typeof l!="function")return null;var S=sn(sn({},e),{},{viewBox:b});if(C.isValidElement(l)){var{labelRef:P}=S,M=XJ(S,WJ);return C.cloneElement(l,M)}if(typeof l=="function"){if(E=C.createElement(l,S),C.isValidElement(E))return E}else E=iZ(e);var j=Ai(e);if(dx(b)){if(r==="insideStart"||r==="insideEnd"||r==="end")return sZ(e,r,E,j,b);w=oZ(b,e.offset,e.position)}else w=lZ(e,b);return C.createElement(Ls,{zIndex:e.zIndex},C.createElement(IS,ls({ref:h,className:$t("recharts-label",u)},j,w,{textAnchor:FJ(j.textAnchor)?j.textAnchor:w.textAnchor,breakAll:f}),E))}So.displayName="Label";var uZ=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?C.createElement(So,ls({key:"label-implicit"},r)):Ma(t)?C.createElement(So,ls({key:"label-implicit",value:t},r)):C.isValidElement(t)?t.type===So?C.cloneElement(t,sn({key:"label-implicit"},r)):C.createElement(So,ls({key:"label-implicit",content:t},r)):RS(t)?C.createElement(So,ls({key:"label-implicit",content:t},r)):t&&typeof t=="object"?C.createElement(So,ls({},t,{key:"label-implicit"},r)):null};function fZ(t){var{label:e,labelRef:n}=t,r=ML();return uZ(e,r,n)||null}var jw={},Lw={},aP;function dZ(){return aP||(aP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(Lw)),Lw}var Vw={},sP;function hZ(){return sP||(sP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(Vw)),Vw}var oP;function mZ(){return oP||(oP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=dZ(),n=hZ(),r=hE();function i(s){if(r.isArrayLike(s))return e.last(n.toArray(s))}t.last=i})(jw)),jw}var Uw,lP;function pZ(){return lP||(lP=1,Uw=mZ().last),Uw}var gZ=pZ();const yZ=Va(gZ);var vZ=["valueAccessor"],_Z=["dataKey","clockWise","id","textBreakAll","zIndex"];function dy(){return dy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dy.apply(null,arguments)}function cP(t,e){if(t==null)return{};var n,r,i=bZ(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function bZ(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var wZ=t=>Array.isArray(t.value)?yZ(t.value):t.value,kL=C.createContext(void 0),xZ=kL.Provider,DL=C.createContext(void 0);DL.Provider;function EZ(){return C.useContext(kL)}function SZ(){return C.useContext(DL)}function cg(t){var{valueAccessor:e=wZ}=t,n=cP(t,vZ),{dataKey:r,clockWise:i,id:s,textBreakAll:l,zIndex:u}=n,f=cP(n,_Z),h=EZ(),m=SZ(),p=h||m;return!p||!p.length?null:C.createElement(Ls,{zIndex:u??xr.label},C.createElement(_s,{className:"recharts-label-list"},p.map((v,b)=>{var E,w=Fn(r)?e(v,b):mr(v&&v.payload,r),S=Fn(s)?{}:{id:"".concat(s,"-").concat(b)};return C.createElement(So,dy({key:"label-".concat(b)},Ai(v),f,S,{fill:(E=n.fill)!==null&&E!==void 0?E:v.fill,parentViewBox:v.parentViewBox,value:w,textBreakAll:l,viewBox:v.viewBox,index:b,zIndex:0}))})))}cg.displayName="LabelList";function AZ(t){var{label:e}=t;return e?e===!0?C.createElement(cg,{key:"labelList-implicit"}):C.isValidElement(e)||RS(e)?C.createElement(cg,{key:"labelList-implicit",content:e}):typeof e=="object"?C.createElement(cg,dy({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}var TZ={radiusAxis:{},angleAxis:{}},jL=Vr({name:"polarAxis",initialState:TZ,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:Qhe,removeRadiusAxis:Jhe,addAngleAxis:Zhe,removeAngleAxis:eme}=jL.actions,CZ=jL.reducer,zw={exports:{}},Pt={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uP;function OZ(){if(uP)return Pt;uP=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),v=Symbol.for("react.view_transition"),b=Symbol.for("react.client.reference");function E(w){if(typeof w=="object"&&w!==null){var S=w.$$typeof;switch(S){case t:switch(w=w.type,w){case n:case i:case r:case f:case h:case v:return w;default:switch(w=w&&w.$$typeof,w){case l:case u:case p:case m:return w;case s:return w;default:return S}}case e:return S}}}return Pt.ContextConsumer=s,Pt.ContextProvider=l,Pt.Element=t,Pt.ForwardRef=u,Pt.Fragment=n,Pt.Lazy=p,Pt.Memo=m,Pt.Portal=e,Pt.Profiler=i,Pt.StrictMode=r,Pt.Suspense=f,Pt.SuspenseList=h,Pt.isContextConsumer=function(w){return E(w)===s},Pt.isContextProvider=function(w){return E(w)===l},Pt.isElement=function(w){return typeof w=="object"&&w!==null&&w.$$typeof===t},Pt.isForwardRef=function(w){return E(w)===u},Pt.isFragment=function(w){return E(w)===n},Pt.isLazy=function(w){return E(w)===p},Pt.isMemo=function(w){return E(w)===m},Pt.isPortal=function(w){return E(w)===e},Pt.isProfiler=function(w){return E(w)===i},Pt.isStrictMode=function(w){return E(w)===r},Pt.isSuspense=function(w){return E(w)===f},Pt.isSuspenseList=function(w){return E(w)===h},Pt.isValidElementType=function(w){return typeof w=="string"||typeof w=="function"||w===n||w===i||w===r||w===f||w===h||typeof w=="object"&&w!==null&&(w.$$typeof===p||w.$$typeof===m||w.$$typeof===l||w.$$typeof===s||w.$$typeof===u||w.$$typeof===b||w.getModuleId!==void 0)},Pt.typeOf=E,Pt}var fP;function IZ(){return fP||(fP=1,zw.exports=OZ()),zw.exports}var RZ=IZ(),dP=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",hP=null,Bw=null,LL=t=>{if(t===hP&&Array.isArray(Bw))return Bw;var e=[];return C.Children.forEach(t,n=>{Fn(n)||(RZ.isFragment(n)?e=e.concat(LL(n.props.children)):e.push(n))}),Bw=e,hP=t,e};function NZ(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(i=>dP(i)):r=[dP(e)],LL(t).forEach(i=>{var s=xu(i,"type.displayName")||xu(i,"type.name");s&&r.indexOf(s)!==-1&&n.push(i)}),n}var $w={},mP;function PZ(){return mP||(mP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var i;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const s=n[Symbol.toStringTag];return s==null||!((i=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&i.writable)?!1:n.toString()===`[object ${s}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}t.isPlainObject=e})($w)),$w}var qw,pP;function MZ(){return pP||(pP=1,qw=PZ().isPlainObject),qw}var kZ=MZ();const DZ=Va(kZ);function gP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gP(Object(n),!0).forEach(function(r){jZ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jZ(t,e,n){return(e=LZ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function LZ(t){var e=VZ(t,"string");return typeof e=="symbol"?e:e+""}function VZ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hy(){return hy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hy.apply(null,arguments)}var vP=(t,e,n,r,i)=>{var s=n-r,l;return l="M ".concat(t,",").concat(e),l+="L ".concat(t+n,",").concat(e),l+="L ".concat(t+n-s/2,",").concat(e+i),l+="L ".concat(t+n-s/2-r,",").concat(e+i),l+="L ".concat(t,",").concat(e," Z"),l},UZ={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},zZ=t=>{var e=ai(t,UZ),{x:n,y:r,upperWidth:i,lowerWidth:s,height:l,className:u}=e,{animationEasing:f,animationDuration:h,animationBegin:m,isUpdateAnimationActive:p}=e,v=C.useRef(null),[b,E]=C.useState(-1),w=C.useRef(i),S=C.useRef(s),P=C.useRef(l),M=C.useRef(n),j=C.useRef(r),$=OE(t,"trapezoid-");if(C.useEffect(()=>{if(v.current&&v.current.getTotalLength)try{var pe=v.current.getTotalLength();pe&&E(pe)}catch{}},[]),n!==+n||r!==+r||i!==+i||s!==+s||l!==+l||i===0&&s===0||l===0)return null;var L=$t("recharts-trapezoid",u);if(!p)return C.createElement("g",null,C.createElement("path",hy({},Ai(e),{className:L,d:vP(n,r,i,s,l)})));var q=w.current,I=S.current,R=P.current,N=M.current,z=j.current,k="0px ".concat(b===-1?1:b,"px"),B="".concat(b,"px 0px"),V=e4(["strokeDasharray"],h,f);return C.createElement(CE,{animationId:$,key:$,canBegin:b>0,duration:h,easing:f,isActive:p,begin:m},pe=>{var be=tr(q,i,pe),G=tr(I,s,pe),ne=tr(R,l,pe),de=tr(N,n,pe),ge=tr(z,r,pe);v.current&&(w.current=be,S.current=G,P.current=ne,M.current=de,j.current=ge);var Ee=pe>0?{transition:V,strokeDasharray:B}:{strokeDasharray:k};return C.createElement("path",hy({},Ai(e),{className:L,d:vP(de,ge,be,G,ne),ref:v,style:yP(yP({},Ee),e.style)}))})},BZ=["option","shapeType","propTransformer","activeClassName"];function $Z(t,e){if(t==null)return{};var n,r,i=qZ(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function qZ(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function _P(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function my(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_P(Object(n),!0).forEach(function(r){FZ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_P(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function FZ(t,e,n){return(e=HZ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function HZ(t){var e=GZ(t,"string");return typeof e=="symbol"?e:e+""}function GZ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function KZ(t,e){return my(my({},e),t)}function YZ(t,e){return t==="symbols"}function bP(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return C.createElement(i4,n);case"trapezoid":return C.createElement(zZ,n);case"sector":return C.createElement(o4,n);case"symbols":if(YZ(e))return C.createElement(qD,n);break;case"curve":return C.createElement(Zj,n);default:return null}}function WZ(t){return C.isValidElement(t)?t.props:t}function XZ(t){var{option:e,shapeType:n,propTransformer:r=KZ,activeClassName:i="recharts-active-shape"}=t,s=$Z(t,BZ),l;if(C.isValidElement(e))l=C.cloneElement(e,my(my({},s),WZ(e)));else if(typeof e=="function")l=e(s,s.index);else if(DZ(e)&&typeof e!="boolean"){var u=r(e,s);l=C.createElement(bP,{shapeType:n,elementProps:u})}else{var f=s;l=C.createElement(bP,{shapeType:n,elementProps:f})}return s.isActive?C.createElement(_s,{className:i},l):l}var VL=(t,e,n)=>{var r=cn();return(i,s)=>l=>{t==null||t(i,s,l),r(eL({activeIndex:String(s),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}},UL=t=>{var e=cn();return(n,r)=>i=>{t==null||t(n,r,i),e(vX())}},zL=(t,e,n)=>{var r=cn();return(i,s)=>l=>{t==null||t(i,s,l),r(_X({activeIndex:String(s),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}};function QZ(t){var{tooltipEntrySettings:e}=t,n=cn(),r=Ur(),i=C.useRef(null);return C.useLayoutEffect(()=>{r||(i.current===null?n(mX(e)):i.current!==e&&n(pX({prev:i.current,next:e})),i.current=e)},[e,n,r]),C.useLayoutEffect(()=>()=>{i.current&&(n(gX(i.current)),i.current=null)},[n]),null}function JZ(t){var{legendPayload:e}=t,n=cn(),r=Ur(),i=C.useRef(null);return C.useLayoutEffect(()=>{r||(i.current===null?n(W7(e)):i.current!==e&&n(X7({prev:i.current,next:e})),i.current=e)},[n,r,e]),C.useLayoutEffect(()=>()=>{i.current&&(n(Q7(i.current)),i.current=null)},[n]),null}var Fw,ZZ=()=>{var[t]=C.useState(()=>Gd("uid-"));return t},eee=(Fw=iB.useId)!==null&&Fw!==void 0?Fw:ZZ;function BL(t,e){var n=eee();return e||(t?"".concat(t,"-").concat(n):n)}var tee=C.createContext(void 0),nee=t=>{var{id:e,type:n,children:r}=t,i=BL("recharts-".concat(n),e);return C.createElement(tee.Provider,{value:i},r(i))},ree={cartesianItems:[],polarItems:[]},$L=Vr({name:"graphicalItems",initialState:ree,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:Gt()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:n,next:r}=e.payload,i=Ki(t).cartesianItems.indexOf(n);i>-1&&(t.cartesianItems[i]=r)},prepare:Gt()},removeCartesianGraphicalItem:{reducer(t,e){var n=Ki(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},prepare:Gt()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:Gt()},removePolarGraphicalItem:{reducer(t,e){var n=Ki(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)},prepare:Gt()}}}),{addCartesianGraphicalItem:iee,replaceCartesianGraphicalItem:aee,removeCartesianGraphicalItem:see,addPolarGraphicalItem:tme,removePolarGraphicalItem:nme}=$L.actions,oee=$L.reducer,lee=t=>{var e=cn(),n=C.useRef(null);return C.useLayoutEffect(()=>{n.current===null?e(iee(t)):n.current!==t&&e(aee({prev:n.current,next:t})),n.current=t},[e,t]),C.useLayoutEffect(()=>()=>{n.current&&(e(see(n.current)),n.current=null)},[e]),null},cee=C.memo(lee);function wP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wP(Object(n),!0).forEach(function(r){uee(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uee(t,e,n){return(e=fee(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fee(t){var e=dee(t,"string");return typeof e=="symbol"?e:e+""}function dee(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hee={xAxis:{},yAxis:{},zAxis:{}},qL=Vr({name:"cartesianAxis",initialState:hee,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:Gt()},replaceXAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.xAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.xAxis[n.id],t.xAxis[r.id]=r)},prepare:Gt()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:Gt()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:Gt()},replaceYAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.yAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.yAxis[n.id],t.yAxis[r.id]=r)},prepare:Gt()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:Gt()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:Gt()},replaceZAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.zAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.zAxis[n.id],t.zAxis[r.id]=r)},prepare:Gt()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:Gt()},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload,i=t.yAxis[n];if(i){var s=i.widthHistory||[];if(s.length===3&&s[0]===s[2]&&r===s[1]&&r!==i.width&&Math.abs(r-s[0])<=1)return;var l=[...s,r].slice(-3);t.yAxis[n]=xP(xP({},t.yAxis[n]),{},{width:r,widthHistory:l})}}}}),{addXAxis:mee,replaceXAxis:pee,removeXAxis:gee,addYAxis:yee,replaceYAxis:vee,removeYAxis:_ee,addZAxis:rme,replaceZAxis:ime,removeZAxis:ame,updateYAxisWidth:bee}=qL.actions,wee=qL.reducer,xee=ae([Hn],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),Eee=ae([xee,Ns,Ps],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),FL=()=>Ue(Eee),See="Invariant failed";function Aee(t,e){throw new Error(See)}var Tee=["x","y"];function hx(){return hx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hx.apply(null,arguments)}function EP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?EP(Object(n),!0).forEach(function(r){Cee(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Cee(t,e,n){return(e=Oee(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Oee(t){var e=Iee(t,"string");return typeof e=="symbol"?e:e+""}function Iee(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ree(t,e){if(t==null)return{};var n,r,i=Nee(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Nee(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Pee(t,e){var{x:n,y:r}=t,i=Ree(t,Tee),s="".concat(n),l=parseInt(s,10),u="".concat(r),f=parseInt(u,10),h="".concat(e.height||i.height),m=parseInt(h,10),p="".concat(e.width||i.width),v=parseInt(p,10);return hd(hd(hd(hd(hd({},e),i),l?{x:l}:{}),f?{y:f}:{}),{},{height:m,width:v,name:e.name,radius:e.radius})}function py(t){return C.createElement(XZ,hx({shapeType:"rectangle",propTransformer:Pee,activeClassName:"recharts-active-bar"},t))}var Mee=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(Me(e))return e;var s=Me(r)||Fn(r);return s?e(r,i):(s||Aee(),n)}},kee={},HL=Vr({name:"errorBars",initialState:kee,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:r,next:i}=e.payload;t[n]&&(t[n]=t[n].map(s=>s.dataKey===r.dataKey&&s.direction===r.direction?i:s))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:sme,replaceErrorBar:ome,removeErrorBar:lme}=HL.actions,Dee=HL.reducer,jee=["children"];function Lee(t,e){if(t==null)return{};var n,r,i=Vee(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Vee(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Uee={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},zee=C.createContext(Uee);function Bee(t){var{children:e}=t,n=Lee(t,jee);return C.createElement(zee.Provider,{value:n},e)}function GL(t,e){var n,r,i=Ue(h=>ks(h,t)),s=Ue(h=>Ds(h,e)),l=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:Vn.allowDataOverflow,u=(r=s==null?void 0:s.allowDataOverflow)!==null&&r!==void 0?r:Un.allowDataOverflow,f=l||u;return{needClip:f,needClipX:l,needClipY:u}}function $ee(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,i=FL(),{needClipX:s,needClipY:l,needClip:u}=GL(e,n);if(!u||!i)return null;var{x:f,y:h,width:m,height:p}=i;return C.createElement("clipPath",{id:"clipPath-".concat(r)},C.createElement("rect",{x:s?f:f-m/2,y:l?h:h-p/2,width:s?m:m*2,height:l?p:p*2}))}function qee(t,e){return t&&typeof t=="object"&&"zIndex"in t&&typeof t.zIndex=="number"&&ln(t.zIndex)?t.zIndex:e}var Hw={exports:{}},Gw={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SP;function Fee(){if(SP)return Gw;SP=1;var t=Uu();function e(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,i=t.useRef,s=t.useEffect,l=t.useMemo,u=t.useDebugValue;return Gw.useSyncExternalStoreWithSelector=function(f,h,m,p,v){var b=i(null);if(b.current===null){var E={hasValue:!1,value:null};b.current=E}else E=b.current;b=l(function(){function S(L){if(!P){if(P=!0,M=L,L=p(L),v!==void 0&&E.hasValue){var q=E.value;if(v(q,L))return j=q}return j=L}if(q=j,n(M,L))return q;var I=p(L);return v!==void 0&&v(q,I)?(M=L,q):(M=L,j=I)}var P=!1,M,j,$=m===void 0?null:m;return[function(){return S(h())},$===null?void 0:function(){return S($())}]},[h,m,p,v]);var w=r(f,b[0],b[1]);return s(function(){E.hasValue=!0,E.value=w},[w]),u(w),w},Gw}var AP;function Hee(){return AP||(AP=1,Hw.exports=Fee()),Hw.exports}Hee();function Gee(t){t()}function Kee(){let t=null,e=null;return{clear(){t=null,e=null},notify(){Gee(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var TP={notify(){},get:()=>[]};function Yee(t,e){let n,r=TP,i=0,s=!1;function l(w){m();const S=r.subscribe(w);let P=!1;return()=>{P||(P=!0,S(),p())}}function u(){r.notify()}function f(){E.onStateChange&&E.onStateChange()}function h(){return s}function m(){i++,n||(n=t.subscribe(f),r=Kee())}function p(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=TP)}function v(){s||(s=!0,m())}function b(){s&&(s=!1,p())}const E={addNestedSub:l,notifyNestedSubs:u,handleChangeWrapper:f,isSubscribed:h,trySubscribe:v,tryUnsubscribe:b,getListeners:()=>r};return E}var Wee=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Xee=Wee(),Qee=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Jee=Qee(),Zee=()=>Xee||Jee?C.useLayoutEffect:C.useEffect,ete=Zee();function CP(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function tte(t,e){if(CP(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!CP(t[n[i]],e[n[i]]))return!1;return!0}var Kw=Symbol.for("react-redux-context"),Yw=typeof globalThis<"u"?globalThis:{};function nte(){if(!C.createContext)return{};const t=Yw[Kw]??(Yw[Kw]=new Map);let e=t.get(C.createContext);return e||(e=C.createContext(null),t.set(C.createContext,e)),e}var rte=nte();function ite(t){const{children:e,context:n,serverState:r,store:i}=t,s=C.useMemo(()=>{const f=Yee(i);return{store:i,subscription:f,getServerState:r?()=>r:void 0}},[i,r]),l=C.useMemo(()=>i.getState(),[i]);ete(()=>{const{subscription:f}=s;return f.onStateChange=f.notifyNestedSubs,f.trySubscribe(),l!==i.getState()&&f.notifyNestedSubs(),()=>{f.tryUnsubscribe(),f.onStateChange=void 0}},[s,l]);const u=n||rte;return C.createElement(u.Provider,{value:s},e)}var ate=ite,ste=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle"]);function ote(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function NS(t,e){var n=new Set([...Object.keys(t),...Object.keys(e)]);for(var r of n)if(ste.has(r)){if(t[r]==null&&e[r]==null)continue;if(!tte(t[r],e[r]))return!1}else if(!ote(t[r],e[r]))return!1;return!0}var lte=["onMouseEnter","onMouseLeave","onClick"],cte=["value","background","tooltipPosition"],ute=["id"],fte=["onMouseEnter","onClick","onMouseLeave"];function Ts(){return Ts=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ts.apply(null,arguments)}function OP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function br(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OP(Object(n),!0).forEach(function(r){dte(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dte(t,e,n){return(e=hte(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hte(t){var e=mte(t,"string");return typeof e=="symbol"?e:e+""}function mte(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gy(t,e){if(t==null)return{};var n,r,i=pte(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function pte(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var gte=t=>{var{dataKey:e,name:n,fill:r,legendType:i,hide:s}=t;return[{inactive:s,dataKey:e,type:i,color:r,value:jj(n,e),payload:t}]},yte=C.memo(t=>{var{dataKey:e,stroke:n,strokeWidth:r,fill:i,name:s,hide:l,unit:u,tooltipType:f}=t,h={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:e,nameKey:void 0,name:jj(s,e),hide:l,type:f,color:i,unit:u}};return C.createElement(QZ,{tooltipEntrySettings:h})});function vte(t){var e=Ue(Nu),{data:n,dataKey:r,background:i,allOtherBarProps:s}=t,{onMouseEnter:l,onMouseLeave:u,onClick:f}=s,h=gy(s,lte),m=VL(l,r),p=UL(u),v=zL(f,r);if(!i||n==null)return null;var b=aE(i);return C.createElement(Ls,{zIndex:qee(i,xr.barBackground)},n.map((E,w)=>{var{value:S,background:P,tooltipPosition:M}=E,j=gy(E,cte);if(!P)return null;var $=m(E,w),L=p(E,w),q=v(E,w),I=br(br(br(br(br({option:i,isActive:String(w)===e},j),{},{fill:"#eee"},P),b),dE(h,E,w)),{},{onMouseEnter:$,onMouseLeave:L,onClick:q,dataKey:r,index:w,className:"recharts-bar-background-rectangle"});return C.createElement(py,Ts({key:"background-bar-".concat(w)},I))}))}function _te(t){var{showLabels:e,children:n,rects:r}=t,i=r==null?void 0:r.map(s=>{var l={x:s.x,y:s.y,width:s.width,lowerWidth:s.width,upperWidth:s.width,height:s.height};return br(br({},l),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:l,fill:s.fill})});return C.createElement(xZ,{value:e?i:void 0},n)}function bte(t){var{shape:e,activeBar:n,baseProps:r,entry:i,index:s,dataKey:l}=t,u=Ue(Nu),f=Ue(mL),h=n&&String(s)===u&&(f==null||l===f),m=h?n:e;return h?C.createElement(Ls,{zIndex:xr.activeBar},C.createElement(py,Ts({},r,{name:String(r.name)},i,{isActive:h,option:m,index:s,dataKey:l}))):C.createElement(py,Ts({},r,{name:String(r.name)},i,{isActive:h,option:m,index:s,dataKey:l}))}function wte(t){var{shape:e,baseProps:n,entry:r,index:i,dataKey:s}=t;return C.createElement(py,Ts({},n,{name:String(n.name)},r,{isActive:!1,option:e,index:i,dataKey:s}))}function xte(t){var e,{data:n,props:r}=t,i=(e=vs(r))!==null&&e!==void 0?e:{},{id:s}=i,l=gy(i,ute),{shape:u,dataKey:f,activeBar:h}=r,{onMouseEnter:m,onClick:p,onMouseLeave:v}=r,b=gy(r,fte),E=VL(m,f),w=UL(v),S=zL(p,f);return n?C.createElement(C.Fragment,null,n.map((P,M)=>C.createElement(_s,Ts({key:"rectangle-".concat(P==null?void 0:P.x,"-").concat(P==null?void 0:P.y,"-").concat(P==null?void 0:P.value,"-").concat(M),className:"recharts-bar-rectangle"},dE(b,P,M),{onMouseEnter:E(P,M),onMouseLeave:w(P,M),onClick:S(P,M)}),h?C.createElement(bte,{shape:u,activeBar:h,baseProps:l,entry:P,index:M,dataKey:f}):C.createElement(wte,{shape:u,baseProps:l,entry:P,index:M,dataKey:f})))):null}function Ete(t){var{props:e,previousRectanglesRef:n}=t,{data:r,layout:i,isAnimationActive:s,animationBegin:l,animationDuration:u,animationEasing:f,onAnimationEnd:h,onAnimationStart:m}=e,p=n.current,v=OE(e,"recharts-bar-"),[b,E]=C.useState(!1),w=!b,S=C.useCallback(()=>{typeof h=="function"&&h(),E(!1)},[h]),P=C.useCallback(()=>{typeof m=="function"&&m(),E(!0)},[m]);return C.createElement(_te,{showLabels:w,rects:r},C.createElement(CE,{animationId:v,begin:l,duration:u,isActive:s,easing:f,onAnimationEnd:S,onAnimationStart:P,key:v},M=>{var j=M===1?r:r==null?void 0:r.map(($,L)=>{var q=p&&p[L];if(q)return br(br({},$),{},{x:tr(q.x,$.x,M),y:tr(q.y,$.y,M),width:tr(q.width,$.width,M),height:tr(q.height,$.height,M)});if(i==="horizontal"){var I=tr(0,$.height,M),R=tr($.stackedBarStart,$.y,M);return br(br({},$),{},{y:R,height:I})}var N=tr(0,$.width,M),z=tr($.stackedBarStart,$.x,M);return br(br({},$),{},{width:N,x:z})});return M>0&&(n.current=j??null),j==null?null:C.createElement(_s,null,C.createElement(xte,{props:e,data:j}))}),C.createElement(AZ,{label:e.label}),e.children)}function Ste(t){var e=C.useRef(null);return C.createElement(Ete,{previousRectanglesRef:e,props:t})}var KL=0,Ate=(t,e)=>{var n=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:n,errorVal:mr(t,e)}};class Tte extends C.PureComponent{render(){var{hide:e,data:n,dataKey:r,className:i,xAxisId:s,yAxisId:l,needClip:u,background:f,id:h}=this.props;if(e||n==null)return null;var m=$t("recharts-bar",i),p=h;return C.createElement(_s,{className:m,id:h},u&&C.createElement("defs",null,C.createElement($ee,{clipPathId:p,xAxisId:s,yAxisId:l})),C.createElement(_s,{className:"recharts-bar-rectangles",clipPath:u?"url(#clipPath-".concat(p,")"):void 0},C.createElement(vte,{data:n,dataKey:r,background:f,allOtherBarProps:this.props}),C.createElement(Ste,this.props)))}}var Cte={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:KL,xAxisId:0,yAxisId:0,zIndex:xr.bar};function Ote(t){var{xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:l,animationBegin:u,animationDuration:f,animationEasing:h,isAnimationActive:m}=t,{needClip:p}=GL(e,n),v=yv(),b=Ur(),E=NZ(t.children,OS),w=Ue(M=>nne(M,e,n,b,t.id,E));if(v!=="vertical"&&v!=="horizontal")return null;var S,P=w==null?void 0:w[0];return P==null||P.height==null||P.width==null?S=0:S=v==="vertical"?P.height/2:P.width/2,C.createElement(Bee,{xAxisId:e,yAxisId:n,data:w,dataPointFormatter:Ate,errorBarOffset:S},C.createElement(Tte,Ts({},t,{layout:v,needClip:p,data:w,xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:l,animationBegin:u,animationDuration:f,animationEasing:h,isAnimationActive:m})))}function Ite(t){var{layout:e,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:s,xAxis:l,yAxis:u,xAxisTicks:f,yAxisTicks:h,stackedData:m,displayedData:p,offset:v,cells:b,parentViewBox:E,dataStartIndex:w}=t,S=e==="horizontal"?u:l,P=m?S.scale.domain():null,M=JF({numericAxis:S}),j=S.scale(M);return p.map(($,L)=>{var q,I,R,N,z,k;m?q=GF(m[L+w],P):(q=mr($,n),Array.isArray(q)||(q=[M,q]));var B=Mee(r,KL)(q[1],L);if(e==="horizontal"){var V,[pe,be]=[u.scale(q[0]),u.scale(q[1])];I=Z2({axis:l,ticks:f,bandSize:s,offset:i.offset,entry:$,index:L}),R=(V=be??pe)!==null&&V!==void 0?V:void 0,N=i.size;var G=pe-be;if(z=Wi(G)?0:G,k={x:I,y:v.top,width:N,height:v.height},Math.abs(B)>0&&Math.abs(z)<Math.abs(B)){var ne=jr(z||B)*(Math.abs(B)-Math.abs(z));R-=ne,z+=ne}}else{var[de,ge]=[l.scale(q[0]),l.scale(q[1])];if(I=de,R=Z2({axis:u,ticks:h,bandSize:s,offset:i.offset,entry:$,index:L}),N=ge-de,z=i.size,k={x:v.left,y:R,width:v.width,height:z},Math.abs(B)>0&&Math.abs(N)<Math.abs(B)){var Ee=jr(N||B)*(Math.abs(B)-Math.abs(N));N+=Ee}}if(I==null||R==null||N==null||z==null)return null;var F=br(br({},$),{},{stackedBarStart:j,x:I,y:R,width:N,height:z,value:m?q:q[1],payload:$,background:k,tooltipPosition:{x:I+N/2,y:R+z/2},parentViewBox:E},b&&b[L]&&b[L].props);return F}).filter(Boolean)}function Rte(t){var e=ai(t,Cte),n=Ur();return C.createElement(nee,{id:e.id,type:"bar"},r=>C.createElement(C.Fragment,null,C.createElement(JZ,{legendPayload:gte(e)}),C.createElement(yte,{dataKey:e.dataKey,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType}),C.createElement(cee,{type:"bar",id:r,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:QF(e.stackId),hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:n}),C.createElement(Ls,{zIndex:e.zIndex},C.createElement(Ote,Ts({},e,{id:r})))))}var YL=C.memo(Rte,NS);YL.displayName="Bar";function IP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $p(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IP(Object(n),!0).forEach(function(r){Nte(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Nte(t,e,n){return(e=Pte(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pte(t){var e=Mte(t,"string");return typeof e=="symbol"?e:e+""}function Mte(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var kte=(t,e)=>e,Dte=(t,e,n)=>n,jte=(t,e,n,r)=>r,Lte=(t,e,n,r,i)=>i,Bh=ae([cS,Lte],(t,e)=>t.filter(n=>n.type==="bar").find(n=>n.id===e)),Vte=ae([Bh],t=>t==null?void 0:t.maxBarSize),Ute=(t,e,n,r,i,s)=>s,RP=(t,e,n)=>{var r=n??t;if(!Fn(r))return Xi(r,e,0)},zte=ae([Tt,cS,kte,Dte,jte],(t,e,n,r,i)=>e.filter(s=>t==="horizontal"?s.xAxisId===n:s.yAxisId===r).filter(s=>s.isPanorama===i).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),Bte=(t,e,n,r)=>{var i=Tt(t);return i==="horizontal"?sx(t,"yAxis",n,r):sx(t,"xAxis",e,r)},$te=(t,e,n)=>{var r=Tt(t);return r==="horizontal"?RN(t,"xAxis",e):RN(t,"yAxis",n)},qte=(t,e,n)=>{var r={},i=t.filter(Pv),s=t.filter(h=>h.stackId==null),l=i.reduce((h,m)=>(h[m.stackId]||(h[m.stackId]=[]),h[m.stackId].push(m),h),r),u=Object.entries(l).map(h=>{var[m,p]=h,v=p.map(E=>E.dataKey),b=RP(e,n,p[0].barSize);return{stackId:m,dataKeys:v,barSize:b}}),f=s.map(h=>{var m=[h.dataKey].filter(v=>v!=null),p=RP(e,n,h.barSize);return{stackId:void 0,dataKeys:m,barSize:p}});return[...u,...f]},Fte=ae([zte,oW,$te],qte),Hte=(t,e,n,r,i)=>{var s,l,u=Bh(t,e,n,r,i);if(u!=null){var f=Tt(t),h=r3(t),{maxBarSize:m}=u,p=Fn(m)?h:m,v,b;return f==="horizontal"?(v=Ru(t,"xAxis",e,r),b=Iu(t,"xAxis",e,r)):(v=Ru(t,"yAxis",n,r),b=Iu(t,"yAxis",n,r)),(s=(l=qg(v,b,!0))!==null&&l!==void 0?l:p)!==null&&s!==void 0?s:0}},WL=(t,e,n,r)=>{var i=Tt(t),s,l;return i==="horizontal"?(s=Ru(t,"xAxis",e,r),l=Iu(t,"xAxis",e,r)):(s=Ru(t,"yAxis",n,r),l=Iu(t,"yAxis",n,r)),qg(s,l)};function Gte(t,e,n,r,i){var s=r.length;if(!(s<1)){var l=Xi(t,n,0,!0),u,f=[];if(ln(r[0].barSize)){var h=!1,m=n/s,p=r.reduce((P,M)=>P+(M.barSize||0),0);p+=(s-1)*l,p>=n&&(p-=(s-1)*l,l=0),p>=n&&m>0&&(h=!0,m*=.9,p=s*m);var v=(n-p)/2>>0,b={offset:v-l,size:0};u=r.reduce((P,M)=>{var j,$={stackId:M.stackId,dataKeys:M.dataKeys,position:{offset:b.offset+b.size+l,size:h?m:(j=M.barSize)!==null&&j!==void 0?j:0}},L=[...P,$];return b=L[L.length-1].position,L},f)}else{var E=Xi(e,n,0,!0);n-2*E-(s-1)*l<=0&&(l=0);var w=(n-2*E-(s-1)*l)/s;w>1&&(w>>=0);var S=ln(i)?Math.min(w,i):w;u=r.reduce((P,M,j)=>[...P,{stackId:M.stackId,dataKeys:M.dataKeys,position:{offset:E+(w+l)*j+(w-S)/2,size:S}}],f)}return u}}var Kte=(t,e,n,r,i,s,l)=>{var u=Fn(l)?e:l,f=Gte(n,r,i!==s?i:s,t,u);return i!==s&&f!=null&&(f=f.map(h=>$p($p({},h),{},{position:$p($p({},h.position),{},{offset:h.position.offset-i/2})}))),f},Yte=ae([Fte,r3,sW,i3,Hte,WL,Vte],Kte),Wte=(t,e,n,r)=>Ru(t,"xAxis",e,r),Xte=(t,e,n,r)=>Ru(t,"yAxis",n,r),Qte=(t,e,n,r)=>Iu(t,"xAxis",e,r),Jte=(t,e,n,r)=>Iu(t,"yAxis",n,r),Zte=ae([Yte,Bh],(t,e)=>{if(!(t==null||e==null)){var n=t.find(r=>r.stackId===e.stackId&&e.dataKey!=null&&r.dataKeys.includes(e.dataKey));if(n!=null)return n.position}}),ene=(t,e)=>{var n=oS(e);if(!(!t||n==null||e==null)){var{stackId:r}=e;if(r!=null){var i=t[r];if(i){var{stackedData:s}=i;if(s)return s.find(l=>l.key===n)}}}},tne=ae([Bte,Bh],ene),nne=ae([Hn,EE,Wte,Xte,Qte,Jte,Zte,Tt,JE,WL,tne,Bh,Ute],(t,e,n,r,i,s,l,u,f,h,m,p,v)=>{var{chartData:b,dataStartIndex:E,dataEndIndex:w}=f;if(!(p==null||l==null||e==null||u!=="horizontal"&&u!=="vertical"||n==null||r==null||i==null||s==null||h==null)){var{data:S}=p,P;if(S!=null&&S.length>0?P=S:P=b==null?void 0:b.slice(E,w+1),P!=null)return Ite({layout:u,barSettings:p,pos:l,parentViewBox:e,bandSize:h,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:s,stackedData:m,displayedData:P,offset:t,cells:v,dataStartIndex:E})}}),rne=t=>{var{chartData:e}=t,n=cn(),r=Ur();return C.useEffect(()=>r?()=>{}:(n(qN(e)),()=>{n(qN(void 0))}),[e,n,r]),null},NP={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},XL=Vr({name:"brush",initialState:NP,reducers:{setBrushSettings(t,e){return e.payload==null?NP:e.payload}}}),{setBrushSettings:cme}=XL.actions,ine=XL.reducer;function ane(t,e,n){return(e=sne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sne(t){var e=one(t,"string");return typeof e=="symbol"?e:e+""}function one(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class PS{static create(e){return new PS(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(r)switch(r){case"start":return this.scale(e);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(e)+s}default:return this.scale(e)}if(n){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+l}return this.scale(e)}}isInRange(e){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?e>=r&&e<=i:e>=i&&e<=r}}ane(PS,"EPS",1e-4);function lne(t){return(t%180+180)%180}var cne=function(e){var{width:n,height:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=lne(i),l=s*Math.PI/180,u=Math.atan(r/n),f=l>u&&l<Math.PI-u?r/Math.sin(l):n/Math.cos(l);return Math.abs(f)},une={dots:[],areas:[],lines:[]},QL=Vr({name:"referenceElements",initialState:une,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=Ki(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=Ki(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=Ki(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:ume,removeDot:fme,addArea:dme,removeArea:hme,addLine:mme,removeLine:pme}=QL.actions,fne=QL.reducer,dne=C.createContext(void 0),hne=t=>{var{children:e}=t,[n]=C.useState("".concat(Gd("recharts"),"-clip")),r=FL();if(r==null)return null;var{x:i,y:s,width:l,height:u}=r;return C.createElement(dne.Provider,{value:n},C.createElement("defs",null,C.createElement("clipPath",{id:n},C.createElement("rect",{x:i,y:s,height:u,width:l}))),e)};function JL(t,e){if(e<1)return[];if(e===1)return t;for(var n=[],r=0;r<t.length;r+=e)n.push(t[r]);return n}function mne(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return cne(r,n)}function pne(t,e,n){var r=n==="width",{x:i,y:s,width:l,height:u}=t;return e===1?{start:r?i:s,end:r?i+l:s+u}:{start:r?i+l:s+u,end:r?i:s}}function yy(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var s=n();return t*(e-t*s/2-r)>=0&&t*(e+t*s/2-i)<=0}function gne(t,e){return JL(t,e+1)}function yne(t,e,n,r,i){for(var s=(r||[]).slice(),{start:l,end:u}=e,f=0,h=1,m=l,p=function(){var E=r==null?void 0:r[f];if(E===void 0)return{v:JL(r,h)};var w=f,S,P=()=>(S===void 0&&(S=n(E,w)),S),M=E.coordinate,j=f===0||yy(t,M,P,m,u);j||(f=0,m=l,h+=1),j&&(m=M+t*(P()/2+i),f+=h)},v;h<=s.length;)if(v=p(),v)return v.v;return[]}function PP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function cr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PP(Object(n),!0).forEach(function(r){vne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vne(t,e,n){return(e=_ne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _ne(t){var e=bne(t,"string");return typeof e=="symbol"?e:e+""}function bne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wne(t,e,n,r,i){for(var s=(r||[]).slice(),l=s.length,{start:u}=e,{end:f}=e,h=function(v){var b=s[v],E,w=()=>(E===void 0&&(E=n(b,v)),E);if(v===l-1){var S=t*(b.coordinate+t*w()/2-f);s[v]=b=cr(cr({},b),{},{tickCoord:S>0?b.coordinate-S*t:b.coordinate})}else s[v]=b=cr(cr({},b),{},{tickCoord:b.coordinate});if(b.tickCoord!=null){var P=yy(t,b.tickCoord,w,u,f);P&&(f=b.tickCoord-t*(w()/2+i),s[v]=cr(cr({},b),{},{isShow:!0}))}},m=l-1;m>=0;m--)h(m);return s}function xne(t,e,n,r,i,s){var l=(r||[]).slice(),u=l.length,{start:f,end:h}=e;if(s){var m=r[u-1],p=n(m,u-1),v=t*(m.coordinate+t*p/2-h);if(l[u-1]=m=cr(cr({},m),{},{tickCoord:v>0?m.coordinate-v*t:m.coordinate}),m.tickCoord!=null){var b=yy(t,m.tickCoord,()=>p,f,h);b&&(h=m.tickCoord-t*(p/2+i),l[u-1]=cr(cr({},m),{},{isShow:!0}))}}for(var E=s?u-1:u,w=function(M){var j=l[M],$,L=()=>($===void 0&&($=n(j,M)),$);if(M===0){var q=t*(j.coordinate-t*L()/2-f);l[M]=j=cr(cr({},j),{},{tickCoord:q<0?j.coordinate-q*t:j.coordinate})}else l[M]=j=cr(cr({},j),{},{tickCoord:j.coordinate});if(j.tickCoord!=null){var I=yy(t,j.tickCoord,L,f,h);I&&(f=j.tickCoord+t*(L()/2+i),l[M]=cr(cr({},j),{},{isShow:!0}))}},S=0;S<E;S++)w(S);return l}function MS(t,e,n){var{tick:r,ticks:i,viewBox:s,minTickGap:l,orientation:u,interval:f,tickFormatter:h,unit:m,angle:p}=t;if(!i||!i.length||!r)return[];if(Me(f)||Ch.isSsr){var v;return(v=gne(i,Me(f)?f:0))!==null&&v!==void 0?v:[]}var b=[],E=u==="top"||u==="bottom"?"width":"height",w=m&&E==="width"?kd(m,{fontSize:e,letterSpacing:n}):{width:0,height:0},S=(j,$)=>{var L=typeof h=="function"?h(j.value,$):j.value;return E==="width"?mne(kd(L,{fontSize:e,letterSpacing:n}),w,p):kd(L,{fontSize:e,letterSpacing:n})[E]},P=i.length>=2?jr(i[1].coordinate-i[0].coordinate):1,M=pne(s,P,E);return f==="equidistantPreserveStart"?yne(P,M,S,i,l):(f==="preserveStart"||f==="preserveStartEnd"?b=xne(P,M,S,i,l,f==="preserveStartEnd"):b=wne(P,M,S,i,l),b.filter(j=>j.isShow))}var Ene=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:s=0}=t,l=0;if(e){Array.from(e).forEach(m=>{if(m){var p=m.getBoundingClientRect();p.width>l&&(l=p.width)}});var u=n?n.getBoundingClientRect().width:0,f=i+s,h=l+f+u+(n?r:0);return Math.round(h)}return 0},Sne=["axisLine","width","height","className","hide","ticks","axisType"];function Ane(t,e){if(t==null)return{};var n,r,i=Tne(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Tne(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Hl(){return Hl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hl.apply(null,arguments)}function MP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _n(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MP(Object(n),!0).forEach(function(r){Cne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Cne(t,e,n){return(e=One(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function One(t){var e=Ine(t,"string");return typeof e=="symbol"?e:e+""}function Ine(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ps={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:xr.axis};function Rne(t){var{x:e,y:n,width:r,height:i,orientation:s,mirror:l,axisLine:u,otherSvgProps:f}=t;if(!u)return null;var h=_n(_n(_n({},f),vs(u)),{},{fill:"none"});if(s==="top"||s==="bottom"){var m=+(s==="top"&&!l||s==="bottom"&&l);h=_n(_n({},h),{},{x1:e,y1:n+m*i,x2:e+r,y2:n+m*i})}else{var p=+(s==="left"&&!l||s==="right"&&l);h=_n(_n({},h),{},{x1:e+p*r,y1:n,x2:e+p*r,y2:n+i})}return C.createElement("line",Hl({},h,{className:$t("recharts-cartesian-axis-line",xu(u,"className"))}))}function Nne(t,e,n,r,i,s,l,u,f){var h,m,p,v,b,E,w=u?-1:1,S=t.tickSize||l,P=Me(t.tickCoord)?t.tickCoord:t.coordinate;switch(s){case"top":h=m=t.coordinate,v=n+ +!u*i,p=v-w*S,E=p-w*f,b=P;break;case"left":p=v=t.coordinate,m=e+ +!u*r,h=m-w*S,b=h-w*f,E=P;break;case"right":p=v=t.coordinate,m=e+ +u*r,h=m+w*S,b=h+w*f,E=P;break;default:h=m=t.coordinate,v=n+ +u*i,p=v+w*S,E=p+w*f,b=P;break}return{line:{x1:h,y1:p,x2:m,y2:v},tick:{x:b,y:E}}}function Pne(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function Mne(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function kne(t){var{option:e,tickProps:n,value:r}=t,i,s=$t(n.className,"recharts-cartesian-axis-tick-value");if(C.isValidElement(e))i=C.cloneElement(e,_n(_n({},n),{},{className:s}));else if(typeof e=="function")i=e(_n(_n({},n),{},{className:s}));else{var l="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(l=$t(l,e==null?void 0:e.className)),i=C.createElement(IS,Hl({},n,{className:l}),r)}return i}var Dne=C.forwardRef((t,e)=>{var{ticks:n=[],tick:r,tickLine:i,stroke:s,tickFormatter:l,unit:u,padding:f,tickTextProps:h,orientation:m,mirror:p,x:v,y:b,width:E,height:w,tickSize:S,tickMargin:P,fontSize:M,letterSpacing:j,getTicksConfig:$,events:L,axisType:q}=t,I=MS(_n(_n({},$),{},{ticks:n}),M,j),R=Pne(m,p),N=Mne(m,p),z=vs($),k=aE(r),B={};typeof i=="object"&&(B=i);var V=_n(_n({},z),{},{fill:"none"},B),pe=I.map(ne=>_n({entry:ne},Nne(ne,v,b,E,w,m,S,p,P))),be=pe.map(ne=>{var{entry:de,line:ge}=ne;return C.createElement(_s,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(de.value,"-").concat(de.coordinate,"-").concat(de.tickCoord)},i&&C.createElement("line",Hl({},V,ge,{className:$t("recharts-cartesian-axis-tick-line",xu(i,"className"))})))}),G=pe.map((ne,de)=>{var{entry:ge,tick:Ee}=ne,F=_n(_n(_n(_n({textAnchor:R,verticalAnchor:N},z),{},{stroke:"none",fill:s},k),Ee),{},{index:de,payload:ge,visibleTicksCount:I.length,tickFormatter:l,padding:f},h);return C.createElement(_s,Hl({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(ge.value,"-").concat(ge.coordinate,"-").concat(ge.tickCoord)},dE(L,ge,de)),r&&C.createElement(kne,{option:r,tickProps:F,value:"".concat(typeof l=="function"?l(ge.value,de):ge.value).concat(u||"")}))});return C.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(q,"-ticks")},G.length>0&&C.createElement(Ls,{zIndex:xr.label},C.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(q,"-tick-labels"),ref:e},G)),be.length>0&&C.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(q,"-tick-lines")},be))}),jne=C.forwardRef((t,e)=>{var{axisLine:n,width:r,height:i,className:s,hide:l,ticks:u,axisType:f}=t,h=Ane(t,Sne),[m,p]=C.useState(""),[v,b]=C.useState(""),E=C.useRef(null);C.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var S;return Ene({ticks:E.current,label:(S=t.labelRef)===null||S===void 0?void 0:S.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var w=C.useCallback(S=>{if(S){var P=S.getElementsByClassName("recharts-cartesian-axis-tick-value");E.current=P;var M=P[0];if(M){var j=window.getComputedStyle(M),$=j.fontSize,L=j.letterSpacing;($!==m||L!==v)&&(p($),b(L))}}},[m,v]);return l||r!=null&&r<=0||i!=null&&i<=0?null:C.createElement(Ls,{zIndex:t.zIndex},C.createElement(_s,{className:$t("recharts-cartesian-axis",s)},C.createElement(Rne,{x:t.x,y:t.y,width:r,height:i,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:vs(t)}),C.createElement(Dne,{ref:w,axisType:f,events:h,fontSize:m,getTicksConfig:t,height:t.height,letterSpacing:v,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:u,unit:t.unit,width:t.width,x:t.x,y:t.y}),C.createElement(tZ,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},C.createElement(fZ,{label:t.label,labelRef:t.labelRef}),t.children)))}),kS=C.forwardRef((t,e)=>{var n=ai(t,ps);return C.createElement(jne,Hl({},n,{ref:e}))});kS.displayName="CartesianAxis";var Lne=["x1","y1","x2","y2","key"],Vne=["offset"],Une=["xAxisId","yAxisId"],zne=["xAxisId","yAxisId"];function kP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kP(Object(n),!0).forEach(function(r){Bne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Bne(t,e,n){return(e=$ne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $ne(t){var e=qne(t,"string");return typeof e=="symbol"?e:e+""}function qne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ml(){return Ml=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ml.apply(null,arguments)}function vy(t,e){if(t==null)return{};var n,r,i=Fne(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Fne(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Hne=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:r,y:i,width:s,height:l,ry:u}=t;return C.createElement("rect",{x:r,y:i,ry:u,width:s,height:l,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function ZL(t){var{option:e,lineItemProps:n}=t,r;if(C.isValidElement(e))r=C.cloneElement(e,n);else if(typeof e=="function")r=e(n);else{var i,{x1:s,y1:l,x2:u,y2:f,key:h}=n,m=vy(n,Lne),p=(i=vs(m))!==null&&i!==void 0?i:{},{offset:v}=p,b=vy(p,Vne);r=C.createElement("line",Ml({},b,{x1:s,y1:l,x2:u,y2:f,fill:"none",key:h}))}return r}function Gne(t){var{x:e,width:n,horizontal:r=!0,horizontalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:l}=t,u=vy(t,Une),f=i.map((h,m)=>{var p=fr(fr({},u),{},{x1:e,y1:h,x2:e+n,y2:h,key:"line-".concat(m),index:m});return C.createElement(ZL,{key:"line-".concat(m),option:r,lineItemProps:p})});return C.createElement("g",{className:"recharts-cartesian-grid-horizontal"},f)}function Kne(t){var{y:e,height:n,vertical:r=!0,verticalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:l}=t,u=vy(t,zne),f=i.map((h,m)=>{var p=fr(fr({},u),{},{x1:h,y1:e,x2:h,y2:e+n,key:"line-".concat(m),index:m});return C.createElement(ZL,{option:r,lineItemProps:p,key:"line-".concat(m)})});return C.createElement("g",{className:"recharts-cartesian-grid-vertical"},f)}function Yne(t){var{horizontalFill:e,fillOpacity:n,x:r,y:i,width:s,height:l,horizontalPoints:u,horizontal:f=!0}=t;if(!f||!e||!e.length||u==null)return null;var h=u.map(p=>Math.round(p+i-i)).sort((p,v)=>p-v);i!==h[0]&&h.unshift(0);var m=h.map((p,v)=>{var b=!h[v+1],E=b?i+l-p:h[v+1]-p;if(E<=0)return null;var w=v%e.length;return C.createElement("rect",{key:"react-".concat(v),y:p,x:r,height:E,width:s,stroke:"none",fill:e[w],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return C.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function Wne(t){var{vertical:e=!0,verticalFill:n,fillOpacity:r,x:i,y:s,width:l,height:u,verticalPoints:f}=t;if(!e||!n||!n.length)return null;var h=f.map(p=>Math.round(p+i-i)).sort((p,v)=>p-v);i!==h[0]&&h.unshift(0);var m=h.map((p,v)=>{var b=!h[v+1],E=b?i+l-p:h[v+1]-p;if(E<=0)return null;var w=v%n.length;return C.createElement("rect",{key:"react-".concat(v),x:p,y:s,width:E,height:u,stroke:"none",fill:n[w],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return C.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var Xne=(t,e)=>{var{xAxis:n,width:r,height:i,offset:s}=t;return kj(MS(fr(fr(fr({},ps),n),{},{ticks:Dj(n),viewBox:{x:0,y:0,width:r,height:i}})),s.left,s.left+s.width,e)},Qne=(t,e)=>{var{yAxis:n,width:r,height:i,offset:s}=t;return kj(MS(fr(fr(fr({},ps),n),{},{ticks:Dj(n),viewBox:{x:0,y:0,width:r,height:i}})),s.top,s.top+s.height,e)},Jne={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:xr.grid};function e5(t){var e=qj(),n=Fj(),r=$j(),i=fr(fr({},ai(t,Jne)),{},{x:Me(t.x)?t.x:r.left,y:Me(t.y)?t.y:r.top,width:Me(t.width)?t.width:r.width,height:Me(t.height)?t.height:r.height}),{xAxisId:s,yAxisId:l,x:u,y:f,width:h,height:m,syncWithTicks:p,horizontalValues:v,verticalValues:b}=i,E=Ur(),w=Ue(N=>NN(N,"xAxis",s,E)),S=Ue(N=>NN(N,"yAxis",l,E));if(!ka(h)||!ka(m)||!Me(u)||!Me(f))return null;var P=i.verticalCoordinatesGenerator||Xne,M=i.horizontalCoordinatesGenerator||Qne,{horizontalPoints:j,verticalPoints:$}=i;if((!j||!j.length)&&typeof M=="function"){var L=v&&v.length,q=M({yAxis:S?fr(fr({},S),{},{ticks:L?v:S.ticks}):void 0,width:e??h,height:n??m,offset:r},L?!0:p);Fg(Array.isArray(q),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof q,"]")),Array.isArray(q)&&(j=q)}if((!$||!$.length)&&typeof P=="function"){var I=b&&b.length,R=P({xAxis:w?fr(fr({},w),{},{ticks:I?b:w.ticks}):void 0,width:e??h,height:n??m,offset:r},I?!0:p);Fg(Array.isArray(R),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof R,"]")),Array.isArray(R)&&($=R)}return C.createElement(Ls,{zIndex:i.zIndex},C.createElement("g",{className:"recharts-cartesian-grid"},C.createElement(Hne,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),C.createElement(Yne,Ml({},i,{horizontalPoints:j})),C.createElement(Wne,Ml({},i,{verticalPoints:$})),C.createElement(Gne,Ml({},i,{offset:r,horizontalPoints:j,xAxis:w,yAxis:S})),C.createElement(Kne,Ml({},i,{offset:r,verticalPoints:$,xAxis:w,yAxis:S}))))}e5.displayName="CartesianGrid";var Zne=["domain","range"],ere=["domain","range"];function DP(t,e){if(t==null)return{};var n,r,i=tre(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function tre(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function jP(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function t5(t,e){if(t===e)return!0;var{domain:n,range:r}=t,i=DP(t,Zne),{domain:s,range:l}=e,u=DP(e,ere);return!jP(n,s)||!jP(r,l)?!1:NS(i,u)}var nre=["dangerouslySetInnerHTML","ticks"],rre=["id"];function mx(){return mx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mx.apply(null,arguments)}function LP(t,e){if(t==null)return{};var n,r,i=ire(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function ire(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function are(t){var e=cn(),n=C.useRef(null);return C.useLayoutEffect(()=>{n.current===null?e(mee(t)):n.current!==t&&e(pee({prev:n.current,next:t})),n.current=t},[t,e]),C.useLayoutEffect(()=>()=>{n.current&&(e(gee(n.current)),n.current=null)},[e]),null}var sre=t=>{var{xAxisId:e,className:n}=t,r=Ue(EE),i=Ur(),s="xAxis",l=Ue(S=>Hu(S,s,e,i)),u=Ue(S=>Y3(S,s,e,i)),f=Ue(S=>F3(S,e)),h=Ue(S=>iX(S,e)),m=Ue(S=>h3(S,e));if(f==null||h==null||m==null)return null;var{dangerouslySetInnerHTML:p,ticks:v}=t,b=LP(t,nre),{id:E}=m,w=LP(m,rre);return C.createElement(kS,mx({},b,w,{scale:l,x:h.x,y:h.y,width:f.width,height:f.height,className:$t("recharts-".concat(s," ").concat(s),n),viewBox:r,ticks:u,axisType:s}))},ore={allowDataOverflow:Vn.allowDataOverflow,allowDecimals:Vn.allowDecimals,allowDuplicatedCategory:Vn.allowDuplicatedCategory,angle:Vn.angle,axisLine:ps.axisLine,height:Vn.height,hide:!1,includeHidden:Vn.includeHidden,interval:Vn.interval,minTickGap:Vn.minTickGap,mirror:Vn.mirror,orientation:Vn.orientation,padding:Vn.padding,reversed:Vn.reversed,scale:Vn.scale,tick:Vn.tick,tickCount:Vn.tickCount,tickLine:ps.tickLine,tickSize:ps.tickSize,type:Vn.type,xAxisId:0},lre=t=>{var e=ai(t,ore);return C.createElement(C.Fragment,null,C.createElement(are,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),C.createElement(sre,e))},n5=C.memo(lre,t5);n5.displayName="XAxis";var cre=["dangerouslySetInnerHTML","ticks"],ure=["id"];function px(){return px=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},px.apply(null,arguments)}function VP(t,e){if(t==null)return{};var n,r,i=fre(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function fre(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function dre(t){var e=cn(),n=C.useRef(null);return C.useLayoutEffect(()=>{n.current===null?e(yee(t)):n.current!==t&&e(vee({prev:n.current,next:t})),n.current=t},[t,e]),C.useLayoutEffect(()=>()=>{n.current&&(e(_ee(n.current)),n.current=null)},[e]),null}var hre=t=>{var{yAxisId:e,className:n,width:r,label:i}=t,s=C.useRef(null),l=C.useRef(null),u=Ue(EE),f=Ur(),h=cn(),m="yAxis",p=Ue(L=>Hu(L,m,e,f)),v=Ue(L=>H3(L,e)),b=Ue(L=>sX(L,e)),E=Ue(L=>Y3(L,m,e,f)),w=Ue(L=>m3(L,e));if(C.useLayoutEffect(()=>{if(!(r!=="auto"||!v||RS(i)||C.isValidElement(i)||w==null)){var L=s.current;if(L){var q=L.getCalculatedWidth();Math.round(v.width)!==Math.round(q)&&h(bee({id:e,width:q}))}}},[E,v,h,i,e,r,w]),v==null||b==null||w==null)return null;var{dangerouslySetInnerHTML:S,ticks:P}=t,M=VP(t,cre),{id:j}=w,$=VP(w,ure);return C.createElement(kS,px({},M,$,{ref:s,labelRef:l,scale:p,x:b.x,y:b.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:v.width,height:v.height,className:$t("recharts-".concat(m," ").concat(m),n),viewBox:u,ticks:E,axisType:m}))},mre={allowDataOverflow:Un.allowDataOverflow,allowDecimals:Un.allowDecimals,allowDuplicatedCategory:Un.allowDuplicatedCategory,angle:Un.angle,axisLine:ps.axisLine,hide:!1,includeHidden:Un.includeHidden,interval:Un.interval,minTickGap:Un.minTickGap,mirror:Un.mirror,orientation:Un.orientation,padding:Un.padding,reversed:Un.reversed,scale:Un.scale,tick:Un.tick,tickCount:Un.tickCount,tickLine:ps.tickLine,tickSize:ps.tickSize,type:Un.type,width:Un.width,yAxisId:0},pre=t=>{var e=ai(t,mre);return C.createElement(C.Fragment,null,C.createElement(dre,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),C.createElement(hre,e))},r5=C.memo(pre,t5);r5.displayName="YAxis";var gre=(t,e)=>e,DS=ae([gre,Tt,f3,Mn,uL,js,bQ,Hn],CQ),jS=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},i5=Ti("mouseClick"),a5=Sh();a5.startListening({actionCreator:i5,effect:(t,e)=>{var n=t.payload,r=DS(e.getState(),jS(n));(r==null?void 0:r.activeIndex)!=null&&e.dispatch(bX({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var gx=Ti("mouseMove"),s5=Sh(),qp=null;s5.startListening({actionCreator:gx,effect:(t,e)=>{var n=t.payload;qp!==null&&cancelAnimationFrame(qp);var r=jS(n);qp=requestAnimationFrame(()=>{var i=e.getState(),s=vS(i,i.tooltip.settings.shared);if(s==="axis"){var l=DS(i,r);(l==null?void 0:l.activeIndex)!=null?e.dispatch(nL({activeIndex:l.activeIndex,activeDataKey:void 0,activeCoordinate:l.activeCoordinate})):e.dispatch(tL())}qp=null})}});var UP={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},o5=Vr({name:"rootProps",initialState:UP,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:UP.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),yre=o5.reducer,{updateOptions:vre}=o5.actions,l5=Vr({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:gme}=l5.actions,_re=l5.reducer,c5=Ti("keyDown"),u5=Ti("focus"),LS=Sh();LS.startListening({actionCreator:c5,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,s=t.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var l=_S(i,Ku(n),kh(n),Uh(n)),u=l==null?-1:Number(l);if(!(!Number.isFinite(u)||u<0)){var f=js(n);if(s==="Enter"){var h=fy(n,"axis","hover",String(i.index));e.dispatch(lx({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:h}));return}var m=uX(n),p=m==="left-to-right"?1:-1,v=s==="ArrowRight"?1:-1,b=u+v*p;if(!(f==null||b>=f.length||b<0)){var E=fy(n,"axis","hover",String(b));e.dispatch(lx({active:!0,activeIndex:b.toString(),activeDataKey:void 0,activeCoordinate:E}))}}}}}});LS.startListening({actionCreator:u5,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var s="0",l=fy(n,"axis","hover",String(s));e.dispatch(lx({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:l}))}}}});var bi=Ti("externalEvent"),f5=Sh(),Ww=new Map;f5.startListening({actionCreator:bi,effect:(t,e)=>{var{handler:n,reactEvent:r}=t.payload;if(n!=null){r.persist();var i=r.type,s=Ww.get(i);s!==void 0&&cancelAnimationFrame(s);var l=requestAnimationFrame(()=>{try{var u=e.getState(),f={activeCoordinate:aQ(u),activeDataKey:mL(u),activeIndex:Nu(u),activeLabel:hL(u),activeTooltipIndex:Nu(u),isTooltipActive:sQ(u)};n(f,r)}finally{Ww.delete(i)}});Ww.set(i,l)}}});var bre=ae([Gu],t=>t.tooltipItemPayloads),wre=ae([bre,Lh,(t,e,n)=>e,(t,e,n)=>n],(t,e,n,r)=>{var i=t.find(u=>u.settings.dataKey===r);if(i!=null){var{positions:s}=i;if(s!=null){var l=e(s,n);return l}}}),d5=Ti("touchMove"),h5=Sh();h5.startListening({actionCreator:d5,effect:(t,e)=>{var n=t.payload;if(!(n.touches==null||n.touches.length===0)){var r=e.getState(),i=vS(r,r.tooltip.settings.shared);if(i==="axis"){var s=DS(r,jS({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));(s==null?void 0:s.activeIndex)!=null&&e.dispatch(nL({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(i==="item"){var l,u=n.touches[0];if(document.elementFromPoint==null)return;var f=document.elementFromPoint(u.clientX,u.clientY);if(!f||!f.getAttribute)return;var h=f.getAttribute(a7),m=(l=f.getAttribute(s7))!==null&&l!==void 0?l:void 0,p=wre(e.getState(),h,m);e.dispatch(eL({activeDataKey:m,activeIndex:h,activeCoordinate:p}))}}}});var xre=aj({brush:ine,cartesianAxis:wee,chartData:aJ,errorBars:Dee,graphicalItems:oee,layout:zF,legend:J7,options:eJ,polarAxis:CZ,polarOptions:_re,referenceElements:fne,rootProps:yre,tooltip:wX,zIndex:BQ}),Ere=function(e){return fF({reducer:xre,preloadedState:e,middleware:n=>{var r;return n({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((r="es6")!==null&&r!==void 0?r:"")}).concat([a5.middleware,s5.middleware,LS.middleware,f5.middleware,h5.middleware])},enhancers:n=>{var r=n;return typeof n=="function"&&(r=n()),r.concat(bj({type:"raf"}))},devTools:Ch.devToolsEnabled})};function Sre(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,i=Ur(),s=C.useRef(null);if(i)return n;s.current==null&&(s.current=Ere(e));var l=mE;return C.createElement(ate,{context:l,store:s.current},n)}function Are(t){var{layout:e,margin:n}=t,r=cn(),i=Ur();return C.useEffect(()=>{i||(r(LF(e)),r(jF(n)))},[r,i,e,n]),null}var Tre=C.memo(Are,NS);function Cre(t){var e=cn();return C.useEffect(()=>{e(vre(t))},[e,t]),null}function zP(t){var{zIndex:e,isPanorama:n}=t,r=n?"recharts-zindex-panorama-":"recharts-zindex-",i=BL("".concat(r).concat(e)),s=cn();return C.useLayoutEffect(()=>(s(UQ({zIndex:e,elementId:i,isPanorama:n})),()=>{s(zQ({zIndex:e,isPanorama:n}))}),[s,e,i,n]),C.createElement("g",{tabIndex:-1,id:i})}function BP(t){var{children:e,isPanorama:n}=t,r=Ue(IQ);if(!r||r.length===0)return e;var i=r.filter(l=>l<0),s=r.filter(l=>l>0);return C.createElement(C.Fragment,null,i.map(l=>C.createElement(zP,{key:l,zIndex:l,isPanorama:n})),e,s.map(l=>C.createElement(zP,{key:l,zIndex:l,isPanorama:n})))}var Ore=["children"];function Ire(t,e){if(t==null)return{};var n,r,i=Rre(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Rre(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function _y(){return _y=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_y.apply(null,arguments)}var Nre={width:"100%",height:"100%",display:"block"},Pre=C.forwardRef((t,e)=>{var n=qj(),r=Fj(),i=Jj();if(!ka(n)||!ka(r))return null;var{children:s,otherAttributes:l,title:u,desc:f}=t,h,m;return l!=null&&(typeof l.tabIndex=="number"?h=l.tabIndex:h=i?0:void 0,typeof l.role=="string"?m=l.role:m=i?"application":void 0),C.createElement(xD,_y({},l,{title:u,desc:f,role:m,tabIndex:h,width:n,height:r,style:Nre,ref:e}),s)}),Mre=t=>{var{children:e}=t,n=Ue(pv);if(!n)return null;var{width:r,height:i,y:s,x:l}=n;return C.createElement(xD,{width:r,height:i,x:l,y:s},e)},$P=C.forwardRef((t,e)=>{var{children:n}=t,r=Ire(t,Ore),i=Ur();return i?C.createElement(Mre,null,C.createElement(BP,{isPanorama:!0},n)):C.createElement(Pre,_y({ref:e},r),C.createElement(BP,{isPanorama:!1},n))});function kre(){var t=cn(),[e,n]=C.useState(null),r=Ue(i7);return C.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),s=i.width/e.offsetWidth;ln(s)&&s!==r&&t(UF(s))}},[e,t,r]),n}function qP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Dre(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qP(Object(n),!0).forEach(function(r){jre(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jre(t,e,n){return(e=Lre(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lre(t){var e=Vre(t,"string");return typeof e=="symbol"?e:e+""}function Vre(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Gl(){return Gl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gl.apply(null,arguments)}var Ure=()=>(mJ(),null);function by(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var zre=C.forwardRef((t,e)=>{var n,r,i=C.useRef(null),[s,l]=C.useState({containerWidth:by((n=t.style)===null||n===void 0?void 0:n.width),containerHeight:by((r=t.style)===null||r===void 0?void 0:r.height)}),u=C.useCallback((h,m)=>{l(p=>{var v=Math.round(h),b=Math.round(m);return p.containerWidth===v&&p.containerHeight===b?p:{containerWidth:v,containerHeight:b}})},[]),f=C.useCallback(h=>{if(typeof e=="function"&&e(h),h!=null&&typeof ResizeObserver<"u"){var{width:m,height:p}=h.getBoundingClientRect();u(m,p);var v=E=>{var{width:w,height:S}=E[0].contentRect;u(w,S)},b=new ResizeObserver(v);b.observe(h),i.current=b}},[e,u]);return C.useEffect(()=>()=>{var h=i.current;h!=null&&h.disconnect()},[u]),C.createElement(C.Fragment,null,C.createElement(vv,{width:s.containerWidth,height:s.containerHeight}),C.createElement("div",Gl({ref:f},t)))}),Bre=C.forwardRef((t,e)=>{var{width:n,height:r}=t,[i,s]=C.useState({containerWidth:by(n),containerHeight:by(r)}),l=C.useCallback((f,h)=>{s(m=>{var p=Math.round(f),v=Math.round(h);return m.containerWidth===p&&m.containerHeight===v?m:{containerWidth:p,containerHeight:v}})},[]),u=C.useCallback(f=>{if(typeof e=="function"&&e(f),f!=null){var{width:h,height:m}=f.getBoundingClientRect();l(h,m)}},[e,l]);return C.createElement(C.Fragment,null,C.createElement(vv,{width:i.containerWidth,height:i.containerHeight}),C.createElement("div",Gl({ref:u},t)))}),$re=C.forwardRef((t,e)=>{var{width:n,height:r}=t;return C.createElement(C.Fragment,null,C.createElement(vv,{width:n,height:r}),C.createElement("div",Gl({ref:e},t)))}),qre=C.forwardRef((t,e)=>{var{width:n,height:r}=t;return bs(n)||bs(r)?C.createElement(Bre,Gl({},t,{ref:e})):C.createElement($re,Gl({},t,{ref:e}))});function Fre(t){return t===!0?zre:qre}var Hre=C.forwardRef((t,e)=>{var{children:n,className:r,height:i,onClick:s,onContextMenu:l,onDoubleClick:u,onMouseDown:f,onMouseEnter:h,onMouseLeave:m,onMouseMove:p,onMouseUp:v,onTouchEnd:b,onTouchMove:E,onTouchStart:w,style:S,width:P,responsive:M,dispatchTouchEvents:j=!0}=t,$=C.useRef(null),L=cn(),[q,I]=C.useState(null),[R,N]=C.useState(null),z=kre(),k=SE(),B=(k==null?void 0:k.width)>0?k.width:P,V=(k==null?void 0:k.height)>0?k.height:i,pe=C.useCallback(se=>{z(se),typeof e=="function"&&e(se),I(se),N(se),se!=null&&($.current=se)},[z,e,I,N]),be=C.useCallback(se=>{L(i5(se)),L(bi({handler:s,reactEvent:se}))},[L,s]),G=C.useCallback(se=>{L(gx(se)),L(bi({handler:h,reactEvent:se}))},[L,h]),ne=C.useCallback(se=>{L(tL()),L(bi({handler:m,reactEvent:se}))},[L,m]),de=C.useCallback(se=>{L(gx(se)),L(bi({handler:p,reactEvent:se}))},[L,p]),ge=C.useCallback(()=>{L(u5())},[L]),Ee=C.useCallback(se=>{L(c5(se.key))},[L]),F=C.useCallback(se=>{L(bi({handler:l,reactEvent:se}))},[L,l]),X=C.useCallback(se=>{L(bi({handler:u,reactEvent:se}))},[L,u]),re=C.useCallback(se=>{L(bi({handler:f,reactEvent:se}))},[L,f]),_e=C.useCallback(se=>{L(bi({handler:v,reactEvent:se}))},[L,v]),Oe=C.useCallback(se=>{L(bi({handler:w,reactEvent:se}))},[L,w]),xe=C.useCallback(se=>{j&&L(d5(se)),L(bi({handler:E,reactEvent:se}))},[L,j,E]),Pe=C.useCallback(se=>{L(bi({handler:b,reactEvent:se}))},[L,b]),yt=Fre(M);return C.createElement(wL.Provider,{value:q},C.createElement(F$.Provider,{value:R},C.createElement(yt,{width:B??(S==null?void 0:S.width),height:V??(S==null?void 0:S.height),className:$t("recharts-wrapper",r),style:Dre({position:"relative",cursor:"default",width:B,height:V},S),onClick:be,onContextMenu:F,onDoubleClick:X,onFocus:ge,onKeyDown:Ee,onMouseDown:re,onMouseEnter:G,onMouseLeave:ne,onMouseMove:de,onMouseUp:_e,onTouchEnd:Pe,onTouchMove:xe,onTouchStart:Oe,ref:pe},C.createElement(Ure,null),n)))}),Gre=["width","height","responsive","children","className","style","compact","title","desc"];function Kre(t,e){if(t==null)return{};var n,r,i=Yre(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Yre(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Wre=C.forwardRef((t,e)=>{var{width:n,height:r,responsive:i,children:s,className:l,style:u,compact:f,title:h,desc:m}=t,p=Kre(t,Gre),v=vs(p);return f?C.createElement(C.Fragment,null,C.createElement(vv,{width:n,height:r}),C.createElement($P,{otherAttributes:v,title:h,desc:m},s)):C.createElement(Hre,{className:l,style:u,width:n,height:r,responsive:i??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},C.createElement($P,{otherAttributes:v,title:h,desc:m,ref:e},C.createElement(hne,null,s)))});function yx(){return yx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yx.apply(null,arguments)}var Xre={top:5,right:5,bottom:5,left:5},Qre={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:Xre,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},Jre=C.forwardRef(function(e,n){var r,i=ai(e.categoricalChartProps,Qre),{chartName:s,defaultTooltipEventType:l,validateTooltipEventTypes:u,tooltipPayloadSearcher:f,categoricalChartProps:h}=e,m={chartName:s,defaultTooltipEventType:l,validateTooltipEventTypes:u,tooltipPayloadSearcher:f,eventEmitter:void 0};return C.createElement(Sre,{preloadedState:{options:m},reduxStoreName:(r=h.id)!==null&&r!==void 0?r:s},C.createElement(rne,{chartData:h.data}),C.createElement(Tre,{layout:i.layout,margin:i.margin}),C.createElement(Cre,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),C.createElement(Wre,yx({},i,{ref:n})))}),Zre=["axis","item"],eie=C.forwardRef((t,e)=>C.createElement(Jre,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Zre,tooltipPayloadSearcher:JQ,categoricalChartProps:t,ref:e}));const tie=({filled:t,size:e=18,className:n=""})=>A.jsx(hD,{size:e,className:`${n} ${t?"fill-current":""}`}),nie=({item:t,onClose:e,apiKey:n,onToggleFavorite:r,onToggleWatchlist:i,isFavorite:s,isWatchlist:l,onCastClick:u,onEpisodeClick:f,userRatings:h,onRate:m,ratingsCache:p,useOmdbRatings:v=!0,showEpisodeImdbOnSeasonList:b=!1})=>{var Oe,xe,Pe,yt,se,ze;const[E,w]=C.useState([]),[S,P]=C.useState(!1),[M,j]=C.useState(1),[$,L]=C.useState(!1),q=C.useRef(null),[I,R]=C.useState(!1);C.useEffect(()=>{var fe;if(t.media_type==="tv"&&t.seasons){const le=((fe=t.seasons.find(rt=>rt.season_number>0))==null?void 0:fe.season_number)||1;j(le)}},[t]),C.useEffect(()=>{t.media_type==="tv"&&t.seasons&&M&&(async()=>{try{P(!0);const le=await gD(n,t.id,M);w(le)}finally{P(!1)}})()},[t,n,M]),C.useEffect(()=>{const fe=le=>{const rt=le.target;q.current&&!q.current.contains(rt)&&L(!1)};return $&&document.addEventListener("click",fe),()=>document.removeEventListener("click",fe)},[$]);const N=t.backdrop_path?`https://image.tmdb.org/t/p/original${t.backdrop_path}`:"https://picsum.photos/1920/1080",z=t.title||t.name||"",k=t.release_date||t.first_air_date?new Date(t.release_date||t.first_air_date).getFullYear():void 0,B=(Oe=t.videos)==null?void 0:Oe.results.find(fe=>fe.type==="Trailer"&&fe.site==="YouTube"),V=((Pe=(xe=t.credits)==null?void 0:xe.crew)==null?void 0:Pe.filter(fe=>["Director","Executive Producer","Writer","Screenplay","Creator"].includes(fe.job)).reduce((fe,le)=>fe.find(je=>je.id===le.id)?fe:fe.concat([le]),[]).slice(0,6))||[],pe=((yt=t.credits)==null?void 0:yt.cast.slice(0,10))||[],be=t.media_type==="movie"?`https://letterboxd.com/tmdb/${t.id}`:`https://letterboxd.com/search/${encodeURIComponent(z)}`,G=t.external_ids||{},ne=t.imdb_id||G.imdb_id||void 0,de=typeof G.tvdb_id=="number"?G.tvdb_id:void 0,ge={title:z,year:k,type:t.media_type==="movie"?"movie":"series",imdbId:ne,tvdbId:de},Ee=M$(ge),F=N$(t.media_type,t.id),X=h[F]||0,re=v&&p&&t.media_type!=="person"?p.getCached(t.media_type,t.id):null,_e="flex items-center gap-2 px-3 py-1 rounded-md text-sm font-semibold";return A.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-[#030712] text-slate-200 animate-in fade-in zoom-in-95 duration-300 scrollbar-thin scrollbar-thumb-cyan-900 scrollbar-track-transparent selection:bg-cyan-500/30",children:[A.jsxs("div",{className:"relative h-[62vh] w-full group overflow-hidden",children:[A.jsxs("div",{className:"absolute inset-0",children:[A.jsx("img",{src:N,alt:z,className:"w-full h-full object-cover transition duration-[3s] group-hover:scale-105"}),A.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#030712] via-[#030712]/60 to-transparent"}),A.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#030712] via-[#030712]/80 to-transparent"}),A.jsx("div",{className:"absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-20 brightness-100 mix-blend-overlay"})]}),A.jsx("button",{onClick:e,className:"absolute top-5 right-5 z-50 bg-black/40 hover:bg-cyan-500/20 text-white p-2 rounded-full backdrop-blur-md border border-white/10 hover:border-cyan-400/50 transition-all duration-300 group/close","aria-label":"Close",children:A.jsx(Zy,{size:20,className:"transition-transform text-slate-300 group-hover/close:text-cyan-400"})}),A.jsx("div",{className:"absolute bottom-0 left-0 w-full p-6 md:p-10 z-20 pt-24",children:A.jsxs("div",{className:"max-w-5xl",children:[A.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-3",children:[t.status&&A.jsx("span",{className:"bg-cyan-500/20 text-cyan-300 px-2 py-0.5 rounded-md text-xs font-bold border border-cyan-500/30",children:t.status}),A.jsxs("span",{className:"flex items-center gap-2 bg-yellow-500/10 text-yellow-400 px-2 py-0.5 rounded-md text-sm font-bold border border-yellow-500/20",children:[A.jsx(bn,{size:12,fill:"currentColor"}),(se=t.vote_average)==null?void 0:se.toFixed(1)]}),(ze=t.genres)==null?void 0:ze.map(fe=>A.jsx("span",{className:"bg-white/5 text-slate-300 px-2 py-0.5 rounded-md text-sm font-medium border border-white/5",children:fe.name},fe.id))]}),A.jsx("h1",{className:"text-4xl md:text-6xl font-black text-transparent bg-clip-text bg-gradient-to-br from-white via-slate-200 to-slate-500 mb-4 drop-shadow-2xl leading-tight",children:z}),A.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-slate-400 text-sm font-medium mb-6",children:[k&&A.jsxs("span",{className:"flex items-center gap-2 text-sm",children:[A.jsx(Qy,{size:14,className:"text-cyan-500"}),k]}),t.runtime?A.jsxs("span",{className:"flex items-center gap-2 text-sm",children:[A.jsx(RI,{size:14,className:"text-purple-500"}),Math.floor(t.runtime/60),"h ",t.runtime%60,"m"]}):t.number_of_seasons&&A.jsxs("span",{className:"flex items-center gap-2 text-sm",children:[A.jsx(RI,{size:14,className:"text-purple-500"}),t.number_of_seasons," Seasons"]})]}),((re==null?void 0:re.imdbRating)||(re==null?void 0:re.metascore)||(re==null?void 0:re.rottenTomatoes)||t.vote_average)&&A.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-4",children:[(re==null?void 0:re.imdbRating)&&A.jsxs("div",{className:`${_e} bg-amber-500/10 border border-amber-500/30 text-amber-300`,title:"IMDb rating",children:[A.jsx(bn,{size:14,className:"text-amber-400 fill-amber-400"}),A.jsx("span",{className:"text-sm font-bold",children:parseFloat(re.imdbRating).toFixed(1)}),A.jsx("span",{className:"text-[11px] text-amber-200/70 font-medium",children:"IMDb"})]}),(re==null?void 0:re.metascore)&&A.jsxs("div",{className:`${_e} bg-green-500/10 border border-green-500/30 text-green-300`,title:"Metacritic",children:[A.jsx("span",{className:"text-sm font-bold",children:re.metascore}),A.jsx("span",{className:"text-[11px] text-green-200/70 font-medium",children:"Metacritic"})]}),(re==null?void 0:re.rottenTomatoes)&&A.jsxs("div",{className:`${_e} bg-red-500/10 border border-red-500/30 text-red-300`,title:"Rotten Tomatoes",children:[A.jsx("span",{className:"text-sm font-bold",children:re.rottenTomatoes}),A.jsx("span",{className:"text-[11px] text-red-200/70 font-medium",children:"RT"})]}),t.vote_average&&A.jsxs("div",{className:`${_e} bg-cyan-500/10 border border-cyan-500/30 text-cyan-300`,title:"TMDB rating",children:[A.jsx(bn,{size:14,className:"text-cyan-400 fill-cyan-400"}),A.jsx("span",{className:"text-sm font-bold",children:t.vote_average.toFixed(1)}),A.jsx("span",{className:"text-[11px] text-cyan-200/70 font-medium",children:"TMDB"})]})]}),A.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[B&&A.jsxs("a",{href:`https://www.youtube.com/watch?v=${B.key}`,target:"_blank",rel:"noreferrer",className:"bg-cyan-600 hover:bg-cyan-500 text-white px-4 py-2 rounded-md font-bold flex items-center gap-2 transition-all hover:scale-105",children:[A.jsx(r$,{size:16})," Watch Trailer"]}),A.jsxs("div",{className:"relative inline-block",children:[A.jsxs("button",{ref:q,onClick:fe=>{fe.stopPropagation(),L(le=>!le)},className:"px-4 py-2 rounded-md font-bold flex items-center gap-2 bg-white/5 border border-white/10 hover:bg-white/10",children:[A.jsx(PI,{size:16}),A.jsx("span",{children:"Add to"}),A.jsx(II,{size:16})]}),$&&A.jsxs("div",{onClick:fe=>fe.stopPropagation(),className:"absolute mt-2 right-0 w-40 bg-[#0b1221]/90 border border-white/10 rounded-lg shadow-xl p-2 z-40",children:[A.jsxs("button",{onClick:()=>{r(t),L(!1)},className:`w-full text-left px-3 py-2 rounded-md flex items-center gap-3 ${s?"bg-pink-600/10 text-pink-300":"hover:bg-white/5"}`,children:[A.jsx(tie,{filled:s}),A.jsx("span",{children:s?"Favorited":"Favorite"})]}),A.jsxs("button",{onClick:()=>{i(t),L(!1)},className:`w-full text-left mt-2 px-3 py-2 rounded-md flex items-center gap-3 ${l?"bg-emerald-600/10 text-emerald-300":"hover:bg-white/5"}`,children:[l?A.jsx(fD,{size:16}):A.jsx(PI,{size:16}),A.jsx("span",{children:l?"On Watchlist":"Watchlist"})]})]})]}),A.jsxs("a",{href:Ee,target:"_blank",rel:"noreferrer",className:"bg-[#1b2332]/90 hover:bg-[#252f3f] text-slate-100 px-4 py-2 rounded-md font-bold flex items-center gap-2",children:[A.jsx("img",{src:"/stremio-icon.png",alt:"Open in Stremio",className:"w-5 h-5 rounded-sm"}),A.jsx("span",{children:"Open in Stremio"})]}),A.jsxs("a",{href:be,target:"_blank",rel:"noreferrer",className:"bg-[#202830]/80 hover:bg-[#2c3440] text-slate-200 px-3 py-2 rounded-md font-semibold flex items-center gap-2",children:[A.jsx(dD,{size:14}),"Letterboxd"]})]}),A.jsx("div",{className:"mt-4",children:I?A.jsx("div",{className:"bg-slate-900/50 backdrop-blur-md border border-white/10 rounded-xl p-3 inline-block",children:A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("p",{className:"text-sm text-slate-400 mb-0",children:"Your Rating:"}),A.jsx(P$,{value:X,onChange:fe=>m(F,fe),size:20}),A.jsx("button",{onClick:()=>R(!1),className:"ml-3 px-2 py-1 rounded bg-white/5 text-sm","aria-label":"Collapse rating",children:A.jsx(AB,{size:14})})]})}):A.jsxs("div",{className:"inline-flex items-center gap-2 bg-slate-900/60 border border-white/10 rounded-md px-3 py-1",children:[A.jsx("button",{onClick:()=>R(!0),className:"flex items-center gap-2 text-sm font-semibold","aria-label":"Expand rating",children:X>0?A.jsxs(A.Fragment,{children:[A.jsx("span",{className:"text-cyan-300 font-bold",children:X.toFixed(1)}),A.jsx(bn,{size:14,className:"fill-cyan-400 text-cyan-400"})]}):A.jsxs(A.Fragment,{children:[A.jsx("span",{className:"text-slate-400",children:""}),A.jsx(bn,{size:14,className:"fill-slate-600"})]})}),A.jsx("button",{onClick:()=>R(!0),className:"ml-2 px-2 py-0.5 rounded bg-white/5 text-xs","aria-label":"Edit rating",children:A.jsx(EB,{size:12})})]})})]})})]}),A.jsx("div",{className:"max-w-7xl mx-auto px-6 pb-20 -mt-8 relative z-30",children:A.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[A.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[A.jsxs("div",{className:"bg-[#0b1221]/80 backdrop-blur-xl border border-white/5 p-6 rounded-2xl shadow-md",children:[t.tagline&&A.jsxs("h3",{className:"text-lg md:text-xl font-light italic text-cyan-200/80 mb-3 font-serif",children:['"',t.tagline,'"']}),A.jsx("p",{className:"text-slate-300 leading-7 text-base",children:t.overview})]}),A.jsxs("section",{children:[A.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center gap-3",children:[A.jsx("span",{className:"w-1 h-6 bg-cyan-500 rounded-full"}),"Top Cast"]}),A.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:pe.map(fe=>A.jsxs("div",{onClick:()=>u(fe.id),className:"group bg-[#0f172a] rounded-lg p-2 border border-white/5 hover:border-cyan-500/50 hover:bg-[#162032] transition-all cursor-pointer flex items-center gap-3",children:[A.jsx("img",{src:fe.profile_path?`https://image.tmdb.org/t/p/w200${fe.profile_path}`:"https://via.placeholder.com/200",alt:fe.name,className:"w-10 h-10 rounded-full object-cover ring-2 ring-white/10 group-hover:ring-cyan-500 transition-all"}),A.jsxs("div",{className:"overflow-hidden",children:[A.jsx("p",{className:"text-slate-200 font-semibold text-sm truncate group-hover:text-cyan-400 transition-colors",children:fe.name}),A.jsx("p",{className:"text-slate-500 text-xs truncate",children:fe.character})]})]},fe.id))})]}),V.length>0&&A.jsxs("section",{children:[A.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center gap-3",children:[A.jsx("span",{className:"w-1 h-6 bg-purple-500 rounded-full"}),"Creative Team"]}),A.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:V.map(fe=>A.jsxs("div",{onClick:()=>u(fe.id),className:"group bg-[#0f172a] rounded-lg p-2 border border-white/5 hover:border-purple-500/50 hover:bg-[#162032] transition-all cursor-pointer",children:[A.jsx("p",{className:"text-slate-200 font-semibold text-sm truncate group-hover:text-purple-400 transition-colors",children:fe.name}),A.jsx("p",{className:"text-slate-500 text-xs truncate",children:fe.job})]},`crew-${fe.id}-${fe.job}`))})]}),t.reviews&&t.reviews.results&&t.reviews.results.length>0&&A.jsxs("section",{className:"mt-4 space-y-3",children:[A.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center gap-3",children:[A.jsx("span",{className:"w-1 h-6 bg-amber-500 rounded-full"}),"TMDB Reviews"]}),A.jsx("div",{className:"space-y-3 max-h-[28rem] overflow-y-auto pr-1",children:t.reviews.results.map(fe=>{var le;return A.jsxs("div",{className:"p-3 rounded-lg bg-[#0f172a] border border-white/5 hover:border-amber-500/30 transition-all",children:[A.jsxs("div",{className:"flex items-center justify-between mb-2",children:[A.jsx("span",{className:"text-sm font-semibold text-slate-100",children:fe.author||fe.author_details.username||"User"}),typeof((le=fe.author_details)==null?void 0:le.rating)=="number"&&A.jsxs("span",{className:"inline-flex items-center gap-1 text-sm text-amber-300",children:[A.jsx(bn,{size:12,className:"fill-amber-400 text-amber-400"}),fe.author_details.rating.toFixed(1)]})]}),A.jsx("p",{className:"text-sm text-slate-300 line-clamp-6 leading-relaxed",children:fe.content}),A.jsx("p",{className:"text-xs text-slate-500 mt-2",children:new Date(fe.created_at).toLocaleDateString()})]},fe.id)})})]})]}),A.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[t.media_type==="tv"&&t.seasons&&A.jsxs("div",{className:"bg-[#0b1221]/80 backdrop-blur-xl border border-white/5 rounded-2xl p-4 shadow-md sticky top-20",children:[A.jsxs("div",{className:"flex items-center justify-between mb-4",children:[A.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[A.jsx(t$,{className:"text-cyan-400",size:18}),"Season ",M]}),A.jsxs("div",{className:"relative",children:[A.jsx("select",{value:M,onChange:fe=>j(Number(fe.target.value)),className:"bg-slate-900 text-white border border-slate-700 rounded-md py-1 pl-2 pr-8 appearance-none focus:border-cyan-500 focus:outline-none cursor-pointer text-sm font-bold",children:t.seasons.filter(fe=>fe.season_number>0).map(fe=>A.jsxs("option",{value:fe.season_number,children:["S",fe.season_number," (",fe.episode_count,")"]},fe.id))}),A.jsx(II,{className:"absolute right-2 top-2 text-slate-400 pointer-events-none",size:14})]})]}),A.jsx("div",{className:"h-36 w-full mb-3",children:S?A.jsx("div",{className:"h-full flex items-center justify-center",children:A.jsx("div",{className:"w-7 h-7 border-2 border-cyan-500 border-t-transparent rounded-full animate-spin"})}):E.length>0?A.jsx(k7,{width:"100%",height:"100%",children:A.jsxs(eie,{data:E,children:[A.jsx(e5,{strokeDasharray:"3 3",vertical:!1,stroke:"#1e293b"}),A.jsx(n5,{dataKey:"episode_number",hide:!0}),A.jsx(r5,{domain:[0,10],hide:!0}),A.jsx(xJ,{contentStyle:{backgroundColor:"#0f172a",borderColor:"#334155",borderRadius:"8px",color:"#fff"},itemStyle:{color:"#22d3ee"},cursor:{fill:"#334155",opacity:.4},formatter:fe=>[fe.toFixed(1),"Rating"],labelFormatter:fe=>`Episode ${fe}`}),A.jsx(YL,{dataKey:"vote_average",radius:[4,4,0,0],children:E.map((fe,le)=>A.jsx(OS,{fill:"url(#colorGradient)"},`cell-${le}`))}),A.jsx("defs",{children:A.jsxs("linearGradient",{id:"colorGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[A.jsx("stop",{offset:"5%",stopColor:"#06b6d4",stopOpacity:.8}),A.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:.3})]})})]})}):A.jsx("div",{className:"text-center text-slate-500 text-sm py-8",children:"No rating data available"})}),A.jsxs("div",{className:"space-y-2 max-h-72 overflow-y-auto pr-1",children:[E.map(fe=>{var je,Ct;let le=((je=fe.vote_average)==null?void 0:je.toFixed(1))||"N/A",rt=!1;if(b&&v&&p){const Dt=(Ct=t.external_ids)==null?void 0:Ct.imdb_id;if(Dt&&typeof p.getEpisodeCached=="function"){const Lt=p.getEpisodeCached(Dt,fe.season_number,fe.episode_number);Lt!=null&&Lt.imdbRating&&(le=Lt.imdbRating,rt=!0)}}return A.jsxs("button",{type:"button",onClick:()=>f&&f(t.id,fe.season_number,fe.episode_number),className:"w-full flex items-center justify-between px-3 py-2 rounded-md bg-slate-900/60 hover:bg-slate-800 border border-slate-700/70 hover:border-cyan-500/50 text-left text-sm",children:[A.jsxs("div",{className:"flex flex-col",children:[A.jsxs("span",{className:"font-semibold text-slate-100",children:["S",fe.season_number,"  E",fe.episode_number,"  ",fe.name]}),A.jsx("span",{className:"text-xs text-slate-400 line-clamp-1",children:fe.overview})]}),A.jsxs("div",{className:`flex items-center gap-1 text-xs ${rt?"text-amber-400":"text-amber-300"}`,children:[A.jsx(bn,{size:12,className:`${rt?"fill-amber-500 text-amber-500":"fill-amber-400 text-amber-400"}`}),le]})]},fe.id)}),E.length===0&&!S&&A.jsx("p",{className:"text-xs text-slate-500 text-center py-4",children:"No episodes found for this season."})]})]}),t.media_type!=="tv"&&A.jsxs("div",{className:"bg-[#0b1221]/80 backdrop-blur-xl border border-white/5 rounded-2xl p-4 shadow-md flex flex-col items-center justify-center gap-3",children:[A.jsx(_1,{size:28,className:"text-slate-500"}),A.jsx("p",{className:"text-sm text-slate-400 text-center",children:"This title is a movie  explore similar films from the home screen."})]})]})]})})]})},rie=({person:t,onClose:e,onMediaClick:n})=>{const r=t.profile_path?`https://image.tmdb.org/t/p/h632${t.profile_path}`:"https://picsum.photos/400/600",i=[...t.combined_credits.cast,...t.combined_credits.crew],s=new Map;i.forEach(f=>{f.poster_path&&(s.has(f.id)||s.set(f.id,f))});const l=Array.from(s.values()).sort((f,h)=>h.vote_count-f.vote_count).slice(0,24),u=`https://letterboxd.com/tmdb/person/${t.id}`;return A.jsxs("div",{className:"fixed inset-0 z-[60] overflow-y-auto bg-[#020617] text-slate-200 animate-in fade-in duration-300 scrollbar-thin scrollbar-thumb-purple-900 scrollbar-track-transparent",children:[A.jsx("div",{className:"fixed inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-10 pointer-events-none"}),A.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-12 relative",children:[A.jsx("button",{onClick:e,className:"fixed top-6 right-6 bg-black/50 hover:bg-white/10 p-2.5 rounded-full text-white backdrop-blur-md border border-white/10 hover:border-purple-500/50 transition z-50 group shadow-[0_0_15px_rgba(0,0,0,0.5)]",children:A.jsx(Zy,{size:24,className:"group-hover:rotate-90 transition-transform duration-300"})}),A.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-12 mt-8",children:[A.jsxs("div",{className:"lg:col-span-1 space-y-8",children:[A.jsxs("div",{className:"rounded-2xl overflow-hidden shadow-2xl relative group ring-1 ring-white/10 hover:ring-purple-500/50 transition-all duration-500",children:[A.jsx("img",{src:r,alt:t.name,className:"w-full h-auto object-cover transition duration-700 group-hover:scale-105"}),A.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-transparent to-transparent opacity-80"}),A.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-6 bg-gradient-to-t from-black to-transparent",children:[A.jsx("h2",{className:"text-3xl font-black text-white mb-1 leading-tight",children:t.name}),A.jsxs("div",{className:"text-purple-400 text-sm font-bold uppercase tracking-wider flex flex-wrap gap-2",children:[t.combined_credits.cast.length>0&&A.jsx("span",{children:"Actor"}),t.combined_credits.cast.length>0&&t.combined_credits.crew.length>0&&A.jsx("span",{className:"text-slate-600",children:""}),t.combined_credits.crew.length>0&&A.jsx("span",{children:"Crew"})]})]})]}),A.jsxs("div",{className:"bg-[#0f172a]/80 backdrop-blur-md p-6 rounded-2xl border border-white/5 space-y-5 shadow-lg relative overflow-hidden",children:[A.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-gradient-to-b from-purple-500 to-cyan-500"}),t.birthday&&A.jsxs("div",{className:"flex items-center gap-3 text-slate-400 text-sm group",children:[A.jsx("div",{className:"bg-slate-800 p-2.5 rounded-xl text-slate-300 group-hover:text-purple-400 group-hover:bg-purple-500/10 transition-colors",children:A.jsx(Qy,{size:18})}),A.jsxs("div",{children:[A.jsx("span",{className:"block text-[10px] uppercase tracking-wider text-slate-500 font-bold",children:"Born"}),A.jsx("span",{className:"text-white font-medium",children:t.birthday})]})]}),t.place_of_birth&&A.jsxs("div",{className:"flex items-center gap-3 text-slate-400 text-sm group",children:[A.jsx("div",{className:"bg-slate-800 p-2.5 rounded-xl text-slate-300 group-hover:text-cyan-400 group-hover:bg-cyan-500/10 transition-colors",children:A.jsx(ZB,{size:18})}),A.jsxs("div",{children:[A.jsx("span",{className:"block text-[10px] uppercase tracking-wider text-slate-500 font-bold",children:"Place of Birth"}),A.jsx("span",{className:"text-white font-medium",children:t.place_of_birth})]})]}),A.jsxs("div",{className:"flex items-center gap-3 text-slate-400 text-sm group",children:[A.jsx("div",{className:"bg-slate-800 p-2.5 rounded-xl text-slate-300 group-hover:text-yellow-400 group-hover:bg-yellow-500/10 transition-colors",children:A.jsx(vB,{size:18})}),A.jsxs("div",{children:[A.jsx("span",{className:"block text-[10px] uppercase tracking-wider text-slate-500 font-bold",children:"Total Credits"}),A.jsxs("span",{className:"text-white font-medium",children:[t.combined_credits.cast.length+t.combined_credits.crew.length," Titles"]})]})]}),A.jsxs("a",{href:u,target:"_blank",rel:"noreferrer",className:"flex items-center gap-3 text-slate-400 text-sm group cursor-pointer hover:bg-white/5 p-2 -mx-2 rounded-lg transition-colors",children:[A.jsx("div",{className:"bg-slate-800 p-2.5 rounded-xl text-slate-300 group-hover:text-green-400 group-hover:bg-green-500/10 transition-colors",children:A.jsx(dD,{size:18})}),A.jsxs("div",{children:[A.jsx("span",{className:"block text-[10px] uppercase tracking-wider text-slate-500 font-bold",children:"View On"}),A.jsx("span",{className:"text-white font-medium group-hover:text-green-400 transition-colors",children:"Letterboxd"})]})]})]})]}),A.jsxs("div",{className:"lg:col-span-3 space-y-12",children:[A.jsxs("section",{className:"bg-[#0f172a]/50 backdrop-blur-sm p-8 rounded-3xl border border-white/5 relative",children:[A.jsx("div",{className:"absolute -top-3 -left-3",children:A.jsx(bn,{className:"text-purple-500 fill-purple-500 animate-pulse",size:24})}),A.jsx("h3",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-3",children:"Biography"}),A.jsx("p",{className:"text-lg text-slate-300 leading-relaxed font-light whitespace-pre-line",children:t.biography||"No biography available for this person."})]}),A.jsxs("section",{children:[A.jsxs("h3",{className:"text-2xl font-bold text-white mb-8 flex items-center gap-3",children:[A.jsx("span",{className:"w-1 h-8 bg-gradient-to-b from-cyan-500 to-purple-600 rounded-full"}),"Known For"]}),A.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 xl:grid-cols-5 gap-6",children:l.map(f=>A.jsx(rE,{item:f,onClick:n},`${f.id}-${f.media_type}`))})]})]})]})]})]})},iie=({episode:t,showTitle:e,onClose:n,onRate:r,userRating:i,ratingsCache:s,useOmdbRatings:l=!0,showEpisodeImdbOnSeasonList:u=!1})=>{var I;const f=t.air_date?new Date(t.air_date).getFullYear():void 0,h=((I=t.reviews)==null?void 0:I.results)||[],m=typeof t.vote_average=="number"?t.vote_average.toFixed(1):"N/A",p=t.show_imdb_id||void 0,v=typeof t.show_tvdb_id=="number"?t.show_tvdb_id:void 0,b={title:e||t.name||"",year:f,imdbId:p,tvdbId:v,season:t.season_number,episode:t.episode_number},E=k$(b),[w,S]=C.useState(null);C.useEffect(()=>{let R=!0;async function N(){var z,k;if(!l||!s||!p){S(null);return}try{const B=typeof s.getEpisodeCached=="function"?s.getEpisodeCached(p,t.season_number,t.episode_number):null;if(B&&(B.imdbRating||B.metascore||B.rottenTomatoes)){R&&S({imdbRating:B.imdbRating??null,imdbVotes:B.imdbVotes??null,metascore:B.metascore??null,rottenTomatoes:B.rottenTomatoes??null,fetchedAt:B.fetchedAt??Date.now()});const pe=Date.now(),be=1e3*60*60*24;(!B.fetchedAt||pe-B.fetchedAt>be)&&((z=s.refreshEpisode)==null||z.call(s,p,t.season_number,t.episode_number,!0).then(G=>{!R||!G||S({imdbRating:G.imdbRating??null,imdbVotes:G.imdbVotes??null,metascore:G.metascore??null,rottenTomatoes:G.rottenTomatoes??null,fetchedAt:G.fetchedAt??Date.now()})}).catch(()=>{}));return}const V=await((k=s.refreshEpisode)==null?void 0:k.call(s,p,t.season_number,t.episode_number,!1));R&&V&&S({imdbRating:V.imdbRating??null,imdbVotes:V.imdbVotes??null,metascore:V.metascore??null,rottenTomatoes:V.rottenTomatoes??null,fetchedAt:V.fetchedAt??Date.now()})}catch(B){console.error("Episode OMDb fetch failed",B)}}return N(),()=>{R=!1}},[p,t.season_number,t.episode_number,s,l]);const[P,M]=C.useState(!0),j=C.useRef(null);C.useEffect(()=>{const R=N=>{if(!j.current)return;const z=N.target;z&&(j.current.contains(z)||M(!0))};return document.addEventListener("mousedown",R),document.addEventListener("touchstart",R),()=>{document.removeEventListener("mousedown",R),document.removeEventListener("touchstart",R)}},[]),C.useEffect(()=>{M(!0)},[t.id]);const $=R=>{r&&r(String(t.id),R)},L=()=>typeof i=="number"&&i>0?A.jsxs("button",{onClick:()=>M(!1),className:"inline-flex items-center gap-2 px-2 py-1 rounded-md bg-slate-900/60 border border-white/10 text-slate-100 text-sm font-semibold","aria-label":"Show rating controls",children:[A.jsx(bn,{size:14,className:"fill-cyan-400 text-cyan-400"}),A.jsx("span",{className:"text-sm",children:i.toFixed(1)})]}):A.jsxs("button",{onClick:()=>M(!1),className:"inline-flex items-center gap-2 px-2 py-1 rounded-md bg-white/5 border border-white/6 text-slate-200 text-sm font-medium","aria-label":"Open rating controls",children:[A.jsx(bn,{size:14}),A.jsx("span",{className:"text-sm",children:"Rate"})]}),q=()=>!l||!w||!w.imdbRating&&!w.metascore&&!w.rottenTomatoes&&m==="N/A"?null:A.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-3",children:[(w==null?void 0:w.imdbRating)&&A.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 rounded-md bg-amber-500/16 border border-amber-500/25",children:[A.jsx(bn,{size:14,className:"fill-amber-400 text-amber-400"}),A.jsx("span",{className:"font-semibold text-sm text-amber-300",children:parseFloat(w.imdbRating).toFixed(1)}),A.jsx("span",{className:"text-[11px] text-amber-200/70 font-medium",children:"IMDb"})]}),(w==null?void 0:w.metascore)&&A.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 rounded-md bg-green-500/12 border border-green-500/25",children:[A.jsx("span",{className:"font-semibold text-sm text-green-300",children:w.metascore}),A.jsx("span",{className:"text-[11px] text-green-200/70 font-medium",children:"Metacritic"})]}),(w==null?void 0:w.rottenTomatoes)&&A.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 rounded-md bg-red-500/12 border border-red-500/25",children:[A.jsx("span",{className:"font-semibold text-sm text-red-300",children:w.rottenTomatoes}),A.jsx("span",{className:"text-[11px] text-red-200/70 font-medium",children:"Rotten"})]}),m!=="N/A"&&A.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 rounded-md bg-cyan-500/8 border border-cyan-500/25",children:[A.jsx(bn,{size:14,className:"fill-cyan-400 text-cyan-400"}),A.jsx("span",{className:"font-semibold text-sm text-cyan-300",children:m}),A.jsx("span",{className:"text-[11px] text-cyan-200/70 font-medium",children:"TMDB"})]})]});return A.jsx("div",{className:"fixed inset-0 z-50 bg-black/70 backdrop-blur-sm flex items-center justify-center px-2",children:A.jsxs("div",{className:"relative max-w-3xl w-full max-h-[90vh] overflow-hidden rounded-3xl bg-slate-950 border border-slate-800 shadow-2xl",children:[A.jsx("button",{onClick:n,className:"absolute top-3 right-3 z-10 p-2 rounded-full bg-black/40 hover:bg-black/70 text-slate-200","aria-label":"Close",children:A.jsx(Zy,{size:18})}),A.jsxs("div",{className:"grid md:grid-cols-[1.1fr_1.2fr] gap-0 h-full",children:[A.jsxs("div",{className:"relative bg-slate-900",children:[A.jsx("img",{src:t.still_path?`https://image.tmdb.org/t/p/w780${t.still_path}`:"https://picsum.photos/800/450",alt:t.name,className:"w-full h-full object-cover"}),A.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-950 via-slate-950/40 to-transparent"}),A.jsxs("div",{className:"absolute bottom-4 left-4 right-4 space-y-2",children:[e&&A.jsxs("div",{className:"inline-flex items-center gap-2 px-2 py-1 rounded-full bg-black/50 text-xs text-slate-200",children:[A.jsx(Jy,{size:14}),A.jsx("span",{className:"font-semibold",children:e})]}),A.jsxs("h2",{className:"text-xl md:text-2xl font-bold text-white",children:["S",t.season_number,"  E",t.episode_number,"  ",t.name]}),A.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-300",children:[A.jsxs("span",{className:"inline-flex items-center gap-1",children:[A.jsx(Qy,{size:14}),t.air_date||"Unknown"]}),A.jsxs("span",{className:"inline-flex items-center gap-1",children:[A.jsx(bn,{size:14,className:"text-amber-400 fill-amber-400"}),"TMDB ",m]}),typeof i=="number"&&A.jsxs("span",{className:"inline-flex items-center gap-1 text-cyan-300",children:[A.jsx(bn,{size:14,className:"fill-cyan-400 text-cyan-400"}),"Your ",i.toFixed(1)]})]})]})]}),A.jsxs("div",{className:"p-4 md:p-6 flex flex-col gap-4 overflow-y-auto",ref:j,children:[A.jsxs("div",{children:[A.jsx("h3",{className:"text-sm font-semibold text-slate-200 mb-1",children:"Overview"}),A.jsx("p",{className:"text-sm text-slate-300 leading-relaxed",children:t.overview||"No synopsis available for this episode."})]}),A.jsx(q,{}),A.jsx("div",{className:"mt-2",children:A.jsxs("a",{href:E,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 px-3 py-2 rounded-md bg-[#1b2332]/90 hover:bg-[#252f3f] border border-cyan-500/30 hover:border-cyan-400/60 text-xs font-semibold text-slate-100 transition-all",children:[A.jsx("img",{src:"/stremio-icon.png",alt:"Open in Stremio",className:"w-5 h-5 rounded-md"}),A.jsx("span",{children:"Open this episode in Stremio"})]})}),A.jsxs("div",{children:[A.jsx("h3",{className:"text-sm font-semibold text-slate-200 mb-1",children:"Your Rating"}),A.jsx("div",{children:P?A.jsx(L,{}):A.jsxs("div",{className:"inline-flex items-center gap-2 bg-slate-900/60 border border-white/6 rounded-md px-2 py-1",children:[Array.from({length:10},(R,N)=>N+1).map(R=>{const N=typeof i=="number"&&i>=R;return A.jsx("button",{onClick:()=>$(R),className:`p-1 ${N?"text-cyan-400":"text-slate-600"}`,"aria-label":`Rate ${R}`,children:A.jsx(bn,{size:14,className:N?"fill-cyan-400":"fill-slate-800"})},R)}),A.jsx("button",{onClick:()=>M(!0),className:"ml-2 px-2 py-0.5 rounded-md bg-white/6 border border-white/8 text-xs","aria-label":"Collapse rating",children:"Done"})]})})]}),h.length>0?A.jsxs("div",{className:"mt-2 space-y-3",children:[A.jsx("h3",{className:"text-sm font-semibold text-slate-200",children:"TMDB Reviews"}),A.jsx("div",{className:"space-y-3 max-h-52 overflow-y-auto pr-1",children:h.map(R=>{var N;return A.jsxs("div",{className:"p-3 rounded-xl bg-slate-900/70 border border-slate-800/80",children:[A.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[A.jsx("span",{className:"text-xs font-semibold text-slate-100",children:R.author||R.author_details.username||"User"}),typeof((N=R.author_details)==null?void 0:N.rating)=="number"&&A.jsxs("span",{className:"inline-flex items-center gap-1 text-xs text-amber-300",children:[A.jsx(bn,{size:12,className:"fill-amber-400 text-amber-400"}),R.author_details.rating.toFixed(1)]})]}),A.jsx("p",{className:"text-xs text-slate-300 line-clamp-4",children:R.content})]},R.id)})})]}):A.jsx("p",{className:"text-xs text-slate-500",children:"No TMDB reviews available for this episode yet."})]})]})]})})},md=({value:t,onChange:e,ariaLabel:n})=>A.jsx("button",{type:"button","aria-pressed":t,"aria-label":n,onClick:()=>e(!t),className:`relative inline-flex h-7 w-12 items-center rounded-full transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 hover:scale-105 ${t?"bg-gradient-to-r from-emerald-500 to-emerald-600 shadow-lg shadow-emerald-500/30 focus:ring-emerald-500":"bg-gradient-to-r from-slate-700 to-slate-600 shadow-md shadow-slate-900/20 hover:from-slate-600 hover:to-slate-500 focus:ring-slate-500"}`,children:A.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full shadow-lg transition-all duration-300 ${t?"translate-x-6 bg-white":"translate-x-1 bg-slate-300"}`})}),Xw=({title:t,subtitle:e,icon:n})=>A.jsx("div",{className:"mb-3",children:A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"text-cyan-400",children:n}),A.jsxs("div",{children:[A.jsx("div",{className:"text-sm font-semibold text-slate-200",children:t}),e&&A.jsx("div",{className:"text-xs text-slate-500 mt-0.5",children:e})]})]})}),aie=({currentKey:t,currentGeminiKey:e,currentOpenAIKey:n,currentOmdbKey:r,useOmdbRatings:i,currentShowEpisodeImdbOnCards:s,currentShowEpisodeImdbOnSeasonList:l,currentCloudSync:u,currentRankEpisodesByImdb:f,onSave:h,onClose:m,isOpen:p})=>{const[v,b]=C.useState(t||""),[E,w]=C.useState(e||""),[S,P]=C.useState(n||""),[M,j]=C.useState(r||""),[$,L]=C.useState(i),[q,I]=C.useState(s),[R,N]=C.useState(l),[z,k]=C.useState(!!u),[B,V]=C.useState(f),[pe,be]=C.useState("idle"),[G,ne]=C.useState("");if(C.useEffect(()=>{b(t||"")},[t]),C.useEffect(()=>{w(e||"")},[e]),C.useEffect(()=>{P(n||"")},[n]),C.useEffect(()=>{j(r||"")},[r]),C.useEffect(()=>{L(i)},[i]),C.useEffect(()=>{I(s)},[s]),C.useEffect(()=>{N(l)},[l]),C.useEffect(()=>{k(!!u)},[u]),C.useEffect(()=>{V(f)},[f]),!p)return null;const de=async()=>{const ge=v.trim(),Ee=E.trim(),F=S.trim(),X=M.trim();if(!ge){be("invalid"),ne("TMDB API Key is required");return}be("checking"),ne("");try{const re=await _$(ge);re.ok?(be("valid"),h(ge,Ee,F,X,$,q,R,z,B),setTimeout(()=>{be("idle"),m()},500)):(be("invalid"),ne(re.reason||"Unknown validation error"))}catch(re){console.error("Error validating TMDB key:",re),be("invalid"),ne(re.message||"Exception occurred")}};return A.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:A.jsxs("div",{className:"bg-gradient-to-br from-slate-900 via-slate-900 to-slate-800 border border-slate-700 w-full max-w-3xl rounded-2xl shadow-2xl flex flex-col max-h-[90vh] overflow-hidden animate-in slide-in-from-bottom-4 duration-300",children:[A.jsxs("div",{className:"flex items-center gap-4 p-6 border-b border-slate-800 bg-gradient-to-r from-cyan-950/20 to-blue-950/20",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"p-2 rounded-md bg-gradient-to-br from-cyan-800/30 to-cyan-900/20 shadow-lg shadow-cyan-500/10",children:A.jsx(mD,{size:28,className:"text-cyan-300"})}),A.jsxs("div",{children:[A.jsx("div",{className:"text-lg font-bold text-white",children:"App Configuration"}),A.jsx("div",{className:"text-xs text-slate-500",children:"Manage API keys & rating options"})]})]}),A.jsxs("div",{className:"ml-auto flex items-center gap-3",children:[A.jsx("div",{className:"text-xs text-slate-400",children:"Version"}),A.jsx("div",{className:"text-xs font-mono text-slate-300",children:"v1"})]})]}),A.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[A.jsxs("div",{className:"space-y-6",children:[A.jsx(Xw,{title:"TMDB (Required)",subtitle:"Needed for movie/show metadata",icon:A.jsx(nE,{})}),A.jsxs("div",{children:[A.jsx("input",{type:"text",value:v,onChange:ge=>{b(ge.target.value),be("idle")},placeholder:"TMDB API Key (v3)",className:"w-full bg-slate-950 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-cyan-500 focus:ring-2 focus:ring-cyan-500/20 transition-all duration-200 font-mono text-sm hover:border-slate-600"}),A.jsxs("p",{className:"text-xs text-slate-500 mt-2",children:["Get it from"," ",A.jsx("a",{href:"https://www.themoviedb.org/settings/api",target:"_blank",rel:"noreferrer",className:"text-cyan-400 hover:underline",children:"TMDB Settings"}),"."]})]}),A.jsx(Xw,{title:"AI Keys (Optional)",subtitle:"Optional keys for Natural Language search / AI features",icon:A.jsx(ig,{})}),A.jsxs("div",{className:"space-y-3",children:[A.jsx("input",{type:"text",value:E,onChange:ge=>w(ge.target.value),placeholder:"Google Gemini API Key (optional)",className:"w-full bg-slate-950 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 transition-all duration-200 font-mono text-sm hover:border-slate-600"}),A.jsx("input",{type:"text",value:S,onChange:ge=>P(ge.target.value),placeholder:"OpenAI API Key (optional)",className:"w-full bg-slate-950 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-200 font-mono text-sm hover:border-slate-600"})]})]}),A.jsxs("div",{className:"space-y-6",children:[A.jsx(Xw,{title:"OMDb / Ratings",subtitle:"IMDb, Metacritic & Rotten Tomatoes via OMDb",icon:A.jsx(bn,{})}),A.jsxs("div",{className:"space-y-3",children:[A.jsx("input",{type:"text",value:M,onChange:ge=>j(ge.target.value),placeholder:"OMDb API Key (optional)",className:"w-full bg-slate-950 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-amber-500 focus:ring-2 focus:ring-amber-500/20 transition-all duration-200 font-mono text-sm hover:border-slate-600"}),A.jsxs("p",{className:"text-xs text-slate-500",children:["Get an API key from"," ",A.jsx("a",{href:"https://www.omdbapi.com/apikey.aspx",target:"_blank",rel:"noreferrer",className:"text-amber-400 hover:underline",children:"OMDb API"}),"."]}),A.jsxs("div",{className:"flex items-center justify-between mt-2",children:[A.jsxs("div",{children:[A.jsx("div",{className:"text-sm font-medium text-slate-200",children:"Use OMDb Ratings"}),A.jsx("div",{className:"text-xs text-slate-500",children:"Prefer IMDb/RT/Metacritic where available"})]}),A.jsx(md,{value:$,onChange:L,ariaLabel:"Toggle OMDb ratings"})]})]}),A.jsxs("div",{className:"pt-4 border-t border-slate-800",children:[A.jsx("div",{className:"text-sm font-semibold text-slate-200 mb-2",children:"Episode Rating Display"}),A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{children:[A.jsx("div",{className:"text-sm font-medium text-slate-200",children:"Show episode IMDb on cards"}),A.jsx("div",{className:"text-xs text-slate-500",children:"Display episode-level IMDb rating on home / search cards for episode results"})]}),A.jsx(md,{value:q,onChange:I,ariaLabel:"Show episode imdb on cards"})]}),A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{children:[A.jsx("div",{className:"text-sm font-medium text-slate-200",children:"Show episode IMDb in season lists"}),A.jsx("div",{className:"text-xs text-slate-500",children:"Replace TMDB episode rating with episode IMDb in the season episode list (Details page)"})]}),A.jsx(md,{value:R,onChange:N,ariaLabel:"Show episode imdb in season list"})]}),A.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-800",children:[A.jsxs("div",{children:[A.jsx("div",{className:"text-sm font-medium text-slate-200",children:"Rank episodes by IMDb rating"}),A.jsx("div",{className:"text-xs text-slate-500",children:'When searching "top episodes", sort using IMDb rating instead of TMDB (if available)'})]}),A.jsx(md,{value:B,onChange:V,ariaLabel:"Rank episodes by IMDb rating"})]})]})]}),A.jsx("div",{className:"pt-4 border-t border-slate-800",children:A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{children:[A.jsxs("div",{className:"text-sm font-medium text-slate-200 flex items-center gap-2",children:[A.jsx(PB,{})," ",A.jsx("span",{children:"Sync ratings across devices"})]}),A.jsx("div",{className:"text-xs text-slate-500",children:"Upload OMDb cache to your Firestore account (opt-in)"})]}),A.jsx(md,{value:z,onChange:k,ariaLabel:"Enable cloud sync"})]})})]})]}),A.jsxs("div",{className:"mt-6",children:[A.jsx("div",{className:"text-xs text-slate-400 mb-2",children:"Advanced"}),A.jsx("div",{className:"bg-slate-900/40 border border-slate-800 rounded-lg p-3 text-xs text-slate-300",children:A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx(Jy,{className:"text-fuchsia-400"}),A.jsxs("div",{children:[A.jsx("div",{className:"font-medium",children:"Note"}),A.jsx("div",{className:"text-slate-500 text-[13px]",children:"TMDB API has rate limits  enabling OMDb may increase network calls. Cloud sync will debounce and batch uploads."})]})]})})]})]}),A.jsxs("div",{className:"border-t border-slate-800 px-6 py-4 flex items-center justify-between gap-4",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[pe==="invalid"&&A.jsxs("div",{className:"flex items-center gap-2 text-red-400 text-sm bg-red-400/5 p-2 rounded",children:[A.jsx(d$,{size:14}),A.jsxs("span",{children:["Error: ",G||"Invalid TMDB API Key"]})]}),pe==="valid"&&A.jsxs("div",{className:"flex items-center gap-2 text-emerald-300 text-sm bg-emerald-400/6 p-2 rounded",children:[A.jsx(s$,{size:14}),A.jsx("span",{children:"Saved"})]})]}),A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("button",{onClick:m,className:"px-4 py-2 text-slate-400 hover:text-white rounded-md transition-all duration-200 hover:bg-slate-800",children:"Cancel"}),A.jsx("button",{onClick:de,disabled:pe==="checking",className:"inline-flex items-center gap-2 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white font-bold px-4 py-2 rounded-md shadow-lg shadow-cyan-500/20 transition-all duration-200 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100",children:pe==="checking"?"Verifying":"Save configuration"})]})]})]})})},Fp=({title:t,items:e,onItemClick:n,accentColor:r="cyan",emptyMessage:i="No items available right now.",ratingsCache:s,useOmdbRatings:l=!0})=>{const u={cyan:"bg-cyan-500",fuchsia:"bg-fuchsia-500",emerald:"bg-emerald-500",indigo:"bg-indigo-500",pink:"bg-pink-500",amber:"bg-amber-500"},f=u[r]||u.cyan;return A.jsxs("section",{className:"mb-10",children:[A.jsx("div",{className:"flex items-center justify-between mb-4",children:A.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[A.jsx("span",{className:`w-2 h-8 ${f} rounded-full`}),t]})}),e.length>0?A.jsxs("div",{className:"relative -mx-4 px-4",children:[A.jsx("div",{className:"flex gap-4 overflow-x-auto scrollbar-hide snap-x snap-mandatory pb-4 scroll-smooth",children:e.slice(0,20).map(h=>A.jsx("div",{className:"flex-shrink-0 w-[160px] sm:w-[180px] md:w-[200px] snap-start",children:A.jsx(rE,{item:h,onClick:n,ratingsCache:s,useOmdbRatings:l})},h.id))}),A.jsx("div",{className:"absolute left-0 top-0 bottom-4 w-8 bg-gradient-to-r from-[#020617] to-transparent pointer-events-none"}),A.jsx("div",{className:"absolute right-0 top-0 bottom-4 w-8 bg-gradient-to-l from-[#020617] to-transparent pointer-events-none"})]}):A.jsx("p",{className:"text-slate-500 text-sm",children:i})]})},sie=()=>{};var FP={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m5=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},oie=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],l=t[n++],u=t[n++],f=((i&7)<<18|(s&63)<<12|(l&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const s=t[n++],l=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|l&63)}}return e.join("")},p5={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],l=i+1<t.length,u=l?t[i+1]:0,f=i+2<t.length,h=f?t[i+2]:0,m=s>>2,p=(s&3)<<4|u>>4;let v=(u&15)<<2|h>>6,b=h&63;f||(b=64,l||(v=64)),r.push(n[m],n[p],n[v],n[b])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(m5(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):oie(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],u=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||u==null||h==null||p==null)throw new lie;const v=s<<2|u>>4;if(r.push(v),h!==64){const b=u<<4&240|h>>2;if(r.push(b),p!==64){const E=h<<6&192|p;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class lie extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cie=function(t){const e=m5(t);return p5.encodeByteArray(e,!0)},wy=function(t){return cie(t).replace(/\./g,"")},g5=function(t){try{return p5.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uie(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fie=()=>uie().__FIREBASE_DEFAULTS__,die=()=>{if(typeof process>"u"||typeof FP>"u")return;const t=FP.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},hie=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&g5(t[1]);return e&&JSON.parse(e)},Vv=()=>{try{return sie()||fie()||die()||hie()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},y5=t=>{var e,n;return(n=(e=Vv())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},mie=t=>{const e=y5(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},v5=()=>{var t;return(t=Vv())==null?void 0:t.config},_5=t=>{var e;return(e=Vv())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pie{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yu(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function b5(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gie(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[wy(JSON.stringify(n)),wy(JSON.stringify(l)),""].join(".")}const Dd={};function yie(){const t={prod:[],emulator:[]};for(const e of Object.keys(Dd))Dd[e]?t.emulator.push(e):t.prod.push(e);return t}function vie(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let HP=!1;function w5(t,e){if(typeof window>"u"||typeof document>"u"||!Yu(window.location.host)||Dd[t]===e||Dd[t]||HP)return;Dd[t]=e;function n(v){return`__firebase__banner__${v}`}const r="__firebase__banner",s=yie().prod.length>0;function l(){const v=document.getElementById(r);v&&v.remove()}function u(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function f(v,b){v.setAttribute("width","24"),v.setAttribute("id",b),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function h(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{HP=!0,l()},v}function m(v,b){v.setAttribute("id",b),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function p(){const v=vie(r),b=n("text"),E=document.getElementById(b)||document.createElement("span"),w=n("learnmore"),S=document.getElementById(w)||document.createElement("a"),P=n("preprendIcon"),M=document.getElementById(P)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const j=v.element;u(j),m(S,w);const $=h();f(M,P),j.append(M,E,S,$),document.body.appendChild(j)}s?(E.innerText="Preview backend disconnected.",M.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(M.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _ie(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pr())}function bie(){var e;const t=(e=Vv())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function wie(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function xie(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Eie(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Sie(){const t=pr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Aie(){return!bie()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Tie(){try{return typeof indexedDB=="object"}catch{return!1}}function Cie(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oie="FirebaseError";class Vs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Oie,Object.setPrototypeOf(this,Vs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$h.prototype.create)}}class $h{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],l=s?Iie(s,r):"Error",u=`${this.serviceName}: ${l} (${i}).`;return new Vs(i,u,r)}}function Iie(t,e){return t.replace(Rie,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Rie=/\{\$([^}]+)}/g;function Nie(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Kl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],l=e[i];if(GP(s)&&GP(l)){if(!Kl(s,l))return!1}else if(s!==l)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function GP(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qh(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function _d(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function bd(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Pie(t,e){const n=new Mie(t,e);return n.subscribe.bind(n)}class Mie{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");kie(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Qw),i.error===void 0&&(i.error=Qw),i.complete===void 0&&(i.complete=Qw);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kie(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Qw(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ii(t){return t&&t._delegate?t._delegate:t}class Yl{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Die{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new pie;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Lie(e))try{this.getOrInitializeService({instanceIdentifier:Cl})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Cl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Cl){return this.instances.has(e)}getOptions(e=Cl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,l]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(s);r===u&&l.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:jie(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Cl){return this.component?this.component.multipleInstances?e:Cl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function jie(t){return t===Cl?void 0:t}function Lie(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vie{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Die(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var st;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(st||(st={}));const Uie={debug:st.DEBUG,verbose:st.VERBOSE,info:st.INFO,warn:st.WARN,error:st.ERROR,silent:st.SILENT},zie=st.INFO,Bie={[st.DEBUG]:"log",[st.VERBOSE]:"log",[st.INFO]:"info",[st.WARN]:"warn",[st.ERROR]:"error"},$ie=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Bie[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class VS{constructor(e){this.name=e,this._logLevel=zie,this._logHandler=$ie,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in st))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Uie[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,st.DEBUG,...e),this._logHandler(this,st.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,st.VERBOSE,...e),this._logHandler(this,st.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,st.INFO,...e),this._logHandler(this,st.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,st.WARN,...e),this._logHandler(this,st.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,st.ERROR,...e),this._logHandler(this,st.ERROR,...e)}}const qie=(t,e)=>e.some(n=>t instanceof n);let KP,YP;function Fie(){return KP||(KP=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Hie(){return YP||(YP=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const x5=new WeakMap,vx=new WeakMap,E5=new WeakMap,Jw=new WeakMap,US=new WeakMap;function Gie(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",l)},s=()=>{n(Mo(t.result)),i()},l=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&x5.set(n,t)}).catch(()=>{}),US.set(e,t),e}function Kie(t){if(vx.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",l),t.removeEventListener("abort",l)},s=()=>{n(),i()},l=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",l),t.addEventListener("abort",l)});vx.set(t,e)}let _x={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return vx.get(t);if(e==="objectStoreNames")return t.objectStoreNames||E5.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Mo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Yie(t){_x=t(_x)}function Wie(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Zw(this),e,...n);return E5.set(r,e.sort?e.sort():[e]),Mo(r)}:Hie().includes(t)?function(...e){return t.apply(Zw(this),e),Mo(x5.get(this))}:function(...e){return Mo(t.apply(Zw(this),e))}}function Xie(t){return typeof t=="function"?Wie(t):(t instanceof IDBTransaction&&Kie(t),qie(t,Fie())?new Proxy(t,_x):t)}function Mo(t){if(t instanceof IDBRequest)return Gie(t);if(Jw.has(t))return Jw.get(t);const e=Xie(t);return e!==t&&(Jw.set(t,e),US.set(e,t)),e}const Zw=t=>US.get(t);function Qie(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const l=indexedDB.open(t,e),u=Mo(l);return r&&l.addEventListener("upgradeneeded",f=>{r(Mo(l.result),f.oldVersion,f.newVersion,Mo(l.transaction),f)}),n&&l.addEventListener("blocked",f=>n(f.oldVersion,f.newVersion,f)),u.then(f=>{s&&f.addEventListener("close",()=>s()),i&&f.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}const Jie=["get","getKey","getAll","getAllKeys","count"],Zie=["put","add","delete","clear"],e1=new Map;function WP(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(e1.get(e))return e1.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Zie.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Jie.includes(n)))return;const s=async function(l,...u){const f=this.transaction(l,i?"readwrite":"readonly");let h=f.store;return r&&(h=h.index(u.shift())),(await Promise.all([h[n](...u),i&&f.done]))[0]};return e1.set(e,s),s}Yie(t=>({...t,get:(e,n,r)=>WP(e,n)||t.get(e,n,r),has:(e,n)=>!!WP(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eae{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(tae(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function tae(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const bx="@firebase/app",XP="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs=new VS("@firebase/app"),nae="@firebase/app-compat",rae="@firebase/analytics-compat",iae="@firebase/analytics",aae="@firebase/app-check-compat",sae="@firebase/app-check",oae="@firebase/auth",lae="@firebase/auth-compat",cae="@firebase/database",uae="@firebase/data-connect",fae="@firebase/database-compat",dae="@firebase/functions",hae="@firebase/functions-compat",mae="@firebase/installations",pae="@firebase/installations-compat",gae="@firebase/messaging",yae="@firebase/messaging-compat",vae="@firebase/performance",_ae="@firebase/performance-compat",bae="@firebase/remote-config",wae="@firebase/remote-config-compat",xae="@firebase/storage",Eae="@firebase/storage-compat",Sae="@firebase/firestore",Aae="@firebase/ai",Tae="@firebase/firestore-compat",Cae="firebase",Oae="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx="[DEFAULT]",Iae={[bx]:"fire-core",[nae]:"fire-core-compat",[iae]:"fire-analytics",[rae]:"fire-analytics-compat",[sae]:"fire-app-check",[aae]:"fire-app-check-compat",[oae]:"fire-auth",[lae]:"fire-auth-compat",[cae]:"fire-rtdb",[uae]:"fire-data-connect",[fae]:"fire-rtdb-compat",[dae]:"fire-fn",[hae]:"fire-fn-compat",[mae]:"fire-iid",[pae]:"fire-iid-compat",[gae]:"fire-fcm",[yae]:"fire-fcm-compat",[vae]:"fire-perf",[_ae]:"fire-perf-compat",[bae]:"fire-rc",[wae]:"fire-rc-compat",[xae]:"fire-gcs",[Eae]:"fire-gcs-compat",[Sae]:"fire-fst",[Tae]:"fire-fst-compat",[Aae]:"fire-vertex","fire-js":"fire-js",[Cae]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xy=new Map,Rae=new Map,xx=new Map;function QP(t,e){try{t.container.addComponent(e)}catch(n){Cs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Pu(t){const e=t.name;if(xx.has(e))return Cs.debug(`There were multiple attempts to register component ${e}.`),!1;xx.set(e,t);for(const n of xy.values())QP(n,t);for(const n of Rae.values())QP(n,t);return!0}function zS(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ei(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nae={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ko=new $h("app","Firebase",Nae);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pae{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Yl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ko.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wu=Oae;function S5(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:wx,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw ko.create("bad-app-name",{appName:String(i)});if(n||(n=v5()),!n)throw ko.create("no-options");const s=xy.get(i);if(s){if(Kl(n,s.options)&&Kl(r,s.config))return s;throw ko.create("duplicate-app",{appName:i})}const l=new Vie(i);for(const f of xx.values())l.addComponent(f);const u=new Pae(n,r,l);return xy.set(i,u),u}function A5(t=wx){const e=xy.get(t);if(!e&&t===wx&&v5())return S5();if(!e)throw ko.create("no-app",{appName:t});return e}function Do(t,e,n){let r=Iae[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const l=[`Unable to register library "${r}" with version "${e}":`];i&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&l.push("and"),s&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Cs.warn(l.join(" "));return}Pu(new Yl(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mae="firebase-heartbeat-database",kae=1,sh="firebase-heartbeat-store";let t1=null;function T5(){return t1||(t1=Qie(Mae,kae,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(sh)}catch(n){console.warn(n)}}}}).catch(t=>{throw ko.create("idb-open",{originalErrorMessage:t.message})})),t1}async function Dae(t){try{const n=(await T5()).transaction(sh),r=await n.objectStore(sh).get(C5(t));return await n.done,r}catch(e){if(e instanceof Vs)Cs.warn(e.message);else{const n=ko.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Cs.warn(n.message)}}}async function JP(t,e){try{const r=(await T5()).transaction(sh,"readwrite");await r.objectStore(sh).put(e,C5(t)),await r.done}catch(n){if(n instanceof Vs)Cs.warn(n.message);else{const r=ko.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Cs.warn(r.message)}}}function C5(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jae=1024,Lae=30;class Vae{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new zae(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=ZP();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(l=>l.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>Lae){const l=Bae(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Cs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ZP(),{heartbeatsToSend:r,unsentEntries:i}=Uae(this._heartbeatsCache.heartbeats),s=wy(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Cs.warn(n),""}}}function ZP(){return new Date().toISOString().substring(0,10)}function Uae(t,e=jae){const n=[];let r=t.slice();for(const i of t){const s=n.find(l=>l.agent===i.agent);if(s){if(s.dates.push(i.date),eM(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),eM(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class zae{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Tie()?Cie().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Dae(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return JP(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return JP(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function eM(t){return wy(JSON.stringify({version:2,heartbeats:t})).length}function Bae(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $ae(t){Pu(new Yl("platform-logger",e=>new eae(e),"PRIVATE")),Pu(new Yl("heartbeat",e=>new Vae(e),"PRIVATE")),Do(bx,XP,t),Do(bx,XP,"esm2020"),Do("fire-js","")}$ae("");var qae="firebase",Fae="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Do(qae,Fae,"app");function O5(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Hae=O5,I5=new $h("auth","Firebase",O5());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ey=new VS("@firebase/auth");function Gae(t,...e){Ey.logLevel<=st.WARN&&Ey.warn(`Auth (${Wu}): ${t}`,...e)}function ug(t,...e){Ey.logLevel<=st.ERROR&&Ey.error(`Auth (${Wu}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oi(t,...e){throw $S(t,...e)}function Yi(t,...e){return $S(t,...e)}function BS(t,e,n){const r={...Hae(),[e]:n};return new $h("auth","Firebase",r).create(e,{appName:t.name})}function gs(t){return BS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Kae(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Oi(t,"argument-error"),BS(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $S(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return I5.create(t,...e)}function Fe(t,e,...n){if(!t)throw $S(e,...n)}function ds(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ug(e),new Error(e)}function Os(t,e){t||ds(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ex(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function Yae(){return tM()==="http:"||tM()==="https:"}function tM(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wae(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Yae()||xie()||"connection"in navigator)?navigator.onLine:!0}function Xae(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e,n){this.shortDelay=e,this.longDelay=n,Os(n>e,"Short delay should be less than long delay!"),this.isMobile=_ie()||Eie()}get(){return Wae()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qS(t,e){Os(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R5{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ds("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ds("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ds("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qae={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jae=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Zae=new Fh(3e4,6e4);function Us(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function zs(t,e,n,r,i={}){return N5(t,i,async()=>{let s={},l={};r&&(e==="GET"?l=r:s={body:JSON.stringify(r)});const u=qh({key:t.config.apiKey,...l}).slice(1),f=await t._getAdditionalHeaders();f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode);const h={method:e,headers:f,...s};return wie()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&Yu(t.emulatorConfig.host)&&(h.credentials="include"),R5.fetch()(await P5(t,t.config.apiHost,n,u),h)})}async function N5(t,e,n){t._canInitEmulator=!1;const r={...Qae,...e};try{const i=new tse(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const l=await s.json();if("needConfirmation"in l)throw Hp(t,"account-exists-with-different-credential",l);if(s.ok&&!("errorMessage"in l))return l;{const u=s.ok?l.errorMessage:l.error.message,[f,h]=u.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hp(t,"credential-already-in-use",l);if(f==="EMAIL_EXISTS")throw Hp(t,"email-already-in-use",l);if(f==="USER_DISABLED")throw Hp(t,"user-disabled",l);const m=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw BS(t,m,h);Oi(t,m)}}catch(i){if(i instanceof Vs)throw i;Oi(t,"network-request-failed",{message:String(i)})}}async function Hh(t,e,n,r,i={}){const s=await zs(t,e,n,r,i);return"mfaPendingCredential"in s&&Oi(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function P5(t,e,n,r){const i=`${e}${n}?${r}`,s=t,l=s.config.emulator?qS(t.config,i):`${t.config.apiScheme}://${i}`;return Jae.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(l).toString():l}function ese(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class tse{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Yi(this.auth,"network-request-failed")),Zae.get())})}}function Hp(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Yi(t,e,r);return i.customData._tokenResponse=n,i}function nM(t){return t!==void 0&&t.enterprise!==void 0}class nse{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return ese(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function rse(t,e){return zs(t,"GET","/v2/recaptchaConfig",Us(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ise(t,e){return zs(t,"POST","/v1/accounts:delete",e)}async function Sy(t,e){return zs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jd(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ase(t,e=!1){const n=ii(t),r=await n.getIdToken(e),i=FS(r);Fe(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,l=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:jd(n1(i.auth_time)),issuedAtTime:jd(n1(i.iat)),expirationTime:jd(n1(i.exp)),signInProvider:l||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function n1(t){return Number(t)*1e3}function FS(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ug("JWT malformed, contained fewer than 3 sections"),null;try{const i=g5(n);return i?JSON.parse(i):(ug("Failed to decode base64 JWT payload"),null)}catch(i){return ug("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function rM(t){const e=FS(t);return Fe(e,"internal-error"),Fe(typeof e.exp<"u","internal-error"),Fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oh(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Vs&&sse(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function sse({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ose{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=jd(this.lastLoginAt),this.creationTime=jd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ay(t){var p;const e=t.auth,n=await t.getIdToken(),r=await oh(t,Sy(e,{idToken:n}));Fe(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=(p=i.providerUserInfo)!=null&&p.length?M5(i.providerUserInfo):[],l=cse(t.providerData,s),u=t.isAnonymous,f=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),h=u?f:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new Sx(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,m)}async function lse(t){const e=ii(t);await Ay(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function cse(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function M5(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function use(t,e){const n=await N5(t,{},async()=>{const r=qh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,l=await P5(t,i,"/v1/token",`key=${s}`),u=await t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:u,body:r};return t.emulatorConfig&&Yu(t.emulatorConfig.host)&&(f.credentials="include"),R5.fetch()(l,f)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function fse(t,e){return zs(t,"POST","/v2/accounts:revokeToken",Us(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Fe(e.idToken,"internal-error"),Fe(typeof e.idToken<"u","internal-error"),Fe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):rM(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Fe(e.length!==0,"internal-error");const n=rM(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await use(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,l=new yu;return r&&(Fe(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),i&&(Fe(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),s&&(Fe(typeof s=="number","internal-error",{appName:e}),l.expirationTime=s),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new yu,this.toJSON())}_performRefresh(){return ds("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bo(t,e){Fe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Hi{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new ose(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Sx(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await oh(this,this.stsTokenManager.getToken(this.auth,e));return Fe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return ase(this,e)}reload(){return lse(this)}_assign(e){this!==e&&(Fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Hi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ay(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ei(this.auth.app))return Promise.reject(gs(this.auth));const e=await this.getIdToken();return await oh(this,ise(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,l=n.photoURL??void 0,u=n.tenantId??void 0,f=n._redirectEventId??void 0,h=n.createdAt??void 0,m=n.lastLoginAt??void 0,{uid:p,emailVerified:v,isAnonymous:b,providerData:E,stsTokenManager:w}=n;Fe(p&&w,e,"internal-error");const S=yu.fromJSON(this.name,w);Fe(typeof p=="string",e,"internal-error"),bo(r,e.name),bo(i,e.name),Fe(typeof v=="boolean",e,"internal-error"),Fe(typeof b=="boolean",e,"internal-error"),bo(s,e.name),bo(l,e.name),bo(u,e.name),bo(f,e.name),bo(h,e.name),bo(m,e.name);const P=new Hi({uid:p,auth:e,email:i,emailVerified:v,displayName:r,isAnonymous:b,photoURL:l,phoneNumber:s,tenantId:u,stsTokenManager:S,createdAt:h,lastLoginAt:m});return E&&Array.isArray(E)&&(P.providerData=E.map(M=>({...M}))),f&&(P._redirectEventId=f),P}static async _fromIdTokenResponse(e,n,r=!1){const i=new yu;i.updateFromServerResponse(n);const s=new Hi({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Ay(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Fe(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?M5(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),u=new yu;u.updateFromIdToken(r);const f=new Hi({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:l}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Sx(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(f,h),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iM=new Map;function hs(t){Os(t instanceof Function,"Expected a class definition");let e=iM.get(t);return e?(Os(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,iM.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k5{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}k5.type="NONE";const aM=k5;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fg(t,e,n){return`firebase:${t}:${e}:${n}`}class vu{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=fg(this.userKey,i.apiKey,s),this.fullPersistenceKey=fg("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Sy(this.auth,{idToken:e}).catch(()=>{});return n?Hi._fromGetAccountInfoResponse(this.auth,n,e):null}return Hi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new vu(hs(aM),e,r);const i=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=i[0]||hs(aM);const l=fg(r,e.config.apiKey,e.name);let u=null;for(const h of n)try{const m=await h._get(l);if(m){let p;if(typeof m=="string"){const v=await Sy(e,{idToken:m}).catch(()=>{});if(!v)break;p=await Hi._fromGetAccountInfoResponse(e,v,m)}else p=Hi._fromJSON(e,m);h!==s&&(u=p),s=h;break}}catch{}const f=i.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!f.length?new vu(s,e,r):(s=f[0],u&&await s._set(l,u.toJSON()),await Promise.all(n.map(async h=>{if(h!==s)try{await h._remove(l)}catch{}})),new vu(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sM(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(V5(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(D5(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(z5(e))return"Blackberry";if(B5(e))return"Webos";if(j5(e))return"Safari";if((e.includes("chrome/")||L5(e))&&!e.includes("edge/"))return"Chrome";if(U5(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function D5(t=pr()){return/firefox\//i.test(t)}function j5(t=pr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function L5(t=pr()){return/crios\//i.test(t)}function V5(t=pr()){return/iemobile/i.test(t)}function U5(t=pr()){return/android/i.test(t)}function z5(t=pr()){return/blackberry/i.test(t)}function B5(t=pr()){return/webos/i.test(t)}function HS(t=pr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function dse(t=pr()){var e;return HS(t)&&!!((e=window.navigator)!=null&&e.standalone)}function hse(){return Sie()&&document.documentMode===10}function $5(t=pr()){return HS(t)||U5(t)||B5(t)||z5(t)||/windows phone/i.test(t)||V5(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q5(t,e=[]){let n;switch(t){case"Browser":n=sM(pr());break;case"Worker":n=`${sM(pr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Wu}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mse{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((l,u)=>{try{const f=e(s);l(f)}catch(f){u(f)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pse(t,e={}){return zs(t,"GET","/v2/passwordPolicy",Us(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gse=6;class yse{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??gse,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vse{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new oM(this),this.idTokenSubscription=new oM(this),this.beforeStateQueue=new mse(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=I5,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=hs(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await vu.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Sy(this,{idToken:e}),r=await Hi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(ei(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(u,u))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(s=this.redirectUser)==null?void 0:s._redirectEventId,u=r==null?void 0:r._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===u)&&(f!=null&&f.user)&&(r=f.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ay(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Xae()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ei(this.app))return Promise.reject(gs(this));const n=e?ii(e):null;return n&&Fe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ei(this.app)?Promise.reject(gs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ei(this.app)?Promise.reject(gs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(hs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await pse(this),n=new yse(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new $h("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await fse(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&hs(e)||this._popupRedirectResolver;Fe(n,this,"argument-error"),this.redirectPersistenceManager=await vu.create(this,[hs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let l=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Fe(u,this,"internal-error"),u.then(()=>{l||s(this.currentUser)}),typeof n=="function"){const f=e.addObserver(n,r,i);return()=>{l=!0,f()}}else{const f=e.addObserver(n);return()=>{l=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=q5(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(ei(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&Gae(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Bs(t){return ii(t)}class oM{constructor(e){this.auth=e,this.observer=null,this.addObserver=Pie(n=>this.observer=n)}get next(){return Fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _se(t){Uv=t}function F5(t){return Uv.loadJS(t)}function bse(){return Uv.recaptchaEnterpriseScript}function wse(){return Uv.gapiScript}function xse(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class Ese{constructor(){this.enterprise=new Sse}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Sse{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Ase="recaptcha-enterprise",H5="NO_RECAPTCHA";class Tse{constructor(e){this.type=Ase,this.auth=Bs(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(l,u)=>{rse(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const h=new nse(f);return s.tenantId==null?s._agentRecaptchaConfig=h:s._tenantRecaptchaConfigs[s.tenantId]=h,l(h.siteKey)}}).catch(f=>{u(f)})})}function i(s,l,u){const f=window.grecaptcha;nM(f)?f.enterprise.ready(()=>{f.enterprise.execute(s,{action:e}).then(h=>{l(h)}).catch(()=>{l(H5)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Ese().execute("siteKey",{action:"verify"}):new Promise((s,l)=>{r(this.auth).then(u=>{if(!n&&nM(window.grecaptcha))i(u,s,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let f=bse();f.length!==0&&(f+=u),F5(f).then(()=>{i(u,s,l)}).catch(h=>{l(h)})}}).catch(u=>{l(u)})})}}async function lM(t,e,n,r=!1,i=!1){const s=new Tse(t);let l;if(i)l=H5;else try{l=await s.verify(n)}catch{l=await s.verify(n,!0)}const u={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const f=u.phoneEnrollmentInfo.phoneNumber,h=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const f=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:l}):Object.assign(u,{captchaResponse:l}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function Ty(t,e,n,r,i){var s;if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await lM(t,e,n,n==="getOobCode");return r(t,l)}else return r(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await lM(t,e,n,n==="getOobCode");return r(t,u)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cse(t,e){const n=zS(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Kl(s,e??{}))return i;Oi(i,"already-initialized")}return n.initialize({options:e})}function Ose(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(hs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Ise(t,e,n){const r=Bs(t);Fe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=G5(e),{host:l,port:u}=Rse(e),f=u===null?"":`:${u}`,h={url:`${s}//${l}${f}/`},m=Object.freeze({host:l,port:u,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Fe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Fe(Kl(h,r.config.emulator)&&Kl(m,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=m,r.settings.appVerificationDisabledForTesting=!0,Yu(l)?(b5(`${s}//${l}${f}`),w5("Auth",!0)):Nse()}function G5(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Rse(t){const e=G5(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:cM(r.substr(s.length+1))}}else{const[s,l]=r.split(":");return{host:s,port:cM(l)}}}function cM(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Nse(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ds("not implemented")}_getIdTokenResponse(e){return ds("not implemented")}_linkToIdToken(e,n){return ds("not implemented")}_getReauthenticationResolver(e){return ds("not implemented")}}async function Pse(t,e){return zs(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mse(t,e){return Hh(t,"POST","/v1/accounts:signInWithPassword",Us(t,e))}async function kse(t,e){return zs(t,"POST","/v1/accounts:sendOobCode",Us(t,e))}async function Dse(t,e){return kse(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jse(t,e){return Hh(t,"POST","/v1/accounts:signInWithEmailLink",Us(t,e))}async function Lse(t,e){return Hh(t,"POST","/v1/accounts:signInWithEmailLink",Us(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh extends GS{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new lh(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new lh(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ty(e,n,"signInWithPassword",Mse);case"emailLink":return jse(e,{email:this._email,oobCode:this._password});default:Oi(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ty(e,r,"signUpPassword",Pse);case"emailLink":return Lse(e,{idToken:n,email:this._email,oobCode:this._password});default:Oi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _u(t,e){return Hh(t,"POST","/v1/accounts:signInWithIdp",Us(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vse="http://localhost";class Wl extends GS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Wl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Oi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const l=new Wl(r,i);return l.idToken=s.idToken||void 0,l.accessToken=s.accessToken||void 0,l.secret=s.secret,l.nonce=s.nonce,l.pendingToken=s.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return _u(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,_u(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,_u(e,n)}buildRequest(){const e={requestUri:Vse,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=qh(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Use(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function zse(t){const e=_d(bd(t)).link,n=e?_d(bd(e)).deep_link_id:null,r=_d(bd(t)).deep_link_id;return(r?_d(bd(r)).link:null)||r||n||e||t}class KS{constructor(e){const n=_d(bd(e)),r=n.apiKey??null,i=n.oobCode??null,s=Use(n.mode??null);Fe(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=zse(e);try{return new KS(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(){this.providerId=Xu.PROVIDER_ID}static credential(e,n){return lh._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=KS.parseLink(n);return Fe(r,"argument-error"),lh._fromEmailAndCode(e,r.code,r.tenantId)}}Xu.PROVIDER_ID="password";Xu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Xu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh extends YS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co extends Gh{constructor(){super("facebook.com")}static credential(e){return Wl._fromParams({providerId:Co.PROVIDER_ID,signInMethod:Co.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Co.credentialFromTaggedObject(e)}static credentialFromError(e){return Co.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Co.credential(e.oauthAccessToken)}catch{return null}}}Co.FACEBOOK_SIGN_IN_METHOD="facebook.com";Co.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends Gh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Wl._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return cs.credential(n,r)}catch{return null}}}cs.GOOGLE_SIGN_IN_METHOD="google.com";cs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo extends Gh{constructor(){super("github.com")}static credential(e){return Wl._fromParams({providerId:Oo.PROVIDER_ID,signInMethod:Oo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Oo.credentialFromTaggedObject(e)}static credentialFromError(e){return Oo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Oo.credential(e.oauthAccessToken)}catch{return null}}}Oo.GITHUB_SIGN_IN_METHOD="github.com";Oo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io extends Gh{constructor(){super("twitter.com")}static credential(e,n){return Wl._fromParams({providerId:Io.PROVIDER_ID,signInMethod:Io.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Io.credentialFromTaggedObject(e)}static credentialFromError(e){return Io.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Io.credential(n,r)}catch{return null}}}Io.TWITTER_SIGN_IN_METHOD="twitter.com";Io.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bse(t,e){return Hh(t,"POST","/v1/accounts:signUp",Us(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Hi._fromIdTokenResponse(e,r,i),l=uM(r);return new Xl({user:s,providerId:l,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=uM(r);return new Xl({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function uM(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy extends Vs{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Cy.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Cy(e,n,r,i)}}function K5(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Cy._fromErrorAndOperation(t,s,e,r):s})}async function $se(t,e,n=!1){const r=await oh(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Xl._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qse(t,e,n=!1){const{auth:r}=t;if(ei(r.app))return Promise.reject(gs(r));const i="reauthenticate";try{const s=await oh(t,K5(r,i,e,t),n);Fe(s.idToken,r,"internal-error");const l=FS(s.idToken);Fe(l,r,"internal-error");const{sub:u}=l;return Fe(t.uid===u,r,"user-mismatch"),Xl._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Oi(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y5(t,e,n=!1){if(ei(t.app))return Promise.reject(gs(t));const r="signIn",i=await K5(t,r,e),s=await Xl._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function Fse(t,e){return Y5(Bs(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W5(t){const e=Bs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Hse(t,e,n){const r=Bs(t);await Ty(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Dse)}async function Gse(t,e,n){if(ei(t.app))return Promise.reject(gs(t));const r=Bs(t),l=await Ty(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Bse).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&W5(t),f}),u=await Xl._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(u.user),u}function Kse(t,e,n){return ei(t.app)?Promise.reject(gs(t)):Fse(ii(t),Xu.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&W5(t),r})}function Yse(t,e,n,r){return ii(t).onIdTokenChanged(e,n,r)}function Wse(t,e,n){return ii(t).beforeAuthStateChanged(e,n)}function Xse(t,e,n,r){return ii(t).onAuthStateChanged(e,n,r)}function Qse(t){return ii(t).signOut()}const Oy="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X5{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Oy,"1"),this.storage.removeItem(Oy),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jse=1e3,Zse=10;class Q5 extends X5{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=$5(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,u,f)=>{this.notifyListeners(l,f)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(r);!n&&this.localCache[r]===l||this.notifyListeners(r,l)},s=this.storage.getItem(r);hse()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Zse):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Jse)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Q5.type="LOCAL";const eoe=Q5;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J5 extends X5{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}J5.type="SESSION";const Z5=J5;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function toe(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new zv(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,l=this.handlersMap[i];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const u=Array.from(l).map(async h=>h(n.origin,s)),f=await toe(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:f})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}zv.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class noe{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,l;return new Promise((u,f)=>{const h=WS("",20);i.port1.start();const m=setTimeout(()=>{f(new Error("unsupported_event"))},r);l={messageChannel:i,onMessage(p){const v=p;if(v.data.eventId===h)switch(v.data.status){case"ack":clearTimeout(m),s=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),u(v.data.response);break;default:clearTimeout(m),clearTimeout(s),f(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oa(){return window}function roe(t){Oa().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e6(){return typeof Oa().WorkerGlobalScope<"u"&&typeof Oa().importScripts=="function"}async function ioe(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function aoe(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function soe(){return e6()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t6="firebaseLocalStorageDb",ooe=1,Iy="firebaseLocalStorage",n6="fbase_key";class Kh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Bv(t,e){return t.transaction([Iy],e?"readwrite":"readonly").objectStore(Iy)}function loe(){const t=indexedDB.deleteDatabase(t6);return new Kh(t).toPromise()}function Ax(){const t=indexedDB.open(t6,ooe);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Iy,{keyPath:n6})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Iy)?e(r):(r.close(),await loe(),e(await Ax()))})})}async function fM(t,e,n){const r=Bv(t,!0).put({[n6]:e,value:n});return new Kh(r).toPromise()}async function coe(t,e){const n=Bv(t,!1).get(e),r=await new Kh(n).toPromise();return r===void 0?null:r.value}function dM(t,e){const n=Bv(t,!0).delete(e);return new Kh(n).toPromise()}const uoe=800,foe=3;class r6{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ax(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>foe)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return e6()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=zv._getInstance(soe()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await ioe(),!this.activeServiceWorker)return;this.sender=new noe(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||aoe()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ax();return await fM(e,Oy,"1"),await dM(e,Oy),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>fM(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>coe(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>dM(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Bv(i,!1).getAll();return new Kh(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),uoe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}r6.type="LOCAL";const doe=r6;new Fh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i6(t,e){return e?hs(e):(Fe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS extends GS{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _u(e,this._buildIdpRequest())}_linkToIdToken(e,n){return _u(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return _u(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function hoe(t){return Y5(t.auth,new XS(t),t.bypassAuthState)}function moe(t){const{auth:e,user:n}=t;return Fe(n,e,"internal-error"),qse(n,new XS(t),t.bypassAuthState)}async function poe(t){const{auth:e,user:n}=t;return Fe(n,e,"internal-error"),$se(n,new XS(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a6{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:l,type:u}=e;if(l){this.reject(l);return}const f={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(f))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return hoe;case"linkViaPopup":case"linkViaRedirect":return poe;case"reauthViaPopup":case"reauthViaRedirect":return moe;default:Oi(this.auth,"internal-error")}}resolve(e){Os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const goe=new Fh(2e3,1e4);async function yoe(t,e,n){if(ei(t.app))return Promise.reject(Yi(t,"operation-not-supported-in-this-environment"));const r=Bs(t);Kae(t,e,YS);const i=i6(r,n);return new kl(r,"signInViaPopup",e,i).executeNotNull()}class kl extends a6{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,kl.currentPopupAction&&kl.currentPopupAction.cancel(),kl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Fe(e,this.auth,"internal-error"),e}async onExecution(){Os(this.filter.length===1,"Popup operations only handle one event");const e=WS();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Yi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Yi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,kl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Yi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,goe.get())};e()}}kl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const voe="pendingRedirect",dg=new Map;class _oe extends a6{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=dg.get(this.auth._key());if(!e){try{const r=await boe(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}dg.set(this.auth._key(),e)}return this.bypassAuthState||dg.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function boe(t,e){const n=Eoe(e),r=xoe(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function woe(t,e){dg.set(t._key(),e)}function xoe(t){return hs(t._redirectPersistence)}function Eoe(t){return fg(voe,t.config.apiKey,t.name)}async function Soe(t,e,n=!1){if(ei(t.app))return Promise.reject(gs(t));const r=Bs(t),i=i6(r,e),l=await new _oe(r,i,n).execute();return l&&!n&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aoe=600*1e3;class Toe{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Coe(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!s6(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Yi(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Aoe&&this.cachedEventUids.clear(),this.cachedEventUids.has(hM(e))}saveEventToCache(e){this.cachedEventUids.add(hM(e)),this.lastProcessedEventTime=Date.now()}}function hM(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function s6({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Coe(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return s6(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ooe(t,e={}){return zs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ioe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Roe=/^https?/;async function Noe(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Ooe(t);for(const n of e)try{if(Poe(n))return}catch{}Oi(t,"unauthorized-domain")}function Poe(t){const e=Ex(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===r}if(!Roe.test(n))return!1;if(Ioe.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Moe=new Fh(3e4,6e4);function mM(){const t=Oa().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function koe(t){return new Promise((e,n)=>{var i,s,l;function r(){mM(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{mM(),n(Yi(t,"network-request-failed"))},timeout:Moe.get()})}if((s=(i=Oa().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((l=Oa().gapi)!=null&&l.load)r();else{const u=xse("iframefcb");return Oa()[u]=()=>{gapi.load?r():n(Yi(t,"network-request-failed"))},F5(`${wse()}?onload=${u}`).catch(f=>n(f))}}).catch(e=>{throw hg=null,e})}let hg=null;function Doe(t){return hg=hg||koe(t),hg}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const joe=new Fh(5e3,15e3),Loe="__/auth/iframe",Voe="emulator/auth/iframe",Uoe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zoe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Boe(t){const e=t.config;Fe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?qS(e,Voe):`https://${t.config.authDomain}/${Loe}`,r={apiKey:e.apiKey,appName:t.name,v:Wu},i=zoe.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${qh(r).slice(1)}`}async function $oe(t){const e=await Doe(t),n=Oa().gapi;return Fe(n,t,"internal-error"),e.open({where:document.body,url:Boe(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Uoe,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const l=Yi(t,"network-request-failed"),u=Oa().setTimeout(()=>{s(l)},joe.get());function f(){Oa().clearTimeout(u),i(r)}r.ping(f).then(f,()=>{s(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qoe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Foe=500,Hoe=600,Goe="_blank",Koe="http://localhost";class pM{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Yoe(t,e,n,r=Foe,i=Hoe){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const f={...qoe,width:r.toString(),height:i.toString(),top:s,left:l},h=pr().toLowerCase();n&&(u=L5(h)?Goe:n),D5(h)&&(e=e||Koe,f.scrollbars="yes");const m=Object.entries(f).reduce((v,[b,E])=>`${v}${b}=${E},`,"");if(dse(h)&&u!=="_self")return Woe(e||"",u),new pM(null);const p=window.open(e||"",u,m);Fe(p,t,"popup-blocked");try{p.focus()}catch{}return new pM(p)}function Woe(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xoe="__/auth/handler",Qoe="emulator/auth/handler",Joe=encodeURIComponent("fac");async function gM(t,e,n,r,i,s){Fe(t.config.authDomain,t,"auth-domain-config-required"),Fe(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Wu,eventId:i};if(e instanceof YS){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",Nie(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,p]of Object.entries({}))l[m]=p}if(e instanceof Gh){const m=e.getScopes().filter(p=>p!=="");m.length>0&&(l.scopes=m.join(","))}t.tenantId&&(l.tid=t.tenantId);const u=l;for(const m of Object.keys(u))u[m]===void 0&&delete u[m];const f=await t._getAppCheckToken(),h=f?`#${Joe}=${encodeURIComponent(f)}`:"";return`${Zoe(t)}?${qh(u).slice(1)}${h}`}function Zoe({config:t}){return t.emulator?qS(t,Qoe):`https://${t.authDomain}/${Xoe}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1="webStorageSupport";class ele{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Z5,this._completeRedirectFn=Soe,this._overrideRedirectResult=woe}async _openPopup(e,n,r,i){var l;Os((l=this.eventManagers[e._key()])==null?void 0:l.manager,"_initialize() not called before _openPopup()");const s=await gM(e,n,r,Ex(),i);return Yoe(e,s,WS())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await gM(e,n,r,Ex(),i);return roe(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Os(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await $oe(e),r=new Toe(e);return n.register("authEvent",i=>(Fe(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(r1,{type:r1},i=>{var l;const s=(l=i==null?void 0:i[0])==null?void 0:l[r1];s!==void 0&&n(!!s),Oi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Noe(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return $5()||j5()||HS()}}const tle=ele;var yM="@firebase/auth",vM="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nle{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rle(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ile(t){Pu(new Yl("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:l,authDomain:u}=r.options;Fe(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:l,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:q5(t)},h=new vse(r,i,s,f);return Ose(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Pu(new Yl("auth-internal",e=>{const n=Bs(e.getProvider("auth").getImmediate());return(r=>new nle(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Do(yM,vM,rle(t)),Do(yM,vM,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ale=300,sle=_5("authIdTokenMaxAge")||ale;let _M=null;const ole=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>sle)return;const i=n==null?void 0:n.token;_M!==i&&(_M=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function lle(t=A5()){const e=zS(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Cse(t,{popupRedirectResolver:tle,persistence:[doe,eoe,Z5]}),r=_5("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const l=ole(s.toString());Wse(n,l,()=>l(n.currentUser)),Yse(n,u=>l(u))}}const i=y5("auth");return i&&Ise(n,`http://${i}`),n}function cle(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}_se({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Yi("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",cle().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ile("Browser");var bM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jo,o6;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,R){function N(){}N.prototype=R.prototype,I.F=R.prototype,I.prototype=new N,I.prototype.constructor=I,I.D=function(z,k,B){for(var V=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)V[pe-2]=arguments[pe];return R.prototype[k].apply(z,V)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,R,N){N||(N=0);const z=Array(16);if(typeof R=="string")for(var k=0;k<16;++k)z[k]=R.charCodeAt(N++)|R.charCodeAt(N++)<<8|R.charCodeAt(N++)<<16|R.charCodeAt(N++)<<24;else for(k=0;k<16;++k)z[k]=R[N++]|R[N++]<<8|R[N++]<<16|R[N++]<<24;R=I.g[0],N=I.g[1],k=I.g[2];let B=I.g[3],V;V=R+(B^N&(k^B))+z[0]+3614090360&4294967295,R=N+(V<<7&4294967295|V>>>25),V=B+(k^R&(N^k))+z[1]+3905402710&4294967295,B=R+(V<<12&4294967295|V>>>20),V=k+(N^B&(R^N))+z[2]+606105819&4294967295,k=B+(V<<17&4294967295|V>>>15),V=N+(R^k&(B^R))+z[3]+3250441966&4294967295,N=k+(V<<22&4294967295|V>>>10),V=R+(B^N&(k^B))+z[4]+4118548399&4294967295,R=N+(V<<7&4294967295|V>>>25),V=B+(k^R&(N^k))+z[5]+1200080426&4294967295,B=R+(V<<12&4294967295|V>>>20),V=k+(N^B&(R^N))+z[6]+2821735955&4294967295,k=B+(V<<17&4294967295|V>>>15),V=N+(R^k&(B^R))+z[7]+4249261313&4294967295,N=k+(V<<22&4294967295|V>>>10),V=R+(B^N&(k^B))+z[8]+1770035416&4294967295,R=N+(V<<7&4294967295|V>>>25),V=B+(k^R&(N^k))+z[9]+2336552879&4294967295,B=R+(V<<12&4294967295|V>>>20),V=k+(N^B&(R^N))+z[10]+4294925233&4294967295,k=B+(V<<17&4294967295|V>>>15),V=N+(R^k&(B^R))+z[11]+2304563134&4294967295,N=k+(V<<22&4294967295|V>>>10),V=R+(B^N&(k^B))+z[12]+1804603682&4294967295,R=N+(V<<7&4294967295|V>>>25),V=B+(k^R&(N^k))+z[13]+4254626195&4294967295,B=R+(V<<12&4294967295|V>>>20),V=k+(N^B&(R^N))+z[14]+2792965006&4294967295,k=B+(V<<17&4294967295|V>>>15),V=N+(R^k&(B^R))+z[15]+1236535329&4294967295,N=k+(V<<22&4294967295|V>>>10),V=R+(k^B&(N^k))+z[1]+4129170786&4294967295,R=N+(V<<5&4294967295|V>>>27),V=B+(N^k&(R^N))+z[6]+3225465664&4294967295,B=R+(V<<9&4294967295|V>>>23),V=k+(R^N&(B^R))+z[11]+643717713&4294967295,k=B+(V<<14&4294967295|V>>>18),V=N+(B^R&(k^B))+z[0]+3921069994&4294967295,N=k+(V<<20&4294967295|V>>>12),V=R+(k^B&(N^k))+z[5]+3593408605&4294967295,R=N+(V<<5&4294967295|V>>>27),V=B+(N^k&(R^N))+z[10]+38016083&4294967295,B=R+(V<<9&4294967295|V>>>23),V=k+(R^N&(B^R))+z[15]+3634488961&4294967295,k=B+(V<<14&4294967295|V>>>18),V=N+(B^R&(k^B))+z[4]+3889429448&4294967295,N=k+(V<<20&4294967295|V>>>12),V=R+(k^B&(N^k))+z[9]+568446438&4294967295,R=N+(V<<5&4294967295|V>>>27),V=B+(N^k&(R^N))+z[14]+3275163606&4294967295,B=R+(V<<9&4294967295|V>>>23),V=k+(R^N&(B^R))+z[3]+4107603335&4294967295,k=B+(V<<14&4294967295|V>>>18),V=N+(B^R&(k^B))+z[8]+1163531501&4294967295,N=k+(V<<20&4294967295|V>>>12),V=R+(k^B&(N^k))+z[13]+2850285829&4294967295,R=N+(V<<5&4294967295|V>>>27),V=B+(N^k&(R^N))+z[2]+4243563512&4294967295,B=R+(V<<9&4294967295|V>>>23),V=k+(R^N&(B^R))+z[7]+1735328473&4294967295,k=B+(V<<14&4294967295|V>>>18),V=N+(B^R&(k^B))+z[12]+2368359562&4294967295,N=k+(V<<20&4294967295|V>>>12),V=R+(N^k^B)+z[5]+4294588738&4294967295,R=N+(V<<4&4294967295|V>>>28),V=B+(R^N^k)+z[8]+2272392833&4294967295,B=R+(V<<11&4294967295|V>>>21),V=k+(B^R^N)+z[11]+1839030562&4294967295,k=B+(V<<16&4294967295|V>>>16),V=N+(k^B^R)+z[14]+4259657740&4294967295,N=k+(V<<23&4294967295|V>>>9),V=R+(N^k^B)+z[1]+2763975236&4294967295,R=N+(V<<4&4294967295|V>>>28),V=B+(R^N^k)+z[4]+1272893353&4294967295,B=R+(V<<11&4294967295|V>>>21),V=k+(B^R^N)+z[7]+4139469664&4294967295,k=B+(V<<16&4294967295|V>>>16),V=N+(k^B^R)+z[10]+3200236656&4294967295,N=k+(V<<23&4294967295|V>>>9),V=R+(N^k^B)+z[13]+681279174&4294967295,R=N+(V<<4&4294967295|V>>>28),V=B+(R^N^k)+z[0]+3936430074&4294967295,B=R+(V<<11&4294967295|V>>>21),V=k+(B^R^N)+z[3]+3572445317&4294967295,k=B+(V<<16&4294967295|V>>>16),V=N+(k^B^R)+z[6]+76029189&4294967295,N=k+(V<<23&4294967295|V>>>9),V=R+(N^k^B)+z[9]+3654602809&4294967295,R=N+(V<<4&4294967295|V>>>28),V=B+(R^N^k)+z[12]+3873151461&4294967295,B=R+(V<<11&4294967295|V>>>21),V=k+(B^R^N)+z[15]+530742520&4294967295,k=B+(V<<16&4294967295|V>>>16),V=N+(k^B^R)+z[2]+3299628645&4294967295,N=k+(V<<23&4294967295|V>>>9),V=R+(k^(N|~B))+z[0]+4096336452&4294967295,R=N+(V<<6&4294967295|V>>>26),V=B+(N^(R|~k))+z[7]+1126891415&4294967295,B=R+(V<<10&4294967295|V>>>22),V=k+(R^(B|~N))+z[14]+2878612391&4294967295,k=B+(V<<15&4294967295|V>>>17),V=N+(B^(k|~R))+z[5]+4237533241&4294967295,N=k+(V<<21&4294967295|V>>>11),V=R+(k^(N|~B))+z[12]+1700485571&4294967295,R=N+(V<<6&4294967295|V>>>26),V=B+(N^(R|~k))+z[3]+2399980690&4294967295,B=R+(V<<10&4294967295|V>>>22),V=k+(R^(B|~N))+z[10]+4293915773&4294967295,k=B+(V<<15&4294967295|V>>>17),V=N+(B^(k|~R))+z[1]+2240044497&4294967295,N=k+(V<<21&4294967295|V>>>11),V=R+(k^(N|~B))+z[8]+1873313359&4294967295,R=N+(V<<6&4294967295|V>>>26),V=B+(N^(R|~k))+z[15]+4264355552&4294967295,B=R+(V<<10&4294967295|V>>>22),V=k+(R^(B|~N))+z[6]+2734768916&4294967295,k=B+(V<<15&4294967295|V>>>17),V=N+(B^(k|~R))+z[13]+1309151649&4294967295,N=k+(V<<21&4294967295|V>>>11),V=R+(k^(N|~B))+z[4]+4149444226&4294967295,R=N+(V<<6&4294967295|V>>>26),V=B+(N^(R|~k))+z[11]+3174756917&4294967295,B=R+(V<<10&4294967295|V>>>22),V=k+(R^(B|~N))+z[2]+718787259&4294967295,k=B+(V<<15&4294967295|V>>>17),V=N+(B^(k|~R))+z[9]+3951481745&4294967295,I.g[0]=I.g[0]+R&4294967295,I.g[1]=I.g[1]+(k+(V<<21&4294967295|V>>>11))&4294967295,I.g[2]=I.g[2]+k&4294967295,I.g[3]=I.g[3]+B&4294967295}r.prototype.v=function(I,R){R===void 0&&(R=I.length);const N=R-this.blockSize,z=this.C;let k=this.h,B=0;for(;B<R;){if(k==0)for(;B<=N;)i(this,I,B),B+=this.blockSize;if(typeof I=="string"){for(;B<R;)if(z[k++]=I.charCodeAt(B++),k==this.blockSize){i(this,z),k=0;break}}else for(;B<R;)if(z[k++]=I[B++],k==this.blockSize){i(this,z),k=0;break}}this.h=k,this.o+=R},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var R=1;R<I.length-8;++R)I[R]=0;R=this.o*8;for(var N=I.length-8;N<I.length;++N)I[N]=R&255,R/=256;for(this.v(I),I=Array(16),R=0,N=0;N<4;++N)for(let z=0;z<32;z+=8)I[R++]=this.g[N]>>>z&255;return I};function s(I,R){var N=u;return Object.prototype.hasOwnProperty.call(N,I)?N[I]:N[I]=R(I)}function l(I,R){this.h=R;const N=[];let z=!0;for(let k=I.length-1;k>=0;k--){const B=I[k]|0;z&&B==R||(N[k]=B,z=!1)}this.g=N}var u={};function f(I){return-128<=I&&I<128?s(I,function(R){return new l([R|0],R<0?-1:0)}):new l([I|0],I<0?-1:0)}function h(I){if(isNaN(I)||!isFinite(I))return p;if(I<0)return S(h(-I));const R=[];let N=1;for(let z=0;I>=N;z++)R[z]=I/N|0,N*=4294967296;return new l(R,0)}function m(I,R){if(I.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(I.charAt(0)=="-")return S(m(I.substring(1),R));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=h(Math.pow(R,8));let z=p;for(let B=0;B<I.length;B+=8){var k=Math.min(8,I.length-B);const V=parseInt(I.substring(B,B+k),R);k<8?(k=h(Math.pow(R,k)),z=z.j(k).add(h(V))):(z=z.j(N),z=z.add(h(V)))}return z}var p=f(0),v=f(1),b=f(16777216);t=l.prototype,t.m=function(){if(w(this))return-S(this).m();let I=0,R=1;for(let N=0;N<this.g.length;N++){const z=this.i(N);I+=(z>=0?z:4294967296+z)*R,R*=4294967296}return I},t.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(E(this))return"0";if(w(this))return"-"+S(this).toString(I);const R=h(Math.pow(I,6));var N=this;let z="";for(;;){const k=$(N,R).g;N=P(N,k.j(R));let B=((N.g.length>0?N.g[0]:N.h)>>>0).toString(I);if(N=k,E(N))return B+z;for(;B.length<6;)B="0"+B;z=B+z}},t.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function E(I){if(I.h!=0)return!1;for(let R=0;R<I.g.length;R++)if(I.g[R]!=0)return!1;return!0}function w(I){return I.h==-1}t.l=function(I){return I=P(this,I),w(I)?-1:E(I)?0:1};function S(I){const R=I.g.length,N=[];for(let z=0;z<R;z++)N[z]=~I.g[z];return new l(N,~I.h).add(v)}t.abs=function(){return w(this)?S(this):this},t.add=function(I){const R=Math.max(this.g.length,I.g.length),N=[];let z=0;for(let k=0;k<=R;k++){let B=z+(this.i(k)&65535)+(I.i(k)&65535),V=(B>>>16)+(this.i(k)>>>16)+(I.i(k)>>>16);z=V>>>16,B&=65535,V&=65535,N[k]=V<<16|B}return new l(N,N[N.length-1]&-2147483648?-1:0)};function P(I,R){return I.add(S(R))}t.j=function(I){if(E(this)||E(I))return p;if(w(this))return w(I)?S(this).j(S(I)):S(S(this).j(I));if(w(I))return S(this.j(S(I)));if(this.l(b)<0&&I.l(b)<0)return h(this.m()*I.m());const R=this.g.length+I.g.length,N=[];for(var z=0;z<2*R;z++)N[z]=0;for(z=0;z<this.g.length;z++)for(let k=0;k<I.g.length;k++){const B=this.i(z)>>>16,V=this.i(z)&65535,pe=I.i(k)>>>16,be=I.i(k)&65535;N[2*z+2*k]+=V*be,M(N,2*z+2*k),N[2*z+2*k+1]+=B*be,M(N,2*z+2*k+1),N[2*z+2*k+1]+=V*pe,M(N,2*z+2*k+1),N[2*z+2*k+2]+=B*pe,M(N,2*z+2*k+2)}for(I=0;I<R;I++)N[I]=N[2*I+1]<<16|N[2*I];for(I=R;I<2*R;I++)N[I]=0;return new l(N,0)};function M(I,R){for(;(I[R]&65535)!=I[R];)I[R+1]+=I[R]>>>16,I[R]&=65535,R++}function j(I,R){this.g=I,this.h=R}function $(I,R){if(E(R))throw Error("division by zero");if(E(I))return new j(p,p);if(w(I))return R=$(S(I),R),new j(S(R.g),S(R.h));if(w(R))return R=$(I,S(R)),new j(S(R.g),R.h);if(I.g.length>30){if(w(I)||w(R))throw Error("slowDivide_ only works with positive integers.");for(var N=v,z=R;z.l(I)<=0;)N=L(N),z=L(z);var k=q(N,1),B=q(z,1);for(z=q(z,2),N=q(N,2);!E(z);){var V=B.add(z);V.l(I)<=0&&(k=k.add(N),B=V),z=q(z,1),N=q(N,1)}return R=P(I,k.j(R)),new j(k,R)}for(k=p;I.l(R)>=0;){for(N=Math.max(1,Math.floor(I.m()/R.m())),z=Math.ceil(Math.log(N)/Math.LN2),z=z<=48?1:Math.pow(2,z-48),B=h(N),V=B.j(R);w(V)||V.l(I)>0;)N-=z,B=h(N),V=B.j(R);E(B)&&(B=v),k=k.add(B),I=P(I,V)}return new j(k,I)}t.B=function(I){return $(this,I).h},t.and=function(I){const R=Math.max(this.g.length,I.g.length),N=[];for(let z=0;z<R;z++)N[z]=this.i(z)&I.i(z);return new l(N,this.h&I.h)},t.or=function(I){const R=Math.max(this.g.length,I.g.length),N=[];for(let z=0;z<R;z++)N[z]=this.i(z)|I.i(z);return new l(N,this.h|I.h)},t.xor=function(I){const R=Math.max(this.g.length,I.g.length),N=[];for(let z=0;z<R;z++)N[z]=this.i(z)^I.i(z);return new l(N,this.h^I.h)};function L(I){const R=I.g.length+1,N=[];for(let z=0;z<R;z++)N[z]=I.i(z)<<1|I.i(z-1)>>>31;return new l(N,I.h)}function q(I,R){const N=R>>5;R%=32;const z=I.g.length-N,k=[];for(let B=0;B<z;B++)k[B]=R>0?I.i(B+N)>>>R|I.i(B+N+1)<<32-R:I.i(B+N);return new l(k,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,o6=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=h,l.fromString=m,jo=l}).apply(typeof bM<"u"?bM:typeof self<"u"?self:typeof window<"u"?window:{});var Gp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var l6,wd,c6,mg,Tx,u6,f6,d6;(function(){var t,e=Object.defineProperty;function n(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof Gp=="object"&&Gp];for(var x=0;x<g.length;++x){var O=g[x];if(O&&O.Math==Math)return O}throw Error("Cannot find global object")}var r=n(this);function i(g,x){if(x)e:{var O=r;g=g.split(".");for(var U=0;U<g.length-1;U++){var W=g[U];if(!(W in O))break e;O=O[W]}g=g[g.length-1],U=O[g],x=x(U),x!=U&&x!=null&&e(O,g,{configurable:!0,writable:!0,value:x})}}i("Symbol.dispose",function(g){return g||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(g){return g||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(g){return g||function(x){var O=[],U;for(U in x)Object.prototype.hasOwnProperty.call(x,U)&&O.push([U,x[U]]);return O}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},l=this||self;function u(g){var x=typeof g;return x=="object"&&g!=null||x=="function"}function f(g,x,O){return g.call.apply(g.bind,arguments)}function h(g,x,O){return h=f,h.apply(null,arguments)}function m(g,x){var O=Array.prototype.slice.call(arguments,1);return function(){var U=O.slice();return U.push.apply(U,arguments),g.apply(this,U)}}function p(g,x){function O(){}O.prototype=x.prototype,g.Z=x.prototype,g.prototype=new O,g.prototype.constructor=g,g.Ob=function(U,W,te){for(var we=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)we[Qe-2]=arguments[Qe];return x.prototype[W].apply(U,we)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?g=>g&&AsyncContext.Snapshot.wrap(g):g=>g;function b(g){const x=g.length;if(x>0){const O=Array(x);for(let U=0;U<x;U++)O[U]=g[U];return O}return[]}function E(g,x){for(let U=1;U<arguments.length;U++){const W=arguments[U];var O=typeof W;if(O=O!="object"?O:W?Array.isArray(W)?"array":O:"null",O=="array"||O=="object"&&typeof W.length=="number"){O=g.length||0;const te=W.length||0;g.length=O+te;for(let we=0;we<te;we++)g[O+we]=W[we]}else g.push(W)}}class w{constructor(x,O){this.i=x,this.j=O,this.h=0,this.g=null}get(){let x;return this.h>0?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function S(g){l.setTimeout(()=>{throw g},0)}function P(){var g=I;let x=null;return g.g&&(x=g.g,g.g=g.g.next,g.g||(g.h=null),x.next=null),x}class M{constructor(){this.h=this.g=null}add(x,O){const U=j.get();U.set(x,O),this.h?this.h.next=U:this.g=U,this.h=U}}var j=new w(()=>new $,g=>g.reset());class ${constructor(){this.next=this.g=this.h=null}set(x,O){this.h=x,this.g=O,this.next=null}reset(){this.next=this.g=this.h=null}}let L,q=!1,I=new M,R=()=>{const g=Promise.resolve(void 0);L=()=>{g.then(N)}};function N(){for(var g;g=P();){try{g.h.call(g.g)}catch(O){S(O)}var x=j;x.j(g),x.h<100&&(x.h++,g.next=x.g,x.g=g)}q=!1}function z(){this.u=this.u,this.C=this.C}z.prototype.u=!1,z.prototype.dispose=function(){this.u||(this.u=!0,this.N())},z.prototype[Symbol.dispose]=function(){this.dispose()},z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(g,x){this.type=g,this.g=this.target=x,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var B=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var g=!1,x=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const O=()=>{};l.addEventListener("test",O,x),l.removeEventListener("test",O,x)}catch{}return g})();function V(g){return/^[\s\xa0]*$/.test(g)}function pe(g,x){k.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g&&this.init(g,x)}p(pe,k),pe.prototype.init=function(g,x){const O=this.type=g.type,U=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;this.target=g.target||g.srcElement,this.g=x,x=g.relatedTarget,x||(O=="mouseover"?x=g.fromElement:O=="mouseout"&&(x=g.toElement)),this.relatedTarget=x,U?(this.clientX=U.clientX!==void 0?U.clientX:U.pageX,this.clientY=U.clientY!==void 0?U.clientY:U.pageY,this.screenX=U.screenX||0,this.screenY=U.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=g.pointerType,this.state=g.state,this.i=g,g.defaultPrevented&&pe.Z.h.call(this)},pe.prototype.h=function(){pe.Z.h.call(this);const g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var be="closure_listenable_"+(Math.random()*1e6|0),G=0;function ne(g,x,O,U,W){this.listener=g,this.proxy=null,this.src=x,this.type=O,this.capture=!!U,this.ha=W,this.key=++G,this.da=this.fa=!1}function de(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function ge(g,x,O){for(const U in g)x.call(O,g[U],U,g)}function Ee(g,x){for(const O in g)x.call(void 0,g[O],O,g)}function F(g){const x={};for(const O in g)x[O]=g[O];return x}const X="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function re(g,x){let O,U;for(let W=1;W<arguments.length;W++){U=arguments[W];for(O in U)g[O]=U[O];for(let te=0;te<X.length;te++)O=X[te],Object.prototype.hasOwnProperty.call(U,O)&&(g[O]=U[O])}}function _e(g){this.src=g,this.g={},this.h=0}_e.prototype.add=function(g,x,O,U,W){const te=g.toString();g=this.g[te],g||(g=this.g[te]=[],this.h++);const we=xe(g,x,U,W);return we>-1?(x=g[we],O||(x.fa=!1)):(x=new ne(x,this.src,te,!!U,W),x.fa=O,g.push(x)),x};function Oe(g,x){const O=x.type;if(O in g.g){var U=g.g[O],W=Array.prototype.indexOf.call(U,x,void 0),te;(te=W>=0)&&Array.prototype.splice.call(U,W,1),te&&(de(x),g.g[O].length==0&&(delete g.g[O],g.h--))}}function xe(g,x,O,U){for(let W=0;W<g.length;++W){const te=g[W];if(!te.da&&te.listener==x&&te.capture==!!O&&te.ha==U)return W}return-1}var Pe="closure_lm_"+(Math.random()*1e6|0),yt={};function se(g,x,O,U,W){if(Array.isArray(x)){for(let te=0;te<x.length;te++)se(g,x[te],O,U,W);return null}return O=Zi(O),g&&g[be]?g.J(x,O,u(U)?!!U.capture:!1,W):ze(g,x,O,!1,U,W)}function ze(g,x,O,U,W,te){if(!x)throw Error("Invalid event type");const we=u(W)?!!W.capture:!!W;let Qe=Dt(g);if(Qe||(g[Pe]=Qe=new _e(g)),O=Qe.add(x,O,U,we,te),O.proxy)return O;if(U=fe(),O.proxy=U,U.src=g,U.listener=O,g.addEventListener)B||(W=we),W===void 0&&(W=!1),g.addEventListener(x.toString(),U,W);else if(g.attachEvent)g.attachEvent(je(x.toString()),U);else if(g.addListener&&g.removeListener)g.addListener(U);else throw Error("addEventListener and attachEvent are unavailable.");return O}function fe(){function g(O){return x.call(g.src,g.listener,O)}const x=Ct;return g}function le(g,x,O,U,W){if(Array.isArray(x))for(var te=0;te<x.length;te++)le(g,x[te],O,U,W);else U=u(U)?!!U.capture:!!U,O=Zi(O),g&&g[be]?(g=g.i,te=String(x).toString(),te in g.g&&(x=g.g[te],O=xe(x,O,U,W),O>-1&&(de(x[O]),Array.prototype.splice.call(x,O,1),x.length==0&&(delete g.g[te],g.h--)))):g&&(g=Dt(g))&&(x=g.g[x.toString()],g=-1,x&&(g=xe(x,O,U,W)),(O=g>-1?x[g]:null)&&rt(O))}function rt(g){if(typeof g!="number"&&g&&!g.da){var x=g.src;if(x&&x[be])Oe(x.i,g);else{var O=g.type,U=g.proxy;x.removeEventListener?x.removeEventListener(O,U,g.capture):x.detachEvent?x.detachEvent(je(O),U):x.addListener&&x.removeListener&&x.removeListener(U),(O=Dt(x))?(Oe(O,g),O.h==0&&(O.src=null,x[Pe]=null)):de(g)}}}function je(g){return g in yt?yt[g]:yt[g]="on"+g}function Ct(g,x){if(g.da)g=!0;else{x=new pe(x,this);const O=g.listener,U=g.ha||g.src;g.fa&&rt(g),g=O.call(U,x)}return g}function Dt(g){return g=g[Pe],g instanceof _e?g:null}var Lt="__closure_events_fn_"+(Math.random()*1e9>>>0);function Zi(g){return typeof g=="function"?g:(g[Lt]||(g[Lt]=function(x){return g.handleEvent(x)}),g[Lt])}function Qt(){z.call(this),this.i=new _e(this),this.M=this,this.G=null}p(Qt,z),Qt.prototype[be]=!0,Qt.prototype.removeEventListener=function(g,x,O,U){le(this,g,x,O,U)};function en(g,x){var O,U=g.G;if(U)for(O=[];U;U=U.G)O.push(U);if(g=g.M,U=x.type||x,typeof x=="string")x=new k(x,g);else if(x instanceof k)x.target=x.target||g;else{var W=x;x=new k(U,g),re(x,W)}W=!0;let te,we;if(O)for(we=O.length-1;we>=0;we--)te=x.g=O[we],W=ea(te,U,!0,x)&&W;if(te=x.g=g,W=ea(te,U,!0,x)&&W,W=ea(te,U,!1,x)&&W,O)for(we=0;we<O.length;we++)te=x.g=O[we],W=ea(te,U,!1,x)&&W}Qt.prototype.N=function(){if(Qt.Z.N.call(this),this.i){var g=this.i;for(const x in g.g){const O=g.g[x];for(let U=0;U<O.length;U++)de(O[U]);delete g.g[x],g.h--}}this.G=null},Qt.prototype.J=function(g,x,O,U){return this.i.add(String(g),x,!1,O,U)},Qt.prototype.K=function(g,x,O,U){return this.i.add(String(g),x,!0,O,U)};function ea(g,x,O,U){if(x=g.i.g[String(x)],!x)return!0;x=x.concat();let W=!0;for(let te=0;te<x.length;++te){const we=x[te];if(we&&!we.da&&we.capture==O){const Qe=we.listener,nn=we.ha||we.src;we.fa&&Oe(g.i,we),W=Qe.call(nn,U)!==!1&&W}}return W&&!U.defaultPrevented}function lc(g,x){if(typeof g!="function")if(g&&typeof g.handleEvent=="function")g=h(g.handleEvent,g);else throw Error("Invalid listener argument");return Number(x)>2147483647?-1:l.setTimeout(g,x||0)}function Wo(g){g.g=lc(()=>{g.g=null,g.i&&(g.i=!1,Wo(g))},g.l);const x=g.h;g.h=null,g.m.apply(null,x)}class ce extends z{constructor(x,O){super(),this.m=x,this.l=O,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:Wo(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ie(g){z.call(this),this.h=g,this.g={}}p(Ie,z);var Re=[];function Ke(g){ge(g.g,function(x,O){this.g.hasOwnProperty(O)&&rt(x)},g),g.g={}}Ie.prototype.N=function(){Ie.Z.N.call(this),Ke(this)},Ie.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $e=l.JSON.stringify,ht=l.JSON.parse,tn=class{stringify(g){return l.JSON.stringify(g,void 0)}parse(g){return l.JSON.parse(g,void 0)}};function ut(){}function wt(){}var qt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Sn(){k.call(this,"d")}p(Sn,k);function Ar(){k.call(this,"c")}p(Ar,k);var Yt={},cc=null;function uc(){return cc=cc||new Qt}Yt.Ia="serverreachability";function rm(g){k.call(this,Yt.Ia,g)}p(rm,k);function ta(g){const x=uc();en(x,new rm(x))}Yt.STAT_EVENT="statevent";function Xo(g,x){k.call(this,Yt.STAT_EVENT,g),this.stat=x}p(Xo,k);function un(g){const x=uc();en(x,new Xo(x,g))}Yt.Ja="timingevent";function na(g,x){k.call(this,Yt.Ja,g),this.size=x}p(na,k);function ra(g,x){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){g()},x)}function Ri(){this.g=!0}Ri.prototype.ua=function(){this.g=!1};function d0(g,x,O,U,W,te){g.info(function(){if(g.g)if(te){var we="",Qe=te.split("&");for(let vt=0;vt<Qe.length;vt++){var nn=Qe[vt].split("=");if(nn.length>1){const Ft=nn[0];nn=nn[1];const ci=Ft.split("_");we=ci.length>=2&&ci[1]=="type"?we+(Ft+"="+nn+"&"):we+(Ft+"=redacted&")}}}else we=null;else we=te;return"XMLHTTP REQ ("+U+") [attempt "+W+"]: "+x+`
`+O+`
`+we})}function im(g,x,O,U,W,te,we){g.info(function(){return"XMLHTTP RESP ("+U+") [ attempt "+W+"]: "+x+`
`+O+`
`+te+" "+we})}function ia(g,x,O,U){g.info(function(){return"XMLHTTP TEXT ("+x+"): "+h0(g,O)+(U?" "+U:"")})}function Qo(g,x){g.info(function(){return"TIMEOUT: "+x})}Ri.prototype.info=function(){};function h0(g,x){if(!g.g)return x;if(!x)return null;try{const te=JSON.parse(x);if(te){for(g=0;g<te.length;g++)if(Array.isArray(te[g])){var O=te[g];if(!(O.length<2)){var U=O[1];if(Array.isArray(U)&&!(U.length<1)){var W=U[0];if(W!="noop"&&W!="stop"&&W!="close")for(let we=1;we<U.length;we++)U[we]=""}}}}return $e(te)}catch{return x}}var Jo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},af={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},sf;function Zo(){}p(Zo,ut),Zo.prototype.g=function(){return new XMLHttpRequest},sf=new Zo;function Ua(g){return encodeURIComponent(String(g))}function am(g){var x=1;g=g.split(":");const O=[];for(;x>0&&g.length;)O.push(g.shift()),x--;return g.length&&O.push(g.join(":")),O}function Ni(g,x,O,U){this.j=g,this.i=x,this.l=O,this.S=U||1,this.V=new Ie(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Pi}function Pi(){this.i=null,this.g="",this.h=!1}var fn={},Dn={};function aa(g,x,O){g.M=1,g.A=el(hn(x)),g.u=O,g.R=!0,fc(g,null)}function fc(g,x){g.F=Date.now(),sa(g),g.B=hn(g.A);var O=g.B,U=g.S;Array.isArray(U)||(U=[String(U)]),pc(O.i,"t",U),g.C=0,O=g.j.L,g.h=new Pi,g.g=bm(g.j,O?x:null,!g.u),g.P>0&&(g.O=new ce(h(g.Y,g,g.g),g.P)),x=g.V,O=g.g,U=g.ba;var W="readystatechange";Array.isArray(W)||(W&&(Re[0]=W.toString()),W=Re);for(let te=0;te<W.length;te++){const we=se(O,W[te],U||x.handleEvent,!1,x.h||x);if(!we)break;x.g[we.key]=we}x=g.J?F(g.J):{},g.u?(g.v||(g.v="POST"),x["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.B,g.v,g.u,x)):(g.v="GET",g.g.ea(g.B,g.v,null,x)),ta(),d0(g.i,g.v,g.B,g.l,g.S,g.u)}Ni.prototype.ba=function(g){g=g.target;const x=this.O;x&&Di(g)==3?x.j():this.Y(g)},Ni.prototype.Y=function(g){try{if(g==this.g)e:{const Qe=Di(this.g),nn=this.g.ya(),vt=this.g.ca();if(!(Qe<3)&&(Qe!=3||this.g&&(this.h.h||this.g.la()||Kn(this.g)))){this.K||Qe!=4||nn==7||(nn==8||vt<=0?ta(3):ta(2)),oa(this);var x=this.g.ca();this.X=x;var O=m0(this);if(this.o=x==200,im(this.i,this.v,this.B,this.l,this.S,Qe,x),this.o){if(this.U&&!this.L){t:{if(this.g){var U,W=this.g;if((U=W.g?W.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(U)){var te=U;break t}}te=null}if(g=te)ia(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,la(this,g);else{this.o=!1,this.m=3,un(12),zr(this),si(this);break e}}if(this.R){g=!0;let Ft;for(;!this.K&&this.C<O.length;)if(Ft=om(this,O),Ft==Dn){Qe==4&&(this.m=4,un(14),g=!1),ia(this.i,this.l,null,"[Incomplete Response]");break}else if(Ft==fn){this.m=4,un(15),ia(this.i,this.l,O,"[Invalid Chunk]"),g=!1;break}else ia(this.i,this.l,Ft,null),la(this,Ft);if(sm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Qe!=4||O.length!=0||this.h.h||(this.m=1,un(16),g=!1),this.o=this.o&&g,!g)ia(this.i,this.l,O,"[Invalid Chunked Response]"),zr(this),si(this);else if(O.length>0&&!this.W){this.W=!0;var we=this.j;we.g==this&&we.aa&&!we.P&&(we.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),wf(we),we.P=!0,un(11))}}else ia(this.i,this.l,O,null),la(this,O);Qe==4&&zr(this),this.o&&!this.K&&(Qe==4?gm(this.j,this):(this.o=!1,sa(this)))}else Ba(this.g),x==400&&O.indexOf("Unknown SID")>0?(this.m=3,un(12)):(this.m=0,un(13)),zr(this),si(this)}}}catch{}finally{}};function m0(g){if(!sm(g))return g.g.la();const x=Kn(g.g);if(x==="")return"";let O="";const U=x.length,W=Di(g.g)==4;if(!g.h.i){if(typeof TextDecoder>"u")return zr(g),si(g),"";g.h.i=new l.TextDecoder}for(let te=0;te<U;te++)g.h.h=!0,O+=g.h.i.decode(x[te],{stream:!(W&&te==U-1)});return x.length=0,g.h.g+=O,g.C=0,g.h.g}function sm(g){return g.g?g.v=="GET"&&g.M!=2&&g.j.Aa:!1}function om(g,x){var O=g.C,U=x.indexOf(`
`,O);return U==-1?Dn:(O=Number(x.substring(O,U)),isNaN(O)?fn:(U+=1,U+O>x.length?Dn:(x=x.slice(U,U+O),g.C=U+O,x)))}Ni.prototype.cancel=function(){this.K=!0,zr(this)};function sa(g){g.T=Date.now()+g.H,dc(g,g.H)}function dc(g,x){if(g.D!=null)throw Error("WatchDog timer not null");g.D=ra(h(g.aa,g),x)}function oa(g){g.D&&(l.clearTimeout(g.D),g.D=null)}Ni.prototype.aa=function(){this.D=null;const g=Date.now();g-this.T>=0?(Qo(this.i,this.B),this.M!=2&&(ta(),un(17)),zr(this),this.m=2,si(this)):dc(this,this.T-g)};function si(g){g.j.I==0||g.K||gm(g.j,g)}function zr(g){oa(g);var x=g.O;x&&typeof x.dispose=="function"&&x.dispose(),g.O=null,Ke(g.V),g.g&&(x=g.g,g.g=null,x.abort(),x.dispose())}function la(g,x){try{var O=g.j;if(O.I!=0&&(O.g==g||ua(O.h,g))){if(!g.L&&ua(O.h,g)&&O.I==3){try{var U=O.Ba.g.parse(x)}catch{U=null}if(Array.isArray(U)&&U.length==3){var W=U;if(W[0]==0){e:if(!O.v){if(O.g)if(O.g.F+3e3<g.F)bc(O),Ws(O);else break e;ol(O),un(18)}}else O.xa=W[1],0<O.xa-O.K&&W[2]<37500&&O.F&&O.A==0&&!O.C&&(O.C=ra(h(O.Va,O),6e3));ca(O.h)<=1&&O.ta&&(O.ta=void 0)}else ga(O,11)}else if((g.L||O.g==g)&&bc(O),!V(x))for(W=O.Ba.g.parse(x),x=0;x<W.length;x++){let vt=W[x];const Ft=vt[0];if(!(Ft<=O.K))if(O.K=Ft,vt=vt[1],O.I==2)if(vt[0]=="c"){O.M=vt[1],O.ba=vt[2];const ci=vt[3];ci!=null&&(O.ka=ci,O.j.info("VER="+O.ka));const ya=vt[4];ya!=null&&(O.za=ya,O.j.info("SVER="+O.za));const ji=vt[5];ji!=null&&typeof ji=="number"&&ji>0&&(U=1.5*ji,O.O=U,O.j.info("backChannelRequestTimeoutMs_="+U)),U=O;const Li=g.g;if(Li){const ll=Li.g?Li.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ll){var te=U.h;te.g||ll.indexOf("spdy")==-1&&ll.indexOf("quic")==-1&&ll.indexOf("h2")==-1||(te.j=te.l,te.g=new Set,te.h&&(cf(te,te.h),te.h=null))}if(U.G){const wc=Li.g?Li.g.getResponseHeader("X-HTTP-Session-Id"):null;wc&&(U.wa=wc,xt(U.J,U.G,wc))}}O.I=3,O.l&&O.l.ra(),O.aa&&(O.T=Date.now()-g.F,O.j.info("Handshake RTT: "+O.T+"ms")),U=O;var we=g;if(U.na=_m(U,U.L?U.ba:null,U.W),we.L){uf(U.h,we);var Qe=we,nn=U.O;nn&&(Qe.H=nn),Qe.D&&(oa(Qe),sa(Qe)),U.g=we}else mm(U);O.i.length>0&&pa(O)}else vt[0]!="stop"&&vt[0]!="close"||ga(O,7);else O.I==3&&(vt[0]=="stop"||vt[0]=="close"?vt[0]=="stop"?ga(O,7):_f(O):vt[0]!="noop"&&O.l&&O.l.qa(vt),O.A=0)}}ta(4)}catch{}}var dn=class{constructor(g,x){this.g=g,this.map=x}};function of(g){this.l=g||10,l.PerformanceNavigationTiming?(g=l.performance.getEntriesByType("navigation"),g=g.length>0&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function lf(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function ca(g){return g.h?1:g.g?g.g.size:0}function ua(g,x){return g.h?g.h==x:g.g?g.g.has(x):!1}function cf(g,x){g.g?g.g.add(x):g.h=x}function uf(g,x){g.h&&g.h==x?g.h=null:g.g&&g.g.has(x)&&g.g.delete(x)}of.prototype.cancel=function(){if(this.i=ff(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function ff(g){if(g.h!=null)return g.i.concat(g.h.G);if(g.g!=null&&g.g.size!==0){let x=g.i;for(const O of g.g.values())x=x.concat(O.G);return x}return b(g.i)}var lm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hc(g,x){if(g){g=g.split("&");for(let O=0;O<g.length;O++){const U=g[O].indexOf("=");let W,te=null;U>=0?(W=g[O].substring(0,U),te=g[O].substring(U+1)):W=g[O],x(W,te?decodeURIComponent(te.replace(/\+/g," ")):"")}}}function Br(g){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let x;g instanceof Br?(this.l=g.l,jn(this,g.j),this.o=g.o,this.g=g.g,$s(this,g.u),this.h=g.h,df(this,dm(g.i)),this.m=g.m):g&&(x=String(g).match(lm))?(this.l=!1,jn(this,x[1]||"",!0),this.o=fa(x[2]||""),this.g=fa(x[3]||"",!0),$s(this,x[4]),this.h=fa(x[5]||"",!0),df(this,x[6]||"",!0),this.m=fa(x[7]||"")):(this.l=!1,this.i=new Fs(null,this.l))}Br.prototype.toString=function(){const g=[];var x=this.j;x&&g.push(tl(x,mc,!0),":");var O=this.g;return(O||x=="file")&&(g.push("//"),(x=this.o)&&g.push(tl(x,mc,!0),"@"),g.push(Ua(O).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),O=this.u,O!=null&&g.push(":",String(O))),(O=this.h)&&(this.g&&O.charAt(0)!="/"&&g.push("/"),g.push(tl(O,O.charAt(0)=="/"?hf:cm,!0))),(O=this.i.toString())&&g.push("?",O),(O=this.m)&&g.push("#",tl(O,um)),g.join("")},Br.prototype.resolve=function(g){const x=hn(this);let O=!!g.j;O?jn(x,g.j):O=!!g.o,O?x.o=g.o:O=!!g.g,O?x.g=g.g:O=g.u!=null;var U=g.h;if(O)$s(x,g.u);else if(O=!!g.h){if(U.charAt(0)!="/")if(this.g&&!this.h)U="/"+U;else{var W=x.h.lastIndexOf("/");W!=-1&&(U=x.h.slice(0,W+1)+U)}if(W=U,W==".."||W==".")U="";else if(W.indexOf("./")!=-1||W.indexOf("/.")!=-1){U=W.lastIndexOf("/",0)==0,W=W.split("/");const te=[];for(let we=0;we<W.length;){const Qe=W[we++];Qe=="."?U&&we==W.length&&te.push(""):Qe==".."?((te.length>1||te.length==1&&te[0]!="")&&te.pop(),U&&we==W.length&&te.push("")):(te.push(Qe),U=!0)}U=te.join("/")}else U=W}return O?x.h=U:O=g.i.toString()!=="",O?df(x,dm(g.i)):O=!!g.m,O&&(x.m=g.m),x};function hn(g){return new Br(g)}function jn(g,x,O){g.j=O?fa(x,!0):x,g.j&&(g.j=g.j.replace(/:$/,""))}function $s(g,x){if(x){if(x=Number(x),isNaN(x)||x<0)throw Error("Bad port number "+x);g.u=x}else g.u=null}function df(g,x,O){x instanceof Fs?(g.i=x,gc(g.i,g.l)):(O||(x=tl(x,qs)),g.i=new Fs(x,g.l))}function xt(g,x,O){g.i.set(x,O)}function el(g){return xt(g,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),g}function fa(g,x){return g?x?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function tl(g,x,O){return typeof g=="string"?(g=encodeURI(g).replace(x,Tr),O&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function Tr(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var mc=/[#\/\?@]/g,cm=/[#\?:]/g,hf=/[#\?]/g,qs=/[#\?@]/g,um=/#/g;function Fs(g,x){this.h=this.g=null,this.i=g||null,this.j=!!x}function Cr(g){g.g||(g.g=new Map,g.h=0,g.i&&hc(g.i,function(x,O){g.add(decodeURIComponent(x.replace(/\+/g," ")),O)}))}t=Fs.prototype,t.add=function(g,x){Cr(this),this.i=null,g=Hs(this,g);let O=this.g.get(g);return O||this.g.set(g,O=[]),O.push(x),this.h+=1,this};function fm(g,x){Cr(g),x=Hs(g,x),g.g.has(x)&&(g.i=null,g.h-=g.g.get(x).length,g.g.delete(x))}function mf(g,x){return Cr(g),x=Hs(g,x),g.g.has(x)}t.forEach=function(g,x){Cr(this),this.g.forEach(function(O,U){O.forEach(function(W){g.call(x,W,U,this)},this)},this)};function pf(g,x){Cr(g);let O=[];if(typeof x=="string")mf(g,x)&&(O=O.concat(g.g.get(Hs(g,x))));else for(g=Array.from(g.g.values()),x=0;x<g.length;x++)O=O.concat(g[x]);return O}t.set=function(g,x){return Cr(this),this.i=null,g=Hs(this,g),mf(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[x]),this.h+=1,this},t.get=function(g,x){return g?(g=pf(this,g),g.length>0?String(g[0]):x):x};function pc(g,x,O){fm(g,x),O.length>0&&(g.i=null,g.g.set(Hs(g,x),b(O)),g.h+=O.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],x=Array.from(this.g.keys());for(let U=0;U<x.length;U++){var O=x[U];const W=Ua(O);O=pf(this,O);for(let te=0;te<O.length;te++){let we=W;O[te]!==""&&(we+="="+Ua(O[te])),g.push(we)}}return this.i=g.join("&")};function dm(g){const x=new Fs;return x.i=g.i,g.g&&(x.g=new Map(g.g),x.h=g.h),x}function Hs(g,x){return x=String(x),g.j&&(x=x.toLowerCase()),x}function gc(g,x){x&&!g.j&&(Cr(g),g.i=null,g.g.forEach(function(O,U){const W=U.toLowerCase();U!=W&&(fm(this,U),pc(this,W,O))},g)),g.j=x}function Mi(g,x){const O=new Ri;if(l.Image){const U=new Image;U.onload=m(oi,O,"TestLoadImage: loaded",!0,x,U),U.onerror=m(oi,O,"TestLoadImage: error",!1,x,U),U.onabort=m(oi,O,"TestLoadImage: abort",!1,x,U),U.ontimeout=m(oi,O,"TestLoadImage: timeout",!1,x,U),l.setTimeout(function(){U.ontimeout&&U.ontimeout()},1e4),U.src=g}else x(!1)}function gf(g,x){const O=new Ri,U=new AbortController,W=setTimeout(()=>{U.abort(),oi(O,"TestPingServer: timeout",!1,x)},1e4);fetch(g,{signal:U.signal}).then(te=>{clearTimeout(W),te.ok?oi(O,"TestPingServer: ok",!0,x):oi(O,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(W),oi(O,"TestPingServer: error",!1,x)})}function oi(g,x,O,U,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),U(O)}catch{}}function Gs(){this.g=new tn}function da(g){this.i=g.Sb||null,this.h=g.ab||!1}p(da,ut),da.prototype.g=function(){return new nl(this.i,this.h)};function nl(g,x){Qt.call(this),this.H=g,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(nl,Qt),t=nl.prototype,t.open=function(g,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=g,this.D=x,this.readyState=1,ki(this)},t.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const x={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};g&&(x.body=g),(this.H||l).fetch(new Request(this.D,x)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ks(this)),this.readyState=0},t.Pa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,ki(this)),this.g&&(this.readyState=3,ki(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;yc(this)}else g.text().then(this.Oa.bind(this),this.ga.bind(this))};function yc(g){g.j.read().then(g.Ma.bind(g)).catch(g.ga.bind(g))}t.Ma=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var x=g.value?g.value:new Uint8Array(0);(x=this.B.decode(x,{stream:!g.done}))&&(this.response=this.responseText+=x)}g.done?Ks(this):ki(this),this.readyState==3&&yc(this)}},t.Oa=function(g){this.g&&(this.response=this.responseText=g,Ks(this))},t.Na=function(g){this.g&&(this.response=g,Ks(this))},t.ga=function(){this.g&&Ks(this)};function Ks(g){g.readyState=4,g.l=null,g.j=null,g.B=null,ki(g)}t.setRequestHeader=function(g,x){this.A.append(g,x)},t.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],x=this.h.entries();for(var O=x.next();!O.done;)O=O.value,g.push(O[0]+": "+O[1]),O=x.next();return g.join(`\r
`)};function ki(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(nl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function li(g){let x="";return ge(g,function(O,U){x+=U,x+=":",x+=O,x+=`\r
`}),x}function rl(g,x,O){e:{for(U in O){var U=!1;break e}U=!0}U||(O=li(O),typeof g=="string"?O!=null&&Ua(O):xt(g,x,O))}function Ot(g){Qt.call(this),this.headers=new Map,this.L=g||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Ot,Qt);var ha=/^https?$/i,yf=["POST","PUT"];t=Ot.prototype,t.Fa=function(g){this.H=g},t.ea=function(g,x,O,U){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);x=x?x.toUpperCase():"GET",this.D=g,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():sf.g(),this.g.onreadystatechange=v(h(this.Ca,this));try{this.B=!0,this.g.open(x,String(g),!0),this.B=!1}catch(te){il(this,te);return}if(g=O||"",O=new Map(this.headers),U)if(Object.getPrototypeOf(U)===Object.prototype)for(var W in U)O.set(W,U[W]);else if(typeof U.keys=="function"&&typeof U.get=="function")for(const te of U.keys())O.set(te,U.get(te));else throw Error("Unknown input type for opt_headers: "+String(U));U=Array.from(O.keys()).find(te=>te.toLowerCase()=="content-type"),W=l.FormData&&g instanceof l.FormData,!(Array.prototype.indexOf.call(yf,x,void 0)>=0)||U||W||O.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[te,we]of O)this.g.setRequestHeader(te,we);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(g),this.v=!1}catch(te){il(this,te)}};function il(g,x){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=x,g.o=5,vf(g),za(g)}function vf(g){g.A||(g.A=!0,en(g,"complete"),en(g,"error"))}t.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=g||7,en(this,"complete"),en(this,"abort"),za(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),za(this,!0)),Ot.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?al(this):this.Xa())},t.Xa=function(){al(this)};function al(g){if(g.h&&typeof s<"u"){if(g.v&&Di(g)==4)setTimeout(g.Ca.bind(g),0);else if(en(g,"readystatechange"),Di(g)==4){g.h=!1;try{const te=g.ca();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var O;if(!(O=x)){var U;if(U=te===0){let we=String(g.D).match(lm)[1]||null;!we&&l.self&&l.self.location&&(we=l.self.location.protocol.slice(0,-1)),U=!ha.test(we?we.toLowerCase():"")}O=U}if(O)en(g,"complete"),en(g,"success");else{g.o=6;try{var W=Di(g)>2?g.g.statusText:""}catch{W=""}g.l=W+" ["+g.ca()+"]",vf(g)}}finally{za(g)}}}}function za(g,x){if(g.g){g.m&&(clearTimeout(g.m),g.m=null);const O=g.g;g.g=null,x||en(g,"ready");try{O.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Di(g){return g.g?g.g.readyState:0}t.ca=function(){try{return Di(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(g){if(this.g){var x=this.g.responseText;return g&&x.indexOf(g)==0&&(x=x.substring(g.length)),ht(x)}};function Kn(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.F){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function Ba(g){const x={};g=(g.g&&Di(g)>=2&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let U=0;U<g.length;U++){if(V(g[U]))continue;var O=am(g[U]);const W=O[0];if(O=O[1],typeof O!="string")continue;O=O.trim();const te=x[W]||[];x[W]=te,te.push(O)}Ee(x,function(U){return U.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ma(g,x,O){return O&&O.internalChannelParams&&O.internalChannelParams[g]||x}function Ys(g){this.za=0,this.i=[],this.j=new Ri,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ma("failFast",!1,g),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ma("baseRetryDelayMs",5e3,g),this.Za=ma("retryDelaySeedMs",1e4,g),this.Ta=ma("forwardChannelMaxRetries",2,g),this.va=ma("forwardChannelRequestTimeoutMs",2e4,g),this.ma=g&&g.xmlHttpFactory||void 0,this.Ua=g&&g.Rb||void 0,this.Aa=g&&g.useFetchStreams||!1,this.O=void 0,this.L=g&&g.supportsCrossDomainXhr||!1,this.M="",this.h=new of(g&&g.concurrentRequestLimit),this.Ba=new Gs,this.S=g&&g.fastHandshake||!1,this.R=g&&g.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=g&&g.Pb||!1,g&&g.ua&&this.j.ua(),g&&g.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&g&&g.detectBufferingProxy||!1,this.ia=void 0,g&&g.longPollingTimeout&&g.longPollingTimeout>0&&(this.ia=g.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Ys.prototype,t.ka=8,t.I=1,t.connect=function(g,x,O,U){un(0),this.W=g,this.H=x||{},O&&U!==void 0&&(this.H.OSID=O,this.H.OAID=U),this.F=this.X,this.J=_m(this,null,this.W),pa(this)};function _f(g){if(vc(g),g.I==3){var x=g.V++,O=hn(g.J);if(xt(O,"SID",g.M),xt(O,"RID",x),xt(O,"TYPE","terminate"),sl(g,O),x=new Ni(g,g.j,x),x.M=2,x.A=el(hn(O)),O=!1,l.navigator&&l.navigator.sendBeacon)try{O=l.navigator.sendBeacon(x.A.toString(),"")}catch{}!O&&l.Image&&(new Image().src=x.A,O=!0),O||(x.g=bm(x.j,null),x.g.ea(x.A)),x.F=Date.now(),sa(x)}vm(g)}function Ws(g){g.g&&(wf(g),g.g.cancel(),g.g=null)}function vc(g){Ws(g),g.v&&(l.clearTimeout(g.v),g.v=null),bc(g),g.h.cancel(),g.m&&(typeof g.m=="number"&&l.clearTimeout(g.m),g.m=null)}function pa(g){if(!lf(g.h)&&!g.m){g.m=!0;var x=g.Ea;L||R(),q||(L(),q=!0),I.add(x,g),g.D=0}}function _c(g,x){return ca(g.h)>=g.h.j-(g.m?1:0)?!1:g.m?(g.i=x.G.concat(g.i),!0):g.I==1||g.I==2||g.D>=(g.Sa?0:g.Ta)?!1:(g.m=ra(h(g.Ea,g,x),ym(g,g.D)),g.D++,!0)}t.Ea=function(g){if(this.m)if(this.m=null,this.I==1){if(!g){this.V=Math.floor(Math.random()*1e5),g=this.V++;const W=new Ni(this,this.j,g);let te=this.o;if(this.U&&(te?(te=F(te),re(te,this.U)):te=this.U),this.u!==null||this.R||(W.J=te,te=null),this.S)e:{for(var x=0,O=0;O<this.i.length;O++){t:{var U=this.i[O];if("__data__"in U.map&&(U=U.map.__data__,typeof U=="string")){U=U.length;break t}U=void 0}if(U===void 0)break;if(x+=U,x>4096){x=O;break e}if(x===4096||O===this.i.length-1){x=O+1;break e}}x=1e3}else x=1e3;x=hm(this,W,x),O=hn(this.J),xt(O,"RID",g),xt(O,"CVER",22),this.G&&xt(O,"X-HTTP-Session-Id",this.G),sl(this,O),te&&(this.R?x="headers="+Ua(li(te))+"&"+x:this.u&&rl(O,this.u,te)),cf(this.h,W),this.Ra&&xt(O,"TYPE","init"),this.S?(xt(O,"$req",x),xt(O,"SID","null"),W.U=!0,aa(W,O,null)):aa(W,O,x),this.I=2}}else this.I==3&&(g?bf(this,g):this.i.length==0||lf(this.h)||bf(this))};function bf(g,x){var O;x?O=x.l:O=g.V++;const U=hn(g.J);xt(U,"SID",g.M),xt(U,"RID",O),xt(U,"AID",g.K),sl(g,U),g.u&&g.o&&rl(U,g.u,g.o),O=new Ni(g,g.j,O,g.D+1),g.u===null&&(O.J=g.o),x&&(g.i=x.G.concat(g.i)),x=hm(g,O,1e3),O.H=Math.round(g.va*.5)+Math.round(g.va*.5*Math.random()),cf(g.h,O),aa(O,U,x)}function sl(g,x){g.H&&ge(g.H,function(O,U){xt(x,U,O)}),g.l&&ge({},function(O,U){xt(x,U,O)})}function hm(g,x,O){O=Math.min(g.i.length,O);const U=g.l?h(g.l.Ka,g.l,g):null;e:{var W=g.i;let Qe=-1;for(;;){const nn=["count="+O];Qe==-1?O>0?(Qe=W[0].g,nn.push("ofs="+Qe)):Qe=0:nn.push("ofs="+Qe);let vt=!0;for(let Ft=0;Ft<O;Ft++){var te=W[Ft].g;const ci=W[Ft].map;if(te-=Qe,te<0)Qe=Math.max(0,W[Ft].g-100),vt=!1;else try{te="req"+te+"_"||"";try{var we=ci instanceof Map?ci:Object.entries(ci);for(const[ya,ji]of we){let Li=ji;u(ji)&&(Li=$e(ji)),nn.push(te+ya+"="+encodeURIComponent(Li))}}catch(ya){throw nn.push(te+"type="+encodeURIComponent("_badmap")),ya}}catch{U&&U(ci)}}if(vt){we=nn.join("&");break e}}we=void 0}return g=g.i.splice(0,O),x.G=g,we}function mm(g){if(!g.g&&!g.v){g.Y=1;var x=g.Da;L||R(),q||(L(),q=!0),I.add(x,g),g.A=0}}function ol(g){return g.g||g.v||g.A>=3?!1:(g.Y++,g.v=ra(h(g.Da,g),ym(g,g.A)),g.A++,!0)}t.Da=function(){if(this.v=null,pm(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var g=4*this.T;this.j.info("BP detection timer enabled: "+g),this.B=ra(h(this.Wa,this),g)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,un(10),Ws(this),pm(this))};function wf(g){g.B!=null&&(l.clearTimeout(g.B),g.B=null)}function pm(g){g.g=new Ni(g,g.j,"rpc",g.Y),g.u===null&&(g.g.J=g.o),g.g.P=0;var x=hn(g.na);xt(x,"RID","rpc"),xt(x,"SID",g.M),xt(x,"AID",g.K),xt(x,"CI",g.F?"0":"1"),!g.F&&g.ia&&xt(x,"TO",g.ia),xt(x,"TYPE","xmlhttp"),sl(g,x),g.u&&g.o&&rl(x,g.u,g.o),g.O&&(g.g.H=g.O);var O=g.g;g=g.ba,O.M=1,O.A=el(hn(x)),O.u=null,O.R=!0,fc(O,g)}t.Va=function(){this.C!=null&&(this.C=null,Ws(this),ol(this),un(19))};function bc(g){g.C!=null&&(l.clearTimeout(g.C),g.C=null)}function gm(g,x){var O=null;if(g.g==x){bc(g),wf(g),g.g=null;var U=2}else if(ua(g.h,x))O=x.G,uf(g.h,x),U=1;else return;if(g.I!=0){if(x.o)if(U==1){O=x.u?x.u.length:0,x=Date.now()-x.F;var W=g.D;U=uc(),en(U,new na(U,O)),pa(g)}else mm(g);else if(W=x.m,W==3||W==0&&x.X>0||!(U==1&&_c(g,x)||U==2&&ol(g)))switch(O&&O.length>0&&(x=g.h,x.i=x.i.concat(O)),W){case 1:ga(g,5);break;case 4:ga(g,10);break;case 3:ga(g,6);break;default:ga(g,2)}}}function ym(g,x){let O=g.Qa+Math.floor(Math.random()*g.Za);return g.isActive()||(O*=2),O*x}function ga(g,x){if(g.j.info("Error code "+x),x==2){var O=h(g.bb,g),U=g.Ua;const W=!U;U=new Br(U||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||jn(U,"https"),el(U),W?Mi(U.toString(),O):gf(U.toString(),O)}else un(2);g.I=0,g.l&&g.l.pa(x),vm(g),vc(g)}t.bb=function(g){g?(this.j.info("Successfully pinged google.com"),un(2)):(this.j.info("Failed to ping google.com"),un(1))};function vm(g){if(g.I=0,g.ja=[],g.l){const x=ff(g.h);(x.length!=0||g.i.length!=0)&&(E(g.ja,x),E(g.ja,g.i),g.h.i.length=0,b(g.i),g.i.length=0),g.l.oa()}}function _m(g,x,O){var U=O instanceof Br?hn(O):new Br(O);if(U.g!="")x&&(U.g=x+"."+U.g),$s(U,U.u);else{var W=l.location;U=W.protocol,x=x?x+"."+W.hostname:W.hostname,W=+W.port;const te=new Br(null);U&&jn(te,U),x&&(te.g=x),W&&$s(te,W),O&&(te.h=O),U=te}return O=g.G,x=g.wa,O&&x&&xt(U,O,x),xt(U,"VER",g.ka),sl(g,U),U}function bm(g,x,O){if(x&&!g.L)throw Error("Can't create secondary domain capable XhrIo object.");return x=g.Aa&&!g.ma?new Ot(new da({ab:O})):new Ot(g.ma),x.Fa(g.L),x}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function wm(){}t=wm.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Xs(){}Xs.prototype.g=function(g,x){return new yr(g,x)};function yr(g,x){Qt.call(this),this.g=new Ys(x),this.l=g,this.h=x&&x.messageUrlParams||null,g=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(g?g["X-WebChannel-Content-Type"]=x.messageContentType:g={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.sa&&(g?g["X-WebChannel-Client-Profile"]=x.sa:g={"X-WebChannel-Client-Profile":x.sa}),this.g.U=g,(g=x&&x.Qb)&&!V(g)&&(this.g.u=g),this.A=x&&x.supportsCrossDomainXhr||!1,this.v=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!V(x)&&(this.g.G=x,g=this.h,g!==null&&x in g&&(g=this.h,x in g&&delete g[x])),this.j=new $a(this)}p(yr,Qt),yr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},yr.prototype.close=function(){_f(this.g)},yr.prototype.o=function(g){var x=this.g;if(typeof g=="string"){var O={};O.__data__=g,g=O}else this.v&&(O={},O.__data__=$e(g),g=O);x.i.push(new dn(x.Ya++,g)),x.I==3&&pa(x)},yr.prototype.N=function(){this.g.l=null,delete this.j,_f(this.g),delete this.g,yr.Z.N.call(this)};function xm(g){Sn.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var x=g.__sm__;if(x){e:{for(const O in x){g=O;break e}g=void 0}(this.i=g)&&(g=this.i,x=x!==null&&g in x?x[g]:void 0),this.data=x}else this.data=g}p(xm,Sn);function Em(){Ar.call(this),this.status=1}p(Em,Ar);function $a(g){this.g=g}p($a,wm),$a.prototype.ra=function(){en(this.g,"a")},$a.prototype.qa=function(g){en(this.g,new xm(g))},$a.prototype.pa=function(g){en(this.g,new Em)},$a.prototype.oa=function(){en(this.g,"b")},Xs.prototype.createWebChannel=Xs.prototype.g,yr.prototype.send=yr.prototype.o,yr.prototype.open=yr.prototype.m,yr.prototype.close=yr.prototype.close,d6=function(){return new Xs},f6=function(){return uc()},u6=Yt,Tx={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Jo.NO_ERROR=0,Jo.TIMEOUT=8,Jo.HTTP_ERROR=6,mg=Jo,af.COMPLETE="complete",c6=af,wt.EventType=qt,qt.OPEN="a",qt.CLOSE="b",qt.ERROR="c",qt.MESSAGE="d",Qt.prototype.listen=Qt.prototype.J,wd=wt,Ot.prototype.listenOnce=Ot.prototype.K,Ot.prototype.getLastError=Ot.prototype.Ha,Ot.prototype.getLastErrorCode=Ot.prototype.ya,Ot.prototype.getStatus=Ot.prototype.ca,Ot.prototype.getResponseJson=Ot.prototype.La,Ot.prototype.getResponseText=Ot.prototype.la,Ot.prototype.send=Ot.prototype.ea,Ot.prototype.setWithCredentials=Ot.prototype.Fa,l6=Ot}).apply(typeof Gp<"u"?Gp:typeof self<"u"?self:typeof window<"u"?window:{});const wM="@firebase/firestore",xM="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ur.UNAUTHENTICATED=new ur(null),ur.GOOGLE_CREDENTIALS=new ur("google-credentials-uid"),ur.FIRST_PARTY=new ur("first-party-uid"),ur.MOCK_USER=new ur("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qu="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ql=new VS("@firebase/firestore");function au(){return Ql.logLevel}function Se(t,...e){if(Ql.logLevel<=st.DEBUG){const n=e.map(QS);Ql.debug(`Firestore (${Qu}): ${t}`,...n)}}function Is(t,...e){if(Ql.logLevel<=st.ERROR){const n=e.map(QS);Ql.error(`Firestore (${Qu}): ${t}`,...n)}}function Mu(t,...e){if(Ql.logLevel<=st.WARN){const n=e.map(QS);Ql.warn(`Firestore (${Qu}): ${t}`,...n)}}function QS(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,h6(t,r,n)}function h6(t,e,n){let r=`FIRESTORE (${Qu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Is(r),new Error(r)}function bt(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||h6(e,i,r)}function Xe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ye={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ke extends Vs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m6{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ule{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(ur.UNAUTHENTICATED)))}shutdown(){}}class fle{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class dle{constructor(e){this.t=e,this.currentUser=ur.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){bt(this.o===void 0,42304);let r=this.i;const i=f=>this.i!==r?(r=this.i,n(f)):Promise.resolve();let s=new Lo;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Lo,e.enqueueRetryable((()=>i(this.currentUser)))};const l=()=>{const f=s;e.enqueueRetryable((async()=>{await f.promise,await i(this.currentUser)}))},u=f=>{Se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((f=>u(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?u(f):(Se("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Lo)}}),0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(Se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(bt(typeof r.accessToken=="string",31837,{l:r}),new m6(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return bt(e===null||typeof e=="string",2055,{h:e}),new ur(e)}}class hle{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ur.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class mle{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new hle(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(ur.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class EM{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ple{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ei(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){bt(this.o===void 0,3512);const r=s=>{s.error!=null&&Se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const l=s.token!==this.m;return this.m=s.token,Se("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable((()=>r(s)))};const i=s=>{Se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((s=>i(s))),setTimeout((()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):Se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new EM(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(bt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new EM(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gle(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=gle(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function ot(t,e){return t<e?-1:t>e?1:0}function Cx(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return i1(i)===i1(s)?ot(i,s):i1(i)?1:-1}return ot(t.length,e.length)}const yle=55296,vle=57343;function i1(t){const e=t.charCodeAt(0);return e>=yle&&e<=vle}function ku(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SM="__name__";class Ea{constructor(e,n,r){n===void 0?n=0:n>e.length&&He(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&He(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ea.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ea?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=Ea.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return ot(e.length,n.length)}static compareSegments(e,n){const r=Ea.isNumericId(e),i=Ea.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Ea.extractNumericId(e).compare(Ea.extractNumericId(n)):Cx(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return jo.fromString(e.substring(4,e.length-2))}}class Wt extends Ea{construct(e,n,r){return new Wt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ke(ye.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new Wt(n)}static emptyPath(){return new Wt([])}}const _le=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rr extends Ea{construct(e,n,r){return new rr(e,n,r)}static isValidIdentifier(e){return _le.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===SM}static keyField(){return new rr([SM])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ke(ye.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let l=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new ke(ye.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[i+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new ke(ye.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,i+=2}else u==="`"?(l=!l,i++):u!=="."||l?(r+=u,i++):(s(),i++)}if(s(),l)throw new ke(ye.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rr(n)}static emptyPath(){return new rr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e){this.path=e}static fromPath(e){return new Be(Wt.fromString(e))}static fromName(e){return new Be(Wt.fromString(e).popFirst(5))}static empty(){return new Be(Wt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Wt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Wt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Be(new Wt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ble(t,e,n){if(!n)throw new ke(ye.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function wle(t,e,n,r){if(e===!0&&r===!0)throw new ke(ye.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function AM(t){if(!Be.isDocumentKey(t))throw new ke(ye.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function p6(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function ZS(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":He(12329,{type:typeof t})}function ch(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ke(ye.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ZS(t);throw new ke(ye.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(t,e){const n={typeString:t};return e&&(n.value=e),n}function Yh(t,e){if(!p6(t))throw new ke(ye.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const l=t[r];if(i&&typeof l!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&l!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new ke(ye.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TM=-62135596800,CM=1e6;class Bt{static now(){return Bt.fromMillis(Date.now())}static fromDate(e){return Bt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*CM);return new Bt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ke(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ke(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<TM)throw new ke(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ke(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/CM}_compareTo(e){return this.seconds===e.seconds?ot(this.nanoseconds,e.nanoseconds):ot(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Bt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Yh(e,Bt._jsonSchema))return new Bt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-TM;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Bt._jsonSchemaVersion="firestore/timestamp/1.0",Bt._jsonSchema={type:wn("string",Bt._jsonSchemaVersion),seconds:wn("number"),nanoseconds:wn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{static fromTimestamp(e){return new Ye(e)}static min(){return new Ye(new Bt(0,0))}static max(){return new Ye(new Bt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uh=-1;function xle(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ye.fromTimestamp(r===1e9?new Bt(n+1,0):new Bt(n,r));return new zo(i,Be.empty(),e)}function Ele(t){return new zo(t.readTime,t.key,uh)}class zo{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new zo(Ye.min(),Be.empty(),uh)}static max(){return new zo(Ye.max(),Be.empty(),uh)}}function Sle(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Be.comparator(t.documentKey,e.documentKey),n!==0?n:ot(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ale="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Tle{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ju(t){if(t.code!==ye.FAILED_PRECONDITION||t.message!==Ale)throw t;Se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&He(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new me(((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof me?n:me.resolve(n)}catch(n){return me.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):me.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):me.reject(n)}static resolve(e){return new me(((n,r)=>{n(e)}))}static reject(e){return new me(((n,r)=>{r(e)}))}static waitFor(e){return new me(((n,r)=>{let i=0,s=0,l=!1;e.forEach((u=>{++i,u.next((()=>{++s,l&&s===i&&n()}),(f=>r(f)))})),l=!0,s===i&&n()}))}static or(e){let n=me.resolve(!1);for(const r of e)n=n.next((i=>i?me.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,s)=>{r.push(n.call(this,i,s))})),this.waitFor(r)}static mapArray(e,n){return new me(((r,i)=>{const s=e.length,l=new Array(s);let u=0;for(let f=0;f<s;f++){const h=f;n(e[h]).next((m=>{l[h]=m,++u,u===s&&r(l)}),(m=>i(m)))}}))}static doWhile(e,n){return new me(((r,i)=>{const s=()=>{e()===!0?n().next((()=>{s()}),i):r()};s()}))}}function Cle(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Zu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}$v.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA=-1;function qv(t){return t==null}function Ry(t){return t===0&&1/t==-1/0}function Ole(t){return typeof t=="number"&&Number.isInteger(t)&&!Ry(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g6="";function Ile(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=OM(e)),e=Rle(t.get(n),e);return OM(e)}function Rle(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case g6:n+="";break;default:n+=s}}return n}function OM(t){return t+g6+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IM(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ic(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function y6(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e,n){this.comparator=e,this.root=n||nr.EMPTY}insert(e,n){return new Xt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,nr.BLACK,null,null))}remove(e){return new Xt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Kp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Kp(this.root,e,this.comparator,!1)}getReverseIterator(){return new Kp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Kp(this.root,e,this.comparator,!0)}}class Kp{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nr{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??nr.RED,this.left=i??nr.EMPTY,this.right=s??nr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new nr(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return nr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return nr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,nr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,nr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw He(43730,{key:this.key,value:this.value});if(this.right.isRed())throw He(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw He(27949);return e+(this.isRed()?0:1)}}nr.EMPTY=null,nr.RED=!0,nr.BLACK=!1;nr.EMPTY=new class{constructor(){this.size=0}get key(){throw He(57766)}get value(){throw He(16141)}get color(){throw He(16727)}get left(){throw He(29726)}get right(){throw He(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new nr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.comparator=e,this.data=new Xt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new RM(this.data.getIterator())}getIteratorFrom(e){return new RM(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Rn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Rn(this.comparator);return n.data=e,n}}class RM{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e){this.fields=e,e.sort(rr.comparator)}static empty(){return new Gi([])}unionWith(e){let n=new Rn(rr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Gi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ku(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v6 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new v6("Invalid base64 string: "+s):s}})(e);return new ar(n)}static fromUint8Array(e){const n=(function(i){let s="";for(let l=0;l<i.length;++l)s+=String.fromCharCode(i[l]);return s})(e);return new ar(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ot(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ar.EMPTY_BYTE_STRING=new ar("");const Nle=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bo(t){if(bt(!!t,39018),typeof t=="string"){let e=0;const n=Nle.exec(t);if(bt(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:on(t.seconds),nanos:on(t.nanos)}}function on(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function $o(t){return typeof t=="string"?ar.fromBase64String(t):ar.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _6="server_timestamp",b6="__type__",w6="__previous_value__",x6="__local_write_time__";function tA(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[b6])==null?void 0:r.stringValue)===_6}function Fv(t){const e=t.mapValue.fields[w6];return tA(e)?Fv(e):e}function fh(t){const e=Bo(t.mapValue.fields[x6].timestampValue);return new Bt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ple{constructor(e,n,r,i,s,l,u,f,h,m){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.longPollingOptions=f,this.useFetchStreams=h,this.isUsingEmulator=m}}const Ny="(default)";class dh{constructor(e,n){this.projectId=e,this.database=n||Ny}static empty(){return new dh("","")}get isDefaultDatabase(){return this.database===Ny}isEqual(e){return e instanceof dh&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E6="__type__",Mle="__max__",Yp={mapValue:{}},S6="__vector__",Py="value";function qo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?tA(t)?4:Dle(t)?9007199254740991:kle(t)?10:11:He(28295,{value:t})}function ja(t,e){if(t===e)return!0;const n=qo(t);if(n!==qo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return fh(t).isEqual(fh(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const l=Bo(i.timestampValue),u=Bo(s.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,s){return $o(i.bytesValue).isEqual($o(s.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,s){return on(i.geoPointValue.latitude)===on(s.geoPointValue.latitude)&&on(i.geoPointValue.longitude)===on(s.geoPointValue.longitude)})(t,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return on(i.integerValue)===on(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const l=on(i.doubleValue),u=on(s.doubleValue);return l===u?Ry(l)===Ry(u):isNaN(l)&&isNaN(u)}return!1})(t,e);case 9:return ku(t.arrayValue.values||[],e.arrayValue.values||[],ja);case 10:case 11:return(function(i,s){const l=i.mapValue.fields||{},u=s.mapValue.fields||{};if(IM(l)!==IM(u))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(u[f]===void 0||!ja(l[f],u[f])))return!1;return!0})(t,e);default:return He(52216,{left:t})}}function hh(t,e){return(t.values||[]).find((n=>ja(n,e)))!==void 0}function Du(t,e){if(t===e)return 0;const n=qo(t),r=qo(e);if(n!==r)return ot(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ot(t.booleanValue,e.booleanValue);case 2:return(function(s,l){const u=on(s.integerValue||s.doubleValue),f=on(l.integerValue||l.doubleValue);return u<f?-1:u>f?1:u===f?0:isNaN(u)?isNaN(f)?0:-1:1})(t,e);case 3:return NM(t.timestampValue,e.timestampValue);case 4:return NM(fh(t),fh(e));case 5:return Cx(t.stringValue,e.stringValue);case 6:return(function(s,l){const u=$o(s),f=$o(l);return u.compareTo(f)})(t.bytesValue,e.bytesValue);case 7:return(function(s,l){const u=s.split("/"),f=l.split("/");for(let h=0;h<u.length&&h<f.length;h++){const m=ot(u[h],f[h]);if(m!==0)return m}return ot(u.length,f.length)})(t.referenceValue,e.referenceValue);case 8:return(function(s,l){const u=ot(on(s.latitude),on(l.latitude));return u!==0?u:ot(on(s.longitude),on(l.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return PM(t.arrayValue,e.arrayValue);case 10:return(function(s,l){var v,b,E,w;const u=s.fields||{},f=l.fields||{},h=(v=u[Py])==null?void 0:v.arrayValue,m=(b=f[Py])==null?void 0:b.arrayValue,p=ot(((E=h==null?void 0:h.values)==null?void 0:E.length)||0,((w=m==null?void 0:m.values)==null?void 0:w.length)||0);return p!==0?p:PM(h,m)})(t.mapValue,e.mapValue);case 11:return(function(s,l){if(s===Yp.mapValue&&l===Yp.mapValue)return 0;if(s===Yp.mapValue)return 1;if(l===Yp.mapValue)return-1;const u=s.fields||{},f=Object.keys(u),h=l.fields||{},m=Object.keys(h);f.sort(),m.sort();for(let p=0;p<f.length&&p<m.length;++p){const v=Cx(f[p],m[p]);if(v!==0)return v;const b=Du(u[f[p]],h[m[p]]);if(b!==0)return b}return ot(f.length,m.length)})(t.mapValue,e.mapValue);default:throw He(23264,{he:n})}}function NM(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ot(t,e);const n=Bo(t),r=Bo(e),i=ot(n.seconds,r.seconds);return i!==0?i:ot(n.nanos,r.nanos)}function PM(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Du(n[i],r[i]);if(s)return s}return ot(n.length,r.length)}function ju(t){return Ox(t)}function Ox(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=Bo(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return $o(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Be.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Ox(s);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const l of r)s?s=!1:i+=",",i+=`${l}:${Ox(n.fields[l])}`;return i+"}"})(t.mapValue):He(61005,{value:t})}function pg(t){switch(qo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Fv(t);return e?16+pg(e):16;case 5:return 2*t.stringValue.length;case 6:return $o(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,s)=>i+pg(s)),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return ic(r.fields,((s,l)=>{i+=s.length+pg(l)})),i})(t.mapValue);default:throw He(13486,{value:t})}}function Ix(t){return!!t&&"integerValue"in t}function nA(t){return!!t&&"arrayValue"in t}function MM(t){return!!t&&"nullValue"in t}function kM(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function gg(t){return!!t&&"mapValue"in t}function kle(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[E6])==null?void 0:r.stringValue)===S6}function Ld(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ic(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Ld(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ld(t.arrayValue.values[n]);return e}return{...t}}function Dle(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Mle}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e){this.value=e}static empty(){return new wi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!gg(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ld(n)}setAll(e){let n=rr.emptyPath(),r={},i=[];e.forEach(((l,u)=>{if(!n.isImmediateParentOf(u)){const f=this.getFieldsMap(n);this.applyChanges(f,r,i),r={},i=[],n=u.popLast()}l?r[u.lastSegment()]=Ld(l):i.push(u.lastSegment())}));const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());gg(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ja(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];gg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ic(n,((i,s)=>e[i]=s));for(const i of r)delete e[i]}clone(){return new wi(Ld(this.value))}}function A6(t){const e=[];return ic(t.fields,((n,r)=>{const i=new rr([n]);if(gg(r)){const s=A6(r.mapValue).fields;if(s.length===0)e.push(i);else for(const l of s)e.push(i.child(l))}else e.push(i)})),new Gi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e,n,r,i,s,l,u){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=l,this.documentState=u}static newInvalidDocument(e){return new dr(e,0,Ye.min(),Ye.min(),Ye.min(),wi.empty(),0)}static newFoundDocument(e,n,r,i){return new dr(e,1,n,Ye.min(),r,i,0)}static newNoDocument(e,n){return new dr(e,2,n,Ye.min(),Ye.min(),wi.empty(),0)}static newUnknownDocument(e,n){return new dr(e,3,n,Ye.min(),Ye.min(),wi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(e,n){this.position=e,this.inclusive=n}}function DM(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],l=t.position[i];if(s.field.isKeyField()?r=Be.comparator(Be.fromName(l.referenceValue),n.key):r=Du(l,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function jM(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ja(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(e,n="asc"){this.field=e,this.dir=n}}function jle(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T6{}class In extends T6{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Vle(e,n,r):n==="array-contains"?new Ble(e,r):n==="in"?new $le(e,r):n==="not-in"?new qle(e,r):n==="array-contains-any"?new Fle(e,r):new In(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Ule(e,r):new zle(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Du(n,this.value)):n!==null&&qo(this.value)===qo(n)&&this.matchesComparison(Du(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return He(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class La extends T6{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new La(e,n)}matches(e){return C6(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function C6(t){return t.op==="and"}function O6(t){return Lle(t)&&C6(t)}function Lle(t){for(const e of t.filters)if(e instanceof La)return!1;return!0}function Rx(t){if(t instanceof In)return t.field.canonicalString()+t.op.toString()+ju(t.value);if(O6(t))return t.filters.map((e=>Rx(e))).join(",");{const e=t.filters.map((n=>Rx(n))).join(",");return`${t.op}(${e})`}}function I6(t,e){return t instanceof In?(function(r,i){return i instanceof In&&r.op===i.op&&r.field.isEqual(i.field)&&ja(r.value,i.value)})(t,e):t instanceof La?(function(r,i){return i instanceof La&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((s,l,u)=>s&&I6(l,i.filters[u])),!0):!1})(t,e):void He(19439)}function R6(t){return t instanceof In?(function(n){return`${n.field.canonicalString()} ${n.op} ${ju(n.value)}`})(t):t instanceof La?(function(n){return n.op.toString()+" {"+n.getFilters().map(R6).join(" ,")+"}"})(t):"Filter"}class Vle extends In{constructor(e,n,r){super(e,n,r),this.key=Be.fromName(r.referenceValue)}matches(e){const n=Be.comparator(e.key,this.key);return this.matchesComparison(n)}}class Ule extends In{constructor(e,n){super(e,"in",n),this.keys=N6("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class zle extends In{constructor(e,n){super(e,"not-in",n),this.keys=N6("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function N6(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((r=>Be.fromName(r.referenceValue)))}class Ble extends In{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return nA(n)&&hh(n.arrayValue,this.value)}}class $le extends In{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&hh(this.value.arrayValue,n)}}class qle extends In{constructor(e,n){super(e,"not-in",n)}matches(e){if(hh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!hh(this.value.arrayValue,n)}}class Fle extends In{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!nA(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>hh(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hle{constructor(e,n=null,r=[],i=[],s=null,l=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=l,this.endAt=u,this.Te=null}}function LM(t,e=null,n=[],r=[],i=null,s=null,l=null){return new Hle(t,e,n,r,i,s,l)}function rA(t){const e=Xe(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>Rx(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(s){return s.field.canonicalString()+s.dir})(r))).join(","),qv(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>ju(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>ju(r))).join(",")),e.Te=n}return e.Te}function iA(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!jle(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!I6(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!jM(t.startAt,e.startAt)&&jM(t.endAt,e.endAt)}function Nx(t){return Be.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(e,n=null,r=[],i=[],s=null,l="F",u=null,f=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=l,this.startAt=u,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Gle(t,e,n,r,i,s,l,u){return new Hv(t,e,n,r,i,s,l,u)}function aA(t){return new Hv(t)}function VM(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Kle(t){return t.collectionGroup!==null}function Vd(t){const e=Xe(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let u=new Rn(rr.comparator);return l.filters.forEach((f=>{f.getFlattenedFilters().forEach((h=>{h.isInequality()&&(u=u.add(h.field))}))})),u})(e).forEach((s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new ky(s,r))})),n.has(rr.keyField().canonicalString())||e.Ie.push(new ky(rr.keyField(),r))}return e.Ie}function Ia(t){const e=Xe(t);return e.Ee||(e.Ee=Yle(e,Vd(t))),e.Ee}function Yle(t,e){if(t.limitType==="F")return LM(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const s=i.dir==="desc"?"asc":"desc";return new ky(i.field,s)}));const n=t.endAt?new My(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new My(t.startAt.position,t.startAt.inclusive):null;return LM(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Px(t,e,n){return new Hv(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Gv(t,e){return iA(Ia(t),Ia(e))&&t.limitType===e.limitType}function P6(t){return`${rA(Ia(t))}|lt:${t.limitType}`}function su(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>R6(i))).join(", ")}]`),qv(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>ju(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>ju(i))).join(",")),`Target(${r})`})(Ia(t))}; limitType=${t.limitType})`}function Kv(t,e){return e.isFoundDocument()&&(function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Be.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(t,e)&&(function(r,i){for(const s of Vd(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(l,u,f){const h=DM(l,u,f);return l.inclusive?h<=0:h<0})(r.startAt,Vd(r),i)||r.endAt&&!(function(l,u,f){const h=DM(l,u,f);return l.inclusive?h>=0:h>0})(r.endAt,Vd(r),i))})(t,e)}function Wle(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function M6(t){return(e,n)=>{let r=!1;for(const i of Vd(t)){const s=Xle(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Xle(t,e,n){const r=t.field.isKeyField()?Be.comparator(e.key,n.key):(function(s,l,u){const f=l.data.field(s),h=u.data.field(s);return f!==null&&h!==null?Du(f,h):He(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return He(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ic(this.inner,((n,r)=>{for(const[i,s]of r)e(i,s)}))}isEmpty(){return y6(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qle=new Xt(Be.comparator);function Rs(){return Qle}const k6=new Xt(Be.comparator);function xd(...t){let e=k6;for(const n of t)e=e.insert(n.key,n);return e}function D6(t){let e=k6;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Dl(){return Ud()}function j6(){return Ud()}function Ud(){return new ac((t=>t.toString()),((t,e)=>t.isEqual(e)))}const Jle=new Xt(Be.comparator),Zle=new Rn(Be.comparator);function lt(...t){let e=Zle;for(const n of t)e=e.add(n);return e}const ece=new Rn(ot);function tce(){return ece}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sA(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ry(e)?"-0":e}}function L6(t){return{integerValue:""+t}}function nce(t,e){return Ole(e)?L6(e):sA(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(){this._=void 0}}function rce(t,e,n){return t instanceof Dy?(function(i,s){const l={fields:{[b6]:{stringValue:_6},[x6]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&tA(s)&&(s=Fv(s)),s&&(l.fields[w6]=s),{mapValue:l}})(n,e):t instanceof mh?U6(t,e):t instanceof ph?z6(t,e):(function(i,s){const l=V6(i,s),u=UM(l)+UM(i.Ae);return Ix(l)&&Ix(i.Ae)?L6(u):sA(i.serializer,u)})(t,e)}function ice(t,e,n){return t instanceof mh?U6(t,e):t instanceof ph?z6(t,e):n}function V6(t,e){return t instanceof jy?(function(r){return Ix(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}class Dy extends Yv{}class mh extends Yv{constructor(e){super(),this.elements=e}}function U6(t,e){const n=B6(e);for(const r of t.elements)n.some((i=>ja(i,r)))||n.push(r);return{arrayValue:{values:n}}}class ph extends Yv{constructor(e){super(),this.elements=e}}function z6(t,e){let n=B6(e);for(const r of t.elements)n=n.filter((i=>!ja(i,r)));return{arrayValue:{values:n}}}class jy extends Yv{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function UM(t){return on(t.integerValue||t.doubleValue)}function B6(t){return nA(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function ace(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof mh&&i instanceof mh||r instanceof ph&&i instanceof ph?ku(r.elements,i.elements,ja):r instanceof jy&&i instanceof jy?ja(r.Ae,i.Ae):r instanceof Dy&&i instanceof Dy})(t.transform,e.transform)}class sce{constructor(e,n){this.version=e,this.transformResults=n}}class ys{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ys}static exists(e){return new ys(void 0,e)}static updateTime(e){return new ys(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yg(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Wv{}function $6(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new F6(t.key,ys.none()):new Wh(t.key,t.data,ys.none());{const n=t.data,r=wi.empty();let i=new Rn(rr.comparator);for(let s of e.fields)if(!i.has(s)){let l=n.field(s);l===null&&s.length>1&&(s=s.popLast(),l=n.field(s)),l===null?r.delete(s):r.set(s,l),i=i.add(s)}return new sc(t.key,r,new Gi(i.toArray()),ys.none())}}function oce(t,e,n){t instanceof Wh?(function(i,s,l){const u=i.value.clone(),f=BM(i.fieldTransforms,s,l.transformResults);u.setAll(f),s.convertToFoundDocument(l.version,u).setHasCommittedMutations()})(t,e,n):t instanceof sc?(function(i,s,l){if(!yg(i.precondition,s))return void s.convertToUnknownDocument(l.version);const u=BM(i.fieldTransforms,s,l.transformResults),f=s.data;f.setAll(q6(i)),f.setAll(u),s.convertToFoundDocument(l.version,f).setHasCommittedMutations()})(t,e,n):(function(i,s,l){s.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,n)}function zd(t,e,n,r){return t instanceof Wh?(function(s,l,u,f){if(!yg(s.precondition,l))return u;const h=s.value.clone(),m=$M(s.fieldTransforms,f,l);return h.setAll(m),l.convertToFoundDocument(l.version,h).setHasLocalMutations(),null})(t,e,n,r):t instanceof sc?(function(s,l,u,f){if(!yg(s.precondition,l))return u;const h=$M(s.fieldTransforms,f,l),m=l.data;return m.setAll(q6(s)),m.setAll(h),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),u===null?null:u.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((p=>p.field)))})(t,e,n,r):(function(s,l,u){return yg(s.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u})(t,e,n)}function lce(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=V6(r.transform,i||null);s!=null&&(n===null&&(n=wi.empty()),n.set(r.field,s))}return n||null}function zM(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ku(r,i,((s,l)=>ace(s,l)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Wh extends Wv{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class sc extends Wv{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function q6(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function BM(t,e,n){const r=new Map;bt(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],l=s.transform,u=e.data.field(s.field);r.set(s.field,ice(l,u,n[i]))}return r}function $M(t,e,n){const r=new Map;for(const i of t){const s=i.transform,l=n.data.field(i.field);r.set(i.field,rce(s,l,e))}return r}class F6 extends Wv{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cce extends Wv{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uce{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&oce(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=zd(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=zd(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=j6();return this.mutations.forEach((i=>{const s=e.get(i.key),l=s.overlayedDocument;let u=this.applyToLocalView(l,s.mutatedFields);u=n.has(i.key)?null:u;const f=$6(l,u);f!==null&&r.set(i.key,f),l.isValidDocument()||l.convertToNoDocument(Ye.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),lt())}isEqual(e){return this.batchId===e.batchId&&ku(this.mutations,e.mutations,((n,r)=>zM(n,r)))&&ku(this.baseMutations,e.baseMutations,((n,r)=>zM(n,r)))}}class oA{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){bt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return Jle})();const s=e.mutations;for(let l=0;l<s.length;l++)i=i.insert(s[l].key,r[l].version);return new oA(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fce{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dce{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vn,dt;function hce(t){switch(t){case ye.OK:return He(64938);case ye.CANCELLED:case ye.UNKNOWN:case ye.DEADLINE_EXCEEDED:case ye.RESOURCE_EXHAUSTED:case ye.INTERNAL:case ye.UNAVAILABLE:case ye.UNAUTHENTICATED:return!1;case ye.INVALID_ARGUMENT:case ye.NOT_FOUND:case ye.ALREADY_EXISTS:case ye.PERMISSION_DENIED:case ye.FAILED_PRECONDITION:case ye.ABORTED:case ye.OUT_OF_RANGE:case ye.UNIMPLEMENTED:case ye.DATA_LOSS:return!0;default:return He(15467,{code:t})}}function H6(t){if(t===void 0)return Is("GRPC error has no .code"),ye.UNKNOWN;switch(t){case vn.OK:return ye.OK;case vn.CANCELLED:return ye.CANCELLED;case vn.UNKNOWN:return ye.UNKNOWN;case vn.DEADLINE_EXCEEDED:return ye.DEADLINE_EXCEEDED;case vn.RESOURCE_EXHAUSTED:return ye.RESOURCE_EXHAUSTED;case vn.INTERNAL:return ye.INTERNAL;case vn.UNAVAILABLE:return ye.UNAVAILABLE;case vn.UNAUTHENTICATED:return ye.UNAUTHENTICATED;case vn.INVALID_ARGUMENT:return ye.INVALID_ARGUMENT;case vn.NOT_FOUND:return ye.NOT_FOUND;case vn.ALREADY_EXISTS:return ye.ALREADY_EXISTS;case vn.PERMISSION_DENIED:return ye.PERMISSION_DENIED;case vn.FAILED_PRECONDITION:return ye.FAILED_PRECONDITION;case vn.ABORTED:return ye.ABORTED;case vn.OUT_OF_RANGE:return ye.OUT_OF_RANGE;case vn.UNIMPLEMENTED:return ye.UNIMPLEMENTED;case vn.DATA_LOSS:return ye.DATA_LOSS;default:return He(39323,{code:t})}}(dt=vn||(vn={}))[dt.OK=0]="OK",dt[dt.CANCELLED=1]="CANCELLED",dt[dt.UNKNOWN=2]="UNKNOWN",dt[dt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dt[dt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dt[dt.NOT_FOUND=5]="NOT_FOUND",dt[dt.ALREADY_EXISTS=6]="ALREADY_EXISTS",dt[dt.PERMISSION_DENIED=7]="PERMISSION_DENIED",dt[dt.UNAUTHENTICATED=16]="UNAUTHENTICATED",dt[dt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dt[dt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dt[dt.ABORTED=10]="ABORTED",dt[dt.OUT_OF_RANGE=11]="OUT_OF_RANGE",dt[dt.UNIMPLEMENTED=12]="UNIMPLEMENTED",dt[dt.INTERNAL=13]="INTERNAL",dt[dt.UNAVAILABLE=14]="UNAVAILABLE",dt[dt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mce(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pce=new jo([4294967295,4294967295],0);function qM(t){const e=mce().encode(t),n=new o6;return n.update(e),new Uint8Array(n.digest())}function FM(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new jo([n,r],0),new jo([i,s],0)]}class lA{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ed(`Invalid padding: ${n}`);if(r<0)throw new Ed(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ed(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ed(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=jo.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(jo.fromNumber(r)));return i.compare(pce)===1&&(i=new jo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=qM(e),[r,i]=FM(n);for(let s=0;s<this.hashCount;s++){const l=this.ye(r,i,s);if(!this.we(l))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),l=new lA(s,i,n);return r.forEach((u=>l.insert(u))),l}insert(e){if(this.ge===0)return;const n=qM(e),[r,i]=FM(n);for(let s=0;s<this.hashCount;s++){const l=this.ye(r,i,s);this.Se(l)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ed extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Xh.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Xv(Ye.min(),i,new Xt(ot),Rs(),lt())}}class Xh{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Xh(r,n,lt(),lt(),lt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class G6{constructor(e,n){this.targetId=e,this.Ce=n}}class K6{constructor(e,n,r=ar.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class HM{constructor(){this.ve=0,this.Fe=GM(),this.Me=ar.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=lt(),n=lt(),r=lt();return this.Fe.forEach(((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:He(38017,{changeType:s})}})),new Xh(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=GM()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,bt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class gce{constructor(e){this.Ge=e,this.ze=new Map,this.je=Rs(),this.Je=Wp(),this.He=Wp(),this.Ye=new Xt(ot)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:He(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,i)=>{this.rt(i)&&n(i)}))}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(Nx(s))if(r===0){const l=new Be(s.path);this.et(n,l,dr.newNoDocument(l,Ye.min()))}else bt(r===1,20013,{expectedCount:r});else{const l=this._t(n);if(l!==r){const u=this.ut(e),f=u?this.ct(u,e,l):1;if(f!==0){this.it(n);const h=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let l,u;try{l=$o(r).toUint8Array()}catch(f){if(f instanceof v6)return Mu("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{u=new lA(l,i,s)}catch(f){return Mu(f instanceof Ed?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return u.ge===0?null:u}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach((s=>{const l=this.Ge.ht(),u=`projects/${l.projectId}/databases/${l.database}/documents/${s.path.canonicalString()}`;e.mightContain(u)||(this.et(n,s,null),i++)})),i}Tt(e){const n=new Map;this.ze.forEach(((s,l)=>{const u=this.ot(l);if(u){if(s.current&&Nx(u.target)){const f=new Be(u.target.path);this.It(f).has(l)||this.Et(l,f)||this.et(l,f,dr.newNoDocument(f,e))}s.Be&&(n.set(l,s.ke()),s.qe())}}));let r=lt();this.He.forEach(((s,l)=>{let u=!0;l.forEachWhile((f=>{const h=this.ot(f);return!h||h.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(r=r.add(s))})),this.je.forEach(((s,l)=>l.setReadTime(e)));const i=new Xv(e,n,this.Ye,this.je,r);return this.je=Rs(),this.Je=Wp(),this.He=Wp(),this.Ye=new Xt(ot),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new HM,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Rn(ot),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Rn(ot),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Se("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new HM),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Wp(){return new Xt(Be.comparator)}function GM(){return new Xt(Be.comparator)}const yce={asc:"ASCENDING",desc:"DESCENDING"},vce={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_ce={and:"AND",or:"OR"};class bce{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Mx(t,e){return t.useProto3Json||qv(e)?e:{value:e}}function Ly(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Y6(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function wce(t,e){return Ly(t,e.toTimestamp())}function Ra(t){return bt(!!t,49232),Ye.fromTimestamp((function(n){const r=Bo(n);return new Bt(r.seconds,r.nanos)})(t))}function cA(t,e){return kx(t,e).canonicalString()}function kx(t,e){const n=(function(i){return new Wt(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function W6(t){const e=Wt.fromString(t);return bt(eV(e),10190,{key:e.toString()}),e}function Dx(t,e){return cA(t.databaseId,e.path)}function a1(t,e){const n=W6(e);if(n.get(1)!==t.databaseId.projectId)throw new ke(ye.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ke(ye.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Be(Q6(n))}function X6(t,e){return cA(t.databaseId,e)}function xce(t){const e=W6(t);return e.length===4?Wt.emptyPath():Q6(e)}function jx(t){return new Wt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Q6(t){return bt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function KM(t,e,n){return{name:Dx(t,e),fields:n.value.mapValue.fields}}function Ece(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:He(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(h,m){return h.useProto3Json?(bt(m===void 0||typeof m=="string",58123),ar.fromBase64String(m||"")):(bt(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),ar.fromUint8Array(m||new Uint8Array))})(t,e.targetChange.resumeToken),l=e.targetChange.cause,u=l&&(function(h){const m=h.code===void 0?ye.UNKNOWN:H6(h.code);return new ke(m,h.message||"")})(l);n=new K6(r,i,s,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=a1(t,r.document.name),s=Ra(r.document.updateTime),l=r.document.createTime?Ra(r.document.createTime):Ye.min(),u=new wi({mapValue:{fields:r.document.fields}}),f=dr.newFoundDocument(i,s,l,u),h=r.targetIds||[],m=r.removedTargetIds||[];n=new vg(h,m,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=a1(t,r.document),s=r.readTime?Ra(r.readTime):Ye.min(),l=dr.newNoDocument(i,s),u=r.removedTargetIds||[];n=new vg([],u,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=a1(t,r.document),s=r.removedTargetIds||[];n=new vg([],s,i,null)}else{if(!("filter"in e))return He(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,l=new dce(i,s),u=r.targetId;n=new G6(u,l)}}return n}function Sce(t,e){let n;if(e instanceof Wh)n={update:KM(t,e.key,e.value)};else if(e instanceof F6)n={delete:Dx(t,e.key)};else if(e instanceof sc)n={update:KM(t,e.key,e.data),updateMask:Mce(e.fieldMask)};else{if(!(e instanceof cce))return He(16599,{Vt:e.type});n={verify:Dx(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(s,l){const u=l.transform;if(u instanceof Dy)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof mh)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof ph)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof jy)return{fieldPath:l.field.canonicalString(),increment:u.Ae};throw He(20930,{transform:l.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:wce(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:He(27497)})(t,e.precondition)),n}function Ace(t,e){return t&&t.length>0?(bt(e!==void 0,14353),t.map((n=>(function(i,s){let l=i.updateTime?Ra(i.updateTime):Ra(s);return l.isEqual(Ye.min())&&(l=Ra(s)),new sce(l,i.transformResults||[])})(n,e)))):[]}function Tce(t,e){return{documents:[X6(t,e.path)]}}function Cce(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=X6(t,i);const s=(function(h){if(h.length!==0)return Z6(La.create(h,"and"))})(e.filters);s&&(n.structuredQuery.where=s);const l=(function(h){if(h.length!==0)return h.map((m=>(function(v){return{field:ou(v.field),direction:Rce(v.dir)}})(m)))})(e.orderBy);l&&(n.structuredQuery.orderBy=l);const u=Mx(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:n,parent:i}}function Oce(t){let e=xce(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){bt(r===1,65062);const m=n.from[0];m.allDescendants?i=m.collectionId:e=e.child(m.collectionId)}let s=[];n.where&&(s=(function(p){const v=J6(p);return v instanceof La&&O6(v)?v.getFilters():[v]})(n.where));let l=[];n.orderBy&&(l=(function(p){return p.map((v=>(function(E){return new ky(lu(E.field),(function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(E.direction))})(v)))})(n.orderBy));let u=null;n.limit&&(u=(function(p){let v;return v=typeof p=="object"?p.value:p,qv(v)?null:v})(n.limit));let f=null;n.startAt&&(f=(function(p){const v=!!p.before,b=p.values||[];return new My(b,v)})(n.startAt));let h=null;return n.endAt&&(h=(function(p){const v=!p.before,b=p.values||[];return new My(b,v)})(n.endAt)),Gle(e,i,l,s,u,"F",f,h)}function Ice(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return He(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function J6(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=lu(n.unaryFilter.field);return In.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=lu(n.unaryFilter.field);return In.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=lu(n.unaryFilter.field);return In.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=lu(n.unaryFilter.field);return In.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return He(61313);default:return He(60726)}})(t):t.fieldFilter!==void 0?(function(n){return In.create(lu(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return He(58110);default:return He(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return La.create(n.compositeFilter.filters.map((r=>J6(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return He(1026)}})(n.compositeFilter.op))})(t):He(30097,{filter:t})}function Rce(t){return yce[t]}function Nce(t){return vce[t]}function Pce(t){return _ce[t]}function ou(t){return{fieldPath:t.canonicalString()}}function lu(t){return rr.fromServerFormat(t.fieldPath)}function Z6(t){return t instanceof In?(function(n){if(n.op==="=="){if(kM(n.value))return{unaryFilter:{field:ou(n.field),op:"IS_NAN"}};if(MM(n.value))return{unaryFilter:{field:ou(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(kM(n.value))return{unaryFilter:{field:ou(n.field),op:"IS_NOT_NAN"}};if(MM(n.value))return{unaryFilter:{field:ou(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ou(n.field),op:Nce(n.op),value:n.value}}})(t):t instanceof La?(function(n){const r=n.getFilters().map((i=>Z6(i)));return r.length===1?r[0]:{compositeFilter:{op:Pce(n.op),filters:r}}})(t):He(54877,{filter:t})}function Mce(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function eV(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e,n,r,i,s=Ye.min(),l=Ye.min(),u=ar.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=u,this.expectedCount=f}withSequenceNumber(e){return new No(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new No(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new No(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new No(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kce{constructor(e){this.yt=e}}function Dce(t){const e=Oce({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Px(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jce{constructor(){this.Cn=new Lce}addToCollectionParentIndex(e,n){return this.Cn.add(n),me.resolve()}getCollectionParents(e,n){return me.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return me.resolve()}deleteFieldIndex(e,n){return me.resolve()}deleteAllFieldIndexes(e){return me.resolve()}createTargetIndexes(e,n){return me.resolve()}getDocumentsMatchingTarget(e,n){return me.resolve(null)}getIndexType(e,n){return me.resolve(0)}getFieldIndexes(e,n){return me.resolve([])}getNextCollectionGroupToUpdate(e){return me.resolve(null)}getMinOffset(e,n){return me.resolve(zo.min())}getMinOffsetFromCollectionGroup(e,n){return me.resolve(zo.min())}updateCollectionGroup(e,n,r){return me.resolve()}updateIndexEntries(e,n){return me.resolve()}}class Lce{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Rn(Wt.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Rn(Wt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YM={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},tV=41943040;class kr{static withCacheSize(e){return new kr(e,kr.DEFAULT_COLLECTION_PERCENTILE,kr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kr.DEFAULT_COLLECTION_PERCENTILE=10,kr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kr.DEFAULT=new kr(tV,kr.DEFAULT_COLLECTION_PERCENTILE,kr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kr.DISABLED=new kr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Lu(0)}static cr(){return new Lu(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WM="LruGarbageCollector",Vce=1048576;function XM([t,e],[n,r]){const i=ot(t,n);return i===0?ot(e,r):i}class Uce{constructor(e){this.Ir=e,this.buffer=new Rn(XM),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();XM(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class zce{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Se(WM,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Zu(n)?Se(WM,"Ignoring IndexedDB error during garbage collection: ",n):await Ju(n)}await this.Vr(3e5)}))}}class Bce{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return me.resolve($v.ce);const r=new Uce(n);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Se("LruGarbageCollector","Garbage collection skipped; disabled"),me.resolve(YM)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Se("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),YM):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,l,u,f,h;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((p=>(p>this.params.maximumSequenceNumbersToCollect?(Se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,l=Date.now(),this.nthSequenceNumber(e,i)))).next((p=>(r=p,u=Date.now(),this.removeTargets(e,r,n)))).next((p=>(s=p,f=Date.now(),this.removeOrphanedDocuments(e,r)))).next((p=>(h=Date.now(),au()<=st.DEBUG&&Se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-m}ms
	Determined least recently used ${i} in `+(u-l)+`ms
	Removed ${s} targets in `+(f-u)+`ms
	Removed ${p} documents in `+(h-f)+`ms
Total Duration: ${h-m}ms`),me.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p}))))}}function $ce(t,e){return new Bce(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qce{constructor(){this.changes=new ac((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,dr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?me.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fce{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hce{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&zd(r.mutation,i,Gi.empty(),Bt.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,lt()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=lt()){const i=Dl();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((s=>{let l=xd();return s.forEach(((u,f)=>{l=l.insert(u,f.overlayedDocument)})),l}))))}getOverlayedDocuments(e,n){const r=Dl();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,lt())))}populateOverlays(e,n,r){const i=[];return r.forEach((s=>{n.has(s)||i.push(s)})),this.documentOverlayCache.getOverlays(e,i).next((s=>{s.forEach(((l,u)=>{n.set(l,u)}))}))}computeViews(e,n,r,i){let s=Rs();const l=Ud(),u=(function(){return Ud()})();return n.forEach(((f,h)=>{const m=r.get(h.key);i.has(h.key)&&(m===void 0||m.mutation instanceof sc)?s=s.insert(h.key,h):m!==void 0?(l.set(h.key,m.mutation.getFieldMask()),zd(m.mutation,h,m.mutation.getFieldMask(),Bt.now())):l.set(h.key,Gi.empty())})),this.recalculateAndSaveOverlays(e,s).next((f=>(f.forEach(((h,m)=>l.set(h,m))),n.forEach(((h,m)=>u.set(h,new Fce(m,l.get(h)??null)))),u)))}recalculateAndSaveOverlays(e,n){const r=Ud();let i=new Xt(((l,u)=>l-u)),s=lt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((l=>{for(const u of l)u.keys().forEach((f=>{const h=n.get(f);if(h===null)return;let m=r.get(f)||Gi.empty();m=u.applyToLocalView(h,m),r.set(f,m);const p=(i.get(u.batchId)||lt()).add(f);i=i.insert(u.batchId,p)}))})).next((()=>{const l=[],u=i.getReverseIterator();for(;u.hasNext();){const f=u.getNext(),h=f.key,m=f.value,p=j6();m.forEach((v=>{if(!s.has(v)){const b=$6(n.get(v),r.get(v));b!==null&&p.set(v,b),s=s.add(v)}})),l.push(this.documentOverlayCache.saveOverlays(e,h,p))}return me.waitFor(l)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return(function(l){return Be.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Kle(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((s=>{const l=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):me.resolve(Dl());let u=uh,f=s;return l.next((h=>me.forEach(h,((m,p)=>(u<p.largestBatchId&&(u=p.largestBatchId),s.get(m)?me.resolve():this.remoteDocumentCache.getEntry(e,m).next((v=>{f=f.insert(m,v)}))))).next((()=>this.populateOverlays(e,h,s))).next((()=>this.computeViews(e,f,h,lt()))).next((m=>({batchId:u,changes:D6(m)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Be(n)).next((r=>{let i=xd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let l=xd();return this.indexManager.getCollectionParents(e,s).next((u=>me.forEach(u,(f=>{const h=(function(p,v){return new Hv(v,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,f.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next((m=>{m.forEach(((p,v)=>{l=l.insert(p,v)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((l=>(s=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i)))).next((l=>{s.forEach(((f,h)=>{const m=h.getKey();l.get(m)===null&&(l=l.insert(m,dr.newInvalidDocument(m)))}));let u=xd();return l.forEach(((f,h)=>{const m=s.get(f);m!==void 0&&zd(m.mutation,h,Gi.empty(),Bt.now()),Kv(n,h)&&(u=u.insert(f,h))})),u}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gce{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return me.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Ra(i.createTime)}})(n)),me.resolve()}getNamedQuery(e,n){return me.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(i){return{name:i.name,query:Dce(i.bundledQuery),readTime:Ra(i.readTime)}})(n)),me.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kce{constructor(){this.overlays=new Xt(Be.comparator),this.qr=new Map}getOverlay(e,n){return me.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Dl();return me.forEach(n,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,s)=>{this.St(e,n,s)})),me.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((s=>this.overlays=this.overlays.remove(s))),this.qr.delete(r)),me.resolve()}getOverlaysForCollection(e,n,r){const i=Dl(),s=n.length+1,l=new Be(n.child("")),u=this.overlays.getIteratorFrom(l);for(;u.hasNext();){const f=u.getNext().value,h=f.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&f.largestBatchId>r&&i.set(f.getKey(),f)}return me.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Xt(((h,m)=>h-m));const l=this.overlays.getIterator();for(;l.hasNext();){const h=l.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let m=s.get(h.largestBatchId);m===null&&(m=Dl(),s=s.insert(h.largestBatchId,m)),m.set(h.getKey(),h)}}const u=Dl(),f=s.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((h,m)=>u.set(h,m))),!(u.size()>=i)););return me.resolve(u)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const l=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new fce(n,r));let s=this.qr.get(n);s===void 0&&(s=lt(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yce{constructor(){this.sessionToken=ar.EMPTY_BYTE_STRING}getSessionToken(e){return me.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,me.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(){this.Qr=new Rn($n.$r),this.Ur=new Rn($n.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new $n(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new $n(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new Be(new Wt([])),r=new $n(n,e),i=new $n(n,e+1),s=[];return this.Ur.forEachInRange([r,i],(l=>{this.Gr(l),s.push(l.key)})),s}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Be(new Wt([])),r=new $n(n,e),i=new $n(n,e+1);let s=lt();return this.Ur.forEachInRange([r,i],(l=>{s=s.add(l.key)})),s}containsKey(e){const n=new $n(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class $n{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Be.comparator(e.key,n.key)||ot(e.Yr,n.Yr)}static Kr(e,n){return ot(e.Yr,n.Yr)||Be.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wce{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Rn($n.$r)}checkEmpty(e){return me.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new uce(s,n,r,i);this.mutationQueue.push(l);for(const u of i)this.Zr=this.Zr.add(new $n(u.key,s)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return me.resolve(l)}lookupMutationBatch(e,n){return me.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return me.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return me.resolve(this.mutationQueue.length===0?eA:this.tr-1)}getAllMutationBatches(e){return me.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new $n(n,0),i=new $n(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],(l=>{const u=this.Xr(l.Yr);s.push(u)})),me.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Rn(ot);return n.forEach((i=>{const s=new $n(i,0),l=new $n(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,l],(u=>{r=r.add(u.Yr)}))})),me.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;Be.isDocumentKey(s)||(s=s.child(""));const l=new $n(new Be(s),0);let u=new Rn(ot);return this.Zr.forEachWhile((f=>{const h=f.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(u=u.add(f.Yr)),!0)}),l),me.resolve(this.ti(u))}ti(e){const n=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){bt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return me.forEach(n.mutations,(i=>{const s=new $n(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new $n(n,0),i=this.Zr.firstAfterOrEqual(r);return me.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,me.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xce{constructor(e){this.ri=e,this.docs=(function(){return new Xt(Be.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,l=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:l}),this.size+=l-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return me.resolve(r?r.document.mutableCopy():dr.newInvalidDocument(n))}getEntries(e,n){let r=Rs();return n.forEach((i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():dr.newInvalidDocument(i))})),me.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Rs();const l=n.path,u=new Be(l.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(u);for(;f.hasNext();){const{key:h,value:{document:m}}=f.getNext();if(!l.isPrefixOf(h.path))break;h.path.length>l.length+1||Sle(Ele(m),r)<=0||(i.has(m.key)||Kv(n,m))&&(s=s.insert(m.key,m.mutableCopy()))}return me.resolve(s)}getAllFromCollectionGroup(e,n,r,i){He(9500)}ii(e,n){return me.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new Qce(this)}getSize(e){return me.resolve(this.size)}}class Qce extends qce{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),me.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jce{constructor(e){this.persistence=e,this.si=new ac((n=>rA(n)),iA),this.lastRemoteSnapshotVersion=Ye.min(),this.highestTargetId=0,this.oi=0,this._i=new uA,this.targetCount=0,this.ai=Lu.ur()}forEachTarget(e,n){return this.si.forEach(((r,i)=>n(i))),me.resolve()}getLastRemoteSnapshotVersion(e){return me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return me.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),me.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),me.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Lu(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,me.resolve()}updateTargetData(e,n){return this.Pr(n),me.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,me.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach(((l,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.si.delete(l),s.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),me.waitFor(s).next((()=>i))}getTargetCount(e){return me.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return me.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),me.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach((l=>{s.push(i.markPotentiallyOrphaned(e,l))})),me.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),me.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return me.resolve(r)}containsKey(e,n){return me.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(e,n){this.ui={},this.overlays={},this.ci=new $v(0),this.li=!1,this.li=!0,this.hi=new Yce,this.referenceDelegate=e(this),this.Pi=new Jce(this),this.indexManager=new jce,this.remoteDocumentCache=(function(i){return new Xce(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new kce(n),this.Ii=new Gce(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Kce,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new Wce(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Se("MemoryPersistence","Starting transaction:",e);const i=new Zce(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((s=>this.referenceDelegate.di(i).next((()=>s)))).toPromise().then((s=>(i.raiseOnCommittedEvent(),s)))}Ai(e,n){return me.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class Zce extends Tle{constructor(e){super(),this.currentSequenceNumber=e}}class fA{constructor(e){this.persistence=e,this.Ri=new uA,this.Vi=null}static mi(e){return new fA(e)}get fi(){if(this.Vi)return this.Vi;throw He(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),me.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),me.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),me.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((s=>this.fi.add(s.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return me.forEach(this.fi,(r=>{const i=Be.fromPath(r);return this.gi(e,i).next((s=>{s||n.removeEntry(i,Ye.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return me.or([()=>me.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Vy{constructor(e,n){this.persistence=e,this.pi=new ac((r=>Ile(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=$ce(this,n)}static mi(e,n){return new Vy(e,n)}Ei(){}di(e){return me.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return me.forEach(this.pi,((r,i)=>this.br(e,r,i).next((s=>s?me.resolve():n(i)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,(l=>this.br(e,l,n).next((u=>{u||(r++,s.removeEntry(l,Ye.min()))})))).next((()=>s.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),me.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),me.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),me.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),me.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=pg(e.data.value)),n}br(e,n,r){return me.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return me.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=lt(),i=lt();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new dA(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eue{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tue{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Aie()?8:Cle(pr())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next((l=>{s.result=l})).next((()=>{if(!s.result)return this.ws(e,n,i,r).next((l=>{s.result=l}))})).next((()=>{if(s.result)return;const l=new eue;return this.Ss(e,n,l).next((u=>{if(s.result=u,this.Vs)return this.bs(e,n,l,u.size)}))})).next((()=>s.result))}bs(e,n,r,i){return r.documentReadCount<this.fs?(au()<=st.DEBUG&&Se("QueryEngine","SDK will not create cache indexes for query:",su(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),me.resolve()):(au()<=st.DEBUG&&Se("QueryEngine","Query:",su(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(au()<=st.DEBUG&&Se("QueryEngine","The SDK decides to create cache indexes for query:",su(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ia(n))):me.resolve())}ys(e,n){if(VM(n))return me.resolve(null);let r=Ia(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=Px(n,null,"F"),r=Ia(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((s=>{const l=lt(...s);return this.ps.getDocuments(e,l).next((u=>this.indexManager.getMinOffset(e,r).next((f=>{const h=this.Ds(n,u);return this.Cs(n,h,l,f.readTime)?this.ys(e,Px(n,null,"F")):this.vs(e,h,n,f)}))))})))))}ws(e,n,r,i){return VM(n)||i.isEqual(Ye.min())?me.resolve(null):this.ps.getDocuments(e,r).next((s=>{const l=this.Ds(n,s);return this.Cs(n,l,r,i)?me.resolve(null):(au()<=st.DEBUG&&Se("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),su(n)),this.vs(e,l,n,xle(i,uh)).next((u=>u)))}))}Ds(e,n){let r=new Rn(M6(e));return n.forEach(((i,s)=>{Kv(e,s)&&(r=r.add(s))})),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return au()<=st.DEBUG&&Se("QueryEngine","Using full collection scan to execute query:",su(n)),this.ps.getDocumentsMatchingQuery(e,n,zo.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((s=>(n.forEach((l=>{s=s.insert(l.key,l)})),s)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA="LocalStore",nue=3e8;class rue{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Xt(ot),this.xs=new ac((s=>rA(s)),iA),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Hce(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function iue(t,e,n,r){return new rue(t,e,n,r)}async function rV(t,e){const n=Xe(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((s=>{const l=[],u=[];let f=lt();for(const h of i){l.push(h.batchId);for(const m of h.mutations)f=f.add(m.key)}for(const h of s){u.push(h.batchId);for(const m of h.mutations)f=f.add(m.key)}return n.localDocuments.getDocuments(r,f).next((h=>({Ls:h,removedBatchIds:l,addedBatchIds:u})))}))}))}function aue(t,e){const n=Xe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(u,f,h,m){const p=h.batch,v=p.keys();let b=me.resolve();return v.forEach((E=>{b=b.next((()=>m.getEntry(f,E))).next((w=>{const S=h.docVersions.get(E);bt(S!==null,48541),w.version.compareTo(S)<0&&(p.applyToRemoteDocument(w,h),w.isValidDocument()&&(w.setReadTime(h.commitVersion),m.addEntry(w)))}))})),b.next((()=>u.mutationQueue.removeMutationBatch(f,p)))})(n,r,e,s).next((()=>s.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(u){let f=lt();for(let h=0;h<u.mutationResults.length;++h)u.mutationResults[h].transformResults.length>0&&(f=f.add(u.batch.mutations[h].key));return f})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function iV(t){const e=Xe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function sue(t,e){const n=Xe(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{const l=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const u=[];e.targetChanges.forEach(((m,p)=>{const v=i.get(p);if(!v)return;u.push(n.Pi.removeMatchingKeys(s,m.removedDocuments,p).next((()=>n.Pi.addMatchingKeys(s,m.addedDocuments,p))));let b=v.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?b=b.withResumeToken(ar.EMPTY_BYTE_STRING,Ye.min()).withLastLimboFreeSnapshotVersion(Ye.min()):m.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(m.resumeToken,r)),i=i.insert(p,b),(function(w,S,P){return w.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=nue?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0})(v,b,m)&&u.push(n.Pi.updateTargetData(s,b))}));let f=Rs(),h=lt();if(e.documentUpdates.forEach((m=>{e.resolvedLimboDocuments.has(m)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(s,m))})),u.push(oue(s,l,e.documentUpdates).next((m=>{f=m.ks,h=m.qs}))),!r.isEqual(Ye.min())){const m=n.Pi.getLastRemoteSnapshotVersion(s).next((p=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r)));u.push(m)}return me.waitFor(u).next((()=>l.apply(s))).next((()=>n.localDocuments.getLocalViewOfDocuments(s,f,h))).next((()=>f))})).then((s=>(n.Ms=i,s)))}function oue(t,e,n){let r=lt(),i=lt();return n.forEach((s=>r=r.add(s))),e.getEntries(t,r).next((s=>{let l=Rs();return n.forEach(((u,f)=>{const h=s.get(u);f.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(u)),f.isNoDocument()&&f.version.isEqual(Ye.min())?(e.removeEntry(u,f.readTime),l=l.insert(u,f)):!h.isValidDocument()||f.version.compareTo(h.version)>0||f.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(f),l=l.insert(u,f)):Se(hA,"Ignoring outdated watch update for ",u,". Current version:",h.version," Watch version:",f.version)})),{ks:l,qs:i}}))}function lue(t,e){const n=Xe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=eA),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function cue(t,e){const n=Xe(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.Pi.getTargetData(r,e).next((s=>s?(i=s,me.resolve(i)):n.Pi.allocateTargetId(r).next((l=>(i=new No(e,l,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function Lx(t,e,n){const r=Xe(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Zu(l))throw l;Se(hA,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function QM(t,e,n){const r=Xe(t);let i=Ye.min(),s=lt();return r.persistence.runTransaction("Execute query","readwrite",(l=>(function(f,h,m){const p=Xe(f),v=p.xs.get(m);return v!==void 0?me.resolve(p.Ms.get(v)):p.Pi.getTargetData(h,m)})(r,l,Ia(e)).next((u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(l,u.targetId).next((f=>{s=f}))})).next((()=>r.Fs.getDocumentsMatchingQuery(l,e,n?i:Ye.min(),n?s:lt()))).next((u=>(uue(r,Wle(e),u),{documents:u,Qs:s})))))}function uue(t,e,n){let r=t.Os.get(e)||Ye.min();n.forEach(((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)})),t.Os.set(e,r)}class JM{constructor(){this.activeTargetIds=tce()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fue{constructor(){this.Mo=new JM,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new JM,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class due{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZM="ConnectivityMonitor";class ek{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Se(ZM,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Se(ZM,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xp=null;function Vx(){return Xp===null?Xp=(function(){return 268435456+Math.round(2147483648*Math.random())})():Xp++,"0x"+Xp.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1="RestConnection",hue={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class mue{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Ny?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const l=Vx(),u=this.zo(e,n.toUriEncodedString());Se(s1,`Sending RPC '${e}' ${l}:`,u,r);const f={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(f,i,s);const{host:h}=new URL(u),m=Yu(h);return this.Jo(e,u,f,r,m).then((p=>(Se(s1,`Received RPC '${e}' ${l}: `,p),p)),(p=>{throw Mu(s1,`RPC '${e}' ${l} failed with error: `,p,"url: ",u,"request:",r),p}))}Ho(e,n,r,i,s,l){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Qu})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,s)=>e[s]=i)),r&&r.headers.forEach(((i,s)=>e[s]=i))}zo(e,n){const r=hue[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pue{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lr="WebChannelConnection";class gue extends mue{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const l=Vx();return new Promise(((u,f)=>{const h=new l6;h.setWithCredentials(!0),h.listenOnce(c6.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case mg.NO_ERROR:const p=h.getResponseJson();Se(lr,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(p)),u(p);break;case mg.TIMEOUT:Se(lr,`RPC '${e}' ${l} timed out`),f(new ke(ye.DEADLINE_EXCEEDED,"Request time out"));break;case mg.HTTP_ERROR:const v=h.getStatus();if(Se(lr,`RPC '${e}' ${l} failed with status:`,v,"response text:",h.getResponseText()),v>0){let b=h.getResponseJson();Array.isArray(b)&&(b=b[0]);const E=b==null?void 0:b.error;if(E&&E.status&&E.message){const w=(function(P){const M=P.toLowerCase().replace(/_/g,"-");return Object.values(ye).indexOf(M)>=0?M:ye.UNKNOWN})(E.status);f(new ke(w,E.message))}else f(new ke(ye.UNKNOWN,"Server responded with status "+h.getStatus()))}else f(new ke(ye.UNAVAILABLE,"Connection failed."));break;default:He(9055,{l_:e,streamId:l,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{Se(lr,`RPC '${e}' ${l} completed.`)}}));const m=JSON.stringify(i);Se(lr,`RPC '${e}' ${l} sending request:`,i),h.send(n,"POST",m,r,15)}))}T_(e,n,r){const i=Vx(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=d6(),u=f6(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(f.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(f.useFetchStreams=!0),this.jo(f.initMessageHeaders,n,r),f.encodeInitMessageHeaders=!0;const m=s.join("");Se(lr,`Creating RPC '${e}' stream ${i}: ${m}`,f);const p=l.createWebChannel(m,f);this.I_(p);let v=!1,b=!1;const E=new pue({Yo:S=>{b?Se(lr,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(v||(Se(lr,`Opening RPC '${e}' stream ${i} transport.`),p.open(),v=!0),Se(lr,`RPC '${e}' stream ${i} sending:`,S),p.send(S))},Zo:()=>p.close()}),w=(S,P,M)=>{S.listen(P,(j=>{try{M(j)}catch($){setTimeout((()=>{throw $}),0)}}))};return w(p,wd.EventType.OPEN,(()=>{b||(Se(lr,`RPC '${e}' stream ${i} transport opened.`),E.o_())})),w(p,wd.EventType.CLOSE,(()=>{b||(b=!0,Se(lr,`RPC '${e}' stream ${i} transport closed`),E.a_(),this.E_(p))})),w(p,wd.EventType.ERROR,(S=>{b||(b=!0,Mu(lr,`RPC '${e}' stream ${i} transport errored. Name:`,S.name,"Message:",S.message),E.a_(new ke(ye.UNAVAILABLE,"The operation could not be completed")))})),w(p,wd.EventType.MESSAGE,(S=>{var P;if(!b){const M=S.data[0];bt(!!M,16349);const j=M,$=(j==null?void 0:j.error)||((P=j[0])==null?void 0:P.error);if($){Se(lr,`RPC '${e}' stream ${i} received error:`,$);const L=$.status;let q=(function(N){const z=vn[N];if(z!==void 0)return H6(z)})(L),I=$.message;q===void 0&&(q=ye.INTERNAL,I="Unknown error status: "+L+" with message "+$.message),b=!0,E.a_(new ke(q,I)),p.close()}else Se(lr,`RPC '${e}' stream ${i} received:`,M),E.u_(M)}})),w(u,u6.STAT_EVENT,(S=>{S.stat===Tx.PROXY?Se(lr,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===Tx.NOPROXY&&Se(lr,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{E.__()}),0),E}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function o1(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(t){return new bce(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&Se("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tk="PersistentStream";class sV{constructor(e,n,r,i,s,l,u,f){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=u,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new aV(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ye.RESOURCE_EXHAUSTED?(Is(n.toString()),Is("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ye.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===n&&this.G_(r,i)}),(r=>{e((()=>{const i=new ke(ye.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Se(tk,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Se(tk,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class yue extends sV{constructor(e,n,r,i,s,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,l),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=Ece(this.serializer,e),r=(function(s){if(!("targetChange"in s))return Ye.min();const l=s.targetChange;return l.targetIds&&l.targetIds.length?Ye.min():l.readTime?Ra(l.readTime):Ye.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=jx(this.serializer),n.addTarget=(function(s,l){let u;const f=l.target;if(u=Nx(f)?{documents:Tce(s,f)}:{query:Cce(s,f).ft},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){u.resumeToken=Y6(s,l.resumeToken);const h=Mx(s,l.expectedCount);h!==null&&(u.expectedCount=h)}else if(l.snapshotVersion.compareTo(Ye.min())>0){u.readTime=Ly(s,l.snapshotVersion.toTimestamp());const h=Mx(s,l.expectedCount);h!==null&&(u.expectedCount=h)}return u})(this.serializer,e);const r=Ice(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=jx(this.serializer),n.removeTarget=e,this.q_(n)}}class vue extends sV{constructor(e,n,r,i,s,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,l),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return bt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,bt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){bt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=Ace(e.writeResults,e.commitTime),r=Ra(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=jx(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>Sce(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _ue{}class bue extends _ue{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new ke(ye.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,l])=>this.connection.Go(e,kx(n,r),i,s,l))).catch((s=>{throw s.name==="FirebaseError"?(s.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ke(ye.UNKNOWN,s.toString())}))}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Ho(e,kx(n,r),i,l,u,s))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ke(ye.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class wue{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Is(n),this.aa=!1):Se("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jl="RemoteStore";class xue{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo((l=>{r.enqueueAndForget((async()=>{oc(this)&&(Se(Jl,"Restarting streams for network reachability change."),await(async function(f){const h=Xe(f);h.Ea.add(4),await Qh(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Jv(h)})(this))}))})),this.Ra=new wue(r,i)}}async function Jv(t){if(oc(t))for(const e of t.da)await e(!0)}async function Qh(t){for(const e of t.da)await e(!1)}function oV(t,e){const n=Xe(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),yA(n)?gA(n):ef(n).O_()&&pA(n,e))}function mA(t,e){const n=Xe(t),r=ef(n);n.Ia.delete(e),r.O_()&&lV(n,e),n.Ia.size===0&&(r.O_()?r.L_():oc(n)&&n.Ra.set("Unknown"))}function pA(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ye.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ef(t).Y_(e)}function lV(t,e){t.Va.Ue(e),ef(t).Z_(e)}function gA(t){t.Va=new gce({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),ef(t).start(),t.Ra.ua()}function yA(t){return oc(t)&&!ef(t).x_()&&t.Ia.size>0}function oc(t){return Xe(t).Ea.size===0}function cV(t){t.Va=void 0}async function Eue(t){t.Ra.set("Online")}async function Sue(t){t.Ia.forEach(((e,n)=>{pA(t,e)}))}async function Aue(t,e){cV(t),yA(t)?(t.Ra.ha(e),gA(t)):t.Ra.set("Unknown")}async function Tue(t,e,n){if(t.Ra.set("Online"),e instanceof K6&&e.state===2&&e.cause)try{await(async function(i,s){const l=s.cause;for(const u of s.targetIds)i.Ia.has(u)&&(await i.remoteSyncer.rejectListen(u,l),i.Ia.delete(u),i.Va.removeTarget(u))})(t,e)}catch(r){Se(Jl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Uy(t,r)}else if(e instanceof vg?t.Va.Ze(e):e instanceof G6?t.Va.st(e):t.Va.tt(e),!n.isEqual(Ye.min()))try{const r=await iV(t.localStore);n.compareTo(r)>=0&&await(function(s,l){const u=s.Va.Tt(l);return u.targetChanges.forEach(((f,h)=>{if(f.resumeToken.approximateByteSize()>0){const m=s.Ia.get(h);m&&s.Ia.set(h,m.withResumeToken(f.resumeToken,l))}})),u.targetMismatches.forEach(((f,h)=>{const m=s.Ia.get(f);if(!m)return;s.Ia.set(f,m.withResumeToken(ar.EMPTY_BYTE_STRING,m.snapshotVersion)),lV(s,f);const p=new No(m.target,f,h,m.sequenceNumber);pA(s,p)})),s.remoteSyncer.applyRemoteEvent(u)})(t,n)}catch(r){Se(Jl,"Failed to raise snapshot:",r),await Uy(t,r)}}async function Uy(t,e,n){if(!Zu(e))throw e;t.Ea.add(1),await Qh(t),t.Ra.set("Offline"),n||(n=()=>iV(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Se(Jl,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Jv(t)}))}function uV(t,e){return e().catch((n=>Uy(t,n,e)))}async function Zv(t){const e=Xe(t),n=Fo(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:eA;for(;Cue(e);)try{const i=await lue(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,Oue(e,i)}catch(i){await Uy(e,i)}fV(e)&&dV(e)}function Cue(t){return oc(t)&&t.Ta.length<10}function Oue(t,e){t.Ta.push(e);const n=Fo(t);n.O_()&&n.X_&&n.ea(e.mutations)}function fV(t){return oc(t)&&!Fo(t).x_()&&t.Ta.length>0}function dV(t){Fo(t).start()}async function Iue(t){Fo(t).ra()}async function Rue(t){const e=Fo(t);for(const n of t.Ta)e.ea(n.mutations)}async function Nue(t,e,n){const r=t.Ta.shift(),i=oA.from(r,e,n);await uV(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await Zv(t)}async function Pue(t,e){e&&Fo(t).X_&&await(async function(r,i){if((function(l){return hce(l)&&l!==ye.ABORTED})(i.code)){const s=r.Ta.shift();Fo(r).B_(),await uV(r,(()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i))),await Zv(r)}})(t,e),fV(t)&&dV(t)}async function nk(t,e){const n=Xe(t);n.asyncQueue.verifyOperationInProgress(),Se(Jl,"RemoteStore received new credentials");const r=oc(n);n.Ea.add(3),await Qh(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Jv(n)}async function Mue(t,e){const n=Xe(t);e?(n.Ea.delete(2),await Jv(n)):e||(n.Ea.add(2),await Qh(n),n.Ra.set("Unknown"))}function ef(t){return t.ma||(t.ma=(function(n,r,i){const s=Xe(n);return s.sa(),new yue(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(t.datastore,t.asyncQueue,{Xo:Eue.bind(null,t),t_:Sue.bind(null,t),r_:Aue.bind(null,t),H_:Tue.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),yA(t)?gA(t):t.Ra.set("Unknown")):(await t.ma.stop(),cV(t))}))),t.ma}function Fo(t){return t.fa||(t.fa=(function(n,r,i){const s=Xe(n);return s.sa(),new vue(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:Iue.bind(null,t),r_:Pue.bind(null,t),ta:Rue.bind(null,t),na:Nue.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await Zv(t)):(await t.fa.stop(),t.Ta.length>0&&(Se(Jl,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Lo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const l=Date.now()+r,u=new vA(e,n,l,i,s);return u.start(r),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ke(ye.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _A(t,e){if(Is("AsyncQueue",`${e}: ${t}`),Zu(t))return new ke(ye.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{static emptySet(e){return new bu(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Be.comparator(n.key,r.key):(n,r)=>Be.comparator(n.key,r.key),this.keyedMap=xd(),this.sortedSet=new Xt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof bu)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new bu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(){this.ga=new Xt(Be.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):He(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Vu{constructor(e,n,r,i,s,l,u,f,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=l,this.syncStateChanged=u,this.excludesMetadataChanges=f,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,s){const l=[];return n.forEach((u=>{l.push({type:0,doc:u})})),new Vu(e,n,bu.emptySet(n),l,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kue{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Due{constructor(){this.queries=ik(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=Xe(n),s=i.queries;i.queries=ik(),s.forEach(((l,u)=>{for(const f of u.Sa)f.onError(r)}))})(this,new ke(ye.ABORTED,"Firestore shutting down"))}}function ik(){return new ac((t=>P6(t)),Gv)}async function jue(t,e){const n=Xe(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new kue,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(l){const u=_A(l,`Initialization of query '${su(e.query)}' failed`);return void e.onError(u)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&bA(n)}async function Lue(t,e){const n=Xe(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const l=s.Sa.indexOf(e);l>=0&&(s.Sa.splice(l,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Vue(t,e){const n=Xe(t);let r=!1;for(const i of e){const s=i.query,l=n.queries.get(s);if(l){for(const u of l.Sa)u.Fa(i)&&(r=!0);l.wa=i}}r&&bA(n)}function Uue(t,e,n){const r=Xe(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function bA(t){t.Ca.forEach((e=>{e.next()}))}var Ux,ak;(ak=Ux||(Ux={})).Ma="default",ak.Cache="cache";class zue{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Vu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Vu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Ux.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(e){this.key=e}}class mV{constructor(e){this.key=e}}class Bue{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=lt(),this.mutatedKeys=lt(),this.eu=M6(e),this.tu=new bu(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new rk,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,l=i,u=!1;const f=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((m,p)=>{const v=i.get(m),b=Kv(this.query,p)?p:null,E=!!v&&this.mutatedKeys.has(v.key),w=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let S=!1;v&&b?v.data.isEqual(b.data)?E!==w&&(r.track({type:3,doc:b}),S=!0):this.su(v,b)||(r.track({type:2,doc:b}),S=!0,(f&&this.eu(b,f)>0||h&&this.eu(b,h)<0)&&(u=!0)):!v&&b?(r.track({type:0,doc:b}),S=!0):v&&!b&&(r.track({type:1,doc:v}),S=!0,(f||h)&&(u=!0)),S&&(b?(l=l.add(b),s=w?s.add(m):s.delete(m)):(l=l.delete(m),s=s.delete(m)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const m=this.query.limitType==="F"?l.last():l.first();l=l.delete(m.key),s=s.delete(m.key),r.track({type:1,doc:m})}return{tu:l,iu:r,Cs:u,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((m,p)=>(function(b,E){const w=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return He(20277,{Rt:S})}};return w(b)-w(E)})(m.type,p.type)||this.eu(m.doc,p.doc))),this.ou(r),i=i??!1;const u=n&&!i?this._u():[],f=this.Xa.size===0&&this.current&&!i?1:0,h=f!==this.Za;return this.Za=f,l.length!==0||h?{snapshot:new Vu(this.query,e.tu,s,l,e.mutatedKeys,f===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new rk,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=lt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new mV(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new hV(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=lt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Vu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const wA="SyncEngine";class $ue{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class que{constructor(e){this.key=e,this.hu=!1}}class Fue{constructor(e,n,r,i,s,l){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new ac((u=>P6(u)),Gv),this.Iu=new Map,this.Eu=new Set,this.du=new Xt(Be.comparator),this.Au=new Map,this.Ru=new uA,this.Vu={},this.mu=new Map,this.fu=Lu.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Hue(t,e,n=!0){const r=bV(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await pV(r,e,n,!0),i}async function Gue(t,e){const n=bV(t);await pV(n,e,!0,!1)}async function pV(t,e,n,r){const i=await cue(t.localStore,Ia(e)),s=i.targetId,l=t.sharedClientState.addLocalQueryTarget(s,n);let u;return r&&(u=await Kue(t,e,s,l==="current",i.resumeToken)),t.isPrimaryClient&&n&&oV(t.remoteStore,i),u}async function Kue(t,e,n,r,i){t.pu=(p,v,b)=>(async function(w,S,P,M){let j=S.view.ru(P);j.Cs&&(j=await QM(w.localStore,S.query,!1).then((({documents:I})=>S.view.ru(I,j))));const $=M&&M.targetChanges.get(S.targetId),L=M&&M.targetMismatches.get(S.targetId)!=null,q=S.view.applyChanges(j,w.isPrimaryClient,$,L);return ok(w,S.targetId,q.au),q.snapshot})(t,p,v,b);const s=await QM(t.localStore,e,!0),l=new Bue(e,s.Qs),u=l.ru(s.documents),f=Xh.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=l.applyChanges(u,t.isPrimaryClient,f);ok(t,n,h.au);const m=new $ue(e,n,l);return t.Tu.set(e,m),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function Yue(t,e,n){const r=Xe(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter((l=>!Gv(l,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Lx(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&mA(r.remoteStore,i.targetId),zx(r,i.targetId)})).catch(Ju)):(zx(r,i.targetId),await Lx(r.localStore,i.targetId,!0))}async function Wue(t,e){const n=Xe(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),mA(n.remoteStore,r.targetId))}async function Xue(t,e,n){const r=rfe(t);try{const i=await(function(l,u){const f=Xe(l),h=Bt.now(),m=u.reduce(((b,E)=>b.add(E.key)),lt());let p,v;return f.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let E=Rs(),w=lt();return f.Ns.getEntries(b,m).next((S=>{E=S,E.forEach(((P,M)=>{M.isValidDocument()||(w=w.add(P))}))})).next((()=>f.localDocuments.getOverlayedDocuments(b,E))).next((S=>{p=S;const P=[];for(const M of u){const j=lce(M,p.get(M.key).overlayedDocument);j!=null&&P.push(new sc(M.key,j,A6(j.value.mapValue),ys.exists(!0)))}return f.mutationQueue.addMutationBatch(b,h,P,u)})).next((S=>{v=S;const P=S.applyToLocalDocumentSet(p,w);return f.documentOverlayCache.saveOverlays(b,S.batchId,P)}))})).then((()=>({batchId:v.batchId,changes:D6(p)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(l,u,f){let h=l.Vu[l.currentUser.toKey()];h||(h=new Xt(ot)),h=h.insert(u,f),l.Vu[l.currentUser.toKey()]=h})(r,i.batchId,n),await Jh(r,i.changes),await Zv(r.remoteStore)}catch(i){const s=_A(i,"Failed to persist write");n.reject(s)}}async function gV(t,e){const n=Xe(t);try{const r=await sue(n.localStore,e);e.targetChanges.forEach(((i,s)=>{const l=n.Au.get(s);l&&(bt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?l.hu=!0:i.modifiedDocuments.size>0?bt(l.hu,14607):i.removedDocuments.size>0&&(bt(l.hu,42227),l.hu=!1))})),await Jh(n,r,e)}catch(r){await Ju(r)}}function sk(t,e,n){const r=Xe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach(((s,l)=>{const u=l.view.va(e);u.snapshot&&i.push(u.snapshot)})),(function(l,u){const f=Xe(l);f.onlineState=u;let h=!1;f.queries.forEach(((m,p)=>{for(const v of p.Sa)v.va(u)&&(h=!0)})),h&&bA(f)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Que(t,e,n){const r=Xe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let l=new Xt(Be.comparator);l=l.insert(s,dr.newNoDocument(s,Ye.min()));const u=lt().add(s),f=new Xv(Ye.min(),new Map,new Xt(ot),l,u);await gV(r,f),r.du=r.du.remove(s),r.Au.delete(e),xA(r)}else await Lx(r.localStore,e,!1).then((()=>zx(r,e,n))).catch(Ju)}async function Jue(t,e){const n=Xe(t),r=e.batch.batchId;try{const i=await aue(n.localStore,e);vV(n,r,null),yV(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Jh(n,i)}catch(i){await Ju(i)}}async function Zue(t,e,n){const r=Xe(t);try{const i=await(function(l,u){const f=Xe(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let m;return f.mutationQueue.lookupMutationBatch(h,u).next((p=>(bt(p!==null,37113),m=p.keys(),f.mutationQueue.removeMutationBatch(h,p)))).next((()=>f.mutationQueue.performConsistencyCheck(h))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(h,m,u))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,m))).next((()=>f.localDocuments.getDocuments(h,m)))}))})(r.localStore,e);vV(r,e,n),yV(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Jh(r,i)}catch(i){await Ju(i)}}function yV(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function vV(t,e,n){const r=Xe(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function zx(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||_V(t,r)}))}function _V(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(mA(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),xA(t))}function ok(t,e,n){for(const r of n)r instanceof hV?(t.Ru.addReference(r.key,e),efe(t,r)):r instanceof mV?(Se(wA,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||_V(t,r.key)):He(19791,{wu:r})}function efe(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Se(wA,"New document in limbo: "+n),t.Eu.add(r),xA(t))}function xA(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Be(Wt.fromString(e)),r=t.fu.next();t.Au.set(r,new que(n)),t.du=t.du.insert(n,r),oV(t.remoteStore,new No(Ia(aA(n.path)),r,"TargetPurposeLimboResolution",$v.ce))}}async function Jh(t,e,n){const r=Xe(t),i=[],s=[],l=[];r.Tu.isEmpty()||(r.Tu.forEach(((u,f)=>{l.push(r.pu(f,e,n).then((h=>{var m;if((h||n)&&r.isPrimaryClient){const p=h?!h.fromCache:(m=n==null?void 0:n.targetChanges.get(f.targetId))==null?void 0:m.current;r.sharedClientState.updateQueryState(f.targetId,p?"current":"not-current")}if(h){i.push(h);const p=dA.As(f.targetId,h);s.push(p)}})))})),await Promise.all(l),r.Pu.H_(i),await(async function(f,h){const m=Xe(f);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>me.forEach(h,(v=>me.forEach(v.Es,(b=>m.persistence.referenceDelegate.addReference(p,v.targetId,b))).next((()=>me.forEach(v.ds,(b=>m.persistence.referenceDelegate.removeReference(p,v.targetId,b)))))))))}catch(p){if(!Zu(p))throw p;Se(hA,"Failed to update sequence numbers: "+p)}for(const p of h){const v=p.targetId;if(!p.fromCache){const b=m.Ms.get(v),E=b.snapshotVersion,w=b.withLastLimboFreeSnapshotVersion(E);m.Ms=m.Ms.insert(v,w)}}})(r.localStore,s))}async function tfe(t,e){const n=Xe(t);if(!n.currentUser.isEqual(e)){Se(wA,"User change. New user:",e.toKey());const r=await rV(n.localStore,e);n.currentUser=e,(function(s,l){s.mu.forEach((u=>{u.forEach((f=>{f.reject(new ke(ye.CANCELLED,l))}))})),s.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Jh(n,r.Ls)}}function nfe(t,e){const n=Xe(t),r=n.Au.get(e);if(r&&r.hu)return lt().add(r.key);{let i=lt();const s=n.Iu.get(e);if(!s)return i;for(const l of s){const u=n.Tu.get(l);i=i.unionWith(u.view.nu)}return i}}function bV(t){const e=Xe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=gV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nfe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Que.bind(null,e),e.Pu.H_=Vue.bind(null,e.eventManager),e.Pu.yu=Uue.bind(null,e.eventManager),e}function rfe(t){const e=Xe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Jue.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Zue.bind(null,e),e}class zy{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Qv(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return iue(this.persistence,new tue,e.initialUser,this.serializer)}Cu(e){return new nV(fA.mi,this.serializer)}Du(e){return new fue}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}zy.provider={build:()=>new zy};class ife extends zy{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){bt(this.persistence.referenceDelegate instanceof Vy,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new zce(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?kr.withCacheSize(this.cacheSizeBytes):kr.DEFAULT;return new nV((r=>Vy.mi(r,n)),this.serializer)}}class Bx{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>sk(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=tfe.bind(null,this.syncEngine),await Mue(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Due})()}createDatastore(e){const n=Qv(e.databaseInfo.databaseId),r=(function(s){return new gue(s)})(e.databaseInfo);return(function(s,l,u,f){return new bue(s,l,u,f)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,s,l,u){return new xue(r,i,s,l,u)})(this.localStore,this.datastore,e.asyncQueue,(n=>sk(this.syncEngine,n,0)),(function(){return ek.v()?new ek:new due})())}createSyncEngine(e,n){return(function(i,s,l,u,f,h,m){const p=new Fue(i,s,l,u,f,h);return m&&(p.gu=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(i){const s=Xe(i);Se(Jl,"RemoteStore shutting down."),s.Ea.add(5),await Qh(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Bx.provider={build:()=>new Bx};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class afe{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Is("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho="FirestoreClient";class sfe{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ur.UNAUTHENTICATED,this.clientId=JS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,(async l=>{Se(Ho,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(r,(l=>(Se(Ho,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Lo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=_A(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function l1(t,e){t.asyncQueue.verifyOperationInProgress(),Se(Ho,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await rV(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function lk(t,e){t.asyncQueue.verifyOperationInProgress();const n=await ofe(t);Se(Ho,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>nk(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>nk(e.remoteStore,i))),t._onlineComponents=e}async function ofe(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Se(Ho,"Using user provided OfflineComponentProvider");try{await l1(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ye.FAILED_PRECONDITION||i.code===ye.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;Mu("Error using user provided cache. Falling back to memory cache: "+n),await l1(t,new zy)}}else Se(Ho,"Using default OfflineComponentProvider"),await l1(t,new ife(void 0));return t._offlineComponents}async function wV(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Se(Ho,"Using user provided OnlineComponentProvider"),await lk(t,t._uninitializedComponentsProvider._online)):(Se(Ho,"Using default OnlineComponentProvider"),await lk(t,new Bx))),t._onlineComponents}function lfe(t){return wV(t).then((e=>e.syncEngine))}async function cfe(t){const e=await wV(t),n=e.eventManager;return n.onListen=Hue.bind(null,e.syncEngine),n.onUnlisten=Yue.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Gue.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Wue.bind(null,e.syncEngine),n}function ufe(t,e,n={}){const r=new Lo;return t.asyncQueue.enqueueAndForget((async()=>(function(s,l,u,f,h){const m=new afe({next:v=>{m.Nu(),l.enqueueAndForget((()=>Lue(s,p)));const b=v.docs.has(u);!b&&v.fromCache?h.reject(new ke(ye.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&v.fromCache&&f&&f.source==="server"?h.reject(new ke(ye.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(v)},error:v=>h.reject(v)}),p=new zue(aA(u.path),m,{includeMetadataChanges:!0,qa:!0});return jue(s,p)})(await cfe(t),t.asyncQueue,e,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xV(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ck=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EV="firestore.googleapis.com",uk=!0;class fk{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ke(ye.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=EV,this.ssl=uk}else this.host=e.host,this.ssl=e.ssl??uk;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=tV;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Vce)throw new ke(ye.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}wle("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xV(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ke(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ke(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ke(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class EA{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fk({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ke(ye.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ke(ye.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fk(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new ule;switch(r.type){case"firstParty":return new mle(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ke(ye.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=ck.get(n);r&&(Se("ComponentProvider","Removing Datastore"),ck.delete(n),r.terminate())})(this),Promise.resolve()}}function ffe(t,e,n,r={}){var h;t=ch(t,EA);const i=Yu(e),s=t._getSettings(),l={...s,emulatorOptions:t._getEmulatorOptions()},u=`${e}:${n}`;i&&(b5(`https://${u}`),w5("Firestore",!0)),s.host!==EV&&s.host!==u&&Mu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...s,host:u,ssl:i,emulatorOptions:r};if(!Kl(f,l)&&(t._setSettings(f),r.mockUserToken)){let m,p;if(typeof r.mockUserToken=="string")m=r.mockUserToken,p=ur.MOCK_USER;else{m=gie(r.mockUserToken,(h=t._app)==null?void 0:h.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new ke(ye.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new ur(v)}t._authCredentials=new fle(new m6(m,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new SA(this.firestore,e,this._query)}}class qn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gh(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qn(this.firestore,e,this._key)}toJSON(){return{type:qn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Yh(n,qn._jsonSchema))return new qn(e,r||null,new Be(Wt.fromString(n.referencePath)))}}qn._jsonSchemaVersion="firestore/documentReference/1.0",qn._jsonSchema={type:wn("string",qn._jsonSchemaVersion),referencePath:wn("string")};class gh extends SA{constructor(e,n,r){super(e,n,aA(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qn(this.firestore,null,new Be(e))}withConverter(e){return new gh(this.firestore,e,this._path)}}function e0(t,e,...n){if(t=ii(t),arguments.length===1&&(e=JS.newId()),ble("doc","path",e),t instanceof EA){const r=Wt.fromString(e,...n);return AM(r),new qn(t,null,new Be(r))}{if(!(t instanceof qn||t instanceof gh))throw new ke(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Wt.fromString(e,...n));return AM(r),new qn(t.firestore,t instanceof gh?t.converter:null,new Be(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk="AsyncQueue";class hk{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new aV(this,"async_queue_retry"),this._c=()=>{const r=o1();r&&Se(dk,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=o1();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=o1();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Lo;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Zu(e))throw e;Se(dk,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Is("INTERNAL UNHANDLED ERROR: ",mk(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=vA.createAndSchedule(this,e,n,r,(s=>this.hc(s)));return this.tc.push(i),i}uc(){this.nc&&He(47125,{Pc:mk(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function mk(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class AA extends EA{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new hk,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new hk(e),this._firestoreClient=void 0,await e}}}function dfe(t,e){const n=typeof t=="object"?t:A5(),r=typeof t=="string"?t:Ny,i=zS(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=mie("firestore");s&&ffe(i,...s)}return i}function SV(t){if(t._terminated)throw new ke(ye.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||hfe(t),t._firestoreClient}function hfe(t){var r,i,s;const e=t._freezeSettings(),n=(function(u,f,h,m){return new Ple(u,f,h,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,xV(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new sfe(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(u){const f=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(f),_online:f}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xi(ar.fromBase64String(e))}catch(n){throw new ke(ye.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new xi(ar.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:xi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Yh(e,xi._jsonSchema))return xi.fromBase64String(e.bytes)}}xi._jsonSchemaVersion="firestore/bytes/1.0",xi._jsonSchema={type:wn("string",xi._jsonSchemaVersion),bytes:wn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ke(ye.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ke(ye.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ke(ye.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ot(this._lat,e._lat)||ot(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Na._jsonSchemaVersion}}static fromJSON(e){if(Yh(e,Na._jsonSchema))return new Na(e.latitude,e.longitude)}}Na._jsonSchemaVersion="firestore/geoPoint/1.0",Na._jsonSchema={type:wn("string",Na._jsonSchemaVersion),latitude:wn("number"),longitude:wn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Pa._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Yh(e,Pa._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Pa(e.vectorValues);throw new ke(ye.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Pa._jsonSchemaVersion="firestore/vectorValue/1.0",Pa._jsonSchema={type:wn("string",Pa._jsonSchemaVersion),vectorValues:wn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mfe=/^__.*__$/;class pfe{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new sc(e,this.data,this.fieldMask,n,this.fieldTransforms):new Wh(e,this.data,n,this.fieldTransforms)}}function TV(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw He(40011,{Ac:t})}}class CA{constructor(e,n,r,i,s,l){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new CA({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return By(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(TV(this.Ac)&&mfe.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class gfe{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Qv(e)}Cc(e,n,r,i=!1){return new CA({Ac:e,methodName:n,Dc:r,path:rr.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yfe(t){const e=t._freezeSettings(),n=Qv(t._databaseId);return new gfe(t._databaseId,!!e.ignoreUndefinedProperties,n)}function vfe(t,e,n,r,i,s={}){const l=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);RV("Data must be an object, but it was:",l,r);const u=OV(r,l);let f,h;if(s.merge)f=new Gi(l.fieldMask),h=l.fieldTransforms;else if(s.mergeFields){const m=[];for(const p of s.mergeFields){const v=_fe(e,p,n);if(!l.contains(v))throw new ke(ye.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);wfe(m,v)||m.push(v)}f=new Gi(m),h=l.fieldTransforms.filter((p=>f.covers(p.field)))}else f=null,h=l.fieldTransforms;return new pfe(new wi(u),f,h)}function CV(t,e){if(IV(t=ii(t)))return RV("Unsupported field value:",e,t),OV(t,e);if(t instanceof AV)return(function(r,i){if(!TV(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const s=[];let l=0;for(const u of r){let f=CV(u,i.wc(l));f==null&&(f={nullValue:"NULL_VALUE"}),s.push(f),l++}return{arrayValue:{values:s}}})(t,e)}return(function(r,i){if((r=ii(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return nce(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Bt.fromDate(r);return{timestampValue:Ly(i.serializer,s)}}if(r instanceof Bt){const s=new Bt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ly(i.serializer,s)}}if(r instanceof Na)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof xi)return{bytesValue:Y6(i.serializer,r._byteString)};if(r instanceof qn){const s=i.databaseId,l=r.firestore._databaseId;if(!l.isEqual(s))throw i.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:cA(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Pa)return(function(l,u){return{mapValue:{fields:{[E6]:{stringValue:S6},[Py]:{arrayValue:{values:l.toArray().map((h=>{if(typeof h!="number")throw u.Sc("VectorValues must only contain numeric values.");return sA(u.serializer,h)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${ZS(r)}`)})(t,e)}function OV(t,e){const n={};return y6(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ic(t,((r,i)=>{const s=CV(i,e.mc(r));s!=null&&(n[r]=s)})),{mapValue:{fields:n}}}function IV(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Bt||t instanceof Na||t instanceof xi||t instanceof qn||t instanceof AV||t instanceof Pa)}function RV(t,e,n){if(!IV(n)||!p6(n)){const r=ZS(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function _fe(t,e,n){if((e=ii(e))instanceof TA)return e._internalPath;if(typeof e=="string")return NV(t,e);throw By("Field path arguments must be of type string or ",t,!1,void 0,n)}const bfe=new RegExp("[~\\*/\\[\\]]");function NV(t,e,n){if(e.search(bfe)>=0)throw By(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new TA(...e.split("."))._internalPath}catch{throw By(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function By(t,e,n,r,i){const s=r&&!r.isEmpty(),l=i!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let f="";return(s||l)&&(f+=" (found",s&&(f+=` in field ${r}`),l&&(f+=` in document ${i}`),f+=")"),new ke(ye.INVALID_ARGUMENT,u+t+f)}function wfe(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PV{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new qn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new xfe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(MV("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class xfe extends PV{data(){return super.data()}}function MV(t,e){return typeof e=="string"?NV(t,e):e instanceof TA?e._internalPath:e._delegate._internalPath}class Efe{convertValue(e,n="none"){switch(qo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return on(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes($o(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw He(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ic(e,((i,s)=>{r[i]=this.convertValue(s,n)})),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[Py].arrayValue)==null?void 0:i.values)==null?void 0:s.map((l=>on(l.doubleValue)));return new Pa(n)}convertGeoPoint(e){return new Na(on(e.latitude),on(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Fv(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(fh(e));default:return null}}convertTimestamp(e){const n=Bo(e);return new Bt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Wt.fromString(e);bt(eV(r),9688,{name:e});const i=new dh(r.get(1),r.get(3)),s=new Be(r.popFirst(5));return i.isEqual(n)||Is(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sfe(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Sd{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Bl extends PV{constructor(e,n,r,i,s,l){super(e,n,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new _g(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(MV("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ke(ye.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Bl._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Bl._jsonSchemaVersion="firestore/documentSnapshot/1.0",Bl._jsonSchema={type:wn("string",Bl._jsonSchemaVersion),bundleSource:wn("string","DocumentSnapshot"),bundleName:wn("string"),bundle:wn("string")};class _g extends Bl{data(e={}){return super.data(e)}}class Bd{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Sd(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new _g(this._firestore,this._userDataWriter,r.key,r,new Sd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ke(ye.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map((u=>{const f=new _g(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Sd(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:f,oldIndex:-1,newIndex:l++}}))}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((u=>s||u.type!==3)).map((u=>{const f=new _g(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Sd(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,m=-1;return u.type!==0&&(h=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),u.type!==1&&(l=l.add(u.doc),m=l.indexOf(u.doc.key)),{type:Afe(u.type),doc:f,oldIndex:h,newIndex:m}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ke(ye.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Bd._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=JS.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach((s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Afe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return He(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kV(t){t=ch(t,qn);const e=ch(t.firestore,AA);return ufe(SV(e),t._key).then((n=>Ofe(e,t,n)))}Bd._jsonSchemaVersion="firestore/querySnapshot/1.0",Bd._jsonSchema={type:wn("string",Bd._jsonSchemaVersion),bundleSource:wn("string","QuerySnapshot"),bundleName:wn("string"),bundle:wn("string")};class Tfe extends Efe{constructor(e){super(),this.firestore=e}convertBytes(e){return new xi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new qn(this.firestore,null,n)}}function DV(t,e,n){t=ch(t,qn);const r=ch(t.firestore,AA),i=Sfe(t.converter,e,n);return Cfe(r,[vfe(yfe(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,ys.none())])}function Cfe(t,e){return(function(r,i){const s=new Lo;return r.asyncQueue.enqueueAndForget((async()=>Xue(await lfe(r),i,s))),s.promise})(SV(t),e)}function Ofe(t,e,n){const r=n.docs.get(e._key),i=new Tfe(t);return new Bl(t,i,e._key,r,new Sd(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Qu=i})(Wu),Pu(new Yl("firestore",((r,{instanceIdentifier:i,options:s})=>{const l=r.getProvider("app").getImmediate(),u=new AA(new dle(r.getProvider("auth-internal")),new ple(l,r.getProvider("app-check-internal")),(function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ke(ye.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new dh(h.options.projectId,m)})(l,i),l);return s={useFetchStreams:n,...s},u._setSettings(s),u}),"PUBLIC").setMultipleInstances(!0)),Do(wM,xM,e),Do(wM,xM,"esm2020")})();const Ife={apiKey:"AIzaSyA0ZDf40vugmhexsaesRKHRtEx1BV2vMJ8",authDomain:"cinemind-ai-c5118.firebaseapp.com",projectId:"cinemind-ai-c5118",storageBucket:"cinemind-ai-c5118.appspot.com",messagingSenderId:"872246031292",appId:"1:872246031292:web:bff5e11a9400a6322671b9"},jV=S5(Ife),tf=lle(jV),t0=dfe(jV),Rfe=new cs;function Nfe(t){return Xse(tf,t)}async function Pfe(){return(await yoe(tf,Rfe)).user}async function Mfe(t,e){return(await Gse(tf,t,e)).user}async function kfe(t,e){return(await Kse(tf,t,e)).user}async function Dfe(t,e){return Hse(tf,t)}async function jfe(){return Qse(tf)}async function Lfe(t){const e=e0(t0,"users",t),n=await kV(e);return n.exists()?n.data():null}async function Vfe(t,e){const n=e0(t0,"users",t);await DV(n,e,{merge:!0})}function LV(){const[t,e]=C.useState(null),[n,r]=C.useState(!0);return C.useEffect(()=>{const h=Nfe(m=>{e(m),r(!1)});return()=>h()},[]),{user:t,loading:n,login:async()=>{try{return await Pfe()}catch(h){throw console.error("Login error:",h),h}},loginEmail:async(h,m)=>{try{return await kfe(h,m)}catch(p){throw console.error("Email login error:",p),p}},register:async(h,m)=>{try{return await Mfe(h,m)}catch(p){throw console.error("Register error:",p),p}},resetPassword:async h=>{try{return await Dfe(h)}catch(m){throw console.error("Password reset error:",m),m}},logout:async()=>{try{await jfe()}catch(h){throw console.error("Logout error:",h),h}}}}const Ufe=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,pd=6,zfe=({isOpen:t,onClose:e})=>{const{login:n,loginEmail:r,register:i,resetPassword:s}=LV(),[l,u]=C.useState("signin"),[f,h]=C.useState(""),[m,p]=C.useState(""),[v,b]=C.useState(!1),[E,w]=C.useState(null),[S,P]=C.useState(null),[M,j]=C.useState(!1),$=C.useRef(null),L=C.useRef(null);C.useEffect(()=>{t&&(h(""),p(""),w(null),P(null),b(!1),j(!1),setTimeout(()=>{$.current&&$.current.focus()},50))},[t,l]),C.useEffect(()=>{const G=ne=>{if(t){if(ne.key==="Escape")ne.preventDefault(),e();else if(ne.key==="Enter"){if(v)return;l==="signin"&&B(),l==="register"&&V(),l==="reset"&&pe()}}};return window.addEventListener("keydown",G),()=>window.removeEventListener("keydown",G)},[t,l,f,m,v]);const q=()=>{w(null),P(null)},I=Ufe.test(f.trim()),R=m.length>=pd,N=C.useRef(!1);async function z(G){if(!N.current){N.current=!0;try{await G()}finally{setTimeout(()=>{N.current=!1},400)}}}const k=async()=>{q(),b(!0);try{await n(),e()}catch(G){w((G==null?void 0:G.message)||"Google sign in failed")}finally{b(!1)}},B=async()=>{if(q(),!I){w("Enter a valid email address");return}if(!R){w(`Password must be at least ${pd} characters`);return}await z(async()=>{b(!0);try{await r(f.trim(),m),e()}catch(G){w((G==null?void 0:G.message)||"Sign in failed")}finally{b(!1)}})},V=async()=>{if(q(),!I){w("Enter a valid email address");return}if(!R){w(`Password must be at least ${pd} characters`);return}await z(async()=>{b(!0);try{await i(f.trim(),m),P("Registration successful  you are signed in."),setTimeout(e,700)}catch(G){w((G==null?void 0:G.message)||"Registration failed")}finally{b(!1)}})},pe=async()=>{if(q(),!I){w("Enter a valid email address to reset password");return}await z(async()=>{b(!0);try{await s(f.trim()),P("Password reset email sent  check your inbox.")}catch(G){w((G==null?void 0:G.message)||"Reset failed")}finally{b(!1)}})},be=()=>l==="signin"?A.jsx("button",{onClick:B,disabled:v||!I||!R,className:`flex-1 rounded py-2 font-semibold ${v||!I||!R?"bg-slate-700 text-slate-300 cursor-not-allowed":"bg-cyan-600 hover:bg-cyan-500 text-white"}`,children:v?A.jsxs("span",{className:"inline-flex items-center gap-2",children:[A.jsx(Ro,{className:"animate-spin",size:16})," Signing in"]}):"Sign in with email"}):l==="register"?A.jsx("button",{onClick:V,disabled:v||!I||!R,className:`w-full rounded py-2 font-semibold ${v||!I||!R?"bg-slate-700 text-slate-300 cursor-not-allowed":"bg-emerald-600 hover:bg-emerald-500 text-white"}`,children:v?A.jsxs("span",{className:"inline-flex items-center gap-2",children:[A.jsx(Ro,{className:"animate-spin",size:16})," Creating"]}):"Create account"}):A.jsx("button",{onClick:pe,disabled:v||!I,className:`w-full rounded py-2 font-semibold ${v||!I?"bg-slate-700 text-slate-300 cursor-not-allowed":"bg-amber-500 hover:bg-amber-400 text-white"}`,children:v?A.jsxs("span",{className:"inline-flex items-center gap-2",children:[A.jsx(Ro,{className:"animate-spin",size:16})," Sending"]}):"Send reset email"});return t?A.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 p-4",role:"dialog","aria-modal":"true","aria-label":"Authentication",children:A.jsxs("div",{className:"w-full max-w-md bg-slate-900 rounded-2xl p-6 border border-slate-800 shadow-xl",children:[A.jsxs("div",{className:"flex items-center justify-between mb-4",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx(pD,{size:20,className:"text-cyan-400"}),A.jsx("h3",{className:"text-lg font-bold text-white",children:l==="signin"?"Sign in":l==="register"?"Register":"Reset password"})]}),A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("button",{onClick:()=>u("signin"),className:`px-3 py-1 rounded text-sm ${l==="signin"?"bg-cyan-600 text-white":"text-slate-400"}`,"aria-pressed":l==="signin",children:"Sign in"}),A.jsx("button",{onClick:()=>u("register"),className:`px-3 py-1 rounded text-sm ${l==="register"?"bg-emerald-600 text-white":"text-slate-400"}`,"aria-pressed":l==="register",children:"Register"}),A.jsx("button",{onClick:()=>u("reset"),className:`px-3 py-1 rounded text-sm ${l==="reset"?"bg-amber-500 text-white":"text-slate-400"}`,"aria-pressed":l==="reset",children:"Reset"}),A.jsx("button",{onClick:e,title:"Close",className:"ml-2 p-1 rounded bg-transparent text-slate-400 hover:text-white",children:A.jsx(Zy,{size:18})})]})]}),A.jsxs("div",{className:"space-y-3",children:[A.jsx("label",{className:"text-xs text-slate-400",htmlFor:"auth-email",children:"Email"}),A.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[A.jsx(QB,{className:"text-slate-400"}),A.jsx("input",{id:"auth-email",ref:$,value:f,onChange:G=>h(G.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded p-2 text-sm text-white outline-none",placeholder:"you@example.com",type:"email","aria-label":"Email address","aria-invalid":!I&&f.length>0})]}),l!=="reset"&&A.jsxs(A.Fragment,{children:[A.jsx("label",{className:"text-xs text-slate-400",htmlFor:"auth-password",children:"Password"}),A.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[A.jsx(mD,{className:"text-slate-400"}),A.jsx("input",{id:"auth-password",ref:L,value:m,onChange:G=>p(G.target.value),className:"flex-1 bg-slate-800 border border-slate-700 rounded p-2 text-sm text-white outline-none",placeholder:"",type:M?"text":"password","aria-label":"Password","aria-invalid":m.length>0&&m.length<pd}),A.jsx("button",{onClick:()=>j(G=>!G),"aria-label":M?"Hide password":"Show password",className:"p-1 text-slate-400 hover:text-white",children:M?A.jsx(DB,{size:18}):A.jsx(LB,{size:18})})]}),A.jsxs("p",{className:"text-xs text-slate-500",children:["Password must be at least ",pd," characters."]})]}),A.jsxs("div",{"aria-live":"polite",className:"min-h-[1.25rem]",children:[E&&A.jsx("div",{className:"text-sm text-red-400",children:E}),S&&A.jsxs("div",{className:"text-sm text-emerald-400 flex items-center gap-2",children:[A.jsx(fD,{size:14}),S]})]}),A.jsx("div",{className:"flex gap-2 mt-2",children:l==="signin"?A.jsxs(A.Fragment,{children:[A.jsx(be,{}),A.jsxs("button",{onClick:()=>z(k),disabled:v,className:"flex-1 bg-white/5 hover:bg-white/10 text-slate-100 rounded py-2 font-semibold flex items-center justify-center gap-2",children:[v?A.jsx(Ro,{className:"animate-spin",size:16}):A.jsx(y$,{className:"text-amber-400"}),v?"Please wait":"Sign in with Google"]})]}):A.jsx(be,{})}),A.jsxs("div",{className:"flex justify-between text-xs text-slate-500 mt-3",children:[l!=="signin"?A.jsx("button",{onClick:()=>{u("signin"),q()},className:"underline",children:"Back to Sign in"}):A.jsx("button",{onClick:()=>{u("reset"),q()},className:"underline",children:"Forgot password?"}),A.jsx("button",{onClick:e,className:"underline",children:"Close"})]})]})]})}):null};function Bfe({user:t,state:e,setState:n,tmdbKey:r,geminiKey:i,openaiKey:s,omdbKey:l,useOmdbRatings:u,showEpisodeImdbOnCards:f,showEpisodeImdbOnSeasonList:h,updateKeysFromCloud:m}){const[p,v]=C.useState(!1),[b,E]=C.useState(!1),w=C.useRef("");return C.useEffect(()=>{let S=!1;return(async()=>{if(!t){E(!1),w.current="";return}try{v(!0);const M=await Lfe(t.uid);if(!M){console.log("[SYNC] No cloud doc yet, will push local as initial");return}const j=M.favorites||[],$=M.watchlist||[],L=M.userRatings||{},q=M.tmdbKey??r??"",I=M.geminiKey??i??"",R=M.openaiKey??s??"",N=M.omdbKey??l??"",z=M.useOmdbRatings??u??!0,k=M.showEpisodeImdbOnCards??f??!1,B=M.showEpisodeImdbOnSeasonList??h??!1;if(S)return;n(V=>({...V,favorites:j,watchlist:$,userRatings:L})),localStorage.setItem("favorites",JSON.stringify(j)),localStorage.setItem("watchlist",JSON.stringify($)),localStorage.setItem("userRatings",JSON.stringify(L)),m?m(q,I,R,N,z,k,B):(localStorage.setItem("tmdb_key",q),localStorage.setItem("gemini_key",I),localStorage.setItem("openai_key",R),localStorage.setItem("omdb_key",N),localStorage.setItem("use_omdb_ratings",String(z)),localStorage.setItem("show_episode_imdb_on_cards",String(k)),localStorage.setItem("show_episode_imdb_on_season_list",String(B))),w.current=JSON.stringify({favorites:j,watchlist:$,userRatings:L,tmdbKey:q,geminiKey:I,openaiKey:R,omdbKey:N,useOmdbRatings:z,showEpisodeImdbOnCards:k,showEpisodeImdbOnSeasonList:B})}catch(M){console.error("Error loading user cloud data:",M)}finally{S||(v(!1),E(!0))}})(),()=>{S=!0}},[t,n,r,i,s,l,u,f,h]),C.useEffect(()=>{(async()=>{if(!t||!b)return;const P={favorites:e.favorites,watchlist:e.watchlist,userRatings:e.userRatings,tmdbKey:r,geminiKey:i,openaiKey:s,omdbKey:l,useOmdbRatings:u,showEpisodeImdbOnCards:f,showEpisodeImdbOnSeasonList:h},M=JSON.stringify(P);if(M!==w.current)try{v(!0),console.log("[SYNC] Syncing data to cloud..."),await Vfe(t.uid,P),w.current=M,console.log("[SYNC] Successfully synced to cloud")}catch(j){console.error("Error syncing to Firestore:",j)}finally{v(!1)}})()},[t,b,e.favorites,e.watchlist,e.userRatings,r,i,s,l,u,f,h]),{syncing:p}}var $fe={};function qfe(t){const[e,n]=C.useState(localStorage.getItem("tmdb_key")||""),[r,i]=C.useState(localStorage.getItem("gemini_key")||$fe.VITE_API_KEY||""),[s,l]=C.useState(localStorage.getItem("openai_key")||""),[u,f]=C.useState(localStorage.getItem("omdb_key")||""),[h,m]=C.useState(()=>{const P=localStorage.getItem("use_omdb_ratings");return P?P==="true":!0}),[p,v]=C.useState(()=>{const P=localStorage.getItem("show_episode_imdb_on_cards");return P?P==="true":!1}),[b,E]=C.useState(()=>{const P=localStorage.getItem("show_episode_imdb_on_season_list");return P?P==="true":!1});return{tmdbKey:e,geminiKey:r,openaiKey:s,omdbKey:u,useOmdbRatings:h,showEpisodeImdbOnCards:p,showEpisodeImdbOnSeasonList:b,saveKeys:(P,M,j,$,L,q,I)=>{localStorage.setItem("tmdb_key",P),localStorage.setItem("gemini_key",M),localStorage.setItem("openai_key",j),localStorage.setItem("omdb_key",$),L!==void 0&&(localStorage.setItem("use_omdb_ratings",String(L)),m(L)),q!==void 0&&(localStorage.setItem("show_episode_imdb_on_cards",String(q)),v(q)),I!==void 0&&(localStorage.setItem("show_episode_imdb_on_season_list",String(I)),E(I)),n(P),i(M),l(j),f($)},updateKeysFromCloud:(P,M,j,$,L,q,I)=>{P&&(n(P),localStorage.setItem("tmdb_key",P)),M&&(i(M),localStorage.setItem("gemini_key",M)),j&&(l(j),localStorage.setItem("openai_key",j)),$&&(f($),localStorage.setItem("omdb_key",$)),L!==void 0&&(m(L),localStorage.setItem("use_omdb_ratings",String(L))),q!==void 0&&(v(q),localStorage.setItem("show_episode_imdb_on_cards",String(q))),I!==void 0&&(E(I),localStorage.setItem("show_episode_imdb_on_season_list",String(I)))}}}function Ffe({favorites:t,watchlist:e,userRatings:n,setState:r}){return{toggleFavorite:u=>{r(f=>{const m=f.favorites.find(p=>p.id===u.id)?f.favorites.filter(p=>p.id!==u.id):[...f.favorites,u];return{...f,favorites:m}})},toggleWatchlist:u=>{r(f=>{const m=f.watchlist.find(p=>p.id===u.id)?f.watchlist.filter(p=>p.id!==u.id):[...f.watchlist,u];return{...f,watchlist:m}})},rateItem:(u,f)=>{r(h=>({...h,userRatings:{...h.userRatings,[u]:f}}))}}}function Hfe(t){const[e,n]=C.useState([]),[r,i]=C.useState([]),[s,l]=C.useState([]),[u,f]=C.useState([]),[h,m]=C.useState(!1),[p,v]=C.useState(null);return C.useEffect(()=>{(async()=>{if(t){m(!0),v(null);try{const[E,w,S,P]=await Promise.all([w$(t),x$(t),E$(t),S$(t)]);n(E),i(w),l(S),f(P)}catch(E){console.error("Error loading home feed:",E),v("Failed to load home content. Check your TMDB key or network.")}finally{m(!1)}}})()},[t]),{trendingMovies:e,trendingTv:r,inTheaters:s,streamingNow:u,loading:h,error:p}}var pk;(function(t){t.STRING="string",t.NUMBER="number",t.INTEGER="integer",t.BOOLEAN="boolean",t.ARRAY="array",t.OBJECT="object"})(pk||(pk={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gk;(function(t){t.LANGUAGE_UNSPECIFIED="language_unspecified",t.PYTHON="python"})(gk||(gk={}));var yk;(function(t){t.OUTCOME_UNSPECIFIED="outcome_unspecified",t.OUTCOME_OK="outcome_ok",t.OUTCOME_FAILED="outcome_failed",t.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(yk||(yk={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk=["user","model","function","system"];var _k;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(_k||(_k={}));var bk;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(bk||(bk={}));var wk;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(wk||(wk={}));var xk;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER"})(xk||(xk={}));var $d;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.OTHER="OTHER"})($d||($d={}));var Ek;(function(t){t.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",t.RETRIEVAL_QUERY="RETRIEVAL_QUERY",t.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",t.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",t.CLASSIFICATION="CLASSIFICATION",t.CLUSTERING="CLUSTERING"})(Ek||(Ek={}));var Sk;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(Sk||(Sk={}));var Ak;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Ak||(Ak={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class eu extends hr{constructor(e,n){super(e),this.response=n}}class VV extends hr{constructor(e,n,r,i){super(e),this.status=n,this.statusText=r,this.errorDetails=i}}class Vo extends hr{}class UV extends hr{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gfe="https://generativelanguage.googleapis.com",Kfe="v1beta",Yfe="0.24.1",Wfe="genai-js";var Zl;(function(t){t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.EMBED_CONTENT="embedContent",t.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Zl||(Zl={}));class Xfe{constructor(e,n,r,i,s){this.model=e,this.task=n,this.apiKey=r,this.stream=i,this.requestOptions=s}toString(){var e,n;const r=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||Kfe;let s=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||Gfe}/${r}/${this.model}:${this.task}`;return this.stream&&(s+="?alt=sse"),s}}function Qfe(t){const e=[];return t!=null&&t.apiClient&&e.push(t.apiClient),e.push(`${Wfe}/${Yfe}`),e.join(" ")}async function Jfe(t){var e;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",Qfe(t.requestOptions)),n.append("x-goog-api-key",t.apiKey);let r=(e=t.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(i){throw new Vo(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${i.message}`)}for(const[i,s]of r.entries()){if(i==="x-goog-api-key")throw new Vo(`Cannot set reserved header name ${i}`);if(i==="x-goog-api-client")throw new Vo(`Header name ${i} can only be set using the apiClient field`);n.append(i,s)}}return n}async function Zfe(t,e,n,r,i,s){const l=new Xfe(t,e,n,r,s);return{url:l.toString(),fetchOptions:Object.assign(Object.assign({},rde(s)),{method:"POST",headers:await Jfe(l),body:i})}}async function Zh(t,e,n,r,i,s={},l=fetch){const{url:u,fetchOptions:f}=await Zfe(t,e,n,r,i,s);return ede(u,f,l)}async function ede(t,e,n=fetch){let r;try{r=await n(t,e)}catch(i){tde(i,t)}return r.ok||await nde(r,t),r}function tde(t,e){let n=t;throw n.name==="AbortError"?(n=new UV(`Request aborted when fetching ${e.toString()}: ${t.message}`),n.stack=t.stack):t instanceof VV||t instanceof Vo||(n=new hr(`Error fetching from ${e.toString()}: ${t.message}`),n.stack=t.stack),n}async function nde(t,e){let n="",r;try{const i=await t.json();n=i.error.message,i.error.details&&(n+=` ${JSON.stringify(i.error.details)}`,r=i.error.details)}catch{}throw new VV(`Error fetching from ${e.toString()}: [${t.status} ${t.statusText}] ${n}`,t.status,t.statusText,r)}function rde(t){const e={};if((t==null?void 0:t.signal)!==void 0||(t==null?void 0:t.timeout)>=0){const n=new AbortController;(t==null?void 0:t.timeout)>=0&&setTimeout(()=>n.abort(),t.timeout),t!=null&&t.signal&&t.signal.addEventListener("abort",()=>{n.abort()}),e.signal=n.signal}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OA(t){return t.text=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),bg(t.candidates[0]))throw new eu(`${Ao(t)}`,t);return ide(t)}else if(t.promptFeedback)throw new eu(`Text not available. ${Ao(t)}`,t);return""},t.functionCall=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),bg(t.candidates[0]))throw new eu(`${Ao(t)}`,t);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),Tk(t)[0]}else if(t.promptFeedback)throw new eu(`Function call not available. ${Ao(t)}`,t)},t.functionCalls=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),bg(t.candidates[0]))throw new eu(`${Ao(t)}`,t);return Tk(t)}else if(t.promptFeedback)throw new eu(`Function call not available. ${Ao(t)}`,t)},t}function ide(t){var e,n,r,i;const s=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const l of(i=(r=t.candidates)===null||r===void 0?void 0:r[0].content)===null||i===void 0?void 0:i.parts)l.text&&s.push(l.text),l.executableCode&&s.push("\n```"+l.executableCode.language+`
`+l.executableCode.code+"\n```\n"),l.codeExecutionResult&&s.push("\n```\n"+l.codeExecutionResult.output+"\n```\n");return s.length>0?s.join(""):""}function Tk(t){var e,n,r,i;const s=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const l of(i=(r=t.candidates)===null||r===void 0?void 0:r[0].content)===null||i===void 0?void 0:i.parts)l.functionCall&&s.push(l.functionCall);if(s.length>0)return s}const ade=[$d.RECITATION,$d.SAFETY,$d.LANGUAGE];function bg(t){return!!t.finishReason&&ade.includes(t.finishReason)}function Ao(t){var e,n,r;let i="";if((!t.candidates||t.candidates.length===0)&&t.promptFeedback)i+="Response was blocked",!((e=t.promptFeedback)===null||e===void 0)&&e.blockReason&&(i+=` due to ${t.promptFeedback.blockReason}`),!((n=t.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(i+=`: ${t.promptFeedback.blockReasonMessage}`);else if(!((r=t.candidates)===null||r===void 0)&&r[0]){const s=t.candidates[0];bg(s)&&(i+=`Candidate was blocked due to ${s.finishReason}`,s.finishMessage&&(i+=`: ${s.finishMessage}`))}return i}function yh(t){return this instanceof yh?(this.v=t,this):new yh(t)}function sde(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},l("next"),l("throw"),l("return"),i[Symbol.asyncIterator]=function(){return this},i;function l(v){r[v]&&(i[v]=function(b){return new Promise(function(E,w){s.push([v,b,E,w])>1||u(v,b)})})}function u(v,b){try{f(r[v](b))}catch(E){p(s[0][3],E)}}function f(v){v.value instanceof yh?Promise.resolve(v.value.v).then(h,m):p(s[0][2],v)}function h(v){u("next",v)}function m(v){u("throw",v)}function p(v,b){v(b),s.shift(),s.length&&u(s[0][0],s[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ck=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function ode(t){const e=t.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=ude(e),[r,i]=n.tee();return{stream:cde(r),response:lde(i)}}async function lde(t){const e=[],n=t.getReader();for(;;){const{done:r,value:i}=await n.read();if(r)return OA(fde(e));e.push(i)}}function cde(t){return sde(this,arguments,function*(){const n=t.getReader();for(;;){const{value:r,done:i}=yield yh(n.read());if(i)break;yield yield yh(OA(r))}})}function ude(t){const e=t.getReader();return new ReadableStream({start(r){let i="";return s();function s(){return e.read().then(({value:l,done:u})=>{if(u){if(i.trim()){r.error(new hr("Failed to parse stream"));return}r.close();return}i+=l;let f=i.match(Ck),h;for(;f;){try{h=JSON.parse(f[1])}catch{r.error(new hr(`Error parsing JSON response: "${f[1]}"`));return}r.enqueue(h),i=i.substring(f[0].length),f=i.match(Ck)}return s()}).catch(l=>{let u=l;throw u.stack=l.stack,u.name==="AbortError"?u=new UV("Request aborted when reading from the stream"):u=new hr("Error reading from the stream"),u})}}})}function fde(t){const e=t[t.length-1],n={promptFeedback:e==null?void 0:e.promptFeedback};for(const r of t){if(r.candidates){let i=0;for(const s of r.candidates)if(n.candidates||(n.candidates=[]),n.candidates[i]||(n.candidates[i]={index:i}),n.candidates[i].citationMetadata=s.citationMetadata,n.candidates[i].groundingMetadata=s.groundingMetadata,n.candidates[i].finishReason=s.finishReason,n.candidates[i].finishMessage=s.finishMessage,n.candidates[i].safetyRatings=s.safetyRatings,s.content&&s.content.parts){n.candidates[i].content||(n.candidates[i].content={role:s.content.role||"user",parts:[]});const l={};for(const u of s.content.parts)u.text&&(l.text=u.text),u.functionCall&&(l.functionCall=u.functionCall),u.executableCode&&(l.executableCode=u.executableCode),u.codeExecutionResult&&(l.codeExecutionResult=u.codeExecutionResult),Object.keys(l).length===0&&(l.text=""),n.candidates[i].content.parts.push(l)}i++}r.usageMetadata&&(n.usageMetadata=r.usageMetadata)}return n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zV(t,e,n,r){const i=await Zh(e,Zl.STREAM_GENERATE_CONTENT,t,!0,JSON.stringify(n),r);return ode(i)}async function BV(t,e,n,r){const s=await(await Zh(e,Zl.GENERATE_CONTENT,t,!1,JSON.stringify(n),r)).json();return{response:OA(s)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $V(t){if(t!=null){if(typeof t=="string")return{role:"system",parts:[{text:t}]};if(t.text)return{role:"system",parts:[t]};if(t.parts)return t.role?t:{role:"system",parts:t.parts}}}function vh(t){let e=[];if(typeof t=="string")e=[{text:t}];else for(const n of t)typeof n=="string"?e.push({text:n}):e.push(n);return dde(e)}function dde(t){const e={role:"user",parts:[]},n={role:"function",parts:[]};let r=!1,i=!1;for(const s of t)"functionResponse"in s?(n.parts.push(s),i=!0):(e.parts.push(s),r=!0);if(r&&i)throw new hr("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!i)throw new hr("No content is provided for sending chat message.");return r?e:n}function hde(t,e){var n;let r={model:e==null?void 0:e.model,generationConfig:e==null?void 0:e.generationConfig,safetySettings:e==null?void 0:e.safetySettings,tools:e==null?void 0:e.tools,toolConfig:e==null?void 0:e.toolConfig,systemInstruction:e==null?void 0:e.systemInstruction,cachedContent:(n=e==null?void 0:e.cachedContent)===null||n===void 0?void 0:n.name,contents:[]};const i=t.generateContentRequest!=null;if(t.contents){if(i)throw new Vo("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=t.contents}else if(i)r=Object.assign(Object.assign({},r),t.generateContentRequest);else{const s=vh(t);r.contents=[s]}return{generateContentRequest:r}}function Ok(t){let e;return t.contents?e=t:e={contents:[vh(t)]},t.systemInstruction&&(e.systemInstruction=$V(t.systemInstruction)),e}function mde(t){return typeof t=="string"||Array.isArray(t)?{content:vh(t)}:t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ik=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],pde={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function gde(t){let e=!1;for(const n of t){const{role:r,parts:i}=n;if(!e&&r!=="user")throw new hr(`First content should be with role 'user', got ${r}`);if(!vk.includes(r))throw new hr(`Each item should include role field. Got ${r} but valid roles are: ${JSON.stringify(vk)}`);if(!Array.isArray(i))throw new hr("Content should have 'parts' property with an array of Parts");if(i.length===0)throw new hr("Each Content should have at least one part");const s={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const u of i)for(const f of Ik)f in u&&(s[f]+=1);const l=pde[r];for(const u of Ik)if(!l.includes(u)&&s[u]>0)throw new hr(`Content with role '${r}' can't contain '${u}' part`);e=!0}}function Rk(t){var e;if(t.candidates===void 0||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;if(n===void 0||n.parts===void 0||n.parts.length===0)return!1;for(const r of n.parts)if(r===void 0||Object.keys(r).length===0||r.text!==void 0&&r.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nk="SILENT_ERROR";class yde{constructor(e,n,r,i={}){this.model=n,this.params=r,this._requestOptions=i,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,r!=null&&r.history&&(gde(r.history),this._history=r.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,n={}){var r,i,s,l,u,f;await this._sendPromise;const h=vh(e),m={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(l=this.params)===null||l===void 0?void 0:l.toolConfig,systemInstruction:(u=this.params)===null||u===void 0?void 0:u.systemInstruction,cachedContent:(f=this.params)===null||f===void 0?void 0:f.cachedContent,contents:[...this._history,h]},p=Object.assign(Object.assign({},this._requestOptions),n);let v;return this._sendPromise=this._sendPromise.then(()=>BV(this._apiKey,this.model,m,p)).then(b=>{var E;if(Rk(b.response)){this._history.push(h);const w=Object.assign({parts:[],role:"model"},(E=b.response.candidates)===null||E===void 0?void 0:E[0].content);this._history.push(w)}else{const w=Ao(b.response);w&&console.warn(`sendMessage() was unsuccessful. ${w}. Inspect response object for details.`)}v=b}).catch(b=>{throw this._sendPromise=Promise.resolve(),b}),await this._sendPromise,v}async sendMessageStream(e,n={}){var r,i,s,l,u,f;await this._sendPromise;const h=vh(e),m={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(l=this.params)===null||l===void 0?void 0:l.toolConfig,systemInstruction:(u=this.params)===null||u===void 0?void 0:u.systemInstruction,cachedContent:(f=this.params)===null||f===void 0?void 0:f.cachedContent,contents:[...this._history,h]},p=Object.assign(Object.assign({},this._requestOptions),n),v=zV(this._apiKey,this.model,m,p);return this._sendPromise=this._sendPromise.then(()=>v).catch(b=>{throw new Error(Nk)}).then(b=>b.response).then(b=>{if(Rk(b)){this._history.push(h);const E=Object.assign({},b.candidates[0].content);E.role||(E.role="model"),this._history.push(E)}else{const E=Ao(b);E&&console.warn(`sendMessageStream() was unsuccessful. ${E}. Inspect response object for details.`)}}).catch(b=>{b.message!==Nk&&console.error(b)}),v}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vde(t,e,n,r){return(await Zh(e,Zl.COUNT_TOKENS,t,!1,JSON.stringify(n),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _de(t,e,n,r){return(await Zh(e,Zl.EMBED_CONTENT,t,!1,JSON.stringify(n),r)).json()}async function bde(t,e,n,r){const i=n.requests.map(l=>Object.assign(Object.assign({},l),{model:e}));return(await Zh(e,Zl.BATCH_EMBED_CONTENTS,t,!1,JSON.stringify({requests:i}),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e,n,r={}){this.apiKey=e,this._requestOptions=r,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=$V(n.systemInstruction),this.cachedContent=n.cachedContent}async generateContent(e,n={}){var r;const i=Ok(e),s=Object.assign(Object.assign({},this._requestOptions),n);return BV(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},i),s)}async generateContentStream(e,n={}){var r;const i=Ok(e),s=Object.assign(Object.assign({},this._requestOptions),n);return zV(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},i),s)}startChat(e){var n;return new yde(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},e),this._requestOptions)}async countTokens(e,n={}){const r=hde(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),i=Object.assign(Object.assign({},this._requestOptions),n);return vde(this.apiKey,this.model,r,i)}async embedContent(e,n={}){const r=mde(e),i=Object.assign(Object.assign({},this._requestOptions),n);return _de(this.apiKey,this.model,r,i)}async batchEmbedContents(e,n={}){const r=Object.assign(Object.assign({},this._requestOptions),n);return bde(this.apiKey,this.model,e,r)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wde{constructor(e){this.apiKey=e}getGenerativeModel(e,n){if(!e.model)throw new hr("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new Pk(this.apiKey,e,n)}getGenerativeModelFromCachedContent(e,n,r){if(!e.name)throw new Vo("Cached content must contain a `name` field.");if(!e.model)throw new Vo("Cached content must contain a `model` field.");const i=["model","systemInstruction"];for(const l of i)if(n!=null&&n[l]&&e[l]&&(n==null?void 0:n[l])!==e[l]){if(l==="model"){const u=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,f=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(u===f)continue}throw new Vo(`Different value for "${l}" specified in modelParams (${n[l]}) and cachedContent (${e[l]})`)}const s=Object.assign(Object.assign({},n),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new Pk(this.apiKey,s,r)}}const xde=`
You are CineMind, an expert movie and TV discovery assistant. 
Your goal is to translate natural language user queries into structured JSON search parameters for the TMDB API.

You must output valid JSON.

Supported Search Types:
1. "general": Standard discovery (e.g., "movies with Brad Pitt", "best horror 2022").
2. "episode_ranking": When user explicitly asks for best/top episodes of a specific show (e.g., "best episodes of Breaking Bad").
3. "trending": When user asks what is hot, new, or trending.

Extraction Rules:
- "genres": specific genre IDs (Action=28, Horror=27, Comedy=35, Drama=18, Sci-Fi=878, Romance=10749, Thriller=53, Animation=16, Documentary=99, Crime=80, Fantasy=14, Family=10751).
- "year": extract release year if mentioned.
- "sort_by": usually "popularity.desc" or "vote_average.desc".
- "query": If it's a specific title or generic keyword search, put it here.
- "with_people": If an actor/director is named, put their NAME here (string).
- "language": ISO 639-1 code (e.g., 'ko' for Korean, 'es' for Spanish).
- "limit": For rankings, default 10.

Output Schema:
{
  "searchType": "general" | "episode_ranking" | "trending",
  "media_type": "movie" | "tv",
  "genres": [ids],
  "year": number,
  "sort_by": string,
  "query": string,
  "with_people": string,
  "language": string,
  "limit": number,
  "explanation": "A short, friendly sentence explaining what you found."
}
`;function Ede(t){if(!t)return null;const e=t.split(",").map(i=>i.trim()).filter(Boolean);if(!e.length)return null;let n=0;try{const i=localStorage.getItem("gemini_key_index");if(i){const s=parseInt(i,10);Number.isNaN(s)||(n=s)}}catch{}const r=e[n%e.length];try{localStorage.setItem("gemini_key_index",String((n+1)%e.length))}catch{}return r}const Sde=async(t,e)=>{const n=Ede(e);if(!n)throw console.error("Gemini API Key is missing"),new Error("Gemini API Key is missing");try{const u=(await(await new wde(n).getGenerativeModel({model:"gemini-2.5-flash",systemInstruction:xde,generationConfig:{responseMimeType:"application/json"}}).generateContent(t)).response).text();if(!u)throw new Error("No response from AI");const f=u.replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(f)}catch(r){return console.error("Gemini Analysis Error:",r),{searchType:"general",query:t,explanation:"I couldn't verify the specific filters, so I'm doing a broad title search."}}};function Ge(t,e,n,r,i){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function Z(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}let qV=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return qV=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};function $x(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const qx=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class Ve extends Error{}class sr extends Ve{constructor(e,n,r,i){super(`${sr.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.requestID=i==null?void 0:i.get("x-request-id"),this.error=n;const s=n;this.code=s==null?void 0:s.code,this.param=s==null?void 0:s.param,this.type=s==null?void 0:s.type}static makeMessage(e,n,r){const i=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new n0({message:r,cause:qx(n)});const s=n==null?void 0:n.error;return e===400?new FV(e,s,r,i):e===401?new HV(e,s,r,i):e===403?new GV(e,s,r,i):e===404?new KV(e,s,r,i):e===409?new YV(e,s,r,i):e===422?new WV(e,s,r,i):e===429?new XV(e,s,r,i):e>=500?new QV(e,s,r,i):new sr(e,s,r,i)}}class Si extends sr{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class n0 extends sr{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class IA extends n0{constructor({message:e}={}){super({message:e??"Request timed out."})}}class FV extends sr{}class HV extends sr{}class GV extends sr{}class KV extends sr{}class YV extends sr{}class WV extends sr{}class XV extends sr{}class QV extends sr{}class JV extends Ve{constructor(){super("Could not parse response content as the length limit was reached")}}class ZV extends Ve{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class Ad extends Error{constructor(e){super(e)}}const Ade=/^[a-z][a-z0-9+.-]*:/i,Tde=t=>Ade.test(t);let Dr=t=>(Dr=Array.isArray,Dr(t)),Mk=Dr;function eU(t){return typeof t!="object"?{}:t??{}}function Cde(t){if(!t)return!0;for(const e in t)return!1;return!0}function Ode(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function c1(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const Ide=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Ve(`${t} must be an integer`);if(e<0)throw new Ve(`${t} must be a positive integer`);return e},Rde=t=>{try{return JSON.parse(t)}catch{return}},em=t=>new Promise(e=>setTimeout(e,t)),cu="6.10.0",Nde=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function Pde(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const Mde=()=>{var n;const t=Pde();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":cu,"X-Stainless-OS":Dk(Deno.build.os),"X-Stainless-Arch":kk(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((n=Deno.version)==null?void 0:n.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":cu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":cu,"X-Stainless-OS":Dk(globalThis.process.platform??"unknown"),"X-Stainless-Arch":kk(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=kde();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":cu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":cu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function kde(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,s=r[2]||0,l=r[3]||0;return{browser:e,version:`${i}.${s}.${l}`}}}return null}const kk=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",Dk=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let jk;const Dde=()=>jk??(jk=Mde());function jde(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function tU(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function nU(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return tU({start(){},async pull(n){const{done:r,value:i}=await e.next();r?n.close():n.enqueue(i)},async cancel(){var n;await((n=e.return)==null?void 0:n.call(e))}})}function rU(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Lde(t){var r,i;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((i=(r=t[Symbol.asyncIterator]()).return)==null?void 0:i.call(r));return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const Vde=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),iU="RFC3986",aU=t=>String(t),Lk={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:aU},Ude="RFC1738";let Fx=(t,e)=>(Fx=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),Fx(t,e));const xa=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),u1=1024,zde=(t,e,n,r,i)=>{if(t.length===0)return t;let s=t;if(typeof t=="symbol"?s=Symbol.prototype.toString.call(t):typeof t!="string"&&(s=String(t)),n==="iso-8859-1")return escape(s).replace(/%u[0-9a-f]{4}/gi,function(u){return"%26%23"+parseInt(u.slice(2),16)+"%3B"});let l="";for(let u=0;u<s.length;u+=u1){const f=s.length>=u1?s.slice(u,u+u1):s,h=[];for(let m=0;m<f.length;++m){let p=f.charCodeAt(m);if(p===45||p===46||p===95||p===126||p>=48&&p<=57||p>=65&&p<=90||p>=97&&p<=122||i===Ude&&(p===40||p===41)){h[h.length]=f.charAt(m);continue}if(p<128){h[h.length]=xa[p];continue}if(p<2048){h[h.length]=xa[192|p>>6]+xa[128|p&63];continue}if(p<55296||p>=57344){h[h.length]=xa[224|p>>12]+xa[128|p>>6&63]+xa[128|p&63];continue}m+=1,p=65536+((p&1023)<<10|f.charCodeAt(m)&1023),h[h.length]=xa[240|p>>18]+xa[128|p>>12&63]+xa[128|p>>6&63]+xa[128|p&63]}l+=h.join("")}return l};function Bde(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function Vk(t,e){if(Dr(t)){const n=[];for(let r=0;r<t.length;r+=1)n.push(e(t[r]));return n}return e(t)}const sU={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},oU=function(t,e){Array.prototype.push.apply(t,Dr(e)?e:[e])};let Uk;const Cn={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:zde,encodeValuesOnly:!1,format:iU,formatter:aU,indices:!1,serializeDate(t){return(Uk??(Uk=Function.prototype.call.bind(Date.prototype.toISOString)))(t)},skipNulls:!1,strictNullHandling:!1};function $de(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const f1={};function lU(t,e,n,r,i,s,l,u,f,h,m,p,v,b,E,w,S,P){let M=t,j=P,$=0,L=!1;for(;(j=j.get(f1))!==void 0&&!L;){const z=j.get(t);if($+=1,typeof z<"u"){if(z===$)throw new RangeError("Cyclic object value");L=!0}typeof j.get(f1)>"u"&&($=0)}if(typeof h=="function"?M=h(e,M):M instanceof Date?M=v==null?void 0:v(M):n==="comma"&&Dr(M)&&(M=Vk(M,function(z){return z instanceof Date?v==null?void 0:v(z):z})),M===null){if(s)return f&&!w?f(e,Cn.encoder,S,"key",b):e;M=""}if($de(M)||Bde(M)){if(f){const z=w?e:f(e,Cn.encoder,S,"key",b);return[(E==null?void 0:E(z))+"="+(E==null?void 0:E(f(M,Cn.encoder,S,"value",b)))]}return[(E==null?void 0:E(e))+"="+(E==null?void 0:E(String(M)))]}const q=[];if(typeof M>"u")return q;let I;if(n==="comma"&&Dr(M))w&&f&&(M=Vk(M,f)),I=[{value:M.length>0?M.join(",")||null:void 0}];else if(Dr(h))I=h;else{const z=Object.keys(M);I=m?z.sort(m):z}const R=u?String(e).replace(/\./g,"%2E"):String(e),N=r&&Dr(M)&&M.length===1?R+"[]":R;if(i&&Dr(M)&&M.length===0)return N+"[]";for(let z=0;z<I.length;++z){const k=I[z],B=typeof k=="object"&&typeof k.value<"u"?k.value:M[k];if(l&&B===null)continue;const V=p&&u?k.replace(/\./g,"%2E"):k,pe=Dr(M)?typeof n=="function"?n(N,V):N:N+(p?"."+V:"["+V+"]");P.set(t,$);const be=new WeakMap;be.set(f1,P),oU(q,lU(B,pe,n,r,i,s,l,u,n==="comma"&&w&&Dr(M)?null:f,h,m,p,v,b,E,w,S,be))}return q}function qde(t=Cn){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||Cn.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=iU;if(typeof t.format<"u"){if(!Fx(Lk,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const r=Lk[n];let i=Cn.filter;(typeof t.filter=="function"||Dr(t.filter))&&(i=t.filter);let s;if(t.arrayFormat&&t.arrayFormat in sU?s=t.arrayFormat:"indices"in t?s=t.indices?"indices":"repeat":s=Cn.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const l=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:Cn.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:Cn.addQueryPrefix,allowDots:l,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Cn.allowEmptyArrays,arrayFormat:s,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Cn.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?Cn.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:Cn.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:Cn.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:Cn.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:Cn.encodeValuesOnly,filter:i,format:n,formatter:r,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:Cn.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:Cn.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Cn.strictNullHandling}}function Fde(t,e={}){let n=t;const r=qde(e);let i,s;typeof r.filter=="function"?(s=r.filter,n=s("",n)):Dr(r.filter)&&(s=r.filter,i=s);const l=[];if(typeof n!="object"||n===null)return"";const u=sU[r.arrayFormat],f=u==="comma"&&r.commaRoundTrip;i||(i=Object.keys(n)),r.sort&&i.sort(r.sort);const h=new WeakMap;for(let v=0;v<i.length;++v){const b=i[v];r.skipNulls&&n[b]===null||oU(l,lU(n[b],b,u,f,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,h))}const m=l.join(r.delimiter);let p=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),m.length>0?p+m:""}function Hde(t){let e=0;for(const i of t)e+=i.length;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}let zk;function RA(t){let e;return(zk??(e=new globalThis.TextEncoder,zk=e.encode.bind(e)))(t)}let Bk;function $k(t){let e;return(Bk??(e=new globalThis.TextDecoder,Bk=e.decode.bind(e)))(t)}var Wr,Xr;class r0{constructor(){Wr.set(this,void 0),Xr.set(this,void 0),Ge(this,Wr,new Uint8Array),Ge(this,Xr,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?RA(e):e;Ge(this,Wr,Hde([Z(this,Wr,"f"),n]));const r=[];let i;for(;(i=Gde(Z(this,Wr,"f"),Z(this,Xr,"f")))!=null;){if(i.carriage&&Z(this,Xr,"f")==null){Ge(this,Xr,i.index);continue}if(Z(this,Xr,"f")!=null&&(i.index!==Z(this,Xr,"f")+1||i.carriage)){r.push($k(Z(this,Wr,"f").subarray(0,Z(this,Xr,"f")-1))),Ge(this,Wr,Z(this,Wr,"f").subarray(Z(this,Xr,"f"))),Ge(this,Xr,null);continue}const s=Z(this,Xr,"f")!==null?i.preceding-1:i.preceding,l=$k(Z(this,Wr,"f").subarray(0,s));r.push(l),Ge(this,Wr,Z(this,Wr,"f").subarray(i.index)),Ge(this,Xr,null)}return r}flush(){return Z(this,Wr,"f").length?this.decode(`
`):[]}}Wr=new WeakMap,Xr=new WeakMap;r0.NEWLINE_CHARS=new Set([`
`,"\r"]);r0.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Gde(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function Kde(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}const $y={off:0,error:200,warn:300,info:400,debug:500},qk=(t,e,n)=>{if(t){if(Ode($y,t))return t;Zn(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys($y))}`)}};function Td(){}function Qp(t,e,n){return!e||$y[t]>$y[n]?Td:e[t].bind(e)}const Yde={error:Td,warn:Td,info:Td,debug:Td};let Fk=new WeakMap;function Zn(t){const e=t.logger,n=t.logLevel??"off";if(!e)return Yde;const r=Fk.get(e);if(r&&r[0]===n)return r[1];const i={error:Qp("error",e,n),warn:Qp("warn",e,n),info:Qp("info",e,n),debug:Qp("debug",e,n)};return Fk.set(e,[n,i]),i}const Ol=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var gd;class Ta{constructor(e,n,r){this.iterator=e,gd.set(this,void 0),this.controller=n,Ge(this,gd,r)}static fromSSEResponse(e,n,r){let i=!1;const s=r?Zn(r):console;async function*l(){if(i)throw new Ve("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let u=!1;try{for await(const f of Wde(e,n))if(!u){if(f.data.startsWith("[DONE]")){u=!0;continue}if(f.event===null||!f.event.startsWith("thread.")){let h;try{h=JSON.parse(f.data)}catch(m){throw s.error("Could not parse message into JSON:",f.data),s.error("From chunk:",f.raw),m}if(h&&h.error)throw new sr(void 0,h.error,void 0,e.headers);yield h}else{let h;try{h=JSON.parse(f.data)}catch(m){throw console.error("Could not parse message into JSON:",f.data),console.error("From chunk:",f.raw),m}if(f.event=="error")throw new sr(void 0,h.error,h.message,void 0);yield{event:f.event,data:h}}}u=!0}catch(f){if($x(f))return;throw f}finally{u||n.abort()}}return new Ta(l,n,r)}static fromReadableStream(e,n,r){let i=!1;async function*s(){const u=new r0,f=rU(e);for await(const h of f)for(const m of u.decode(h))yield m;for(const h of u.flush())yield h}async function*l(){if(i)throw new Ve("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let u=!1;try{for await(const f of s())u||f&&(yield JSON.parse(f));u=!0}catch(f){if($x(f))return;throw f}finally{u||n.abort()}}return new Ta(l,n,r)}[(gd=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=s=>({next:()=>{if(s.length===0){const l=r.next();e.push(l),n.push(l)}return s.shift()}});return[new Ta(()=>i(e),this.controller,Z(this,gd,"f")),new Ta(()=>i(n),this.controller,Z(this,gd,"f"))]}toReadableStream(){const e=this;let n;return tU({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:s}=await n.next();if(s)return r.close();const l=RA(JSON.stringify(i)+`
`);r.enqueue(l)}catch(i){r.error(i)}},async cancel(){var r;await((r=n.return)==null?void 0:r.call(n))}})}}async function*Wde(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Ve("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Ve("Attempted to iterate over a response with no body");const n=new Qde,r=new r0,i=rU(t.body);for await(const s of Xde(i))for(const l of r.decode(s)){const u=n.decode(l);u&&(yield u)}for(const s of r.flush()){const l=n.decode(s);l&&(yield l)}}async function*Xde(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?RA(n):n;let i=new Uint8Array(e.length+r.length);i.set(e),i.set(r,e.length),e=i;let s;for(;(s=Kde(e))!==-1;)yield e.slice(0,s),e=e.slice(s)}e.length>0&&(yield e)}class Qde{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=Jde(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function Jde(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function cU(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:s}=e,l=await(async()=>{var p;if(e.options.stream)return Zn(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Ta.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const u=n.headers.get("content-type"),f=(p=u==null?void 0:u.split(";")[0])==null?void 0:p.trim();if((f==null?void 0:f.includes("application/json"))||(f==null?void 0:f.endsWith("+json"))){const v=await n.json();return uU(v,n)}return await n.text()})();return Zn(t).debug(`[${r}] response parsed`,Ol({retryOfRequestLogID:i,url:n.url,status:n.status,body:l,durationMs:Date.now()-s})),l}function uU(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var Cd;class i0 extends Promise{constructor(e,n,r=cU){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,Cd.set(this,void 0),Ge(this,Cd,e)}_thenUnwrap(e){return new i0(Z(this,Cd,"f"),this.responsePromise,async(n,r)=>uU(e(await this.parseResponse(n,r),r),r.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(Z(this,Cd,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}Cd=new WeakMap;var Jp;class NA{constructor(e,n,r,i){Jp.set(this,void 0),Ge(this,Jp,e),this.options=i,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new Ve("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await Z(this,Jp,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Jp=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class Zde extends i0{constructor(e,n,r){super(e,n,async(i,s)=>new r(i,s.response,await cU(i,s),s.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}class a0 extends NA{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class En extends NA{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){var r;const e=this.getPaginatedItems(),n=(r=e[e.length-1])==null?void 0:r.id;return n?{...this.options,query:{...eU(this.options.query),after:n}}:null}}class qy extends NA{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.has_more=r.has_more||!1,this.last_id=r.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...eU(this.options.query),after:e}}:null}}const fU=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)==null?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function qd(t,e,n){return fU(),new File(t,e??"unknown_file",n)}function wg(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const PA=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",Hk=async(t,e)=>Hx(t.body)?{...t,body:await dU(t.body,e)}:t,ec=async(t,e)=>({...t,body:await dU(t.body,e)}),Gk=new WeakMap;function ehe(t){const e=typeof t=="function"?t:t.fetch,n=Gk.get(e);if(n)return n;const r=(async()=>{try{const i="Response"in e?e.Response:(await e("data:,")).constructor,s=new FormData;return s.toString()!==await new i(s).text()}catch{return!0}})();return Gk.set(e,r),r}const dU=async(t,e)=>{if(!await ehe(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map(([r,i])=>Gx(n,r,i))),n},hU=t=>t instanceof Blob&&"name"in t,the=t=>typeof t=="object"&&t!==null&&(t instanceof Response||PA(t)||hU(t)),Hx=t=>{if(the(t))return!0;if(Array.isArray(t))return t.some(Hx);if(t&&typeof t=="object"){for(const e in t)if(Hx(t[e]))return!0}return!1},Gx=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response)t.append(e,qd([await n.blob()],wg(n)));else if(PA(n))t.append(e,qd([await new Response(nU(n)).blob()],wg(n)));else if(hU(n))t.append(e,n,wg(n));else if(Array.isArray(n))await Promise.all(n.map(r=>Gx(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,i])=>Gx(t,`${e}[${r}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},mU=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",nhe=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&mU(t),rhe=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function ihe(t,e,n){if(fU(),t=await t,nhe(t))return t instanceof File?t:qd([await t.arrayBuffer()],t.name);if(rhe(t)){const i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),qd(await Kx(i),e,n)}const r=await Kx(t);if(e||(e=wg(t)),!(n!=null&&n.type)){const i=r.find(s=>typeof s=="object"&&"type"in s&&s.type);typeof i=="string"&&(n={...n,type:i})}return qd(r,e,n)}async function Kx(t){var n;let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(mU(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(PA(t))for await(const r of t)e.push(...await Kx(r));else{const r=(n=t==null?void 0:t.constructor)==null?void 0:n.name;throw new Error(`Unexpected data type: ${typeof t}${r?`; constructor: ${r}`:""}${ahe(t)}`)}return e}function ahe(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class De{constructor(e){this._client=e}}function pU(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Kk=Object.freeze(Object.create(null)),she=(t=pU)=>function(n,...r){if(n.length===1)return n[0];let i=!1;const s=[],l=n.reduce((m,p,v)=>{var w;/[?#]/.test(p)&&(i=!0);const b=r[v];let E=(i?encodeURIComponent:t)(""+b);return v!==r.length&&(b==null||typeof b=="object"&&b.toString===((w=Object.getPrototypeOf(Object.getPrototypeOf(b.hasOwnProperty??Kk)??Kk))==null?void 0:w.toString))&&(E=b+"",s.push({start:m.length+p.length,length:E.length,error:`Value of type ${Object.prototype.toString.call(b).slice(8,-1)} is not a valid path parameter`})),m+p+(v===r.length?"":E)},""),u=l.split(/[?#]/,1)[0],f=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=f.exec(u))!==null;)s.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(s.sort((m,p)=>m.start-p.start),s.length>0){let m=0;const p=s.reduce((v,b)=>{const E=" ".repeat(b.start-m),w="^".repeat(b.length);return m=b.start+b.length,v+E+w},"");throw new Ve(`Path parameters result in path with invalid segments:
${s.map(v=>v.error).join(`
`)}
${l}
${p}`)}return l},ve=she(pU);let gU=class extends De{list(e,n={},r){return this._client.getAPIList(ve`/chat/completions/${e}/messages`,En,{query:n,...r})}};function Fy(t){return t!==void 0&&"function"in t&&t.function!==void 0}function MA(t){return(t==null?void 0:t.$brand)==="auto-parseable-response-format"}function tm(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function ohe(t,e){return!e||!yU(e)?{...t,choices:t.choices.map(n=>(vU(n.message.tool_calls),{...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:kA(t,e)}function kA(t,e){const n=t.choices.map(r=>{var i;if(r.finish_reason==="length")throw new JV;if(r.finish_reason==="content_filter")throw new ZV;return vU(r.message.tool_calls),{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:((i=r.message.tool_calls)==null?void 0:i.map(s=>che(e,s)))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?lhe(e,r.message.content):null}}});return{...t,choices:n}}function lhe(t,e){var n,r;return((n=t.response_format)==null?void 0:n.type)!=="json_schema"?null:((r=t.response_format)==null?void 0:r.type)==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function che(t,e){var r;const n=(r=t.tools)==null?void 0:r.find(i=>{var s;return Fy(i)&&((s=i.function)==null?void 0:s.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:tm(n)?n.$parseRaw(e.function.arguments):n!=null&&n.function.strict?JSON.parse(e.function.arguments):null}}}function uhe(t,e){var r;if(!t||!("tools"in t)||!t.tools)return!1;const n=(r=t.tools)==null?void 0:r.find(i=>{var s;return Fy(i)&&((s=i.function)==null?void 0:s.name)===e.function.name});return Fy(n)&&(tm(n)||(n==null?void 0:n.function.strict)||!1)}function yU(t){var e;return MA(t.response_format)?!0:((e=t.tools)==null?void 0:e.some(n=>tm(n)||n.type==="function"&&n.function.strict===!0))??!1}function vU(t){for(const e of t||[])if(e.type!=="function")throw new Ve(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function fhe(t){for(const e of t??[]){if(e.type!=="function")throw new Ve(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new Ve(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const Hy=t=>(t==null?void 0:t.role)==="assistant",_U=t=>(t==null?void 0:t.role)==="tool";var Yx,xg,Eg,Od,Id,Sg,Rd,as,Nd,Gy,Ky,uu,bU;class DA{constructor(){Yx.add(this),this.controller=new AbortController,xg.set(this,void 0),Eg.set(this,()=>{}),Od.set(this,()=>{}),Id.set(this,void 0),Sg.set(this,()=>{}),Rd.set(this,()=>{}),as.set(this,{}),Nd.set(this,!1),Gy.set(this,!1),Ky.set(this,!1),uu.set(this,!1),Ge(this,xg,new Promise((e,n)=>{Ge(this,Eg,e,"f"),Ge(this,Od,n,"f")})),Ge(this,Id,new Promise((e,n)=>{Ge(this,Sg,e,"f"),Ge(this,Rd,n,"f")})),Z(this,xg,"f").catch(()=>{}),Z(this,Id,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},Z(this,Yx,"m",bU).bind(this))},0)}_connected(){this.ended||(Z(this,Eg,"f").call(this),this._emit("connect"))}get ended(){return Z(this,Nd,"f")}get errored(){return Z(this,Gy,"f")}get aborted(){return Z(this,Ky,"f")}abort(){this.controller.abort()}on(e,n){return(Z(this,as,"f")[e]||(Z(this,as,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=Z(this,as,"f")[e];if(!r)return this;const i=r.findIndex(s=>s.listener===n);return i>=0&&r.splice(i,1),this}once(e,n){return(Z(this,as,"f")[e]||(Z(this,as,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{Ge(this,uu,!0),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){Ge(this,uu,!0),await Z(this,Id,"f")}_emit(e,...n){if(Z(this,Nd,"f"))return;e==="end"&&(Ge(this,Nd,!0),Z(this,Sg,"f").call(this));const r=Z(this,as,"f")[e];if(r&&(Z(this,as,"f")[e]=r.filter(i=>!i.once),r.forEach(({listener:i})=>i(...n))),e==="abort"){const i=n[0];!Z(this,uu,"f")&&!(r!=null&&r.length)&&Promise.reject(i),Z(this,Od,"f").call(this,i),Z(this,Rd,"f").call(this,i),this._emit("end");return}if(e==="error"){const i=n[0];!Z(this,uu,"f")&&!(r!=null&&r.length)&&Promise.reject(i),Z(this,Od,"f").call(this,i),Z(this,Rd,"f").call(this,i),this._emit("end")}}_emitFinal(){}}xg=new WeakMap,Eg=new WeakMap,Od=new WeakMap,Id=new WeakMap,Sg=new WeakMap,Rd=new WeakMap,as=new WeakMap,Nd=new WeakMap,Gy=new WeakMap,Ky=new WeakMap,uu=new WeakMap,Yx=new WeakSet,bU=function(e){if(Ge(this,Gy,!0),e instanceof Error&&e.name==="AbortError"&&(e=new Si),e instanceof Si)return Ge(this,Ky,!0),this._emit("abort",e);if(e instanceof Ve)return this._emit("error",e);if(e instanceof Error){const n=new Ve(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new Ve(String(e)))};function dhe(t){return typeof t.parse=="function"}var _r,Wx,Yy,Xx,Qx,Jx,wU,xU;const hhe=10;class EU extends DA{constructor(){super(...arguments),_r.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var r;this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=(r=e.choices[0])==null?void 0:r.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),_U(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(Hy(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionToolCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Ve("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),Z(this,_r,"m",Wx).call(this)}async finalMessage(){return await this.done(),Z(this,_r,"m",Yy).call(this)}async finalFunctionToolCall(){return await this.done(),Z(this,_r,"m",Xx).call(this)}async finalFunctionToolCallResult(){return await this.done(),Z(this,_r,"m",Qx).call(this)}async totalUsage(){return await this.done(),Z(this,_r,"m",Jx).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=Z(this,_r,"m",Yy).call(this);n&&this._emit("finalMessage",n);const r=Z(this,_r,"m",Wx).call(this);r&&this._emit("finalContent",r);const i=Z(this,_r,"m",Xx).call(this);i&&this._emit("finalFunctionToolCall",i);const s=Z(this,_r,"m",Qx).call(this);s!=null&&this._emit("finalFunctionToolCallResult",s),this._chatCompletions.some(l=>l.usage)&&this._emit("totalUsage",Z(this,_r,"m",Jx).call(this))}async _createChatCompletion(e,n,r){const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),Z(this,_r,"m",wU).call(this,n);const s=await e.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(kA(s,n))}async _runChatCompletion(e,n,r){for(const i of n.messages)this._addMessage(i,!1);return await this._createChatCompletion(e,n,r)}async _runTools(e,n,r){var b,E,w;const i="tool",{tool_choice:s="auto",stream:l,...u}=n,f=typeof s!="string"&&s.type==="function"&&((b=s==null?void 0:s.function)==null?void 0:b.name),{maxChatCompletions:h=hhe}=r||{},m=n.tools.map(S=>{if(tm(S)){if(!S.$callback)throw new Ve("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:S.$callback,name:S.function.name,description:S.function.description||"",parameters:S.function.parameters,parse:S.$parseRaw,strict:!0}}}return S}),p={};for(const S of m)S.type==="function"&&(p[S.function.name||S.function.function.name]=S.function);const v="tools"in n?m.map(S=>S.type==="function"?{type:"function",function:{name:S.function.name||S.function.function.name,parameters:S.function.parameters,description:S.function.description,strict:S.function.strict}}:S):void 0;for(const S of n.messages)this._addMessage(S,!1);for(let S=0;S<h;++S){const M=(E=(await this._createChatCompletion(e,{...u,tool_choice:s,tools:v,messages:[...this.messages]},r)).choices[0])==null?void 0:E.message;if(!M)throw new Ve("missing message in ChatCompletion response");if(!((w=M.tool_calls)!=null&&w.length))return;for(const j of M.tool_calls){if(j.type!=="function")continue;const $=j.id,{name:L,arguments:q}=j.function,I=p[L];if(I){if(f&&f!==L){const k=`Invalid tool_call: ${JSON.stringify(L)}. ${JSON.stringify(f)} requested. Please try again`;this._addMessage({role:i,tool_call_id:$,content:k});continue}}else{const k=`Invalid tool_call: ${JSON.stringify(L)}. Available options are: ${Object.keys(p).map(B=>JSON.stringify(B)).join(", ")}. Please try again`;this._addMessage({role:i,tool_call_id:$,content:k});continue}let R;try{R=dhe(I)?await I.parse(q):q}catch(k){const B=k instanceof Error?k.message:String(k);this._addMessage({role:i,tool_call_id:$,content:B});continue}const N=await I.function(R,this),z=Z(this,_r,"m",xU).call(this,N);if(this._addMessage({role:i,tool_call_id:$,content:z}),f)return}}}}_r=new WeakSet,Wx=function(){return Z(this,_r,"m",Yy).call(this).content??null},Yy=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(Hy(n))return{...n,content:n.content??null,refusal:n.refusal??null}}throw new Ve("stream ended without producing a ChatCompletionMessage with role=assistant")},Xx=function(){var e,n;for(let r=this.messages.length-1;r>=0;r--){const i=this.messages[r];if(Hy(i)&&((e=i==null?void 0:i.tool_calls)!=null&&e.length))return(n=i.tool_calls.filter(s=>s.type==="function").at(-1))==null?void 0:n.function}},Qx=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(_U(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>{var i;return r.role==="assistant"&&((i=r.tool_calls)==null?void 0:i.some(s=>s.type==="function"&&s.id===n.tool_call_id))}))return n.content}},Jx=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},wU=function(e){if(e.n!=null&&e.n>1)throw new Ve("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},xU=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class jA extends EU{static runTools(e,n,r){const i=new jA,s={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,n,s)),i}_addMessage(e,n=!0){super._addMessage(e,n),Hy(e)&&e.content&&this._emit("content",e.content)}}const SU=1,AU=2,TU=4,CU=8,OU=16,IU=32,RU=64,NU=128,PU=256,MU=NU|PU,kU=OU|IU|MU|RU,DU=SU|AU|kU,jU=TU|CU,mhe=DU|jU,zn={STR:SU,NUM:AU,ARR:TU,OBJ:CU,NULL:OU,BOOL:IU,NAN:RU,INFINITY:NU,MINUS_INFINITY:PU,INF:MU,SPECIAL:kU,ATOM:DU,COLLECTION:jU,ALL:mhe};class phe extends Error{}class ghe extends Error{}function yhe(t,e=zn.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return vhe(t.trim(),e)}const vhe=(t,e)=>{const n=t.length;let r=0;const i=v=>{throw new phe(`${v} at position ${r}`)},s=v=>{throw new ghe(`${v} at position ${r}`)},l=()=>(p(),r>=n&&i("Unexpected end of input"),t[r]==='"'?u():t[r]==="{"?f():t[r]==="["?h():t.substring(r,r+4)==="null"||zn.NULL&e&&n-r<4&&"null".startsWith(t.substring(r))?(r+=4,null):t.substring(r,r+4)==="true"||zn.BOOL&e&&n-r<4&&"true".startsWith(t.substring(r))?(r+=4,!0):t.substring(r,r+5)==="false"||zn.BOOL&e&&n-r<5&&"false".startsWith(t.substring(r))?(r+=5,!1):t.substring(r,r+8)==="Infinity"||zn.INFINITY&e&&n-r<8&&"Infinity".startsWith(t.substring(r))?(r+=8,1/0):t.substring(r,r+9)==="-Infinity"||zn.MINUS_INFINITY&e&&1<n-r&&n-r<9&&"-Infinity".startsWith(t.substring(r))?(r+=9,-1/0):t.substring(r,r+3)==="NaN"||zn.NAN&e&&n-r<3&&"NaN".startsWith(t.substring(r))?(r+=3,NaN):m()),u=()=>{const v=r;let b=!1;for(r++;r<n&&(t[r]!=='"'||b&&t[r-1]==="\\");)b=t[r]==="\\"?!b:!1,r++;if(t.charAt(r)=='"')try{return JSON.parse(t.substring(v,++r-Number(b)))}catch(E){s(String(E))}else if(zn.STR&e)try{return JSON.parse(t.substring(v,r-Number(b))+'"')}catch{return JSON.parse(t.substring(v,t.lastIndexOf("\\"))+'"')}i("Unterminated string literal")},f=()=>{r++,p();const v={};try{for(;t[r]!=="}";){if(p(),r>=n&&zn.OBJ&e)return v;const b=u();p(),r++;try{const E=l();Object.defineProperty(v,b,{value:E,writable:!0,enumerable:!0,configurable:!0})}catch(E){if(zn.OBJ&e)return v;throw E}p(),t[r]===","&&r++}}catch{if(zn.OBJ&e)return v;i("Expected '}' at end of object")}return r++,v},h=()=>{r++;const v=[];try{for(;t[r]!=="]";)v.push(l()),p(),t[r]===","&&r++}catch{if(zn.ARR&e)return v;i("Expected ']' at end of array")}return r++,v},m=()=>{if(r===0){t==="-"&&zn.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(t)}catch(b){if(zn.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}s(String(b))}}const v=r;for(t[r]==="-"&&r++;t[r]&&!",]}".includes(t[r]);)r++;r==n&&!(zn.NUM&e)&&i("Unterminated number literal");try{return JSON.parse(t.substring(v,r))}catch{t.substring(v,r)==="-"&&zn.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(t.substring(v,t.lastIndexOf("e")))}catch(E){s(String(E))}}},p=()=>{for(;r<n&&` 
\r	`.includes(t[r]);)r++};return l()},Yk=t=>yhe(t,zn.ALL^zn.NUM);var Tn,is,tu,wo,d1,Zp,h1,m1,p1,eg,g1,Wk;class _h extends EU{constructor(e){super(),Tn.add(this),is.set(this,void 0),tu.set(this,void 0),wo.set(this,void 0),Ge(this,is,e),Ge(this,tu,[])}get currentChatCompletionSnapshot(){return Z(this,wo,"f")}static fromReadableStream(e){const n=new _h(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,r){const i=new _h(n);return i._run(()=>i._runChatCompletion(e,{...n,stream:!0},{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createChatCompletion(e,n,r){var l;super._createChatCompletion;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),Z(this,Tn,"m",d1).call(this);const s=await e.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const u of s)Z(this,Tn,"m",h1).call(this,u);if((l=s.controller.signal)!=null&&l.aborted)throw new Si;return this._addChatCompletion(Z(this,Tn,"m",eg).call(this))}async _fromReadableStream(e,n){var l;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),Z(this,Tn,"m",d1).call(this),this._connected();const i=Ta.fromReadableStream(e,this.controller);let s;for await(const u of i)s&&s!==u.id&&this._addChatCompletion(Z(this,Tn,"m",eg).call(this)),Z(this,Tn,"m",h1).call(this,u),s=u.id;if((l=i.controller.signal)!=null&&l.aborted)throw new Si;return this._addChatCompletion(Z(this,Tn,"m",eg).call(this))}[(is=new WeakMap,tu=new WeakMap,wo=new WeakMap,Tn=new WeakSet,d1=function(){this.ended||Ge(this,wo,void 0)},Zp=function(n){let r=Z(this,tu,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},Z(this,tu,"f")[n.index]=r,r)},h1=function(n){var i,s,l,u,f,h,m,p,v,b,E,w,S,P,M;if(this.ended)return;const r=Z(this,Tn,"m",Wk).call(this,n);this._emit("chunk",n,r);for(const j of n.choices){const $=r.choices[j.index];j.delta.content!=null&&((i=$.message)==null?void 0:i.role)==="assistant"&&((s=$.message)!=null&&s.content)&&(this._emit("content",j.delta.content,$.message.content),this._emit("content.delta",{delta:j.delta.content,snapshot:$.message.content,parsed:$.message.parsed})),j.delta.refusal!=null&&((l=$.message)==null?void 0:l.role)==="assistant"&&((u=$.message)!=null&&u.refusal)&&this._emit("refusal.delta",{delta:j.delta.refusal,snapshot:$.message.refusal}),((f=j.logprobs)==null?void 0:f.content)!=null&&((h=$.message)==null?void 0:h.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(m=j.logprobs)==null?void 0:m.content,snapshot:((p=$.logprobs)==null?void 0:p.content)??[]}),((v=j.logprobs)==null?void 0:v.refusal)!=null&&((b=$.message)==null?void 0:b.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(E=j.logprobs)==null?void 0:E.refusal,snapshot:((w=$.logprobs)==null?void 0:w.refusal)??[]});const L=Z(this,Tn,"m",Zp).call(this,$);$.finish_reason&&(Z(this,Tn,"m",p1).call(this,$),L.current_tool_call_index!=null&&Z(this,Tn,"m",m1).call(this,$,L.current_tool_call_index));for(const q of j.delta.tool_calls??[])L.current_tool_call_index!==q.index&&(Z(this,Tn,"m",p1).call(this,$),L.current_tool_call_index!=null&&Z(this,Tn,"m",m1).call(this,$,L.current_tool_call_index)),L.current_tool_call_index=q.index;for(const q of j.delta.tool_calls??[]){const I=(S=$.message.tool_calls)==null?void 0:S[q.index];I!=null&&I.type&&((I==null?void 0:I.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(P=I.function)==null?void 0:P.name,index:q.index,arguments:I.function.arguments,parsed_arguments:I.function.parsed_arguments,arguments_delta:((M=q.function)==null?void 0:M.arguments)??""}):(I==null||I.type,void 0))}}},m1=function(n,r){var l,u,f;if(Z(this,Tn,"m",Zp).call(this,n).done_tool_calls.has(r))return;const s=(l=n.message.tool_calls)==null?void 0:l[r];if(!s)throw new Error("no tool call snapshot");if(!s.type)throw new Error("tool call snapshot missing `type`");if(s.type==="function"){const h=(f=(u=Z(this,is,"f"))==null?void 0:u.tools)==null?void 0:f.find(m=>Fy(m)&&m.function.name===s.function.name);this._emit("tool_calls.function.arguments.done",{name:s.function.name,index:r,arguments:s.function.arguments,parsed_arguments:tm(h)?h.$parseRaw(s.function.arguments):h!=null&&h.function.strict?JSON.parse(s.function.arguments):null})}else s.type},p1=function(n){var i,s;const r=Z(this,Tn,"m",Zp).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const l=Z(this,Tn,"m",g1).call(this);this._emit("content.done",{content:n.message.content,parsed:l?l.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),(i=n.logprobs)!=null&&i.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),(s=n.logprobs)!=null&&s.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},eg=function(){if(this.ended)throw new Ve("stream has ended, this shouldn't happen");const n=Z(this,wo,"f");if(!n)throw new Ve("request ended without sending any chunks");return Ge(this,wo,void 0),Ge(this,tu,[]),_he(n,Z(this,is,"f"))},g1=function(){var r;const n=(r=Z(this,is,"f"))==null?void 0:r.response_format;return MA(n)?n:null},Wk=function(n){var r,i,s,l;let u=Z(this,wo,"f");const{choices:f,...h}=n;u?Object.assign(u,h):u=Ge(this,wo,{...h,choices:[]});for(const{delta:m,finish_reason:p,index:v,logprobs:b=null,...E}of n.choices){let w=u.choices[v];if(w||(w=u.choices[v]={finish_reason:p,index:v,message:{},logprobs:b,...E}),b)if(!w.logprobs)w.logprobs=Object.assign({},b);else{const{content:q,refusal:I,...R}=b;Object.assign(w.logprobs,R),q&&((r=w.logprobs).content??(r.content=[]),w.logprobs.content.push(...q)),I&&((i=w.logprobs).refusal??(i.refusal=[]),w.logprobs.refusal.push(...I))}if(p&&(w.finish_reason=p,Z(this,is,"f")&&yU(Z(this,is,"f")))){if(p==="length")throw new JV;if(p==="content_filter")throw new ZV}if(Object.assign(w,E),!m)continue;const{content:S,refusal:P,function_call:M,role:j,tool_calls:$,...L}=m;if(Object.assign(w.message,L),P&&(w.message.refusal=(w.message.refusal||"")+P),j&&(w.message.role=j),M&&(w.message.function_call?(M.name&&(w.message.function_call.name=M.name),M.arguments&&((s=w.message.function_call).arguments??(s.arguments=""),w.message.function_call.arguments+=M.arguments)):w.message.function_call=M),S&&(w.message.content=(w.message.content||"")+S,!w.message.refusal&&Z(this,Tn,"m",g1).call(this)&&(w.message.parsed=Yk(w.message.content))),$){w.message.tool_calls||(w.message.tool_calls=[]);for(const{index:q,id:I,type:R,function:N,...z}of $){const k=(l=w.message.tool_calls)[q]??(l[q]={});Object.assign(k,z),I&&(k.id=I),R&&(k.type=R),N&&(k.function??(k.function={name:N.name??"",arguments:""})),N!=null&&N.name&&(k.function.name=N.name),N!=null&&N.arguments&&(k.function.arguments+=N.arguments,uhe(Z(this,is,"f"),k)&&(k.function.parsed_arguments=Yk(k.function.arguments)))}}}return u},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("chunk",i=>{const s=n.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,l)=>n.push({resolve:s,reject:l})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Ta(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function _he(t,e){const{id:n,choices:r,created:i,model:s,system_fingerprint:l,...u}=t,f={...u,id:n,choices:r.map(({message:h,finish_reason:m,index:p,logprobs:v,...b})=>{if(!m)throw new Ve(`missing finish_reason for choice ${p}`);const{content:E=null,function_call:w,tool_calls:S,...P}=h,M=h.role;if(!M)throw new Ve(`missing role for choice ${p}`);if(w){const{arguments:j,name:$}=w;if(j==null)throw new Ve(`missing function_call.arguments for choice ${p}`);if(!$)throw new Ve(`missing function_call.name for choice ${p}`);return{...b,message:{content:E,function_call:{arguments:j,name:$},role:M,refusal:h.refusal??null},finish_reason:m,index:p,logprobs:v}}return S?{...b,index:p,finish_reason:m,logprobs:v,message:{...P,role:M,content:E,refusal:h.refusal??null,tool_calls:S.map((j,$)=>{const{function:L,type:q,id:I,...R}=j,{arguments:N,name:z,...k}=L||{};if(I==null)throw new Ve(`missing choices[${p}].tool_calls[${$}].id
${tg(t)}`);if(q==null)throw new Ve(`missing choices[${p}].tool_calls[${$}].type
${tg(t)}`);if(z==null)throw new Ve(`missing choices[${p}].tool_calls[${$}].function.name
${tg(t)}`);if(N==null)throw new Ve(`missing choices[${p}].tool_calls[${$}].function.arguments
${tg(t)}`);return{...R,id:I,type:q,function:{...k,name:z,arguments:N}}})}}:{...b,message:{...P,content:E,role:M,refusal:h.refusal??null},finish_reason:m,index:p,logprobs:v}}),created:i,model:s,object:"chat.completion",...l?{system_fingerprint:l}:{}};return ohe(f,e)}function tg(t){return JSON.stringify(t)}class Wy extends _h{static fromReadableStream(e){const n=new Wy(null);return n._run(()=>n._fromReadableStream(e)),n}static runTools(e,n,r){const i=new Wy(n),s={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,n,s)),i}}let LA=class extends De{constructor(){super(...arguments),this.messages=new gU(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(ve`/chat/completions/${e}`,n)}update(e,n,r){return this._client.post(ve`/chat/completions/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/chat/completions",En,{query:e,...n})}delete(e,n){return this._client.delete(ve`/chat/completions/${e}`,n)}parse(e,n){return fhe(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(r=>kA(r,e))}runTools(e,n){return e.stream?Wy.runTools(this._client,e,n):jA.runTools(this._client,e,n)}stream(e,n){return _h.createChatCompletion(this._client,e,n)}};LA.Messages=gU;class VA extends De{constructor(){super(...arguments),this.completions=new LA(this._client)}}VA.Completions=LA;const LU=Symbol("brand.privateNullableHeaders");function*bhe(t){if(!t)return;if(LU in t){const{values:r,nulls:i}=t;yield*r.entries();for(const s of i)yield[s,null];return}let e=!1,n;t instanceof Headers?n=t.entries():Mk(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const s=Mk(r[1])?r[1]:[r[1]];let l=!1;for(const u of s)u!==void 0&&(e&&!l&&(l=!0,yield[i,null]),yield[i,u])}}const Ce=t=>{const e=new Headers,n=new Set;for(const r of t){const i=new Set;for(const[s,l]of bhe(r)){const u=s.toLowerCase();i.has(u)||(e.delete(s),i.add(u)),l===null?(e.delete(s),n.add(u)):(e.append(s,l),n.delete(u))}}return{[LU]:!0,values:e,nulls:n}};class VU extends De{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:Ce([{Accept:"application/octet-stream"},n==null?void 0:n.headers]),__binaryResponse:!0})}}class UU extends De{create(e,n){return this._client.post("/audio/transcriptions",ec({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class zU extends De{create(e,n){return this._client.post("/audio/translations",ec({body:e,...n,__metadata:{model:e.model}},this._client))}}class nm extends De{constructor(){super(...arguments),this.transcriptions=new UU(this._client),this.translations=new zU(this._client),this.speech=new VU(this._client)}}nm.Transcriptions=UU;nm.Translations=zU;nm.Speech=VU;class BU extends De{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(ve`/batches/${e}`,n)}list(e={},n){return this._client.getAPIList("/batches",En,{query:e,...n})}cancel(e,n){return this._client.post(ve`/batches/${e}/cancel`,n)}}class $U extends De{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:Ce([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(ve`/assistants/${e}`,{...n,headers:Ce([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,r){return this._client.post(ve`/assistants/${e}`,{body:n,...r,headers:Ce([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e={},n){return this._client.getAPIList("/assistants",En,{query:e,...n,headers:Ce([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}delete(e,n){return this._client.delete(ve`/assistants/${e}`,{...n,headers:Ce([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}}let qU=class extends De{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:Ce([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}};class FU extends De{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:Ce([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}}let s0=class extends De{constructor(){super(...arguments),this.sessions=new qU(this._client),this.transcriptionSessions=new FU(this._client)}};s0.Sessions=qU;s0.TranscriptionSessions=FU;class HU extends De{create(e,n){return this._client.post("/chatkit/sessions",{body:e,...n,headers:Ce([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}cancel(e,n){return this._client.post(ve`/chatkit/sessions/${e}/cancel`,{...n,headers:Ce([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}}let GU=class extends De{retrieve(e,n){return this._client.get(ve`/chatkit/threads/${e}`,{...n,headers:Ce([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}list(e={},n){return this._client.getAPIList("/chatkit/threads",qy,{query:e,...n,headers:Ce([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}delete(e,n){return this._client.delete(ve`/chatkit/threads/${e}`,{...n,headers:Ce([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}listItems(e,n={},r){return this._client.getAPIList(ve`/chatkit/threads/${e}/items`,qy,{query:n,...r,headers:Ce([{"OpenAI-Beta":"chatkit_beta=v1"},r==null?void 0:r.headers])})}};class o0 extends De{constructor(){super(...arguments),this.sessions=new HU(this._client),this.threads=new GU(this._client)}}o0.Sessions=HU;o0.Threads=GU;class KU extends De{create(e,n,r){return this._client.post(ve`/threads/${e}/messages`,{body:n,...r,headers:Ce([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,n,r){const{thread_id:i}=n;return this._client.get(ve`/threads/${i}/messages/${e}`,{...r,headers:Ce([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,n,r){const{thread_id:i,...s}=n;return this._client.post(ve`/threads/${i}/messages/${e}`,{body:s,...r,headers:Ce([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n={},r){return this._client.getAPIList(ve`/threads/${e}/messages`,En,{query:n,...r,headers:Ce([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,n,r){const{thread_id:i}=n;return this._client.delete(ve`/threads/${i}/messages/${e}`,{...r,headers:Ce([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}class YU extends De{retrieve(e,n,r){const{thread_id:i,run_id:s,...l}=n;return this._client.get(ve`/threads/${i}/runs/${s}/steps/${e}`,{query:l,...r,headers:Ce([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n,r){const{thread_id:i,...s}=n;return this._client.getAPIList(ve`/threads/${i}/runs/${e}/steps`,En,{query:s,...r,headers:Ce([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}const whe=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.charCodeAt(i);return Array.from(new Float32Array(r.buffer))}};var y1={};const nu=t=>{var e,n,r,i;if(typeof globalThis.process<"u")return((e=y1==null?void 0:y1[t])==null?void 0:e.trim())??void 0;if(typeof globalThis.Deno<"u")return(i=(r=(n=globalThis.Deno.env)==null?void 0:n.get)==null?void 0:r.call(n,t))==null?void 0:i.trim()};var er,jl,Zx,Sa,Ag,Bi,Ll,mu,Rl,Xy,Qr,Tg,Cg,Fd,Pd,Md,Xk,Qk,Jk,Zk,eD,tD,nD;class Hd extends DA{constructor(){super(...arguments),er.add(this),Zx.set(this,[]),Sa.set(this,{}),Ag.set(this,{}),Bi.set(this,void 0),Ll.set(this,void 0),mu.set(this,void 0),Rl.set(this,void 0),Xy.set(this,void 0),Qr.set(this,void 0),Tg.set(this,void 0),Cg.set(this,void 0),Fd.set(this,void 0)}[(Zx=new WeakMap,Sa=new WeakMap,Ag=new WeakMap,Bi=new WeakMap,Ll=new WeakMap,mu=new WeakMap,Rl=new WeakMap,Xy=new WeakMap,Qr=new WeakMap,Tg=new WeakMap,Cg=new WeakMap,Fd=new WeakMap,er=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",i=>{const s=n.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,l)=>n.push({resolve:s,reject:l})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new jl;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){var s;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const i=Ta.fromReadableStream(e,this.controller);for await(const l of i)Z(this,er,"m",Pd).call(this,l);if((s=i.controller.signal)!=null&&s.aborted)throw new Si;return this._addRun(Z(this,er,"m",Md).call(this))}toReadableStream(){return new Ta(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,r,i){const s=new jl;return s._run(()=>s._runToolAssistantStream(e,n,r,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createToolAssistantStream(e,n,r,i){var f;const s=i==null?void 0:i.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const l={...r,stream:!0},u=await e.submitToolOutputs(n,l,{...i,signal:this.controller.signal});this._connected();for await(const h of u)Z(this,er,"m",Pd).call(this,h);if((f=u.controller.signal)!=null&&f.aborted)throw new Si;return this._addRun(Z(this,er,"m",Md).call(this))}static createThreadAssistantStream(e,n,r){const i=new jl;return i._run(()=>i._threadAssistantStream(e,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}static createAssistantStream(e,n,r,i){const s=new jl;return s._run(()=>s._runAssistantStream(e,n,r,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),s}currentEvent(){return Z(this,Tg,"f")}currentRun(){return Z(this,Cg,"f")}currentMessageSnapshot(){return Z(this,Bi,"f")}currentRunStepSnapshot(){return Z(this,Fd,"f")}async finalRunSteps(){return await this.done(),Object.values(Z(this,Sa,"f"))}async finalMessages(){return await this.done(),Object.values(Z(this,Ag,"f"))}async finalRun(){if(await this.done(),!Z(this,Ll,"f"))throw Error("Final run was not received.");return Z(this,Ll,"f")}async _createThreadAssistantStream(e,n,r){var u;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const s={...n,stream:!0},l=await e.createAndRun(s,{...r,signal:this.controller.signal});this._connected();for await(const f of l)Z(this,er,"m",Pd).call(this,f);if((u=l.controller.signal)!=null&&u.aborted)throw new Si;return this._addRun(Z(this,er,"m",Md).call(this))}async _createAssistantStream(e,n,r,i){var f;const s=i==null?void 0:i.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const l={...r,stream:!0},u=await e.create(n,l,{...i,signal:this.controller.signal});this._connected();for await(const h of u)Z(this,er,"m",Pd).call(this,h);if((f=u.controller.signal)!=null&&f.aborted)throw new Si;return this._addRun(Z(this,er,"m",Md).call(this))}static accumulateDelta(e,n){for(const[r,i]of Object.entries(n)){if(!e.hasOwnProperty(r)){e[r]=i;continue}let s=e[r];if(s==null){e[r]=i;continue}if(r==="index"||r==="type"){e[r]=i;continue}if(typeof s=="string"&&typeof i=="string")s+=i;else if(typeof s=="number"&&typeof i=="number")s+=i;else if(c1(s)&&c1(i))s=this.accumulateDelta(s,i);else if(Array.isArray(s)&&Array.isArray(i)){if(s.every(l=>typeof l=="string"||typeof l=="number")){s.push(...i);continue}for(const l of i){if(!c1(l))throw new Error(`Expected array delta entry to be an object but got: ${l}`);const u=l.index;if(u==null)throw console.error(l),new Error("Expected array delta entry to have an `index` property");if(typeof u!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${u}`);const f=s[u];f==null?s.push(l):s[u]=this.accumulateDelta(f,l)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${i}, accValue: ${s}`);e[r]=s}return e}_addRun(e){return e}async _threadAssistantStream(e,n,r){return await this._createThreadAssistantStream(n,e,r)}async _runAssistantStream(e,n,r,i){return await this._createAssistantStream(n,e,r,i)}async _runToolAssistantStream(e,n,r,i){return await this._createToolAssistantStream(n,e,r,i)}}jl=Hd,Pd=function(e){if(!this.ended)switch(Ge(this,Tg,e),Z(this,er,"m",Jk).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":Z(this,er,"m",nD).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Z(this,er,"m",Qk).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":Z(this,er,"m",Xk).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Md=function(){if(this.ended)throw new Ve("stream has ended, this shouldn't happen");if(!Z(this,Ll,"f"))throw Error("Final run has not been received");return Z(this,Ll,"f")},Xk=function(e){const[n,r]=Z(this,er,"m",eD).call(this,e,Z(this,Bi,"f"));Ge(this,Bi,n),Z(this,Ag,"f")[n.id]=n;for(const i of r){const s=n.content[i.index];(s==null?void 0:s.type)=="text"&&this._emit("textCreated",s.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const i of e.data.delta.content){if(i.type=="text"&&i.text){let s=i.text,l=n.content[i.index];if(l&&l.type=="text")this._emit("textDelta",s,l.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(i.index!=Z(this,mu,"f")){if(Z(this,Rl,"f"))switch(Z(this,Rl,"f").type){case"text":this._emit("textDone",Z(this,Rl,"f").text,Z(this,Bi,"f"));break;case"image_file":this._emit("imageFileDone",Z(this,Rl,"f").image_file,Z(this,Bi,"f"));break}Ge(this,mu,i.index)}Ge(this,Rl,n.content[i.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(Z(this,mu,"f")!==void 0){const i=e.data.content[Z(this,mu,"f")];if(i)switch(i.type){case"image_file":this._emit("imageFileDone",i.image_file,Z(this,Bi,"f"));break;case"text":this._emit("textDone",i.text,Z(this,Bi,"f"));break}}Z(this,Bi,"f")&&this._emit("messageDone",e.data),Ge(this,Bi,void 0)}},Qk=function(e){const n=Z(this,er,"m",Zk).call(this,e);switch(Ge(this,Fd,n),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const s of r.step_details.tool_calls)s.index==Z(this,Xy,"f")?this._emit("toolCallDelta",s,n.step_details.tool_calls[s.index]):(Z(this,Qr,"f")&&this._emit("toolCallDone",Z(this,Qr,"f")),Ge(this,Xy,s.index),Ge(this,Qr,n.step_details.tool_calls[s.index]),Z(this,Qr,"f")&&this._emit("toolCallCreated",Z(this,Qr,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Ge(this,Fd,void 0),e.data.step_details.type=="tool_calls"&&Z(this,Qr,"f")&&(this._emit("toolCallDone",Z(this,Qr,"f")),Ge(this,Qr,void 0)),this._emit("runStepDone",e.data,n);break}},Jk=function(e){Z(this,Zx,"f").push(e),this._emit("event",e)},Zk=function(e){switch(e.event){case"thread.run.step.created":return Z(this,Sa,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=Z(this,Sa,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const i=jl.accumulateDelta(n,r.delta);Z(this,Sa,"f")[e.data.id]=i}return Z(this,Sa,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":Z(this,Sa,"f")[e.data.id]=e.data;break}if(Z(this,Sa,"f")[e.data.id])return Z(this,Sa,"f")[e.data.id];throw new Error("No snapshot available")},eD=function(e,n){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let i=e.data;if(i.delta.content)for(const s of i.delta.content)if(s.index in n.content){let l=n.content[s.index];n.content[s.index]=Z(this,er,"m",tD).call(this,s,l)}else n.content[s.index]=s,r.push(s);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},tD=function(e,n){return jl.accumulateDelta(n,e)},nD=function(e){switch(Ge(this,Cg,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":Ge(this,Ll,e.data),Z(this,Qr,"f")&&(this._emit("toolCallDone",Z(this,Qr,"f")),Ge(this,Qr,void 0));break}};let UA=class extends De{constructor(){super(...arguments),this.steps=new YU(this._client)}create(e,n,r){const{include:i,...s}=n;return this._client.post(ve`/threads/${e}/runs`,{query:{include:i},body:s,...r,headers:Ce([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers]),stream:n.stream??!1})}retrieve(e,n,r){const{thread_id:i}=n;return this._client.get(ve`/threads/${i}/runs/${e}`,{...r,headers:Ce([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,n,r){const{thread_id:i,...s}=n;return this._client.post(ve`/threads/${i}/runs/${e}`,{body:s,...r,headers:Ce([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n={},r){return this._client.getAPIList(ve`/threads/${e}/runs`,En,{query:n,...r,headers:Ce([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}cancel(e,n,r){const{thread_id:i}=n;return this._client.post(ve`/threads/${i}/runs/${e}/cancel`,{...r,headers:Ce([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,n,r){const i=await this.create(e,n,r);return await this.poll(i.id,{thread_id:e},r)}createAndStream(e,n,r){return Hd.createAssistantStream(e,this._client.beta.threads.runs,n,r)}async poll(e,n,r){var s;const i=Ce([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((s=r==null?void 0:r.pollIntervalMs)==null?void 0:s.toString())??void 0}]);for(;;){const{data:l,response:u}=await this.retrieve(e,n,{...r,headers:{...r==null?void 0:r.headers,...i}}).withResponse();switch(l.status){case"queued":case"in_progress":case"cancelling":let f=5e3;if(r!=null&&r.pollIntervalMs)f=r.pollIntervalMs;else{const h=u.headers.get("openai-poll-after-ms");if(h){const m=parseInt(h);isNaN(m)||(f=m)}}await em(f);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return l}}}stream(e,n,r){return Hd.createAssistantStream(e,this._client.beta.threads.runs,n,r)}submitToolOutputs(e,n,r){const{thread_id:i,...s}=n;return this._client.post(ve`/threads/${i}/runs/${e}/submit_tool_outputs`,{body:s,...r,headers:Ce([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers]),stream:n.stream??!1})}async submitToolOutputsAndPoll(e,n,r){const i=await this.submitToolOutputs(e,n,r);return await this.poll(i.id,n,r)}submitToolOutputsStream(e,n,r){return Hd.createToolAssistantStream(e,this._client.beta.threads.runs,n,r)}};UA.Steps=YU;class l0 extends De{constructor(){super(...arguments),this.runs=new UA(this._client),this.messages=new KU(this._client)}create(e={},n){return this._client.post("/threads",{body:e,...n,headers:Ce([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(ve`/threads/${e}`,{...n,headers:Ce([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,r){return this._client.post(ve`/threads/${e}`,{body:n,...r,headers:Ce([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,n){return this._client.delete(ve`/threads/${e}`,{...n,headers:Ce([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:Ce([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers]),stream:e.stream??!1})}async createAndRunPoll(e,n){const r=await this.createAndRun(e,n);return await this.runs.poll(r.id,{thread_id:r.thread_id},n)}createAndRunStream(e,n){return Hd.createThreadAssistantStream(e,this._client.beta.threads,n)}}l0.Runs=UA;l0.Messages=KU;class nf extends De{constructor(){super(...arguments),this.realtime=new s0(this._client),this.chatkit=new o0(this._client),this.assistants=new $U(this._client),this.threads=new l0(this._client)}}nf.Realtime=s0;nf.ChatKit=o0;nf.Assistants=$U;nf.Threads=l0;class WU extends De{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}class XU extends De{retrieve(e,n,r){const{container_id:i}=n;return this._client.get(ve`/containers/${i}/files/${e}/content`,{...r,headers:Ce([{Accept:"application/binary"},r==null?void 0:r.headers]),__binaryResponse:!0})}}let zA=class extends De{constructor(){super(...arguments),this.content=new XU(this._client)}create(e,n,r){return this._client.post(ve`/containers/${e}/files`,ec({body:n,...r},this._client))}retrieve(e,n,r){const{container_id:i}=n;return this._client.get(ve`/containers/${i}/files/${e}`,r)}list(e,n={},r){return this._client.getAPIList(ve`/containers/${e}/files`,En,{query:n,...r})}delete(e,n,r){const{container_id:i}=n;return this._client.delete(ve`/containers/${i}/files/${e}`,{...r,headers:Ce([{Accept:"*/*"},r==null?void 0:r.headers])})}};zA.Content=XU;class BA extends De{constructor(){super(...arguments),this.files=new zA(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(ve`/containers/${e}`,n)}list(e={},n){return this._client.getAPIList("/containers",En,{query:e,...n})}delete(e,n){return this._client.delete(ve`/containers/${e}`,{...n,headers:Ce([{Accept:"*/*"},n==null?void 0:n.headers])})}}BA.Files=zA;class QU extends De{create(e,n,r){const{include:i,...s}=n;return this._client.post(ve`/conversations/${e}/items`,{query:{include:i},body:s,...r})}retrieve(e,n,r){const{conversation_id:i,...s}=n;return this._client.get(ve`/conversations/${i}/items/${e}`,{query:s,...r})}list(e,n={},r){return this._client.getAPIList(ve`/conversations/${e}/items`,qy,{query:n,...r})}delete(e,n,r){const{conversation_id:i}=n;return this._client.delete(ve`/conversations/${i}/items/${e}`,r)}}class $A extends De{constructor(){super(...arguments),this.items=new QU(this._client)}create(e={},n){return this._client.post("/conversations",{body:e,...n})}retrieve(e,n){return this._client.get(ve`/conversations/${e}`,n)}update(e,n,r){return this._client.post(ve`/conversations/${e}`,{body:n,...r})}delete(e,n){return this._client.delete(ve`/conversations/${e}`,n)}}$A.Items=QU;class JU extends De{create(e,n){const r=!!e.encoding_format;let i=r?e.encoding_format:"base64";r&&Zn(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const s=this._client.post("/embeddings",{body:{...e,encoding_format:i},...n});return r?s:(Zn(this._client).debug("embeddings/decoding base64 embeddings from base64"),s._thenUnwrap(l=>(l&&l.data&&l.data.forEach(u=>{const f=u.embedding;u.embedding=whe(f)}),l)))}}class ZU extends De{retrieve(e,n,r){const{eval_id:i,run_id:s}=n;return this._client.get(ve`/evals/${i}/runs/${s}/output_items/${e}`,r)}list(e,n,r){const{eval_id:i,...s}=n;return this._client.getAPIList(ve`/evals/${i}/runs/${e}/output_items`,En,{query:s,...r})}}class qA extends De{constructor(){super(...arguments),this.outputItems=new ZU(this._client)}create(e,n,r){return this._client.post(ve`/evals/${e}/runs`,{body:n,...r})}retrieve(e,n,r){const{eval_id:i}=n;return this._client.get(ve`/evals/${i}/runs/${e}`,r)}list(e,n={},r){return this._client.getAPIList(ve`/evals/${e}/runs`,En,{query:n,...r})}delete(e,n,r){const{eval_id:i}=n;return this._client.delete(ve`/evals/${i}/runs/${e}`,r)}cancel(e,n,r){const{eval_id:i}=n;return this._client.post(ve`/evals/${i}/runs/${e}`,r)}}qA.OutputItems=ZU;class FA extends De{constructor(){super(...arguments),this.runs=new qA(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(ve`/evals/${e}`,n)}update(e,n,r){return this._client.post(ve`/evals/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/evals",En,{query:e,...n})}delete(e,n){return this._client.delete(ve`/evals/${e}`,n)}}FA.Runs=qA;let ez=class extends De{create(e,n){return this._client.post("/files",ec({body:e,...n},this._client))}retrieve(e,n){return this._client.get(ve`/files/${e}`,n)}list(e={},n){return this._client.getAPIList("/files",En,{query:e,...n})}delete(e,n){return this._client.delete(ve`/files/${e}`,n)}content(e,n){return this._client.get(ve`/files/${e}/content`,{...n,headers:Ce([{Accept:"application/binary"},n==null?void 0:n.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:r=1800*1e3}={}){const i=new Set(["processed","error","deleted"]),s=Date.now();let l=await this.retrieve(e);for(;!l.status||!i.has(l.status);)if(await em(n),l=await this.retrieve(e),Date.now()-s>r)throw new IA({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return l}};class tz extends De{}let nz=class extends De{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class HA extends De{constructor(){super(...arguments),this.graders=new nz(this._client)}}HA.Graders=nz;class rz extends De{create(e,n,r){return this._client.getAPIList(ve`/fine_tuning/checkpoints/${e}/permissions`,a0,{body:n,method:"post",...r})}retrieve(e,n={},r){return this._client.get(ve`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...r})}delete(e,n,r){const{fine_tuned_model_checkpoint:i}=n;return this._client.delete(ve`/fine_tuning/checkpoints/${i}/permissions/${e}`,r)}}let GA=class extends De{constructor(){super(...arguments),this.permissions=new rz(this._client)}};GA.Permissions=rz;class iz extends De{list(e,n={},r){return this._client.getAPIList(ve`/fine_tuning/jobs/${e}/checkpoints`,En,{query:n,...r})}}class KA extends De{constructor(){super(...arguments),this.checkpoints=new iz(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(ve`/fine_tuning/jobs/${e}`,n)}list(e={},n){return this._client.getAPIList("/fine_tuning/jobs",En,{query:e,...n})}cancel(e,n){return this._client.post(ve`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},r){return this._client.getAPIList(ve`/fine_tuning/jobs/${e}/events`,En,{query:n,...r})}pause(e,n){return this._client.post(ve`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(ve`/fine_tuning/jobs/${e}/resume`,n)}}KA.Checkpoints=iz;class rf extends De{constructor(){super(...arguments),this.methods=new tz(this._client),this.jobs=new KA(this._client),this.checkpoints=new GA(this._client),this.alpha=new HA(this._client)}}rf.Methods=tz;rf.Jobs=KA;rf.Checkpoints=GA;rf.Alpha=HA;class az extends De{}class YA extends De{constructor(){super(...arguments),this.graderModels=new az(this._client)}}YA.GraderModels=az;class sz extends De{createVariation(e,n){return this._client.post("/images/variations",ec({body:e,...n},this._client))}edit(e,n){return this._client.post("/images/edits",ec({body:e,...n,stream:e.stream??!1},this._client))}generate(e,n){return this._client.post("/images/generations",{body:e,...n,stream:e.stream??!1})}}class oz extends De{retrieve(e,n){return this._client.get(ve`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",a0,e)}delete(e,n){return this._client.delete(ve`/models/${e}`,n)}}class lz extends De{create(e,n){return this._client.post("/moderations",{body:e,...n})}}class cz extends De{accept(e,n,r){return this._client.post(ve`/realtime/calls/${e}/accept`,{body:n,...r,headers:Ce([{Accept:"*/*"},r==null?void 0:r.headers])})}hangup(e,n){return this._client.post(ve`/realtime/calls/${e}/hangup`,{...n,headers:Ce([{Accept:"*/*"},n==null?void 0:n.headers])})}refer(e,n,r){return this._client.post(ve`/realtime/calls/${e}/refer`,{body:n,...r,headers:Ce([{Accept:"*/*"},r==null?void 0:r.headers])})}reject(e,n={},r){return this._client.post(ve`/realtime/calls/${e}/reject`,{body:n,...r,headers:Ce([{Accept:"*/*"},r==null?void 0:r.headers])})}}class uz extends De{create(e,n){return this._client.post("/realtime/client_secrets",{body:e,...n})}}class c0 extends De{constructor(){super(...arguments),this.clientSecrets=new uz(this._client),this.calls=new cz(this._client)}}c0.ClientSecrets=uz;c0.Calls=cz;function xhe(t,e){return!e||!She(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(r=>({...r,parsed:null}))}:n)}:fz(t,e)}function fz(t,e){const n=t.output.map(i=>{if(i.type==="function_call")return{...i,parsed_arguments:Che(e,i)};if(i.type==="message"){const s=i.content.map(l=>l.type==="output_text"?{...l,parsed:Ehe(e,l.text)}:l);return{...i,content:s}}return i}),r=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||eE(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const i of r.output)if(i.type==="message"){for(const s of i.content)if(s.type==="output_text"&&s.parsed!==null)return s.parsed}return null}}),r}function Ehe(t,e){var n,r,i,s;return((r=(n=t.text)==null?void 0:n.format)==null?void 0:r.type)!=="json_schema"?null:"$parseRaw"in((i=t.text)==null?void 0:i.format)?((s=t.text)==null?void 0:s.format).$parseRaw(e):JSON.parse(e)}function She(t){var e;return!!MA((e=t.text)==null?void 0:e.format)}function Ahe(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function The(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function Che(t,e){const n=The(t.tools??[],e.name);return{...e,...e,parsed_arguments:Ahe(n)?n.$parseRaw(e.arguments):n!=null&&n.strict?JSON.parse(e.arguments):null}}function eE(t){const e=[];for(const n of t.output)if(n.type==="message")for(const r of n.content)r.type==="output_text"&&e.push(r.text);t.output_text=e.join("")}var ru,ng,xo,rg,rD,iD,aD,sD;class WA extends DA{constructor(e){super(),ru.add(this),ng.set(this,void 0),xo.set(this,void 0),rg.set(this,void 0),Ge(this,ng,e)}static createResponse(e,n,r){const i=new WA(n);return i._run(()=>i._createOrRetrieveResponse(e,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createOrRetrieveResponse(e,n,r){var u;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),Z(this,ru,"m",rD).call(this);let s,l=null;"response_id"in n?(s=await e.responses.retrieve(n.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),l=n.starting_after??null):s=await e.responses.create({...n,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const f of s)Z(this,ru,"m",iD).call(this,f,l);if((u=s.controller.signal)!=null&&u.aborted)throw new Si;return Z(this,ru,"m",aD).call(this)}[(ng=new WeakMap,xo=new WeakMap,rg=new WeakMap,ru=new WeakSet,rD=function(){this.ended||Ge(this,xo,void 0)},iD=function(n,r){if(this.ended)return;const i=(l,u)=>{(r==null||u.sequence_number>r)&&this._emit(l,u)},s=Z(this,ru,"m",sD).call(this,n);switch(i("event",n),n.type){case"response.output_text.delta":{const l=s.output[n.output_index];if(!l)throw new Ve(`missing output at index ${n.output_index}`);if(l.type==="message"){const u=l.content[n.content_index];if(!u)throw new Ve(`missing content at index ${n.content_index}`);if(u.type!=="output_text")throw new Ve(`expected content to be 'output_text', got ${u.type}`);i("response.output_text.delta",{...n,snapshot:u.text})}break}case"response.function_call_arguments.delta":{const l=s.output[n.output_index];if(!l)throw new Ve(`missing output at index ${n.output_index}`);l.type==="function_call"&&i("response.function_call_arguments.delta",{...n,snapshot:l.arguments});break}default:i(n.type,n);break}},aD=function(){if(this.ended)throw new Ve("stream has ended, this shouldn't happen");const n=Z(this,xo,"f");if(!n)throw new Ve("request ended without sending any events");Ge(this,xo,void 0);const r=Ohe(n,Z(this,ng,"f"));return Ge(this,rg,r),r},sD=function(n){var i;let r=Z(this,xo,"f");if(!r){if(n.type!=="response.created")throw new Ve(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return r=Ge(this,xo,n.response),r}switch(n.type){case"response.output_item.added":{r.output.push(n.item);break}case"response.content_part.added":{const s=r.output[n.output_index];if(!s)throw new Ve(`missing output at index ${n.output_index}`);const l=s.type,u=n.part;l==="message"&&u.type!=="reasoning_text"?s.content.push(u):l==="reasoning"&&u.type==="reasoning_text"&&(s.content||(s.content=[]),s.content.push(u));break}case"response.output_text.delta":{const s=r.output[n.output_index];if(!s)throw new Ve(`missing output at index ${n.output_index}`);if(s.type==="message"){const l=s.content[n.content_index];if(!l)throw new Ve(`missing content at index ${n.content_index}`);if(l.type!=="output_text")throw new Ve(`expected content to be 'output_text', got ${l.type}`);l.text+=n.delta}break}case"response.function_call_arguments.delta":{const s=r.output[n.output_index];if(!s)throw new Ve(`missing output at index ${n.output_index}`);s.type==="function_call"&&(s.arguments+=n.delta);break}case"response.reasoning_text.delta":{const s=r.output[n.output_index];if(!s)throw new Ve(`missing output at index ${n.output_index}`);if(s.type==="reasoning"){const l=(i=s.content)==null?void 0:i[n.content_index];if(!l)throw new Ve(`missing content at index ${n.content_index}`);if(l.type!=="reasoning_text")throw new Ve(`expected content to be 'reasoning_text', got ${l.type}`);l.text+=n.delta}break}case"response.completed":{Ge(this,xo,n.response);break}}return r},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",i=>{const s=n.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,l)=>n.push({resolve:s,reject:l})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=Z(this,rg,"f");if(!e)throw new Ve("stream ended without producing a ChatCompletion");return e}}function Ohe(t,e){return xhe(t,e)}class dz extends De{list(e,n={},r){return this._client.getAPIList(ve`/responses/${e}/input_items`,En,{query:n,...r})}}class hz extends De{count(e={},n){return this._client.post("/responses/input_tokens",{body:e,...n})}}class u0 extends De{constructor(){super(...arguments),this.inputItems=new dz(this._client),this.inputTokens=new hz(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&eE(r),r))}retrieve(e,n={},r){return this._client.get(ve`/responses/${e}`,{query:n,...r,stream:(n==null?void 0:n.stream)??!1})._thenUnwrap(i=>("object"in i&&i.object==="response"&&eE(i),i))}delete(e,n){return this._client.delete(ve`/responses/${e}`,{...n,headers:Ce([{Accept:"*/*"},n==null?void 0:n.headers])})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(r=>fz(r,e))}stream(e,n){return WA.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(ve`/responses/${e}/cancel`,n)}compact(e={},n){return this._client.post("/responses/compact",{body:e,...n})}}u0.InputItems=dz;u0.InputTokens=hz;class mz extends De{create(e,n,r){return this._client.post(ve`/uploads/${e}/parts`,ec({body:n,...r},this._client))}}class XA extends De{constructor(){super(...arguments),this.parts=new mz(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(ve`/uploads/${e}/cancel`,n)}complete(e,n,r){return this._client.post(ve`/uploads/${e}/complete`,{body:n,...r})}}XA.Parts=mz;const Ihe=async t=>{const e=await Promise.allSettled(t),n=e.filter(i=>i.status==="rejected");if(n.length){for(const i of n)console.error(i.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const i of e)i.status==="fulfilled"&&r.push(i.value);return r};class pz extends De{create(e,n,r){return this._client.post(ve`/vector_stores/${e}/file_batches`,{body:n,...r,headers:Ce([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,n,r){const{vector_store_id:i}=n;return this._client.get(ve`/vector_stores/${i}/file_batches/${e}`,{...r,headers:Ce([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}cancel(e,n,r){const{vector_store_id:i}=n;return this._client.post(ve`/vector_stores/${i}/file_batches/${e}/cancel`,{...r,headers:Ce([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,n,r){const i=await this.create(e,n);return await this.poll(e,i.id,r)}listFiles(e,n,r){const{vector_store_id:i,...s}=n;return this._client.getAPIList(ve`/vector_stores/${i}/file_batches/${e}/files`,En,{query:s,...r,headers:Ce([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async poll(e,n,r){var s;const i=Ce([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((s=r==null?void 0:r.pollIntervalMs)==null?void 0:s.toString())??void 0}]);for(;;){const{data:l,response:u}=await this.retrieve(n,{vector_store_id:e},{...r,headers:i}).withResponse();switch(l.status){case"in_progress":let f=5e3;if(r!=null&&r.pollIntervalMs)f=r.pollIntervalMs;else{const h=u.headers.get("openai-poll-after-ms");if(h){const m=parseInt(h);isNaN(m)||(f=m)}}await em(f);break;case"failed":case"cancelled":case"completed":return l}}}async uploadAndPoll(e,{files:n,fileIds:r=[]},i){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const s=(i==null?void 0:i.maxConcurrency)??5,l=Math.min(s,n.length),u=this._client,f=n.values(),h=[...r];async function m(v){for(let b of v){const E=await u.files.create({file:b,purpose:"assistants"},i);h.push(E.id)}}const p=Array(l).fill(f).map(m);return await Ihe(p),await this.createAndPoll(e,{file_ids:h})}}class gz extends De{create(e,n,r){return this._client.post(ve`/vector_stores/${e}/files`,{body:n,...r,headers:Ce([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,n,r){const{vector_store_id:i}=n;return this._client.get(ve`/vector_stores/${i}/files/${e}`,{...r,headers:Ce([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,n,r){const{vector_store_id:i,...s}=n;return this._client.post(ve`/vector_stores/${i}/files/${e}`,{body:s,...r,headers:Ce([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n={},r){return this._client.getAPIList(ve`/vector_stores/${e}/files`,En,{query:n,...r,headers:Ce([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,n,r){const{vector_store_id:i}=n;return this._client.delete(ve`/vector_stores/${i}/files/${e}`,{...r,headers:Ce([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,n,r){const i=await this.create(e,n,r);return await this.poll(e,i.id,r)}async poll(e,n,r){var s;const i=Ce([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((s=r==null?void 0:r.pollIntervalMs)==null?void 0:s.toString())??void 0}]);for(;;){const l=await this.retrieve(n,{vector_store_id:e},{...r,headers:i}).withResponse(),u=l.data;switch(u.status){case"in_progress":let f=5e3;if(r!=null&&r.pollIntervalMs)f=r.pollIntervalMs;else{const h=l.response.headers.get("openai-poll-after-ms");if(h){const m=parseInt(h);isNaN(m)||(f=m)}}await em(f);break;case"failed":case"completed":return u}}}async upload(e,n,r){const i=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(e,{file_id:i.id},r)}async uploadAndPoll(e,n,r){const i=await this.upload(e,n,r);return await this.poll(e,i.id,r)}content(e,n,r){const{vector_store_id:i}=n;return this._client.getAPIList(ve`/vector_stores/${i}/files/${e}/content`,a0,{...r,headers:Ce([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}class f0 extends De{constructor(){super(...arguments),this.files=new gz(this._client),this.fileBatches=new pz(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:Ce([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(ve`/vector_stores/${e}`,{...n,headers:Ce([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,r){return this._client.post(ve`/vector_stores/${e}`,{body:n,...r,headers:Ce([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e={},n){return this._client.getAPIList("/vector_stores",En,{query:e,...n,headers:Ce([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}delete(e,n){return this._client.delete(ve`/vector_stores/${e}`,{...n,headers:Ce([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}search(e,n,r){return this._client.getAPIList(ve`/vector_stores/${e}/search`,a0,{body:n,method:"post",...r,headers:Ce([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}f0.Files=gz;f0.FileBatches=pz;class yz extends De{create(e,n){return this._client.post("/videos",Hk({body:e,...n},this._client))}retrieve(e,n){return this._client.get(ve`/videos/${e}`,n)}list(e={},n){return this._client.getAPIList("/videos",qy,{query:e,...n})}delete(e,n){return this._client.delete(ve`/videos/${e}`,n)}downloadContent(e,n={},r){return this._client.get(ve`/videos/${e}/content`,{query:n,...r,headers:Ce([{Accept:"application/binary"},r==null?void 0:r.headers]),__binaryResponse:!0})}remix(e,n,r){return this._client.post(ve`/videos/${e}/remix`,Hk({body:n,...r},this._client))}}var fu,vz,Og;class _z extends De{constructor(){super(...arguments),fu.add(this)}async unwrap(e,n,r=this._client.webhookSecret,i=300){return await this.verifySignature(e,n,r,i),JSON.parse(e)}async verifySignature(e,n,r=this._client.webhookSecret,i=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");Z(this,fu,"m",vz).call(this,r);const s=Ce([n]).values,l=Z(this,fu,"m",Og).call(this,s,"webhook-signature"),u=Z(this,fu,"m",Og).call(this,s,"webhook-timestamp"),f=Z(this,fu,"m",Og).call(this,s,"webhook-id"),h=parseInt(u,10);if(isNaN(h))throw new Ad("Invalid webhook timestamp format");const m=Math.floor(Date.now()/1e3);if(m-h>i)throw new Ad("Webhook timestamp is too old");if(h>m+i)throw new Ad("Webhook timestamp is too new");const p=l.split(" ").map(w=>w.startsWith("v1,")?w.substring(3):w),v=r.startsWith("whsec_")?Buffer.from(r.replace("whsec_",""),"base64"):Buffer.from(r,"utf-8"),b=f?`${f}.${u}.${e}`:`${u}.${e}`,E=await crypto.subtle.importKey("raw",v,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const w of p)try{const S=Buffer.from(w,"base64");if(await crypto.subtle.verify("HMAC",E,S,new TextEncoder().encode(b)))return}catch{continue}throw new Ad("The given webhook signature does not match the expected signature")}}fu=new WeakSet,vz=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},Og=function(e,n){if(!e)throw new Error("Headers are required");const r=e.get(n);if(r==null)throw new Error(`Missing required header: ${n}`);return r};var tE,QA,Ig,bz;class et{constructor({baseURL:e=nu("OPENAI_BASE_URL"),apiKey:n=nu("OPENAI_API_KEY"),organization:r=nu("OPENAI_ORG_ID")??null,project:i=nu("OPENAI_PROJECT_ID")??null,webhookSecret:s=nu("OPENAI_WEBHOOK_SECRET")??null,...l}={}){if(tE.add(this),Ig.set(this,void 0),this.completions=new WU(this),this.chat=new VA(this),this.embeddings=new JU(this),this.files=new ez(this),this.images=new sz(this),this.audio=new nm(this),this.moderations=new lz(this),this.models=new oz(this),this.fineTuning=new rf(this),this.graders=new YA(this),this.vectorStores=new f0(this),this.webhooks=new _z(this),this.beta=new nf(this),this.batches=new BU(this),this.uploads=new XA(this),this.responses=new u0(this),this.realtime=new c0(this),this.conversations=new $A(this),this.evals=new FA(this),this.containers=new BA(this),this.videos=new yz(this),n===void 0)throw new Ve("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const u={apiKey:n,organization:r,project:i,webhookSecret:s,...l,baseURL:e||"https://api.openai.com/v1"};if(!u.dangerouslyAllowBrowser&&Nde())throw new Ve(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=u.baseURL,this.timeout=u.timeout??QA.DEFAULT_TIMEOUT,this.logger=u.logger??console;const f="warn";this.logLevel=f,this.logLevel=qk(u.logLevel,"ClientOptions.logLevel",this)??qk(nu("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??f,this.fetchOptions=u.fetchOptions,this.maxRetries=u.maxRetries??2,this.fetch=u.fetch??jde(),Ge(this,Ig,Vde),this._options=u,this.apiKey=typeof n=="string"?n:"Missing Key",this.organization=r,this.project=i,this.webhookSecret=s}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){}async authHeaders(e){return Ce([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return Fde(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${cu}`}defaultIdempotencyKey(){return`stainless-node-retry-${qV()}`}makeStatusError(e,n,r,i){return sr.generate(e,n,r,i)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let n;try{n=await e()}catch(r){throw r instanceof Ve?r:new Ve(`Failed to get token from 'apiKey' function: ${r.message}`,{cause:r})}if(typeof n!="string"||!n)throw new Ve(`Expected 'apiKey' function argument to return a string but it returned ${n}`);return this.apiKey=n,!0}buildURL(e,n,r){const i=!Z(this,tE,"m",bz).call(this)&&r||this.baseURL,s=Tde(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),l=this.defaultQuery();return Cde(l)||(n={...l,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(s.search=this.stringifyQuery(n)),s.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(i=>({method:e,path:n,...i})))}request(e,n=null){return new i0(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var P,M;const i=await e,s=i.maxRetries??this.maxRetries;n==null&&(n=s),await this.prepareOptions(i);const{req:l,url:u,timeout:f}=await this.buildRequest(i,{retryCount:s-n});await this.prepareRequest(l,{url:u,options:i});const h="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),m=r===void 0?"":`, retryOf: ${r}`,p=Date.now();if(Zn(this).debug(`[${h}] sending request`,Ol({retryOfRequestLogID:r,method:i.method,url:u,options:i,headers:l.headers})),(P=i.signal)!=null&&P.aborted)throw new Si;const v=new AbortController,b=await this.fetchWithTimeout(u,l,f,v).catch(qx),E=Date.now();if(b instanceof globalThis.Error){const j=`retrying, ${n} attempts remaining`;if((M=i.signal)!=null&&M.aborted)throw new Si;const $=$x(b)||/timed? ?out/i.test(String(b)+("cause"in b?String(b.cause):""));if(n)return Zn(this).info(`[${h}] connection ${$?"timed out":"failed"} - ${j}`),Zn(this).debug(`[${h}] connection ${$?"timed out":"failed"} (${j})`,Ol({retryOfRequestLogID:r,url:u,durationMs:E-p,message:b.message})),this.retryRequest(i,n,r??h);throw Zn(this).info(`[${h}] connection ${$?"timed out":"failed"} - error; no more retries left`),Zn(this).debug(`[${h}] connection ${$?"timed out":"failed"} (error; no more retries left)`,Ol({retryOfRequestLogID:r,url:u,durationMs:E-p,message:b.message})),$?new IA:new n0({cause:b})}const w=[...b.headers.entries()].filter(([j])=>j==="x-request-id").map(([j,$])=>", "+j+": "+JSON.stringify($)).join(""),S=`[${h}${m}${w}] ${l.method} ${u} ${b.ok?"succeeded":"failed"} with status ${b.status} in ${E-p}ms`;if(!b.ok){const j=await this.shouldRetry(b);if(n&&j){const N=`retrying, ${n} attempts remaining`;return await Lde(b.body),Zn(this).info(`${S} - ${N}`),Zn(this).debug(`[${h}] response error (${N})`,Ol({retryOfRequestLogID:r,url:b.url,status:b.status,headers:b.headers,durationMs:E-p})),this.retryRequest(i,n,r??h,b.headers)}const $=j?"error; no more retries left":"error; not retryable";Zn(this).info(`${S} - ${$}`);const L=await b.text().catch(N=>qx(N).message),q=Rde(L),I=q?void 0:L;throw Zn(this).debug(`[${h}] response error (${$})`,Ol({retryOfRequestLogID:r,url:b.url,status:b.status,headers:b.headers,message:I,durationMs:Date.now()-p})),this.makeStatusError(b.status,q,I,b.headers)}return Zn(this).info(S),Zn(this).debug(`[${h}] response start`,Ol({retryOfRequestLogID:r,url:b.url,status:b.status,headers:b.headers,durationMs:E-p})),{response:b,options:i,controller:v,requestLogID:h,retryOfRequestLogID:r,startTime:p}}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}requestAPIList(e,n){const r=this.makeRequest(n,null,void 0);return new Zde(this,r,e)}async fetchWithTimeout(e,n,r,i){const{signal:s,method:l,...u}=n||{};s&&s.addEventListener("abort",()=>i.abort());const f=setTimeout(()=>i.abort(),r),h=globalThis.ReadableStream&&u.body instanceof globalThis.ReadableStream||typeof u.body=="object"&&u.body!==null&&Symbol.asyncIterator in u.body,m={signal:i.signal,...h?{duplex:"half"}:{},method:"GET",...u};l&&(m.method=l.toUpperCase());try{return await this.fetch.call(void 0,e,m)}finally{clearTimeout(f)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,i){let s;const l=i==null?void 0:i.get("retry-after-ms");if(l){const f=parseFloat(l);Number.isNaN(f)||(s=f)}const u=i==null?void 0:i.get("retry-after");if(u&&!s){const f=parseFloat(u);Number.isNaN(f)?s=Date.parse(u)-Date.now():s=f*1e3}if(!(s&&0<=s&&s<60*1e3)){const f=e.maxRetries??this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,f)}return await em(s),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const s=n-e,l=Math.min(.5*Math.pow(2,s),8),u=1-Math.random()*.25;return l*u*1e3}async buildRequest(e,{retryCount:n=0}={}){const r={...e},{method:i,path:s,query:l,defaultBaseURL:u}=r,f=this.buildURL(s,l,u);"timeout"in r&&Ide("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const{bodyHeaders:h,body:m}=this.buildBody({options:r}),p=await this.buildHeaders({options:e,method:i,bodyHeaders:h,retryCount:n});return{req:{method:i,headers:p,...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&m instanceof globalThis.ReadableStream&&{duplex:"half"},...m&&{body:m},...this.fetchOptions??{},...r.fetchOptions??{}},url:f,timeout:r.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:i}){let s={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);const l=Ce([s,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...Dde(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(l),l.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=Ce([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:nU(e)}:Z(this,Ig,"f").call(this,{body:e,headers:r})}}QA=et,Ig=new WeakMap,tE=new WeakSet,bz=function(){return this.baseURL!=="https://api.openai.com/v1"};et.OpenAI=QA;et.DEFAULT_TIMEOUT=6e5;et.OpenAIError=Ve;et.APIError=sr;et.APIConnectionError=n0;et.APIConnectionTimeoutError=IA;et.APIUserAbortError=Si;et.NotFoundError=KV;et.ConflictError=YV;et.RateLimitError=XV;et.BadRequestError=FV;et.AuthenticationError=HV;et.InternalServerError=QV;et.PermissionDeniedError=GV;et.UnprocessableEntityError=WV;et.InvalidWebhookSignatureError=Ad;et.toFile=ihe;et.Completions=WU;et.Chat=VA;et.Embeddings=JU;et.Files=ez;et.Images=sz;et.Audio=nm;et.Moderations=lz;et.Models=oz;et.FineTuning=rf;et.Graders=YA;et.VectorStores=f0;et.Webhooks=_z;et.Beta=nf;et.Batches=BU;et.Uploads=XA;et.Responses=u0;et.Realtime=c0;et.Conversations=$A;et.Evals=FA;et.Containers=BA;et.Videos=yz;const Rhe=`
You are CineMind, an expert movie and TV discovery assistant. 
Your goal is to translate natural language user queries into structured JSON search parameters for the TMDB API.

You must output valid JSON.

Supported Search Types:
1. "general": Standard discovery (e.g., "movies with Brad Pitt", "best horror 2022").
2. "episode_ranking": When user explicitly asks for best/top episodes of a specific show (e.g., "best episodes of Breaking Bad").
3. "trending": When user asks what is hot, new, or trending.

Extraction Rules:
- "genres": specific genre IDs (e.g., Action=28, Horror=27, Comedy=35, Drama=18, Sci-Fi=878, Romance=10749, Thriller=53, Animation=16, Documentary=99).
- "year": extract release year if mentioned.
- "sort_by": usually "popularity.desc" or "vote_average.desc".
- "query": If it's a specific title or generic keyword search, put it here.
- "with_people": If an actor/director is named, put their NAME here (string).
- "language": ISO 639-1 code (e.g., 'ko' for Korean, 'es' for Spanish).
- "limit": For rankings, default 10.

Output Schema:
{
  "searchType": "general" | "episode_ranking" | "trending",
  "media_type": "movie" | "tv",
  "genres": [ids],
  "year": number,
  "sort_by": string,
  "query": string,
  "with_people": string,
  "language": string,
  "limit": number,
  "explanation": "A short, friendly sentence explaining what you found."
}
`,Nhe=async(t,e)=>{var n,r;if(!e)throw new Error("OpenAI API Key is missing");try{const l=(r=(n=(await new et({apiKey:e,dangerouslyAllowBrowser:!0}).chat.completions.create({model:"gpt-4o-mini",messages:[{role:"system",content:Rhe},{role:"user",content:t}],response_format:{type:"json_object"},temperature:.7})).choices[0])==null?void 0:n.message)==null?void 0:r.content;if(!l)throw new Error("No response from OpenAI");let u;try{u=JSON.parse(l)}catch(f){throw console.error("Failed to parse OpenAI response:",f),new Error("Invalid JSON response from OpenAI")}if(typeof u!="object"||u===null)throw new Error("Invalid response structure from OpenAI");return(!u.searchType||!["general","episode_ranking","trending"].includes(u.searchType))&&(u.searchType="general"),u}catch(i){return console.error("OpenAI Error:",i),{searchType:"general",query:t,explanation:"I couldn't quite understand the specific filters, so I'm doing a general search."}}};function Phe(t,e){const n=(t||"").toLowerCase();if(["movie","movies","film","films"].includes(n))return"movie";if(["tv","tv_show","tv show","tv series","series","show","shows"].includes(n))return"tv";const r=e.toLowerCase();return/\b(movie|movies|film|films)\b/.test(r)?"movie":/\b(series|tv|show|shows|anime)\b/.test(r)?"tv":null}function Mhe(t,e){const n=t.toLowerCase();return!!(/top\s+\d+/.test(n)||/\b(best|greatest|highest rated|top rated)\b/.test(n)||e!=null&&e.sort_by&&e.sort_by.startsWith("vote_average"))}function khe({tmdbKey:t,geminiKey:e,openaiKey:n,trendingMovies:r,trendingTv:i,rankEpisodesByImdb:s=!1,ratingsCache:l}){const[u,f]=C.useState(""),[h,m]=C.useState([]),[p,v]=C.useState(null),[b,E]=C.useState([]),[w,S]=C.useState(!1),[P,M]=C.useState(!1),[j,$]=C.useState(null);return C.useEffect(()=>{const I=u.trim();if(!t||!I){E([]);return}const R=setTimeout(async()=>{try{M(!0);const N=await A$(t,I,8);E(N)}catch(N){console.error("Autocomplete error:",N)}finally{M(!1)}},300);return()=>clearTimeout(R)},[u,t]),{searchQuery:u,setSearchQuery:f,results:h,explanation:p,suggestions:b,isSearching:w,isSuggestLoading:P,error:j,search:async()=>{var R;const I=u.trim();if(!(!I||!t)){if(!e&&!n){try{S(!0),$(null),v(null),E([]);const N=await MI(t,I);m(N),v("Results based on your title search.")}catch(N){console.error(N),$("Sorry, I had trouble finding that. Try again or add an AI key for smarter search.")}finally{S(!1)}return}S(!0),$(null),v(null),E([]);try{let N;n?N=await Nhe(I,n):N=await Sde(I,e);const z=N.searchType||"general",k=I.match(/top\s+(\d+)/i),B=k?parseInt(k[1],10):void 0;let V=N.limit||B||20;(!V||Number.isNaN(V)||V<=0)&&(V=20),V=Math.min(V,100);let pe=[],be=N.explanation||"Results based on your search.";const G=Mhe(I,N),ne=Phe(N.media_type,I);if(z==="trending")r.length||i.length?pe=[...r,...i].slice(0,V):pe=(await b$(t)).slice(0,V);else if(z==="episode_ranking"&&N.query){const de=N.query;be=`Finding top ranked episodes for "${de}"...`,v(be);const ge=await C$(t,"tv",de);if(!ge)throw new Error("Could not find that TV show.");let Ee=null;if(s&&l)try{const xe=await Il(t,"tv",ge);Ee=((R=xe==null?void 0:xe.external_ids)==null?void 0:R.imdb_id)??null}catch(xe){console.warn("Failed to fetch show IMDb ID for episode ranking",xe)}const X=(await O$(t,ge)).filter(xe=>xe.season_number>0).slice(0,15).map(xe=>gD(t,ge,xe.season_number)),_e=(await Promise.all(X)).flat();let Oe;s&&l&&Ee?Oe=_e.sort((xe,Pe)=>{var je,Ct;const yt=(je=l.getEpisodeCached(Ee,xe.season_number,xe.episode_number))==null?void 0:je.imdbRating,se=(Ct=l.getEpisodeCached(Ee,Pe.season_number,Pe.episode_number))==null?void 0:Ct.imdbRating,ze=yt?parseFloat(yt):NaN,fe=se?parseFloat(se):NaN,le=!isNaN(ze),rt=!isNaN(fe);return le&&rt?fe-ze:le&&!rt?-1:!le&&rt?1:(Pe.vote_average??0)-(xe.vote_average??0)}):Oe=_e.sort((xe,Pe)=>(Pe.vote_average??0)-(xe.vote_average??0)),pe=Oe.slice(0,V).map(xe=>({id:xe.id,name:xe.name,poster_path:null,still_path:xe.still_path,backdrop_path:xe.still_path,overview:xe.overview,vote_average:xe.vote_average,air_date:xe.air_date,media_type:"tv",season_number:xe.season_number,episode_number:xe.episode_number,show_id:ge})),be=`Top ${pe.length} highest-rated episodes of ${de}.`}else{const de={sort_by:N.sort_by||(G?"vote_average.desc":"popularity.desc")};if(N.genres&&N.genres.length>0&&(de.with_genres=N.genres.join(",")),N.year&&(de.primary_release_year=N.year,de.first_air_date_year=N.year),N.with_people){const F=await I$(t,N.with_people);F&&(de.with_people=F)}N.language&&(de.with_original_language=N.language),G&&(de["vote_count.gte"]=N.minVotes||300);const ge=!!de.with_genres||!!de.primary_release_year||!!de.first_air_date_year||!!de.with_people||!!de.with_original_language||G,Ee=(N.query||I).trim();ge&&ne?(pe=await T$(t,ne,de),G&&(pe=[...pe].sort((X,re)=>(re.vote_average||0)-(X.vote_average||0)))):(pe=await MI(t,Ee),G&&(pe=[...pe].sort((X,re)=>(re.vote_average||0)-(X.vote_average||0)))),pe.length>V&&(pe=pe.slice(0,V))}m(pe),v(be)}catch(N){console.error("Search error:",N),$("Sorry, I had trouble understanding that. Try a simpler wording or different filters.")}finally{S(!1)}}},selectSuggestion:I=>{const R=I.title||I.name||"";f(R),m([I]),v(null),E([])}}}const v1="omdb_ratings_cache_v1",Dhe=1e3*60*60*24,jhe=3,Lhe=250;function Vhe({tmdbApiKey:t,omdbApiKey:e,ttlMs:n=Dhe}){const[r,i]=C.useState(()=>{try{const L=localStorage.getItem(v1);return L?JSON.parse(L):{}}catch{return{}}}),s=C.useRef([]),l=C.useRef(new Set),u=C.useRef(0),f=C.useRef(!0),h=C.useRef(new Map);C.useEffect(()=>(f.current=!0,()=>{f.current=!1}),[]),C.useEffect(()=>{if(f.current)try{localStorage.setItem(v1,JSON.stringify(r))}catch(L){console.warn("Could not persist ratings cache",L)}},[r]);function m(L,q){return`${L}:${q}`}function p(L,q,I){return`episode:${L}:S${q}E${I}`}function v(L){l.current.has(L)||(l.current.add(L),s.current.push(L),b())}async function b(){for(;u.current<jhe&&s.current.length>0;){const L=s.current.shift();if(!L)break;l.current.delete(L),u.current++,(async q=>{try{const I=h.current.get(q);I?await I:await new Promise(R=>setTimeout(R,0))}catch(I){console.error("processQueue job error",I)}finally{u.current--,await new Promise(I=>setTimeout(I,Lhe)),f.current&&b()}})(L)}}function E(L,q){const I=m(L,q);return r[I]??null}function w(L,q,I){if(!L)return null;const R=p(L,q,I);return r[R]??null}function S(L,q,I=!1){const R=m(L,q),N=r[R],z=Date.now();if(!I&&N&&z-N.fetchedAt<n)return Promise.resolve(N);const k=h.current.get(R);if(k)return k;const B=(async()=>{var V;try{if(!t){const X={imdbId:null,fetchedAt:Date.now()};return f.current&&i(re=>({...re,[R]:X})),X}const pe=await R$(t,L,q),be=(pe==null?void 0:pe.imdb_id)??null;if(!be||!e){const X={imdbId:be??null,fetchedAt:Date.now()};return f.current&&i(re=>({...re,[R]:X})),X}const G=`https://www.omdbapi.com/?i=${encodeURIComponent(be)}&apikey=${encodeURIComponent(e)}`,ne=await fetch(G);if(!ne.ok){const X={imdbId:be,fetchedAt:Date.now()};return f.current&&i(re=>({...re,[R]:X})),X}const de=await ne.json(),ge=((V=(de.Ratings||[]).find(X=>{var re;return(re=X.Source)==null?void 0:re.toLowerCase().includes("rotten")}))==null?void 0:V.Value)??null,Ee=de.Metascore??null,F={imdbId:be,imdbRating:de.imdbRating??null,imdbVotes:de.imdbVotes??null,metascore:Ee,rottenTomatoes:ge,fetchedAt:Date.now()};return f.current&&i(X=>({...X,[R]:F})),F}catch(pe){return console.error("refresh rating failed",pe),null}finally{h.current.delete(R)}})();return h.current.set(R,B),v(R),B}function P(L,q,I,R=!1){if(!L||!e)return Promise.resolve(null);const N=p(L,q,I),z=r[N],k=Date.now();if(!R&&z&&k-z.fetchedAt<n)return Promise.resolve(z);const B=h.current.get(N);if(B)return B;const V=(async()=>{var pe;try{const be=`https://www.omdbapi.com/?i=${encodeURIComponent(L)}&Season=${encodeURIComponent(String(q))}&Episode=${encodeURIComponent(String(I))}&apikey=${encodeURIComponent(e)}`,G=await fetch(be);if(!G.ok){const F={imdbId:L,fetchedAt:Date.now()};return f.current&&i(X=>({...X,[N]:F})),F}const ne=await G.json();if(ne!=null&&ne.Error){const F={imdbId:L,fetchedAt:Date.now()};return f.current&&i(X=>({...X,[N]:F})),F}const de=((pe=(ne.Ratings||[]).find(F=>{var X;return(X=F.Source)==null?void 0:X.toLowerCase().includes("rotten")}))==null?void 0:pe.Value)??null,ge=ne.Metascore??null,Ee={imdbId:L,imdbRating:ne.imdbRating??null,imdbVotes:ne.imdbVotes??null,metascore:ge,rottenTomatoes:de,fetchedAt:Date.now()};return f.current&&i(F=>({...F,[N]:Ee})),Ee}catch(be){return console.error("refreshEpisode failed",be),null}finally{h.current.delete(N)}})();return h.current.set(N,V),v(N),V}function M(L,q=10){const I=Date.now();let R=0;for(const N of L){if(R>=q)break;const z=m(N.media_type,N.id),k=r[z];(!k||I-k.fetchedAt>=n)&&(S(N.media_type,N.id,!0).catch(B=>console.error("ensureForList refresh failed",B)),R++)}}function j(){f.current&&i({});try{localStorage.removeItem(v1)}catch{}}function $(L){i(()=>({...L||{}}))}return{getCached:E,refresh:S,getEpisodeCached:w,refreshEpisode:P,ensureForList:M,clearCache:j,rawMap:r,importMap:$}}async function Uhe(t){if(!t)return null;const e=e0(t0,"userCaches",t),n=await kV(e);return n.exists()&&(n.data()||{}).ratingsMap||null}async function oD(t,e){if(!t)throw new Error("No uid");const n=e0(t0,"userCaches",t);await DV(n,{ratingsMap:e,lastSyncedAt:Date.now()},{merge:!0})}function zhe(t,e){if(!e)return{...t};const n={...t||{}};for(const r of Object.keys(e)){const i=e[r],s=n[r];s?(i.fetchedAt||0)>(s.fetchedAt||0)&&(n[r]=i):n[r]=i}return n}const Bhe=1200,$he=2200;function qhe({user:t,ratingsCache:e,enabled:n}){const r=C.useRef(null);return C.useEffect(()=>{if(!(t!=null&&t.uid)||!e||!n)return;let i=!1;return(async()=>{var s;try{const l=await Uhe(t.uid);if(i)return;const u=e.rawMap||{},f=zhe(u,l);(s=e.importMap)==null||s.call(e,f),setTimeout(()=>{oD(t.uid,f).catch(console.error)},Bhe)}catch(l){console.error("Cloud sync download/merge failed",l)}})(),()=>{i=!0}},[t==null?void 0:t.uid,e,n]),C.useEffect(()=>{if(!(t!=null&&t.uid)||!e||!n)return;const i=async()=>{try{const s=e.rawMap||{};await oD(t.uid,s)}catch(s){console.error("Cloud sync upload failed",s)}};return r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{i(),r.current=null},$he),()=>{r.current&&(clearTimeout(r.current),r.current=null)}},[t==null?void 0:t.uid,e==null?void 0:e.rawMap,e,n]),{}}const Fhe=()=>{const{user:t,logout:e}=LV(),{tmdbKey:n,geminiKey:r,openaiKey:i,omdbKey:s,useOmdbRatings:l,showEpisodeImdbOnCards:u,showEpisodeImdbOnSeasonList:f,saveKeys:h,updateKeysFromCloud:m}=qfe(),[p,v]=C.useState({view:"trending",selectedItem:null,selectedPerson:null,selectedEpisode:null,isLoading:!1,error:null,favorites:JSON.parse(localStorage.getItem("favorites")||"[]"),watchlist:JSON.parse(localStorage.getItem("watchlist")||"[]"),aiExplanation:null,userRatings:JSON.parse(localStorage.getItem("userRatings")||"{}")}),[b,E]=C.useState(!1),w=C.useRef(null);C.useEffect(()=>{const ce=Ie=>{if(!w.current)return;const Re=Ie.target;Re&&(w.current.contains(Re)||E(!1))};return document.addEventListener("mousedown",ce),document.addEventListener("touchstart",ce),()=>{document.removeEventListener("mousedown",ce),document.removeEventListener("touchstart",ce)}},[]);const{syncing:S}=Bfe({user:t,state:p,setState:v,tmdbKey:n,geminiKey:r,openaiKey:i,omdbKey:s,useOmdbRatings:l,showEpisodeImdbOnCards:u,showEpisodeImdbOnSeasonList:f,updateKeysFromCloud:m}),{toggleFavorite:P,toggleWatchlist:M,rateItem:j}=Ffe({favorites:p.favorites,watchlist:p.watchlist,userRatings:p.userRatings,setState:v}),[$,L]=C.useState(!n),[q,I]=C.useState(!1),[R,N]=C.useState("favorites"),[z,k]=C.useState("all"),[B,V]=C.useState(()=>localStorage.getItem("enableCloudSync")==="true"),[pe,be]=C.useState(()=>localStorage.getItem("rankEpisodesByImdb")==="true"),{trendingMovies:G,trendingTv:ne,inTheaters:de,streamingNow:ge}=Hfe(n),Ee=Vhe({tmdbApiKey:n,omdbApiKey:l?s:"",ttlMs:1e3*60*60*24});qhe({user:t,ratingsCache:Ee,enabled:!!B}),C.useEffect(()=>{if(!n||!l||!s)return;const ce=[...G,...ne,...de,...ge].filter(Ie=>Ie&&(Ie.media_type==="movie"||Ie.media_type==="tv"));ce.length>0&&Ee.ensureForList(ce,20)},[G,ne,de,ge,n,s,l,Ee]);const{searchQuery:F,setSearchQuery:X,results:re,explanation:_e,suggestions:Oe,isSearching:xe,isSuggestLoading:Pe,error:yt,search:se,selectSuggestion:ze}=khe({tmdbKey:n,geminiKey:r,openaiKey:i,trendingMovies:G,trendingTv:ne,rankEpisodesByImdb:pe,ratingsCache:Ee});C.useEffect(()=>{if(!n||!l||!s||!re||re.length===0)return;const ce=re.filter(Ie=>Ie&&(Ie.media_type==="movie"||Ie.media_type==="tv"));ce.length>0&&Ee.ensureForList(ce,20)},[re,n,s,l,Ee]);const[fe,le]=C.useState({});async function rt(ce){var Ie;try{const Re=await Il(n,"tv",ce);return((Ie=Re==null?void 0:Re.external_ids)==null?void 0:Ie.imdb_id)??null}catch(Re){return console.warn("fetchShowImdb failed for",ce,Re),null}}C.useEffect(()=>{if(!n||!re||re.length===0||!Ee)return;const ce=new Set;if(re.forEach(Ke=>{if(!!!Ke.episode_number)return;const ht=Ke.show_id??Ke.tv_id??null;ht&&!(ht in fe)&&ce.add(ht)}),ce.size===0)return;const Ie=Array.from(ce);let Re=!1;return(async()=>{let $e=0;const ht=[],tn=async()=>{for(;!Re&&$e<Ie.length;){const ut=Ie[$e++];try{const wt=await rt(ut);if(Re)return;le(qt=>qt[ut]!==void 0?qt:{...qt,[ut]:wt}),wt&&typeof Ee.refreshEpisode=="function"&&re.forEach(qt=>{const Sn=!!qt.episode_number,Ar=qt.show_id??qt.tv_id??null;if(Sn&&Ar===ut){const Yt=qt.season_number,cc=qt.episode_number;Ee.refreshEpisode(wt,Yt,cc,!1).catch(()=>{})}})}catch(wt){console.warn("error fetching show imdb for id",ut,wt)}}};for(let ut=0;ut<6;ut++)ht.push(tn());await Promise.all(ht)})(),()=>{Re=!0}},[re,n,Ee,fe]);const je=C.useCallback((ce,Ie=!1)=>{try{const Re=(()=>{if(!ce)return"/";switch(ce.type){case"detail":return`/detail/${ce.mediaType||ce.media_type}/${ce.id}`;case"episode":return`/episode/${ce.showId}/s${ce.season}e${ce.episode}`;case"person":return`/person/${ce.id}`;case"settings":return"/settings";case"auth":return`/auth/${ce.mode||"signin"}`;case"library":return"/library";case"home":default:return"/"}})();Ie?history.replaceState(ce,"",Re):history.pushState(ce,"",Re)}catch(Re){console.warn("pushAppState failed",Re)}},[]);C.useEffect(()=>{je({type:"home"},!0);const ce=Ie=>{const Re=Ie.state??{type:"home"};if(Re.type==="home"||!Re.type){v(Ke=>({...Ke,view:"trending",selectedItem:null,selectedPerson:null,selectedEpisode:null,error:null})),L(!1),I(!1);return}if(Re.type==="detail"){(async()=>{try{const Ke=await Il(n,Re.mediaType||"movie",Re.id);v($e=>({...$e,selectedItem:Ke,selectedEpisode:null,selectedPerson:null}))}catch(Ke){console.error("Failed fetching details on popstate",Ke),v($e=>({...$e,error:"Could not load details."}))}})(),L(!1),I(!1);return}if(Re.type==="episode"){(async()=>{try{const Ke=await pb(n,Re.showId,Re.season,Re.episode);Ke.show_id=Re.showId,v($e=>({...$e,selectedEpisode:Ke,selectedItem:null,selectedPerson:null}))}catch(Ke){console.error("Failed fetching episode on popstate",Ke),v($e=>({...$e,error:"Could not load episode details."}))}})(),L(!1),I(!1);return}if(Re.type==="settings"){L(!0),I(!1),v(Ke=>({...Ke,selectedItem:null,selectedEpisode:null,selectedPerson:null}));return}if(Re.type==="auth"){I(!0),L(!1),v(Ke=>({...Ke,selectedItem:null,selectedEpisode:null,selectedPerson:null}));return}if(Re.type==="library"){v(Ke=>({...Ke,view:"library",selectedItem:null,selectedEpisode:null,selectedPerson:null})),L(!1),I(!1);return}if(Re.type==="person"){(async()=>{try{const Ke=await kI(n,Re.id);v($e=>({...$e,selectedPerson:Ke,selectedItem:null,selectedEpisode:null}))}catch(Ke){console.error("Failed fetching person on popstate",Ke),v($e=>({...$e,error:"Could not load person details."}))}})(),L(!1),I(!1);return}};return window.addEventListener("popstate",ce),()=>{window.removeEventListener("popstate",ce)}},[je,n]),C.useEffect(()=>{localStorage.setItem("favorites",JSON.stringify(p.favorites)),localStorage.setItem("watchlist",JSON.stringify(p.watchlist)),localStorage.setItem("userRatings",JSON.stringify(p.userRatings))},[p.favorites,p.watchlist,p.userRatings]);const Ct=()=>{v(ce=>({...ce,view:"trending",selectedItem:null,selectedPerson:null,selectedEpisode:null,aiExplanation:"Here's what's hot right now across movies, series, in theatres and streaming.",error:null})),E(!1),je({type:"home"})},Dt=async ce=>{ce.preventDefault(),v(Ie=>({...Ie,isLoading:!0,error:null})),await se(),v(Ie=>({...Ie,view:"search",isLoading:!1,aiExplanation:_e,error:yt})),E(!1)},Lt=async ce=>{var Ie,Re,Ke;if(ce.season_number&&ce.episode_number){if(!n)return;v($e=>({...$e,isLoading:!0}));try{const $e=ce.show_id||ce.tv_id;if(!$e){v(ut=>({...ut,isLoading:!1})),alert(`${ce.name}
Season ${ce.season_number}, Episode ${ce.episode_number}
Rating: ${((Ie=ce.vote_average)==null?void 0:Ie.toFixed(1))||"N/A"}`);return}const[ht,tn]=await Promise.all([pb(n,$e,ce.season_number,ce.episode_number),Il(n,"tv",$e)]);ht.show_name=tn.name||tn.title||"",ht.show_imdb_id=((Re=tn.external_ids)==null?void 0:Re.imdb_id)??null,ht.show_tvdb_id=((Ke=tn.external_ids)==null?void 0:Ke.tvdb_id)??null,ht.show_id=$e,v(ut=>({...ut,selectedEpisode:ht,selectedItem:null,selectedPerson:null,isLoading:!1})),je({type:"episode",showId:$e,season:ce.season_number,episode:ce.episode_number})}catch($e){console.error($e),v(ht=>({...ht,isLoading:!1,error:"Could not load episode details."}))}return}if(n){v($e=>({...$e,isLoading:!0}));try{const $e=await Il(n,ce.media_type,ce.id);v(ht=>({...ht,selectedItem:$e,selectedEpisode:null,isLoading:!1,selectedPerson:null})),je({type:"detail",mediaType:ce.media_type||$e.media_type||"movie",id:$e.id})}catch{v(ht=>({...ht,isLoading:!1,error:"Could not load details."}))}}},Zi=async(ce,Ie,Re)=>{var Ke,$e,ht,tn;if(n){v(ut=>({...ut,isLoading:!0}));try{const ut=await pb(n,ce,Ie,Re);if(p.selectedItem){const wt=p.selectedItem;ut.show_name=wt.title||wt.name||"",ut.show_imdb_id=((Ke=wt.external_ids)==null?void 0:Ke.imdb_id)??null,ut.show_tvdb_id=(($e=wt.external_ids)==null?void 0:$e.tvdb_id)??null,ut.show_id=wt.id??void 0}else{const wt=await Il(n,"tv",ce);ut.show_name=wt.name||wt.title||"",ut.show_imdb_id=((ht=wt.external_ids)==null?void 0:ht.imdb_id)??null,ut.show_tvdb_id=((tn=wt.external_ids)==null?void 0:tn.tvdb_id)??null}v(wt=>({...wt,selectedEpisode:ut,isLoading:!1})),je({type:"episode",showId:ce,season:Ie,episode:Re})}catch(ut){console.error(ut),v(wt=>({...wt,isLoading:!1,error:"Could not load episode details."}))}}},Qt=async ce=>{v(Ie=>({...Ie,isLoading:!0,selectedItem:null}));try{const Ie=await kI(n,ce);v(Re=>({...Re,selectedPerson:Ie,isLoading:!1})),je({type:"person",id:ce})}catch{v(Re=>({...Re,isLoading:!1,error:"Could not load person details."}))}},en=async()=>{try{await e()}catch(ce){console.error("Logout error:",ce)}},ea=ce=>{ze(ce),v(Ie=>({...Ie,view:"search",aiExplanation:null,error:null})),E(!1)},lc=(ce,Ie=!1)=>A.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-6",children:ce.map((Re,Ke)=>{const $e=!!Re.episode_number;let ht=Re;if($e){const tn=Re.show_id??Re.tv_id??null,ut=Re.show_imdb_id??null,qt=(tn?fe[tn]??null:null)??ut;(qt||tn)&&(ht={...Re,show_imdb_id:qt,show_id:tn})}return A.jsx(rE,{item:ht,onClick:Lt,rank:Ie?Ke+1:void 0,ratingsCache:Ee,useOmdbRatings:l,showEpisodeImdbOnCards:u},`${ht.id}-${ht.episode_number||0}`)})}),Wo=()=>{const ce=R==="favorites"?p.favorites:p.watchlist;return z==="all"?ce:z==="animation"?ce.filter(Ie=>{var Re;return(Re=Ie.genre_ids)==null?void 0:Re.includes(16)}):ce.filter(Ie=>Ie.media_type===z)};return A.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#020617] via-[#0f172a] to-[#020617] text-slate-200 font-sans pb-24 selection:bg-cyan-500/30 selection:text-cyan-100",children:[A.jsx("header",{className:"sticky top-0 z-40 bg-gradient-to-r from-[#020617]/90 via-[#0f172a]/90 to-[#020617]/90 backdrop-blur-xl border-b border-white/5 shadow-lg shadow-black/20",children:A.jsxs("div",{className:"max-w-7xl mx-auto px-4 h-20 flex items-center justify-between gap-6",children:[A.jsxs("div",{className:"flex items-center gap-3 cursor-pointer group",onClick:Ct,children:[A.jsx("div",{className:"bg-gradient-to-br from-cyan-500 to-blue-600 p-2.5 rounded-xl shadow-lg shadow-cyan-500/20 group-hover:shadow-cyan-500/40 group-hover:scale-110 transition-all duration-300",children:A.jsx(_1,{className:"text-white fill-white",size:20})}),A.jsx("span",{className:"text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-white via-cyan-200 to-slate-400 hidden md:block",children:"CineMind"})]}),A.jsx("div",{ref:w,className:"flex-1 max-w-2xl relative group",children:A.jsxs("form",{onSubmit:Dt,className:"relative",children:[A.jsx("div",{className:"absolute inset-y-0 left-4 flex items-center pointer-events-none",children:A.jsx(ig,{className:`w-5 h-5 transition-colors ${xe?"animate-pulse text-cyan-400":"text-slate-500 group-focus-within:text-cyan-400"}`})}),A.jsx("input",{type:"text",value:F,onChange:ce=>{const Ie=ce.target.value;X(Ie),Ie.trim()?E(!0):E(!1)},placeholder:"Search titles or ask things like 'Top 20 sci-fi movies like Interstellar'",className:"w-full bg-gradient-to-br from-slate-900/50 to-slate-800/30 border border-white/10 rounded-2xl py-3.5 pl-12 pr-4 text-slate-200 placeholder:text-slate-600 focus:border-cyan-500/50 focus:bg-slate-900 focus:ring-2 focus:ring-cyan-500/30 outline-none transition-all duration-300 shadow-inner hover:border-white/20"}),xe&&A.jsx("div",{className:"absolute inset-y-0 right-4 flex items-center",children:A.jsx(Ro,{className:"animate-spin text-cyan-500",size:20})}),b&&Oe.length>0&&F.trim()&&A.jsxs("div",{className:"absolute mt-2 left-0 right-0 bg-slate-900 border border-slate-700 rounded-2xl shadow-2xl z-50 max-h-80 overflow-y-auto",children:[Oe.map((ce,Ie)=>{const Re=ce.title||ce.name,Ke=ce.release_date||ce.first_air_date||"",$e=Ke?new Date(Ke).getFullYear():"";return A.jsxs("button",{type:"button",onClick:()=>ea(ce),className:"w-full flex items-center justify-between px-3 py-2 text-sm hover:bg-slate-800 border-b border-slate-800/60 last:border-b-0",children:[A.jsxs("div",{className:"flex flex-col items-start",children:[A.jsx("span",{className:"text-slate-100",children:Re}),A.jsxs("span",{className:"text-xs text-slate-500",children:[(ce.media_type||"").toUpperCase()," ",$e&&` ${$e}`]})]}),typeof ce.vote_average=="number"&&A.jsxs("span",{className:"text-xs text-amber-300 flex items-center gap-1",children:[A.jsx(bn,{size:12}),ce.vote_average.toFixed(1)]})]},`${ce.id}-${Ie}`)}),Pe&&A.jsxs("div",{className:"px-3 py-2 text-xs text-slate-400 flex items-center gap-2",children:[A.jsx(Ro,{size:14,className:"animate-spin"}),"Updating suggestions"]})]})]})}),A.jsxs("div",{className:"flex items-center gap-3",children:[S&&t&&A.jsxs("div",{className:"flex items-center gap-1 text-xs text-cyan-300",children:[A.jsx(Ro,{size:14,className:"animate-spin"}),A.jsx("span",{children:"Syncing"})]}),t?A.jsxs("button",{onClick:en,className:"flex items-center gap-2 px-3 py-2 text-xs md:text-sm rounded-xl bg-slate-900/60 border border-white/10 hover:border-red-400/60 hover:bg-red-500/10 transition-all duration-300 hover:scale-105",children:[t.photoURL?A.jsx("img",{src:t.photoURL,alt:t.displayName||"User",className:"w-6 h-6 rounded-full ring-2 ring-white/10"}):A.jsx(IB,{size:18}),A.jsx("span",{className:"hidden md:inline max-w-[120px] truncate",children:t.displayName||t.email}),A.jsx(WB,{size:16,className:"hidden md:inline"})]}):A.jsxs("button",{onClick:()=>{I(!0),je({type:"auth",mode:"signin"})},className:"flex items-center gap-2 px-3 py-2 text-xs md:text-sm rounded-xl bg-gradient-to-r from-slate-900/60 to-slate-800/60 border border-white/10 hover:border-cyan-400/60 hover:bg-cyan-500/10 transition-all duration-300 hover:scale-105 hover:shadow-lg hover:shadow-cyan-500/20",children:[A.jsx(pD,{size:16}),A.jsx("span",{className:"hidden md:inline",children:"Sign in"})]}),A.jsx("button",{onClick:()=>{L(!0),je({type:"settings"})},className:"p-3 text-slate-400 hover:text-white hover:bg-white/5 rounded-xl transition-all duration-300 border border-transparent hover:border-white/5 hover:scale-110 hover:rotate-90",children:A.jsx(l$,{size:22})})]})]})}),A.jsxs("main",{className:"max-w-7xl mx-auto px-4 py-10",children:[p.aiExplanation&&!xe&&p.view==="search"&&A.jsxs("div",{className:"mb-10 bg-gradient-to-r from-cyan-950/30 to-blue-950/30 border border-cyan-500/20 p-5 rounded-2xl flex items-start gap-4 animate-in fade-in slide-in-from-top-4 duration-500 transition-all",children:[A.jsx("div",{className:"p-2 bg-cyan-500/10 rounded-lg",children:A.jsx(ig,{className:"text-cyan-400 shrink-0",size:20})}),A.jsxs("div",{children:[A.jsx("h3",{className:"text-cyan-200 font-bold text-sm uppercase tracking-wider mb-1",children:"AI Analysis"}),A.jsx("p",{className:"text-slate-300 leading-relaxed",children:p.aiExplanation})]})]}),p.error&&A.jsxs("div",{className:"mb-8 bg-red-950/20 border border-red-500/30 p-4 rounded-2xl text-red-200 text-center flex flex-col items-center gap-2",children:[A.jsx(Ro,{className:"animate-spin text-red-400",size:24}),p.error]}),p.view==="library"?A.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[A.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6",children:[A.jsxs("h2",{className:"text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-white to-slate-400 flex items-center gap-3",children:[A.jsx(NI,{className:"text-cyan-500"})," My Library"]}),A.jsxs("div",{className:"bg-slate-900/50 p-1.5 rounded-xl flex gap-1 border border-white/5 backdrop-blur-md",children:[A.jsxs("button",{onClick:()=>N("favorites"),className:`px-6 py-2.5 rounded-lg text-sm font-bold flex items-center gap-2 transition-all duration-300 ${R==="favorites"?"bg-gradient-to-r from-slate-800 to-slate-700 text-white shadow-lg ring-1 ring-white/10 scale-105":"text-slate-400 hover:text-white hover:bg-white/5 hover:scale-105"}`,children:[A.jsx(hD,{size:16,className:R==="favorites"?"text-pink-500 fill-pink-500":""})," Favorites"]}),A.jsxs("button",{onClick:()=>N("watchlist"),className:`px-6 py-2.5 rounded-lg text-sm font-bold flex items-center gap-2 transition-all duration-300 ${R==="watchlist"?"bg-gradient-to-r from-slate-800 to-slate-700 text-white shadow-lg ring-1 ring-white/10 scale-105":"text-slate-400 hover:text-white hover:bg-white/5 hover:scale-105"}`,children:[A.jsx(HB,{size:16,className:R==="watchlist"?"text-emerald-500":""})," Watchlist"]})]})]}),A.jsx("div",{className:"flex gap-3 overflow-x-auto pb-4 scrollbar-hide",children:[{id:"all",label:"All",icon:null},{id:"movie",label:"Movies",icon:nE},{id:"tv",label:"Series",icon:Jy},{id:"animation",label:"Animation",icon:CB}].map(ce=>A.jsxs("button",{onClick:()=>k(ce.id),className:`px-5 py-2.5 rounded-full text-sm font-bold border transition-all duration-300 flex items-center gap-2 whitespace-nowrap transform hover:-translate-y-1 hover:scale-105 ${z===ce.id?"bg-gradient-to-r from-cyan-600 to-blue-600 border-cyan-500 text-white shadow-lg shadow-cyan-900/40":"bg-slate-900 border-slate-700 text-slate-400 hover:border-slate-500 hover:bg-slate-800 hover:text-slate-200"}`,children:[ce.icon&&A.jsx(ce.icon,{size:16})," ",ce.label]},ce.id))}),A.jsx("div",{className:"min-h-[300px]",children:Wo().length>0?lc(Wo(),!1):A.jsxs("div",{className:"flex flex-col items-center justify-center h-80 text-slate-500 border-2 border-dashed border-slate-800/50 rounded-3xl bg-slate-900/20",children:[A.jsx(_1,{size:48,className:"mb-4 text-slate-700"}),A.jsxs("p",{className:"text-lg font-medium",children:["No items found in ",R," (",z,")."]}),A.jsx("p",{className:"text-sm",children:"Go explore and add some!"})]})})]}):p.view==="trending"?A.jsxs("div",{className:"space-y-10 animate-in fade-in duration-500",children:[A.jsx(Fp,{title:"Trending Movies",items:G,onItemClick:Lt,accentColor:"cyan",emptyMessage:"No trending movies available right now.",ratingsCache:Ee,useOmdbRatings:l}),A.jsx(Fp,{title:"Trending Series",items:ne,onItemClick:Lt,accentColor:"fuchsia",emptyMessage:"No trending series available right now.",ratingsCache:Ee,useOmdbRatings:l}),A.jsx(Fp,{title:"In Theatres Now",items:de,onItemClick:Lt,accentColor:"emerald",emptyMessage:'No "Now Playing" movies available for your region.',ratingsCache:Ee,useOmdbRatings:l}),A.jsx(Fp,{title:"Streaming Now on TV",items:ge,onItemClick:Lt,accentColor:"indigo",emptyMessage:'No "On The Air" TV data available right now.',ratingsCache:Ee,useOmdbRatings:l})]}):A.jsxs("div",{className:"animate-in fade-in duration-500",children:[A.jsxs("h2",{className:"text-3xl font-bold text-white mb-8 capitalize flex items-center gap-3",children:[A.jsx("span",{className:"w-2 h-8 bg-cyan-500 rounded-full"}),"Search Results"]}),re.length>0?lc(re,!0):!xe&&A.jsxs("div",{className:"flex flex-col items-center justify-center py-32 text-slate-500",children:[A.jsx(ig,{size:64,className:"mb-6 text-slate-800"}),A.jsx("p",{className:"text-xl font-light",children:"Start by typing what you feel like watching above."})]})]})]}),A.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-gradient-to-t from-[#020617] via-[#020617]/95 to-[#020617]/90 backdrop-blur-xl border-t border-white/5 z-40 pb-safe shadow-2xl shadow-black/40",children:A.jsxs("div",{className:"flex justify-around p-4",children:[A.jsxs("button",{onClick:Ct,className:`flex flex-col items-center gap-1.5 transition-all duration-300 hover:scale-110 ${p.view==="trending"?"text-cyan-400 drop-shadow-[0_0_8px_rgba(34,211,238,0.5)]":"text-slate-500 hover:text-slate-300"}`,children:[A.jsx(BB,{size:24,strokeWidth:p.view==="trending"?2.5:2}),A.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wide",children:"Home"})]}),A.jsxs("button",{onClick:()=>{v(ce=>({...ce,view:"library"})),je({type:"library"})},className:`flex flex-col items-center gap-1.5 transition-all duration-300 hover:scale-110 ${p.view==="library"?"text-cyan-400 drop-shadow-[0_0_8px_rgba(34,211,238,0.5)]":"text-slate-500 hover:text-slate-300"}`,children:[A.jsx(NI,{size:24,strokeWidth:p.view==="library"?2.5:2}),A.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wide",children:"My List"})]})]})}),p.selectedItem&&A.jsx(nie,{item:p.selectedItem,onClose:()=>{v(ce=>({...ce,selectedItem:null})),history.back()},apiKey:n,onToggleFavorite:P,onToggleWatchlist:M,isFavorite:p.favorites.some(ce=>{var Ie;return ce.id===((Ie=p.selectedItem)==null?void 0:Ie.id)}),isWatchlist:p.watchlist.some(ce=>{var Ie;return ce.id===((Ie=p.selectedItem)==null?void 0:Ie.id)}),onCastClick:Qt,onEpisodeClick:Zi,userRatings:p.userRatings,onRate:j,ratingsCache:Ee,useOmdbRatings:l,showEpisodeImdbOnSeasonList:f}),p.selectedPerson&&A.jsx(rie,{person:p.selectedPerson,onClose:()=>{v(ce=>({...ce,selectedPerson:null})),history.back()},onMediaClick:Lt}),p.selectedEpisode&&A.jsx(iie,{episode:p.selectedEpisode,showTitle:p.selectedEpisode.show_name,onClose:()=>{v(ce=>({...ce,selectedEpisode:null})),history.back()},onRate:j,userRating:p.userRatings[String(p.selectedEpisode.id)],ratingsCache:Ee,useOmdbRatings:l,showEpisodeImdbOnSeasonList:f}),A.jsx(aie,{isOpen:$,onClose:()=>{L(!1),history.back()},currentKey:n,currentGeminiKey:r,currentOpenAIKey:i,currentOmdbKey:s,useOmdbRatings:l,currentShowEpisodeImdbOnCards:!!u,currentShowEpisodeImdbOnSeasonList:!!f,currentCloudSync:B,currentRankEpisodesByImdb:pe,onSave:async(ce,Ie,Re,Ke,$e,ht,tn,ut,wt)=>{h(ce,Ie,Re,Ke,$e,ht,tn),V(!!ut),localStorage.setItem("enableCloudSync",ut?"true":"false"),be(!!wt),localStorage.setItem("rankEpisodesByImdb",wt?"true":"false")}}),A.jsx(zfe,{isOpen:q,onClose:()=>{I(!1),history.back()}})]})},wz=document.getElementById("root");if(!wz)throw new Error("Could not find root element to mount to");const Hhe=fB.createRoot(wz);Hhe.render(A.jsx(lD.StrictMode,{children:A.jsx(Fhe,{})}));"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").then(()=>console.log("SW registered")).catch(t=>console.error("SW registration failed",t));
